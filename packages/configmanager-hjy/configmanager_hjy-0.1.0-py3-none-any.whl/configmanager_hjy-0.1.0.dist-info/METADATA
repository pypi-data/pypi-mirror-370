Metadata-Version: 2.4
Name: configmanager-hjy
Version: 0.1.0
Summary: ç»Ÿä¸€é…ç½®ç®¡ç†åŒ… - ä¸ºæ‰€æœ‰ _hjy åŒ…æä¾›äº‘åŸç”Ÿé…ç½®ç®¡ç†æœåŠ¡
Author-email: hjy <hjy@example.com>
Maintainer-email: hjy <hjy@example.com>
License: MIT
Project-URL: Homepage, https://github.com/hjy/configmanager_hjy
Project-URL: Documentation, https://github.com/hjy/configmanager_hjy#readme
Project-URL: Repository, https://github.com/hjy/configmanager_hjy.git
Project-URL: Bug Tracker, https://github.com/hjy/configmanager_hjy/issues
Keywords: configuration,management,cloud-native,redis,mysql,oss
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: System :: Systems Administration
Classifier: Topic :: Utilities
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pydantic>=2.0.0
Requires-Dist: pydantic-settings>=2.2.0
Requires-Dist: redis>=4.0.0
Requires-Dist: mysql-connector-python>=8.3.0
Requires-Dist: oss2>=2.18.0
Requires-Dist: cryptography>=41.0.0
Requires-Dist: loguru>=0.7.0
Requires-Dist: python-dotenv>=1.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: isort>=5.12.0; extra == "dev"
Requires-Dist: flake8>=6.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Requires-Dist: pre-commit>=3.0.0; extra == "dev"
Dynamic: license-file

# configmanager_hjy

ä¸€ä¸ªç»Ÿä¸€ã€é«˜æ•ˆã€å¯é çš„Pythoné…ç½®ç®¡ç†åŒ…ï¼Œæ”¯æŒå¤šç§å­˜å‚¨åç«¯å’ŒéªŒè¯æœºåˆ¶ã€‚

[![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Tests](https://img.shields.io/badge/tests-passing-brightgreen.svg)](tests/)

## ğŸš€ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ç»Ÿä¸€é…ç½®ç®¡ç†**: æä¾›ç®€æ´çš„APIè¿›è¡Œé…ç½®çš„è·å–ã€è®¾ç½®ã€æ›´æ–°å’Œåˆ é™¤
- **å¤šå­˜å‚¨åç«¯**: æ”¯æŒæ•°æ®åº“ã€Redisã€OSSç­‰å¤šç§å­˜å‚¨æ–¹å¼
- **æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ**: å†…å­˜ç¼“å­˜ + Redisç¼“å­˜ï¼Œæ”¯æŒ5ç§ç¼“å­˜ç­–ç•¥
- **é…ç½®éªŒè¯**: æ¨¡å¼éªŒè¯ã€ç±»å‹éªŒè¯ã€å€¼éªŒè¯ä¸‰é‡ä¿éšœ
- **å®æ—¶ç›‘å¬**: é…ç½®å˜æ›´å®æ—¶é€šçŸ¥æœºåˆ¶
- **ç‰ˆæœ¬ç®¡ç†**: é…ç½®ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»šåŠŸèƒ½

### ç¼“å­˜ç­–ç•¥
- **MEMORY_ONLY**: ä»…ä½¿ç”¨å†…å­˜ç¼“å­˜ï¼Œæ€§èƒ½æœ€é«˜
- **REDIS_ONLY**: ä»…ä½¿ç”¨Redisç¼“å­˜ï¼Œæ”¯æŒåˆ†å¸ƒå¼
- **MEMORY_FIRST**: å†…å­˜ä¼˜å…ˆï¼ŒRedisä½œä¸ºå¤‡ä»½
- **REDIS_FIRST**: Redisä¼˜å…ˆï¼Œå†…å­˜ä½œä¸ºæœ¬åœ°ç¼“å­˜
- **LAYERED**: åˆ†å±‚ç¼“å­˜ï¼Œæ™ºèƒ½æ•°æ®åŒæ­¥

### æ¶æ„ç‰¹ç‚¹
- **é«˜å†…èšä½è€¦åˆ**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **äº‘åŸç”Ÿ**: æ”¯æŒäº‘æœåŠ¡ï¼Œå…·å¤‡æ•…éšœæ¢å¤èƒ½åŠ›
- **é«˜æ€§èƒ½**: å†…å­˜ç¼“å­˜æ€§èƒ½ä¼˜å¼‚ï¼Œäº‘Redisæ€§èƒ½ç¬¦åˆé¢„æœŸ
- **é«˜å¯é **: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œå¥åº·æ£€æŸ¥æœºåˆ¶

## ğŸ“¦ å®‰è£…

### ä»æºç å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-username/configmanager_hjy.git
cd configmanager_hjy

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…åŒ…
pip install -e .
```

### ä»PyPIå®‰è£…ï¼ˆå³å°†å‘å¸ƒï¼‰

```bash
pip install configmanager_hjy
```

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨

```python
from configmanager_hjy import ConfigManager

# åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨
config = ConfigManager({
    'redis': {
        'host': 'localhost',
        'port': 6379,
        'db': 0
    },
    'memory': {
        'max_size': 1000,
        'default_ttl': 300
    }
})

# è®¾ç½®é…ç½®
config.set('app.name', 'MyApp')
config.set('app.version', '1.0.0')
config.set('database.url', 'mysql://localhost:3306/mydb')

# è·å–é…ç½®
app_name = config.get('app.name')
version = config.get_int('app.version')
db_url = config.get('database.url')

print(f"åº”ç”¨åç§°: {app_name}")
print(f"ç‰ˆæœ¬: {version}")
print(f"æ•°æ®åº“URL: {db_url}")
```

### ç¼“å­˜ç®¡ç†

```python
from configmanager_hjy.cache import CacheManager, CacheStrategy

# åˆ›å»ºç¼“å­˜ç®¡ç†å™¨
cache_manager = CacheManager(
    redis_config={
        'host': 'localhost',
        'port': 6379,
        'db': 0
    },
    memory_config={
        'max_size': 1000,
        'default_ttl': 300
    },
    strategy=CacheStrategy.REDIS_FIRST
)

# ç¼“å­˜æ“ä½œ
cache_manager.set('user:123', {'name': 'John', 'age': 30}, ttl=3600)
user_data = cache_manager.get('user:123')
cache_manager.delete('user:123')

# å¥åº·æ£€æŸ¥
health = cache_manager.health_check()
print(f"å†…å­˜ç¼“å­˜çŠ¶æ€: {health['memory']['status']}")
print(f"Redisç¼“å­˜çŠ¶æ€: {health['redis']['status']}")
```

### é…ç½®éªŒè¯

```python
from configmanager_hjy.validators import SchemaValidator, TypeValidator, ValueValidator

# æ¨¡å¼éªŒè¯
schema_validator = SchemaValidator()
schema = {
    'type': 'object',
    'properties': {
        'name': {'type': 'string'},
        'age': {'type': 'integer', 'minimum': 0},
        'email': {'type': 'string', 'format': 'email'}
    },
    'required': ['name', 'age']
}

data = {'name': 'John', 'age': 30, 'email': 'john@example.com'}
is_valid = schema_validator.validate(data, schema)

# ç±»å‹éªŒè¯
type_validator = TypeValidator()
is_int = type_validator.validate(123, int)
is_string = type_validator.validate("hello", str)

# å€¼éªŒè¯
value_validator = ValueValidator()
is_in_range = value_validator.validate(25, {'min': 0, 'max': 100})
is_valid_email = value_validator.validate('test@example.com', {'format': 'email'})
```

## ğŸ“š è¯¦ç»†æ–‡æ¡£

### é…ç½®ç®¡ç†

#### åŸºæœ¬æ“ä½œ

```python
# è®¾ç½®é…ç½®
config.set('key', 'value')
config.set('key', 'value', ttl=3600)  # è®¾ç½®TTL

# è·å–é…ç½®
value = config.get('key')
value = config.get('key', default='default_value')

# ç±»å‹åŒ–è·å–
int_value = config.get_int('key')
float_value = config.get_float('key')
bool_value = config.get_bool('key')
json_value = config.get_json('key')

# åˆ é™¤é…ç½®
config.delete('key')

# æ£€æŸ¥å­˜åœ¨æ€§
exists = config.exists('key')
```

#### é…ç½®ç›‘å¬

```python
def on_config_change(key, old_value, new_value):
    print(f"é…ç½®å˜æ›´: {key} = {old_value} -> {new_value}")

# ç›‘å¬é…ç½®å˜æ›´
config.watch('app.name', on_config_change)

# å–æ¶ˆç›‘å¬
config.unwatch('app.name', on_config_change)
```

#### ç‰ˆæœ¬ç®¡ç†

```python
# è·å–ç‰ˆæœ¬
version = config.get_version('key')

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
config.rollback('key', version)

# è·å–å†å²è®°å½•
history = config.get_history('key')
```

### ç¼“å­˜ç®¡ç†

#### ç¼“å­˜ç­–ç•¥

```python
# å†…å­˜ä¼˜å…ˆç­–ç•¥
cache_manager = CacheManager(
    strategy=CacheStrategy.MEMORY_FIRST,
    memory_config={'max_size': 1000},
    redis_config={'host': 'localhost', 'port': 6379}
)

# Redisä¼˜å…ˆç­–ç•¥
cache_manager = CacheManager(
    strategy=CacheStrategy.REDIS_FIRST,
    memory_config={'max_size': 1000},
    redis_config={'host': 'localhost', 'port': 6379}
)

# åˆ†å±‚ç¼“å­˜ç­–ç•¥
cache_manager = CacheManager(
    strategy=CacheStrategy.LAYERED,
    memory_config={'max_size': 1000},
    redis_config={'host': 'localhost', 'port': 6379}
)
```

#### é«˜çº§æ“ä½œ

```python
# æ‰¹é‡æ“ä½œ
cache_manager.set_many({
    'key1': 'value1',
    'key2': 'value2',
    'key3': 'value3'
})

values = cache_manager.get_many(['key1', 'key2', 'key3'])

# TTLæ“ä½œ
ttl = cache_manager.get_ttl('key')
cache_manager.set_ttl('key', 3600)

# ç»Ÿè®¡ä¿¡æ¯
stats = cache_manager.get_stats()
print(f"å‘½ä¸­ç‡: {stats['memory_hit_rate']:.2f}%")
print(f"æ€»è¯·æ±‚æ•°: {stats['total_requests']}")

# æ¸…ç†ç¼“å­˜
cache_manager.clear()
```

### éªŒè¯å™¨

#### æ¨¡å¼éªŒè¯

```python
# ç®€å•æ¨¡å¼
schema = {'type': 'string', 'minLength': 1, 'maxLength': 100}
is_valid = schema_validator.validate("hello", schema)

# å¤æ‚æ¨¡å¼
schema = {
    'type': 'object',
    'properties': {
        'name': {'type': 'string', 'minLength': 1},
        'age': {'type': 'integer', 'minimum': 0, 'maximum': 150},
        'email': {'type': 'string', 'format': 'email'},
        'tags': {'type': 'array', 'items': {'type': 'string'}}
    },
    'required': ['name', 'age']
}
```

#### ç±»å‹éªŒè¯

```python
# åŸºæœ¬ç±»å‹
type_validator.validate(123, int)
type_validator.validate(3.14, float)
type_validator.validate("hello", str)
type_validator.validate(True, bool)

# è‡ªå®šä¹‰ç±»å‹
from typing import List, Dict
type_validator.validate([1, 2, 3], List[int])
type_validator.validate({'key': 'value'}, Dict[str, str])
```

#### å€¼éªŒè¯

```python
# èŒƒå›´éªŒè¯
value_validator.validate(25, {'min': 0, 'max': 100})
value_validator.validate(3.14, {'min': 0.0, 'max': 10.0})

# æ ¼å¼éªŒè¯
value_validator.validate('test@example.com', {'format': 'email'})
value_validator.validate('2023-12-01', {'format': 'date'})
value_validator.validate('123-456-7890', {'format': 'phone'})

# æ¨¡å¼éªŒè¯
value_validator.validate('ABC123', {'pattern': r'^[A-Z]{3}\d{3}$'})

# æšä¸¾éªŒè¯
value_validator.validate('red', {'enum': ['red', 'green', 'blue']})
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_cache_manager.py

# è¿è¡Œæ€§èƒ½æµ‹è¯•
pytest tests/test_performance.py

# è¿è¡ŒçœŸå®ç¯å¢ƒæµ‹è¯•
pytest tests/test_real_redis.py
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=configmanager_hjy --cov-report=html

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
open htmlcov/index.html
```

## ğŸ“Š æ€§èƒ½åŸºå‡†

### ç¼“å­˜æ€§èƒ½æµ‹è¯•ç»“æœ

| æµ‹è¯•é¡¹ç›® | æ€§èƒ½æŒ‡æ ‡ | è¦æ±‚ | å®é™…ç»“æœ | çŠ¶æ€ |
|---------|---------|------|---------|------|
| å†…å­˜ç¼“å­˜è®¾ç½® | ååé‡ | > 1000 ops/s | 11210 ops/s | âœ… |
| å†…å­˜ç¼“å­˜è·å– | ååé‡ | > 10000 ops/s | 953468 ops/s | âœ… |
| äº‘Redisè®¾ç½® | ååé‡ | > 10 ops/s | 24.82 ops/s | âœ… |
| äº‘Redisè·å– | ååé‡ | > 20 ops/s | 24.64 ops/s | âœ… |
| ç½‘ç»œå»¶è¿Ÿ | å»¶è¿Ÿ | < 100ms | 40ms | âœ… |

### æµ‹è¯•ç¯å¢ƒ
- **Pythonç‰ˆæœ¬**: 3.13.3
- **æ“ä½œç³»ç»Ÿ**: macOS
- **RedisæœåŠ¡**: é˜¿é‡Œäº‘Redis RDS
- **æµ‹è¯•æ¡†æ¶**: pytest 8.4.1

## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡

```bash
# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your_password

# æ•°æ®åº“é…ç½®
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=your_user
MYSQL_PASSWORD=your_password
MYSQL_DATABASE=your_database

# OSSé…ç½®
OSS_ACCESS_KEY_ID=your_access_key
OSS_ACCESS_KEY_SECRET=your_secret_key
OSS_ENDPOINT=your_endpoint
OSS_BUCKET_NAME=your_bucket
```

### é…ç½®æ–‡ä»¶

```yaml
# config.yaml
redis:
  host: localhost
  port: 6379
  db: 0
  password: your_password

memory:
  max_size: 1000
  default_ttl: 300

database:
  host: localhost
  port: 3306
  user: your_user
  password: your_password
  database: your_database

oss:
  access_key_id: your_access_key
  access_key_secret: your_secret_key
  endpoint: your_endpoint
  bucket_name: your_bucket
```

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£å¦‚ä½•å‚ä¸é¡¹ç›®å¼€å‘ã€‚

### å¼€å‘ç¯å¢ƒæ­å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-username/configmanager_hjy.git
cd configmanager_hjy

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# è¿è¡Œæµ‹è¯•
pytest

# ä»£ç æ ¼å¼åŒ–
black configmanager_hjy tests

# ä»£ç æ£€æŸ¥
flake8 configmanager_hjy tests
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰ä»»ä½•å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [æ–‡æ¡£](docs/)
2. æœç´¢ [Issues](https://github.com/your-username/configmanager_hjy/issues)
3. åˆ›å»ºæ–°çš„ [Issue](https://github.com/your-username/configmanager_hjy/issues/new)

---

**configmanager_hjy** - è®©é…ç½®ç®¡ç†å˜å¾—ç®€å•è€Œå¼ºå¤§ï¼
