[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "ratio-typst"
version = "0.1.4"
description = "Generate Typst documents from Python using the Ratio theme."
keywords = ["document", "report", "presentation", "typesetting", "typst"]
authors = [{ name = "Ratio Innovations B.V.", email = "info@ratio-case.nl" }]
license = "MIT"
license-files = ["LICENSE"]
readme = "README.md"
requires-python = ">=3.11"
dependencies = [
    "pypst>=0.6.1",
    "pyserde[toml]>=0.24.0"
]

[dependency-groups]
test = [
    "pytest>=8.4.1",
    "pytest-cov>=6.2.1",
    "pytest-examples>=0.0.18",
    "pytest-watcher>=0.4.3",
    "typst>=0.13.5",
]

[tool.uv]
package = true
default-groups = ["test"]

[project.urls]
Repository = "https://gitlab.com/ratio-case-os/python/ratio-typst"
"Bug Tracker" = "https://gitlab.com/ratio-case-os/python/ratio-typst/-/issues"
Changelog = "https://gitlab.com/ratio-case-os/python/ratio-typst/-/blob/main/CHANGELOG.md"

[tool.pytest.ini_options]
addopts = "-s --cov --cov-report xml:./.pytest_cache/coverage.xml --cov-report term-missing --basetemp ./tests/.temp"
testpaths = ["tests"]
markers = ["slow", "format"]

[tool.coverage.run]
source = ["ratio_typst"]
disable_warnings = ["module-not-imported"]

[tool.coverage.report]
show_missing = true
skip_covered = true

[tool.raver]
ref = "origin/main"
module = "./src/ratio_typst/__init__.py"
changelog = "./CHANGELOG.md"

[tool.ruff]
line-length = 100
lint.select = [
    "E", # pycodestyle
    "F", # pyflakes
]
target-version = "py311"
