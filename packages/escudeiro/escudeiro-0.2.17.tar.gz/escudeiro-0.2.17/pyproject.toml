[project]
name = "escudeiro"
version = "0.2.17"
description = "The squire to your python projects."
authors = [{ name = "Gustavo Cardoso", email = "dev.guscardvs@proton.me" }]
readme = "README.md"
requires-python = ">=3.12, <4.0.0"
dependencies = [
    "typing-extensions (>=4.13.0,<5.0.0)",
    "orjson (>=3.10.16,<4.0.0)",
]
license = "Apache License 2.0"
license-files = ["LICEN[CS]E*"]

[project.urls]
github = "https://github.com/guscardvs/escudeiro"

[project.optional-dependencies]
pydantic = ["pydantic (>=2.0.0, <3.0.0)"]
msgspec = ["msgspec (>=0.19.0, <1.0.0)"]

[tool.ruff]
line-length = 80

[tool.ruff.lint]
extend-select = ["I", "UP"]

[tool.maturin]
module-name = "escudeiro.escudeiro_pyrs"

[tool.commitizen]
name = "cz_conventional_commits"
tag_format = "$version"
version_scheme = "pep440"
version_provider = "cargo"
update_changelog_on_bump = true
major_version_zero = true
version_files = [
    "escudeiro.__version__.py:__version__",
    "pyproject.toml:version",
]
annotated_tag = true

[tool.basedpyright]
typeCheckingMode = "recommended"
reportAny = false
reportExplicitAny = false
reportMissingTypeArgument = false
reportUnknownArgumentType = false
reportUnknownParameterType = false
reportUnknownLambdaType = false
reportUnknownVariableType = false
reportUnknownMemberType = false
reportMissingSuperCall = false
reportIncompatibleVariableOverride = false
reportUnannotatedClassAttribute = false

[tool.pytest.ini_options]
asyncio_mode = "auto"
asyncio_default_fixture_loop_scope = "module"
addopts = [
    "--cov=escudeiro/",
    "--cov=tests",
    "--cov-report=html",
    "--cov-config=.coveragerc",
    "--no-cov-on-fail",
    "--cov-fail-under=80",
    "-sv",
    "--maxfail=1",
    "-W error",
    # "-n 4",
]
filterwarnings = "error"

[build-system]
requires = ["maturin>=1.8.0,<2.0"]
build-backend = "maturin"

[dependency-groups]
dev = [
    "basedpyright>=1.29.4",
    "hypothesis>=6.135.7",
    "maturin[patchelf]>=1.8.7",
    "mike>=2.1.3",
    "mkdocs-material>=9.6.17",
    "pytest>=8.4.0",
    "pytest-asyncio>=1.0.0",
    "pytest-cov>=6.2.1",
    "pytest-xdist>=3.7.0",
    "ruff>=0.11.13",
    "tox>=4.27.0",
    "tox-uv>=1.26.1",
]
