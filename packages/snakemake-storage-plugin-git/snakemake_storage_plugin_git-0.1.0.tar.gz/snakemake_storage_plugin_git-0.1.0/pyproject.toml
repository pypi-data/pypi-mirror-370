[project]
name = "snakemake-storage-plugin-git"
version = "0.1.0"
readme  = "README.md"
license = { text = "MIT" }
requires-python = ">=3.11,<4.0"
description     = "A Snakemake storage plugin for downloading remote Git repositories."
dependencies    = [
    "snakemake-interface-common>=1.21.0,<2",
    "snakemake-interface-storage-plugins>=4.2.2,<5",
    "pygit2>=1.18.1,<2",
]

[[project.authors]]
name  = "Hyeokjin Kwon"
email = "hyeokjin.kwon@uni-potsdam.de"

[project.urls]
repository    = "https://github.com/SE-UP/snakemake-storage-plugin-git"
homepage      = "https://snakemake.github.io/snakemake-plugin-catalog/"
Documentation = "https://snakemake.github.io/snakemake-plugin-catalog/plugins/storage/git.html"

[build-system]
build-backend = "hatchling.build"
requires      = [ "hatchling",]

[dependency-groups]
dev = [ "ruff", "coverage", "pytest", "twine", "python-build",]

[tool.pixi.workspace]
channels  = [ "conda-forge",]
platforms = [ "linux-64",]

[tool.pixi.tasks]

[tool.pixi.pypi-dependencies.snakemake_storage_plugin_git]
path = "."
editable = true

[tool.pixi.environments.dev]
features = [ "dev",]

[tool.pixi.feature.dev.tasks]
lint   = "ruff check"
format = "ruff format"
build  = "python -m build"
test   = "pytest --cov=snakemake-storage-plugin-git --cov-report=xml:coverage-report/coverage.xml --cov-report=term-missing tests/tests.py"
check-build = { cmd = "python -m twine check dist/*", depends-on = ["build"] }

[tool.poetry.group.dev.dependencies]
pytest       = "^8.4.1"
snakemake    = "^9.1.0"
ruff         = "^0.12.9"
coverage     = "^7.10.4"
twine        = "^6.1.0"
python-build = "^0.2.13"
