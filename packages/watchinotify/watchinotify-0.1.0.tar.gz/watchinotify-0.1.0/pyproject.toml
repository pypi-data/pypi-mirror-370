[project]
name = "watchinotify"
version = "0.1.0"
description = "Simple and powerfull file watcher using libc's inotify"
authors = [
    {name = "Corentin", email = "corentin@ayo.tokyo"},
]
requires-python = ">=3.10"
readme = "README.md"
classifiers = [
    "Programming Language :: Python :: 3",
    "Operating System :: POSIX :: Linux",
]
license = "GPL-3.0-or-later"
license-files = ["LICEN[CS]E*"]

[project.urls]
Homepage = "https://codeberg.org/corentin-pro/watchinotify"
Issues = "https://codeberg.org/corentin-pro/watchinotify/issues"

[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[project.optional-dependencies]
test = ["pytest"]

[tool.ruff]
cache-dir = "/tmp/ruff"
exclude = [
    ".git",
    ".ruff_cache",
    ".venv"
]
line-length = 120
indent-width = 4
target-version = "py310"


[tool.isort]
combine_as_imports = true
force_sort_within_sections = true
lexicographical = true
lines_after_imports = 2
multi_line_output = 4
no_sections = false
order_by_type = true

[tool.pytest.ini_options]
addopts = "-p no:cacheprovider -s -vv"
testpaths = ["tests"]
pythonpath = ["."]

[tool.ruff.lint]
preview = true
select = ["A", "ARG", "B", "C", "E", "F", "FURB", "G", "I","ICN", "ISC", "PERF", "PIE", "PL", "PLE", "PTH",
    "Q", "RET", "RSE", "RUF", "SLF", "SIM", "T20", "TCH", "UP", "W"]
ignore = ["E275", "FURB140", "I001", "PERF203", "RET502", "RET503", "SIM105"]

[tool.ruff.lint.per-file-ignores]
"tests/*" = ["SLF001"]

[tool.ruff.lint.flake8-quotes]
inline-quotes = "single"

[tool.ruff.lint.pylint]
max-args=16
max-branches=24
max-locals=16
max-nested-blocks=8
max-public-methods=16
max-returns=8
max-statements=96

[tool.ruff.lint.mccabe]
max-complexity = 20

[tool.coverage.run]
command_line = "-m pytest"
omit = ["tests/*"]
