<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSA Reasoning Engine - Setup Wizard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#2563eb',
                        'secondary': '#64748b',
                        'accent': '#06b6d4',
                        'success': '#10b981',
                        'warning': '#f59e0b',
                        'error': '#ef4444'
                    }
                }
            }
        }
    </script>
    <style>
        .step-indicator {
            transition: all 0.3s ease;
        }
        .step-indicator.active {
            background: linear-gradient(135deg, #2563eb, #06b6d4);
        }
        .step-indicator.completed {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent mb-2">
                MSA Reasoning Engine
            </h1>
            <p class="text-secondary text-lg">Setup Wizard - Get started with AI-powered reasoning</p>
        </div>

        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <span class="text-sm font-medium text-secondary">Setup Progress</span>
                <span class="text-sm font-medium text-secondary" id="progressText">Step 1 of 6</span>
            </div>
            <div class="w-full bg-slate-200 rounded-full h-2">
                <div class="progress-bar bg-gradient-to-r from-primary to-accent h-2 rounded-full" style="width: 16.67%" id="progressBar"></div>
            </div>
        </div>

        <!-- Step Indicators -->
        <div class="flex justify-center mb-8">
            <div class="flex space-x-4">
                <div class="step-indicator active flex items-center justify-center w-10 h-10 rounded-full text-white font-semibold text-sm" data-step="1">1</div>
                <div class="step-indicator flex items-center justify-center w-10 h-10 rounded-full bg-slate-300 text-slate-600 font-semibold text-sm" data-step="2">2</div>
                <div class="step-indicator flex items-center justify-center w-10 h-10 rounded-full bg-slate-300 text-slate-600 font-semibold text-sm" data-step="3">3</div>
                <div class="step-indicator flex items-center justify-center w-10 h-10 rounded-full bg-slate-300 text-slate-600 font-semibold text-sm" data-step="4">4</div>
                <div class="step-indicator flex items-center justify-center w-10 h-10 rounded-full bg-slate-300 text-slate-600 font-semibold text-sm" data-step="5">5</div>
                <div class="step-indicator flex items-center justify-center w-10 h-10 rounded-full bg-slate-300 text-slate-600 font-semibold text-sm" data-step="6">6</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="bg-white rounded-xl shadow-lg p-8 min-h-96">
            <!-- Step 1: Welcome -->
            <div id="step1" class="step-content fade-in">
                <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-primary to-accent rounded-full flex items-center justify-center mx-auto mb-6">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                    </div>
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Welcome to MSA Reasoning Engine</h2>
                    <p class="text-secondary text-lg mb-6 max-w-2xl mx-auto">
                        This powerful AI system combines probabilistic reasoning with neural program synthesis 
                        to tackle complex real-world problems. Let's get you set up in just a few steps.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="text-center p-4 rounded-lg bg-slate-50">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                            </div>
                            <h3 class="font-semibold text-slate-800 mb-2">5-Stage Pipeline</h3>
                            <p class="text-sm text-secondary">Parse, Retrieve, Graph, Synthesize, Infer</p>
                        </div>
                        <div class="text-center p-4 rounded-lg bg-slate-50">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                </svg>
                            </div>
                            <h3 class="font-semibold text-slate-800 mb-2">Secure Execution</h3>
                            <p class="text-sm text-secondary">Isolated sandbox environments</p>
                        </div>
                        <div class="text-center p-4 rounded-lg bg-slate-50">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                                <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                            </div>
                            <h3 class="font-semibold text-slate-800 mb-2">Collaboration</h3>
                            <p class="text-sm text-secondary">Real-time team annotations</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2: System Status -->
            <div id="step2" class="step-content hidden">
                <h2 class="text-2xl font-bold text-slate-800 mb-6">System Status Check</h2>
                <p class="text-secondary mb-6">Let's verify that all system components are ready:</p>
                
                <div class="space-y-4" id="statusChecks">
                    <div class="status-item flex items-center p-4 rounded-lg bg-slate-50" data-check="redis">
                        <div class="status-icon w-6 h-6 mr-4">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary"></div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-slate-800">Redis Cloud Connection</h3>
                            <p class="text-sm text-secondary">Vector search and caching</p>
                        </div>
                    </div>
                    
                    <div class="status-item flex items-center p-4 rounded-lg bg-slate-50" data-check="database">
                        <div class="status-icon w-6 h-6 mr-4">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary"></div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-slate-800">PostgreSQL Database</h3>
                            <p class="text-sm text-secondary">Long-term data persistence</p>
                        </div>
                    </div>
                    
                    <div class="status-item flex items-center p-4 rounded-lg bg-slate-50" data-check="kernel">
                        <div class="status-icon w-6 h-6 mr-4">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary"></div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-slate-800">Semantic Kernel</h3>
                            <p class="text-sm text-secondary">AI orchestration framework</p>
                        </div>
                    </div>
                    
                    <div class="status-item flex items-center p-4 rounded-lg bg-slate-50" data-check="reasoning">
                        <div class="status-icon w-6 h-6 mr-4">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary"></div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-slate-800">v2 Reasoning Kernel</h3>
                            <p class="text-sm text-secondary">5-stage reasoning pipeline</p>
                        </div>
                    </div>
                    
                    <div class="status-item flex items-center p-4 rounded-lg bg-slate-50" data-check="daytona">
                        <div class="status-icon w-6 h-6 mr-4">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary"></div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-slate-800">Daytona Sandbox</h3>
                            <p class="text-sm text-secondary">Secure code execution</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 p-4 rounded-lg bg-blue-50 border border-blue-200 hidden" id="statusSummary">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 text-blue-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="text-blue-800 font-medium" id="statusSummaryText">Checking system status...</span>
                    </div>
                </div>
            </div>

            <!-- Step 3: AI Provider Configuration -->
            <div id="step3" class="step-content hidden">
                <h2 class="text-2xl font-bold text-slate-800 mb-6">AI Provider Configuration</h2>
                <p class="text-secondary mb-6">Configure your AI provider for optimal reasoning performance:</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="p-4 border border-slate-200 rounded-lg">
                        <div class="flex items-center mb-3">
                            <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                <svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M23 12l-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.69 3.61.82 1.89 3.2L12 21.04l3.4 1.46 1.89-3.2 3.61-.82-.34-3.69L23 12z"/>
                                </svg>
                            </div>
                            <h3 class="font-semibold text-slate-800">Azure OpenAI</h3>
                        </div>
                        <p class="text-sm text-secondary mb-3">Enterprise-grade AI with advanced models</p>
                        <div class="text-xs text-success">✓ Currently configured</div>
                    </div>
                    
                    <div class="p-4 border border-slate-200 rounded-lg opacity-50">
                        <div class="flex items-center mb-3">
                            <div class="w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center mr-3">
                                <svg class="w-4 h-4 text-slate-400" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2L2 7v10c0 5.55 3.84 9.95 9 11 5.16-1.05 9-5.45 9-11V7l-10-5z"/>
                                </svg>
                            </div>
                            <h3 class="font-semibold text-slate-600">OpenAI Direct</h3>
                        </div>
                        <p class="text-sm text-slate-400 mb-3">Direct OpenAI API integration</p>
                        <div class="text-xs text-slate-400">Available for configuration</div>
                    </div>
                </div>
                
                <div class="p-4 rounded-lg bg-green-50 border border-green-200">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 text-success mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="text-success font-medium">Azure OpenAI is configured and ready</span>
                    </div>
                </div>
            </div>

            <!-- Step 4: Daytona Sandbox Setup -->
            <div id="step4" class="step-content hidden">
                <h2 class="text-2xl font-bold text-slate-800 mb-6">Secure Execution Environment</h2>
                <p class="text-secondary mb-6">Configure Daytona Cloud for secure probabilistic program execution:</p>
                
                <div class="space-y-6">
                    <div class="p-6 border border-slate-200 rounded-lg">
                        <div class="flex items-center mb-4">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold text-slate-800">Daytona Cloud Status</h3>
                                <p class="text-sm text-secondary">Secure sandbox for code execution</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div class="flex items-center">
                                <span class="w-3 h-3 rounded-full mr-3" id="daytonaStatus"></span>
                                <span class="text-sm" id="daytonaStatusText">Checking status...</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-3 h-3 rounded-full mr-3" id="apiKeyStatus"></span>
                                <span class="text-sm" id="apiKeyStatusText">Verifying API key...</span>
                            </div>
                        </div>
                        
                        <div id="daytonaConfig" class="hidden">
                            <h4 class="font-medium text-slate-800 mb-3">Resource Configuration:</h4>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <span class="text-secondary">CPU Limit:</span>
                                    <span class="ml-2 font-medium">2 cores</span>
                                </div>
                                <div>
                                    <span class="text-secondary">Memory:</span>
                                    <span class="ml-2 font-medium">512 MB</span>
                                </div>
                                <div>
                                    <span class="text-secondary">Timeout:</span>
                                    <span class="ml-2 font-medium">30 seconds</span>
                                </div>
                                <div>
                                    <span class="text-secondary">Security:</span>
                                    <span class="ml-2 font-medium">AST validation</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="daytonaInstructions" class="p-4 rounded-lg bg-yellow-50 border border-yellow-200 hidden">
                        <div class="flex items-start">
                            <svg class="w-5 h-5 text-warning mr-3 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                            </svg>
                            <div>
                                <h4 class="font-medium text-warning mb-2">Daytona Setup Required</h4>
                                <p class="text-sm text-yellow-800 mb-3">To enable secure cloud execution:</p>
                                <ol class="list-decimal list-inside text-sm text-yellow-800 space-y-1">
                                    <li>Visit <a href="https://app.daytona.io/dashboard/keys" target="_blank" class="underline">Daytona Dashboard</a></li>
                                    <li>Create a new API key</li>
                                    <li>Add the key to your environment variables</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 5: Test & Validation -->
            <div id="step5" class="step-content hidden">
                <h2 class="text-2xl font-bold text-slate-800 mb-6">System Validation</h2>
                <p class="text-secondary mb-6">Let's test the complete reasoning pipeline with a sample query:</p>
                
                <div class="mb-6">
                    <label class="block text-sm font-medium text-slate-700 mb-2">Sample Reasoning Query:</label>
                    <textarea id="testQuery" rows="3" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Enter a reasoning query to test...">A coin is flipped 20 times and comes up heads 14 times. What can we infer about the coin's bias?</textarea>
                </div>
                
                <button id="runTest" class="bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors mb-6">
                    Run Test Query
                </button>
                
                <div id="testResults" class="hidden">
                    <div class="p-4 rounded-lg bg-slate-50 border border-slate-200">
                        <h4 class="font-medium text-slate-800 mb-3">Test Results:</h4>
                        <div id="testOutput" class="text-sm text-slate-600"></div>
                    </div>
                </div>
                
                <div id="testProgress" class="hidden">
                    <div class="flex items-center p-4 rounded-lg bg-blue-50 border border-blue-200">
                        <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"></div>
                        <span class="text-blue-800">Running reasoning pipeline test...</span>
                    </div>
                </div>
            </div>

            <!-- Step 6: Complete -->
            <div id="step6" class="step-content hidden">
                <div class="text-center">
                    <div class="w-20 h-20 bg-gradient-to-r from-success to-green-400 rounded-full flex items-center justify-center mx-auto mb-6">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h2 class="text-3xl font-bold text-slate-800 mb-4">Setup Complete!</h2>
                    <p class="text-secondary text-lg mb-8 max-w-2xl mx-auto">
                        Your MSA Reasoning Engine is now configured and ready to tackle complex reasoning challenges.
                    </p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div class="p-6 rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200">
                            <h3 class="font-semibold text-slate-800 mb-3">🎯 Ready to Use</h3>
                            <ul class="text-sm text-slate-600 space-y-2 text-left">
                                <li>✓ 5-stage reasoning pipeline active</li>
                                <li>✓ Secure sandbox execution configured</li>
                                <li>✓ Real-time collaboration enabled</li>
                                <li>✓ Vector search and caching ready</li>
                            </ul>
                        </div>
                        
                        <div class="p-6 rounded-lg bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200">
                            <h3 class="font-semibold text-slate-800 mb-3">🚀 Next Steps</h3>
                            <ul class="text-sm text-slate-600 space-y-2 text-left">
                                <li>• Start with the chat interface</li>
                                <li>• Explore probabilistic reasoning</li>
                                <li>• Try team collaboration features</li>
                                <li>• Review API documentation</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <a href="/" class="bg-primary text-white px-8 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors">
                            Launch Reasoning Interface
                        </a>
                        <a href="/api/docs" class="border border-slate-300 text-slate-700 px-8 py-3 rounded-lg font-medium hover:bg-slate-50 transition-colors">
                            View API Documentation
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="flex justify-between mt-8">
            <button id="prevBtn" class="px-6 py-2 border border-slate-300 text-slate-700 rounded-lg font-medium hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                Previous
            </button>
            <button id="nextBtn" class="px-6 py-2 bg-primary text-white rounded-lg font-medium hover:bg-blue-700 transition-colors">
                Next
            </button>
        </div>
    </div>

    <script src="/static/onboarding.js"></script>
</body>
</html>