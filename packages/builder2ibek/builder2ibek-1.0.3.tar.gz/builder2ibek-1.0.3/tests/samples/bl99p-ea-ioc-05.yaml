# yaml-language-server: $schema=/epics/ibek-defs/ioc.schema.json

ioc_name: "{{  _global.get_env('IOC_NAME') }}"

description: auto-generated by https://github.com/epics-containers/builder2ibek

entities:

  - type: epics.EpicsEnvSet
    name: EPICS_TS_MIN_WEST
    value: '0'

  - type: epics.EpicsEnvSet
    name: STREAM_PROTOCOL_PATH
    value: /epics/runtime/protocol/

  - type: devIocStats.iocAdminSoft
    IOC: '{{ ioc_name | upper }}'

  - type: epics.EpicsCaMaxArrayBytes
    max_bytes: 9000000

  - type: ADAndor.andorCCD
    ADDR: 0
    BUFFERS: 2000
    INSTALLPATH: /dls_sw/prod/R3.14.12.7/support/ANAndor/etc
    P: BL99P-EA-DET-03
    PORT: DET3.cam
    R: ':CAM:'
    TIMEOUT: 1

  - type: ADCore.NDPosPlugin
    ADDR: 0
    BLOCK: 0
    ENABLED: 1
    NDARRAY_PORT: DET3.cam
    P: BL99P-EA-DET-03
    PORT: DET3.pos
    QUEUE: 1000
    R: ':POS:'
    TIMEOUT: 1

  - type: ffmpegServer.ffmpegStream
    BLOCK: 0
    HTTP_PORT: 8081
    MEMORY: -1
    NDARRAY_ADDR: 0
    NDARRAY_PORT: DET3.cam
    P: BL99P-EA-DET-03
    PORT: DET3.MJPG
    QUALITY: 100
    QUEUE: 2
    R: ':MJPG:'
