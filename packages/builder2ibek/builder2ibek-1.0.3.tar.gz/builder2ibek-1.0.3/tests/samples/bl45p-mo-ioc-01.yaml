# yaml-language-server: $schema=/epics/ibek-defs/ioc.schema.json

ioc_name: "{{  _global.get_env('IOC_NAME') }}"

description: auto-generated by https://github.com/epics-containers/builder2ibek

entities:

  - type: epics.EpicsEnvSet
    name: EPICS_TS_MIN_WEST
    value: '0'

  - type: epics.EpicsEnvSet
    name: STREAM_PROTOCOL_PATH
    value: /epics/runtime/protocol/

  - type: devIocStats.iocAdminSoft
    IOC: '{{ ioc_name | upper }}'

  - type: epics.EpicsCaMaxArrayBytes
    max_bytes: 6000000

  - type: pmac.pmacAsynIPPort
    IP: 172.23.59.21:1025
    name: BRICK1port

  - type: pmac.GeoBrick
    P: BL45P-MO-STEP-01
    name: BRICK1
    pmacAsynPort: BRICK1port

  - type: pmac.pmacDisableLimitsCheck
    Axis: 2
    Controller: BRICK1

  - type: pmac.pmacDisableLimitsCheck
    Axis: 3
    Controller: BRICK1

  - type: pmac.pmacDisableLimitsCheck
    Axis: 4
    Controller: BRICK1

  - type: pmac.pmacDisableLimitsCheck
    Axis: 5
    Controller: BRICK1

  - type: pmac.dls_pmac_asyn_motor
    ACCL: 0.1
    ADDR: 2
    Controller: BRICK1
    DESC: Theta top
    DHLM: 10000000
    DIR: Pos
    DLLM: -10000000
    EGU: deg
    FOFF: Variable
    HOMEVISSTR: Absolute Encoder
    M: :THETA:TOP
    MRES: 0.087890625
    P: BL45P-MO-STAGE-01
    PREC: 3
    TWV: 1
    UEIP: No
    VELO: 90
    VMAX: 1080

  - type: pmac.dls_pmac_asyn_motor
    ACCL: 0.1
    ADDR: 3
    Controller: BRICK1
    DESC: Theta bottom
    DHLM: 10000000
    DIR: Pos
    DLLM: -10000000
    EGU: deg
    FOFF: Variable
    HOMEVISSTR: Absolute Encoder
    M: :THETA:BOT
    MRES: 0.087890625
    P: BL45P-MO-STAGE-01
    PREC: 3
    TWV: 1
    UEIP: No
    VELO: 90
    VMAX: 1080

  - type: pmac.dls_pmac_asyn_motor
    ADDR: 4
    Controller: BRICK1
    DESC: Hor EnDat chopper
    DHLM: 10000000
    DIR: Pos
    DLLM: -10000000
    EGU: deg
    FOFF: Variable
    HOMEVIS: 0
    HOMEVISSTR: Absolute Encoder
    M: :ENDAT
    MRES: 4.3e-05
    P: BL45P-MO-CHOP-01
    PREC: 5
    TWV: 1
    UEIP: No
    VELO: 43

  - type: pmac.dls_pmac_asyn_motor
    ACCL: 0.01
    ADDR: 5
    Controller: BRICK1
    DESC: Ver Biss chopper
    DHLM: 10000000
    DIR: Pos
    DLLM: -10000000
    EGU: deg
    FOFF: Variable
    HOMEVIS: 0
    HOMEVISSTR: Absolute Encoder
    M: :BISS
    MRES: 0.000687
    P: BL45P-MO-CHOP-01
    PREC: 5
    TWV: 1
    UEIP: No
    VELO: 720

  - type: pmac.dls_pmac_asyn_motor
    ADDR: 6
    Controller: BRICK1
    DESC: Sample X
    DHLM: 19
    DIR: Pos
    DLLM: 0
    EGU: mm
    FOFF: Variable
    M: :X
    MRES: 0.0001
    P: BL45P-MO-STAGE-01
    PREC: 3
    TWV: 1
    UEIP: No
    VELO: 5

  - type: pmac.dls_pmac_asyn_motor
    ADDR: 7
    Controller: BRICK1
    DESC: Sample Y top
    DHLM: 4
    DIR: Pos
    DLLM: -1
    EGU: mm
    FOFF: Variable
    M: :Y:TOP
    MRES: 0.0005
    P: BL45P-MO-STAGE-01
    PREC: 3
    TWV: 1
    UEIP: No
    VELO: 5

  - type: pmac.dls_pmac_asyn_motor
    ADDR: 8
    Controller: BRICK1
    DESC: Sample Y bottom
    DHLM: 4
    DIR: Pos
    DLLM: -1
    EGU: mm
    FOFF: Variable
    M: :Y:BOT
    MRES: 0.0005
    P: BL45P-MO-STAGE-01
    PREC: 3
    TWV: 1
    UEIP: No
    VELO: 5

  - type: pmac.autohome
    GRP2: Theta
    GRP3: X
    GRP4: Y top
    GRP5: Y bottom
    P: BL45P-MO-STAGE-01
    PLC: 10
    PmacController: BRICK1

  - type: pmac.CS
    CS: 1
    IdlePoll: 1000
    PmacController: BRICK1
    name: BRICK1.CS1

  - type: pmac.CS
    CS: 2
    IdlePoll: 1000
    PmacController: BRICK1
    name: BRICK1.CS2

  - type: pmac.CS
    CS: 3
    IdlePoll: 1000
    PmacController: BRICK1
    name: BRICK1.CS3

  - type: pmac.dls_pmac_asyn_motor
    ACCL: 0.1
    ADDR: 7
    Controller: BRICK1.CS2
    DESC: Theta position
    DHLM: 10000
    DIR: Pos
    DLLM: -10000
    EGU: deg
    FOFF: Variable
    M: :THETA:POS
    MRES: 0.0001
    P: BL45P-MO-STAGE-01
    PREC: 3
    TWV: 5
    UEIP: No
    VELO: 30
    is_cs: true

  - type: pmac.dls_pmac_asyn_motor
    ACCL: 0.1
    ADDR: 8
    Controller: BRICK1.CS2
    DESC: Theta skew
    DHLM: 360
    DIR: Pos
    DLLM: -360
    EGU: deg
    FOFF: Variable
    M: :THETA:SKEW
    MRES: 0.0001
    P: BL45P-MO-STAGE-01
    PREC: 3
    TWV: 5
    UEIP: No
    VELO: 10
    is_cs: true

  - type: pmac.dls_pmac_asyn_motor
    ADDR: 7
    Controller: BRICK1.CS3
    DESC: CS Y
    DHLM: 4
    DIR: Pos
    DLLM: -1
    EGU: mm
    FOFF: Variable
    M: :CS:Y
    MRES: 0.0001
    P: BL45P-MO-STAGE-01
    PREC: 3
    TWV: 0.5
    UEIP: No
    VELO: 5
    is_cs: true

  - type: pmac.dls_pmac_asyn_motor
    ADDR: 8
    Controller: BRICK1.CS3
    DESC: CS Y stretch
    DHLM: 2
    DIR: Pos
    DLLM: -2
    EGU: mm
    FOFF: Variable
    M: :CS:Y:STRETCH
    MRES: 0.0001
    P: BL45P-MO-STAGE-01
    PREC: 3
    TWV: 0.5
    UEIP: No
    VELO: 5
    is_cs: true

  - type: pmac.GeoBrickTrajectoryControl
    NPOINTS: 500000
    PmacController: BRICK1

  - type: pmac.pmacCreateCsGroup
    AxisCount: 9
    Controller: BRICK1
    GroupName: Default
    GroupNumber: 0

  - type: pmac.pmacCsGroupAddAxis
    AxisDef: I
    AxisNumber: 2
    Controller: BRICK1
    CoordSysNumber: 2
    GroupNumber: 0

  - type: pmac.pmacCsGroupAddAxis
    AxisDef: I
    AxisNumber: 3
    Controller: BRICK1
    CoordSysNumber: 2
    GroupNumber: 0

  - type: pmac.pmacCsGroupAddAxis
    AxisDef: Z
    AxisNumber: 6
    Controller: BRICK1
    CoordSysNumber: 3
    GroupNumber: 0

  - type: pmac.pmacCsGroupAddAxis
    AxisDef: I
    AxisNumber: 7
    Controller: BRICK1
    CoordSysNumber: 3
    GroupNumber: 0

  - type: pmac.pmacCsGroupAddAxis
    AxisDef: I
    AxisNumber: 8
    Controller: BRICK1
    CoordSysNumber: 3
    GroupNumber: 0
