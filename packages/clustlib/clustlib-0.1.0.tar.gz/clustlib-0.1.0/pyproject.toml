[project]
name = "clustlib"
version = "0.1.0"
description = "Constrained clustering library for Python"
authors = [
  {name = "Ismael Marin", email = "ismitae.imm@gmail.com"}
]
maintainers = [
  {name = "Ismael Marin", email = "ismitae.imm@gmail.com"}
]
requires-python = ">= 3.12, < 3.13.3"
readme = "README.md"

dependencies = [
    "numpy>=1.26.2",
    "scipy>=1.16.1",
    "scikit-learn>=1.3.1",
    "networkx>=3.4.2",
]

[tool.poetry.group.dev.dependencies]
black = "^24.10.0"
deptry = "^0.23.1"
pytest = "^7.4.2"
mock = "^5.2.0"
isort = "^6.0.1"
ruff = "^0.12.9"
pytest-cov = "^6.2.1"
pre-commit = "^4.3.0"

[tool.poetry.group.docs]
optional = true

[tool.poetry.group.docs.dependencies]
mkdocs = "^1.5.3"
mkdocs-material = "^9.4.1"
mkdocstrings = "^0.26.1"
mkdocstrings-python = "^1.7.1"
mkdocs-mermaid2-plugin = "^1.2.1"
griffe = "^1.7.3"

[tool.poetry.group.examples]
optional = true

[tool.poetry.group.examples.dependencies]
jupyter = "^1.1.1"
notebook = "^7.4.1"
plotly = "^6.1.2"
seaborn = "^0.13.2"

[tool.pytest.ini_options]
testpaths = [
    "tests"
]

[tool.deptry]
ignore_notebooks = true

[tool.isort]
profile = "black"
line_length = 88
src_paths = ["clustlib", "tests"]

[tool.black]
exclude = '''
(
  /(
      \.eggs         # exclude a few common directories in the
    | \.git          # root of the project
    | \.hg
    | \.mypy_cache
    | \.tox
    | \.venv
    | _build
    | buck-out
    | build
    | dist
  )/
  | foo.py           # also separately exclude a file named foo.py in
                     # the root of the project
)
'''

[tool.ruff]
line-length = 88
indent-width = 4

target-version = "py312"

[tool.ruff.lint]
select = [
    "E", # pydocs errors
    "F", # flake8 errors
    "D",
    "W",
    "RUF"
]
fixable = ["ALL"]
ignore = [
    "D107", # Missing docstring in __init__
    "D104", # Missing docstring in public package
    "D100", # Missing docstring in public module
]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"

[tool.ruff.lint.per-file-ignores]
"clustlib/utils/simpleconstraints.py" = [
    "D100", # Missing docstring in public module
    "D101", # Missing docstring in public class
    "D102", # Missing docstring in public method
    "D103", # Missing docstring in public function
    "D107", # Missing docstring in __init__
    "D105", # Missing docstring in magic method
]
"tests/*" = ["D"]
"examples/*" = ["D", "E"]
