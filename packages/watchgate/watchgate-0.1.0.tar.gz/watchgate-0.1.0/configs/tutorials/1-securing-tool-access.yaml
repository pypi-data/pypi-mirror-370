# Watchgate Configuration for Tool Access Control
proxy:
  # How Watchgate communicates with the MCP server (stdio = command-line interface)
  transport: stdio
  upstreams:
    - name: "filesystem"
      # This starts the filesystem MCP server using npx (Node.js package runner)
      # @modelcontextprotocol/server-filesystem is the official filesystem server
      # ~/claude-sandbox/ is the directory the filesystem server will operate within
      command: "npx @modelcontextprotocol/server-filesystem ~/claude-sandbox/"

plugins:
  security:
    _global:
      # Enable the tool access control plugin
      - policy: "tool_allowlist"
        enabled: true
        config:
          # "allowlist" mode: only specified tools are permitted (most secure)
          # Other options: "blocklist" (block specific tools), "allow_all" (no restrictions)
          mode: "allowlist"
          tools:
            # List of filesystem operations that Claude is allowed to use
            # These are the only tools Claude will see and can execute
            - "read_file"        # Read file contents
            - "write_file"       # Create or modify files
            - "create_directory" # Create new directories
            - "list_directory"   # List directory contents
            - "move_file"        # Rename or move files
            - "search_files"     # Search for files by name/pattern
          # Message shown when a blocked tool is attempted
          block_message: "Tool access denied by security policy"
