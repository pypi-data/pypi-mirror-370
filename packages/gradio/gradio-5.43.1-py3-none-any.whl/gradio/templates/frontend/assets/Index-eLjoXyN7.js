/* empty css                                                        */import{B as zt}from"./BlockTitle-D_Y5C6pR.js";import"./MarkdownCode.svelte_svelte_type_style_lang-DqSyeVpi.js";import{C as Ut}from"./Check-CEkiXcyC.js";import{C as Ft}from"./Copy-CxQ9EyK2.js";import{P as Gt}from"./Plus-BuAWg7aq.js";import{S as Kt}from"./Send-DyoOovnk.js";import{T as Qt}from"./Trash-RbZEwH-j.js";import"./index-D4QfqgLg.js";import{f as fe}from"./index-C3K9fiV4.js";import{D as lt,c as Vt}from"./Dropdown-KpQTLrS-.js";import"./StreamingBar.svelte_svelte_type_style_lang-DyfAPhwM.js";/* empty css                                              */import{B as Wt}from"./Block-BPual4nE.js";import{S as Xt}from"./index-DQLXHcSm.js";import{default as ws}from"./Example-BrizabXh.js";import"./Info-CRZpAU5g.js";import"./MarkdownCode-CThQREC5.js";import"./prism-python-BKxA7zL1.js";import"./svelte/svelte.js";import"./DropdownArrow-B7DUstP0.js";import"./IconButton-BYr8xyoS.js";import"./Clear-By3xiIwg.js";const{SvelteComponent:Yt,append:Te,attr:pe,detach:Zt,element:Ee,flush:Be,init:xt,insert:$t,listen:en,noop:He,safe_not_equal:tn,set_data:nn,set_style:sn,space:ln,text:on}=window.__gradio__svelte__internal,{createEventDispatcher:rn}=window.__gradio__svelte__internal;function un(n){let e,t,s,i,l,o,f;return{c(){e=Ee("div"),t=Ee("button"),s=ln(),i=Ee("span"),l=on(n[1]),pe(t,"role","switch"),pe(t,"aria-checked",n[0]),t.disabled=n[2],pe(t,"class","svelte-1wr5wa"),pe(e,"class","s s--slider svelte-1wr5wa"),sn(e,"font-size","var(--font-size-sm)px")},m(u,_){$t(u,e,_),Te(e,t),Te(e,s),Te(e,i),Te(i,l),o||(f=en(t,"click",n[3]),o=!0)},p(u,[_]){_&1&&pe(t,"aria-checked",u[0]),_&4&&(t.disabled=u[2]),_&2&&nn(l,u[1])},i:He,o:He,d(u){u&&Zt(e),o=!1,f()}}}function fn(n,e,t){let{label:s}=e,{checked:i=!1}=e,{disabled:l=!1}=e;const o=rn();function f(u){const a=u.target.getAttribute("aria-checked");t(0,i=a!=="true"),o("click",{checked:i})}return n.$$set=u=>{"label"in u&&t(1,s=u.label),"checked"in u&&t(0,i=u.checked),"disabled"in u&&t(2,l=u.disabled)},[i,s,l,f]}class an extends Yt{constructor(e){super(),xt(this,e,fn,un,tn,{label:1,checked:0,disabled:2})}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),Be()}get checked(){return this.$$.ctx[0]}set checked(e){this.$$set({checked:e}),Be()}get disabled(){return this.$$.ctx[2]}set disabled(e){this.$$set({disabled:e}),Be()}}const{SvelteComponent:_n,add_flush_callback:it,add_render_callback:ye,append:P,attr:p,bind:ot,binding_callbacks:ke,check_outros:$,create_bidirectional_transition:ae,create_component:ie,create_in_transition:cn,destroy_component:oe,destroy_each:hn,detach:G,element:B,empty:dn,ensure_array_like:Je,flush:U,group_outros:ee,init:gn,insert:K,listen:F,mount_component:re,noop:De,run_all:rt,safe_not_equal:mn,set_data:bn,set_input_value:ge,set_style:je,space:x,text:wn,toggle_class:Z,transition_in:b,transition_out:y}=window.__gradio__svelte__internal,{createEventDispatcher:pn,tick:he,onMount:kn}=window.__gradio__svelte__internal;function ze(n,e,t){const s=n.slice();return s[77]=e[t],s[78]=e,s[79]=t,s}function Ue(n){let e,t,s,i;const l=[yn,vn],o=[];function f(u,_){return u[24]?0:1}return e=f(n),t=o[e]=l[e](n),{c(){t.c(),s=dn()},m(u,_){o[e].m(u,_),K(u,s,_),i=!0},p(u,_){let a=e;e=f(u),e===a?o[e].p(u,_):(ee(),y(o[a],1,1,()=>{o[a]=null}),$(),t=o[e],t?t.p(u,_):(t=o[e]=l[e](u),t.c()),b(t,1),t.m(s.parentNode,s))},i(u){i||(b(t),i=!0)},o(u){y(t),i=!1},d(u){u&&G(s),o[e].d(u)}}}function vn(n){let e,t,s,i,l;return t=new Ft({}),{c(){e=B("button"),ie(t.$$.fragment),p(e,"class","copy-button svelte-1hyf28w"),p(e,"aria-label","Copy"),p(e,"aria-roledescription","Copy text")},m(o,f){K(o,e,f),re(t,e,null),s=!0,i||(l=F(e,"click",n[38]),i=!0)},p:De,i(o){s||(b(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&G(e),oe(t),i=!1,l()}}}function yn(n){let e,t,s,i;return t=new Ut({}),{c(){e=B("button"),ie(t.$$.fragment),p(e,"class","copy-button svelte-1hyf28w"),p(e,"aria-label","Copied"),p(e,"aria-roledescription","Text copied")},m(l,o){K(l,e,o),re(t,e,null),i=!0},p:De,i(l){i||(b(t.$$.fragment,l),l&&(s||ye(()=>{s=cn(e,fe,{duration:300}),s.start()})),i=!0)},o(l){y(t.$$.fragment,l),i=!1},d(l){l&&G(e),oe(t)}}}function Cn(n){let e;return{c(){e=wn(n[4])},m(t,s){K(t,e,s)},p(t,s){s[0]&16&&bn(e,t[4])},d(t){t&&G(e)}}}function Fe(n){let e,t,s,i;function l(f){n[44](f)}let o={label:"Plain Text",disabled:n[28]||n[27]};return n[14]!==void 0&&(o.checked=n[14]),t=new an({props:o}),ke.push(()=>ot(t,"checked",l)),t.$on("click",n[45]),{c(){e=B("div"),ie(t.$$.fragment),p(e,"class","switch-container top-switch svelte-1hyf28w"),Z(e,"switch-disabled",n[28]||n[27])},m(f,u){K(f,e,u),re(t,e,null),i=!0},p(f,u){const _={};u[0]&402653184&&(_.disabled=f[28]||f[27]),!s&&u[0]&16384&&(s=!0,_.checked=f[14],it(()=>s=!1)),t.$set(_),(!i||u[0]&402653184)&&Z(e,"switch-disabled",f[28]||f[27])},i(f){i||(b(t.$$.fragment,f),i=!0)},o(f){y(t.$$.fragment,f),i=!1},d(f){f&&G(e),oe(t)}}}function Sn(n){let e,t,s,i,l,o,f,u=n[28]&&Ge(),_=n[18]&&Ke(n);return{c(){e=B("div"),u&&u.c(),t=x(),s=B("textarea"),i=x(),_&&_.c(),p(s,"data-testid","textbox"),p(s,"placeholder",n[3]),p(s,"rows",5),s.disabled=n[6],p(s,"class","svelte-1hyf28w"),p(e,"class","textarea-container svelte-1hyf28w"),Z(e,"loading",n[28])},m(a,g){K(a,e,g),u&&u.m(e,null),P(e,t),P(e,s),ge(s,n[25]),n[66](s),P(e,i),_&&_.m(e,null),l=!0,o||(f=[F(s,"input",n[62]),F(s,"input",n[63]),F(s,"focus",n[64]),F(s,"keydown",n[65])],o=!0)},p(a,g){a[28]?u?g[0]&268435456&&b(u,1):(u=Ge(),u.c(),b(u,1),u.m(e,t)):u&&(ee(),y(u,1,1,()=>{u=null}),$()),(!l||g[0]&8)&&p(s,"placeholder",a[3]),(!l||g[0]&64)&&(s.disabled=a[6]),g[0]&33554432&&ge(s,a[25]),a[18]?_?(_.p(a,g),g[0]&262144&&b(_,1)):(_=Ke(a),_.c(),b(_,1),_.m(e,null)):_&&(ee(),y(_,1,1,()=>{_=null}),$()),(!l||g[0]&268435456)&&Z(e,"loading",a[28])},i(a){l||(b(u),b(_),l=!0)},o(a){y(u),y(_),l=!1},d(a){a&&G(e),u&&u.d(),n[66](null),_&&_.d(),o=!1,rt(f)}}}function Tn(n){let e,t,s,i=n[27]&&Qe(),l=Je(n[15]),o=[];for(let u=0;u<l.length;u+=1)o[u]=Xe(ze(n,l,u));const f=u=>y(o[u],1,1,()=>{o[u]=null});return{c(){e=B("div"),i&&i.c(),t=x();for(let u=0;u<o.length;u+=1)o[u].c();p(e,"class","dialogue-container svelte-1hyf28w"),Z(e,"loading",n[27])},m(u,_){K(u,e,_),i&&i.m(e,null),P(e,t);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);n[61](e),s=!0},p(u,_){if(u[27]?i?_[0]&134217728&&b(i,1):(i=Qe(),i.c(),b(i,1),i.m(e,t)):i&&(ee(),y(i,1,1,()=>{i=null}),$()),_[0]&1690141262|_[1]&31){l=Je(u[15]);let a;for(a=0;a<l.length;a+=1){const g=ze(u,l,a);o[a]?(o[a].p(g,_),b(o[a],1)):(o[a]=Xe(g),o[a].c(),b(o[a],1),o[a].m(e,null))}for(ee(),a=l.length;a<o.length;a+=1)f(a);$()}(!s||_[0]&134217728)&&Z(e,"loading",u[27])},i(u){if(!s){b(i);for(let _=0;_<l.length;_+=1)b(o[_]);s=!0}},o(u){y(i),o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)y(o[_]);s=!1},d(u){u&&G(e),i&&i.d(),hn(o,u),n[61](null)}}}function Ge(n){let e,t,s;return{c(){e=B("div"),e.innerHTML='<div class="loading-spinner svelte-1hyf28w"></div> <div class="loading-text svelte-1hyf28w">Converting to plain text...</div>',p(e,"class","loading-overlay svelte-1hyf28w")},m(i,l){K(i,e,l),s=!0},i(i){s||(i&&ye(()=>{s&&(t||(t=ae(e,fe,{duration:200},!0)),t.run(1))}),s=!0)},o(i){i&&(t||(t=ae(e,fe,{duration:200},!1)),t.run(0)),s=!1},d(i){i&&G(e),i&&t&&t.end()}}}function Ke(n){let e,t,s,i;return t=new lt({props:{choices:n[2].map($e),filtered_indices:n[21].map(n[67]),active_index:n[21].map(n[68])[n[20]],show_options:!0}}),t.$on("change",n[69]),{c(){e=B("div"),ie(t.$$.fragment),p(e,"id","tag-menu"),p(e,"class","tag-menu-plain-text svelte-1hyf28w")},m(l,o){K(l,e,o),re(t,e,null),i=!0},p(l,o){const f={};o[0]&4&&(f.choices=l[2].map($e)),o[0]&2097156&&(f.filtered_indices=l[21].map(l[67])),o[0]&3145732&&(f.active_index=l[21].map(l[68])[l[20]]),t.$set(f)},i(l){i||(b(t.$$.fragment,l),l&&ye(()=>{i&&(s||(s=ae(e,fe,{duration:100},!0)),s.run(1))}),i=!0)},o(l){y(t.$$.fragment,l),l&&(s||(s=ae(e,fe,{duration:100},!1)),s.run(0)),i=!1},d(l){l&&G(e),oe(t),l&&s&&s.end()}}}function Qe(n){let e,t,s;return{c(){e=B("div"),e.innerHTML='<div class="loading-spinner svelte-1hyf28w"></div> <div class="loading-text svelte-1hyf28w">Converting to dialogue format...</div>',p(e,"class","loading-overlay svelte-1hyf28w")},m(i,l){K(i,e,l),s=!0},i(i){s||(i&&ye(()=>{s&&(t||(t=ae(e,fe,{duration:200},!0)),t.run(1))}),s=!0)},o(i){i&&(t||(t=ae(e,fe,{duration:200},!1)),t.run(0)),s=!1},d(i){i&&G(e),i&&t&&t.end()}}}function Dn(n){let e,t,s;function i(f){n[47](f,n[77])}function l(){return n[48](n[79],n[77])}let o={choices:n[1].map(Ze),show_label:!1,container:!0,label:""};return n[77].speaker!==void 0&&(o.value=n[77].speaker),e=new Vt({props:o}),ke.push(()=>ot(e,"value",i)),e.$on("change",l),{c(){ie(e.$$.fragment)},m(f,u){re(e,f,u),s=!0},p(f,u){n=f;const _={};u[0]&2&&(_.choices=n[1].map(Ze)),!t&&u[0]&32768&&(t=!0,_.value=n[77].speaker,it(()=>t=!1)),e.$set(_)},i(f){s||(b(e.$$.fragment,f),s=!0)},o(f){y(e.$$.fragment,f),s=!1},d(f){oe(e,f)}}}function In(n){let e,t,s;function i(){n[46].call(e,n[78],n[79])}return{c(){e=B("textarea"),e.disabled=n[6],p(e,"rows","1"),e.readOnly=!0,p(e,"class","svelte-1hyf28w")},m(l,o){K(l,e,o),ge(e,n[77].speaker),t||(s=F(e,"input",i),t=!0)},p(l,o){n=l,o[0]&64&&(e.disabled=n[6]),o[0]&32768&&ge(e,n[77].speaker)},i:De,o:De,d(l){l&&G(e),t=!1,s()}}}function Ve(n){let e,t,s,i;return t=new lt({props:{choices:n[2].map(xe),filtered_indices:n[21].map(n[56]),active_index:n[21].map(n[57])[n[20]],show_options:!0,offset_from_top:n[23],from_top:!0}}),t.$on("change",n[58]),{c(){e=B("div"),ie(t.$$.fragment),p(e,"id","tag-menu"),p(e,"class","tag-menu svelte-1hyf28w")},m(l,o){K(l,e,o),re(t,e,null),i=!0},p(l,o){const f={};o[0]&4&&(f.choices=l[2].map(xe)),o[0]&2097156&&(f.filtered_indices=l[21].map(l[56])),o[0]&3145732&&(f.active_index=l[21].map(l[57])[l[20]]),o[0]&8388608&&(f.offset_from_top=l[23]),t.$set(f)},i(l){i||(b(t.$$.fragment,l),l&&ye(()=>{i&&(s||(s=ae(e,fe,{duration:100},!0)),s.run(1))}),i=!0)},o(l){y(t.$$.fragment,l),l&&(s||(s=ae(e,fe,{duration:100},!1)),s.run(0)),i=!1},d(l){l&&G(e),oe(t),l&&s&&s.end()}}}function We(n){let e,t,s,i,l,o;s=new Gt({});function f(){return n[59](n[79])}return{c(){e=B("div"),t=B("button"),ie(s.$$.fragment),p(t,"class","add-button svelte-1hyf28w"),p(t,"aria-label","Add new line"),t.disabled=n[6],p(e,"class","svelte-1hyf28w"),Z(e,"action-column",n[79]==0),Z(e,"hidden",n[6])},m(u,_){K(u,e,_),P(e,t),re(s,t,null),i=!0,l||(o=F(t,"click",f),l=!0)},p(u,_){n=u,(!i||_[0]&64)&&(t.disabled=n[6]),(!i||_[0]&64)&&Z(e,"hidden",n[6])},i(u){i||(b(s.$$.fragment,u),i=!0)},o(u){y(s.$$.fragment,u),i=!1},d(u){u&&G(e),oe(s),l=!1,o()}}}function Xe(n){let e,t,s,i,l,o,f,u,_=n[79],a,g,m,v,j,L,W,k,h,C;const w=[In,Dn],I=[];function R(E,N){return E[6]?0:1}s=R(n),i=I[s]=w[s](n);function z(){return n[49](n[77])}function O(){n[51].call(u,n[78],n[79])}function V(...E){return n[52](n[79],...E)}function S(...E){return n[53](n[79],...E)}function Q(...E){return n[54](n[79],...E)}const X=()=>n[55](u,_),_e=()=>n[55](null,_);let T=n[18]&&n[19]===n[79]&&Ve(n),D=(n[9]==null||n[9]&&n[79]<n[9]-1)&&We(n);L=new Qt({});function q(){return n[60](n[79])}return{c(){e=B("div"),t=B("div"),i.c(),l=x(),o=B("div"),f=B("div"),u=B("textarea"),a=x(),T&&T.c(),g=x(),D&&D.c(),m=x(),v=B("div"),j=B("button"),ie(L.$$.fragment),W=x(),p(t,"class","speaker-column svelte-1hyf28w"),p(t,"role","button"),p(t,"tabindex","0"),p(u,"placeholder",n[3]),u.disabled=n[6],p(u,"rows","1"),p(u,"class","svelte-1hyf28w"),p(f,"class","input-container svelte-1hyf28w"),p(o,"class","text-column svelte-1hyf28w"),p(j,"class","delete-button svelte-1hyf28w"),p(j,"aria-label","Remove current line"),j.disabled=n[6],p(v,"class","action-column svelte-1hyf28w"),Z(v,"hidden",n[6]||n[79]==0),p(e,"class","dialogue-line svelte-1hyf28w"),je(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},m(E,N){K(E,e,N),P(e,t),I[s].m(t,null),P(e,l),P(e,o),P(o,f),P(f,u),ge(u,n[77].text),X(),P(f,a),T&&T.m(f,null),P(e,g),D&&D.m(e,null),P(e,m),P(e,v),P(v,j),re(L,j,null),P(e,W),k=!0,h||(C=[F(t,"mouseenter",z),F(t,"mouseleave",n[50]),F(u,"input",O),F(u,"input",V),F(u,"focus",S),F(u,"keydown",Q),F(j,"click",q)],h=!0)},p(E,N){n=E;let c=s;s=R(n),s===c?I[s].p(n,N):(ee(),y(I[c],1,1,()=>{I[c]=null}),$(),i=I[s],i?i.p(n,N):(i=I[s]=w[s](n),i.c()),b(i,1),i.m(t,null)),(!k||N[0]&8)&&p(u,"placeholder",n[3]),(!k||N[0]&64)&&(u.disabled=n[6]),N[0]&32768&&ge(u,n[77].text),_!==n[79]&&(_e(),_=n[79],X()),n[18]&&n[19]===n[79]?T?(T.p(n,N),N[0]&786432&&b(T,1)):(T=Ve(n),T.c(),b(T,1),T.m(f,null)):T&&(ee(),y(T,1,1,()=>{T=null}),$()),n[9]==null||n[9]&&n[79]<n[9]-1?D?(D.p(n,N),N[0]&512&&b(D,1)):(D=We(n),D.c(),b(D,1),D.m(e,m)):D&&(ee(),y(D,1,1,()=>{D=null}),$()),(!k||N[0]&64)&&(j.disabled=n[6]),(!k||N[0]&64)&&Z(v,"hidden",n[6]||n[79]==0),(!k||N[0]&604012608)&&je(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},i(E){k||(b(i),b(T),b(D),b(L.$$.fragment,E),k=!0)},o(E){y(i),y(T),y(D),y(L.$$.fragment,E),k=!1},d(E){E&&G(e),I[s].d(),_e(),T&&T.d(),D&&D.d(),oe(L),h=!1,rt(C)}}}function Ye(n){let e,t,s,i,l,o;return s=new Kt({}),{c(){e=B("div"),t=B("button"),ie(s.$$.fragment),p(t,"class","submit-button svelte-1hyf28w"),t.disabled=n[6],p(e,"class","submit-container svelte-1hyf28w")},m(f,u){K(f,e,u),P(e,t),re(s,t,null),i=!0,l||(o=F(t,"click",n[39]),l=!0)},p(f,u){(!i||u[0]&64)&&(t.disabled=f[6])},i(f){i||(b(s.$$.fragment,f),i=!0)},o(f){y(s.$$.fragment,f),i=!1},d(f){f&&G(e),oe(s),l=!1,o()}}}function On(n){let e,t,s,i,l,o,f,u,_,a,g,m=n[7]&&n[10]&&Ue(n);s=new zt({props:{show_label:n[7],info:n[5],$$slots:{default:[Cn]},$$scope:{ctx:n}}});let v=n[1].length!==0&&n[12]==="both"&&Fe(n);const j=[Tn,Sn],L=[];function W(h,C){return!h[14]&&h[12]!=="text"?0:h[14]&&h[12]!=="dialogue"?1:-1}~(o=W(n))&&(f=L[o]=j[o](n));let k=n[11]&&!n[6]&&Ye(n);return{c(){e=B("label"),m&&m.c(),t=x(),ie(s.$$.fragment),i=x(),v&&v.c(),l=x(),f&&f.c(),u=x(),k&&k.c(),p(e,"class","svelte-1hyf28w"),Z(e,"container",n[8])},m(h,C){K(h,e,C),m&&m.m(e,null),P(e,t),re(s,e,null),P(e,i),v&&v.m(e,null),P(e,l),~o&&L[o].m(e,null),P(e,u),k&&k.m(e,null),_=!0,a||(g=F(window,"click",n[36]),a=!0)},p(h,C){h[7]&&h[10]?m?(m.p(h,C),C[0]&1152&&b(m,1)):(m=Ue(h),m.c(),b(m,1),m.m(e,t)):m&&(ee(),y(m,1,1,()=>{m=null}),$());const w={};C[0]&128&&(w.show_label=h[7]),C[0]&32&&(w.info=h[5]),C[0]&16|C[2]&262144&&(w.$$scope={dirty:C,ctx:h}),s.$set(w),h[1].length!==0&&h[12]==="both"?v?(v.p(h,C),C[0]&4098&&b(v,1)):(v=Fe(h),v.c(),b(v,1),v.m(e,l)):v&&(ee(),y(v,1,1,()=>{v=null}),$());let I=o;o=W(h),o===I?~o&&L[o].p(h,C):(f&&(ee(),y(L[I],1,1,()=>{L[I]=null}),$()),~o?(f=L[o],f?f.p(h,C):(f=L[o]=j[o](h),f.c()),b(f,1),f.m(e,u)):f=null),h[11]&&!h[6]?k?(k.p(h,C),C[0]&2112&&b(k,1)):(k=Ye(h),k.c(),b(k,1),k.m(e,null)):k&&(ee(),y(k,1,1,()=>{k=null}),$()),(!_||C[0]&256)&&Z(e,"container",h[8])},i(h){_||(b(m),b(s.$$.fragment,h),b(v),b(f),b(k),_=!0)},o(h){y(m),y(s.$$.fragment,h),y(v),y(f),y(k),_=!1},d(h){h&&G(e),m&&m.d(),oe(s),v&&v.d(),~o&&L[o].d(),k&&k.d(),a=!1,g()}}}function En(n,e){const t=n.lastIndexOf(":",e-1);return t>=0?n.substring(t+1,e):""}const Ze=n=>[n,n],xe=(n,e)=>[n,e],$e=(n,e)=>[n,e];function Bn(n,e,t){let{speakers:s=[]}=e,{tags:i=[]}=e,{value:l=[]}=e,{value_is_output:o=!1}=e,{placeholder:f=void 0}=e,{label:u}=e,{info:_=void 0}=e,{disabled:a=!1}=e,{show_label:g=!0}=e,{container:m=!0}=e,{max_lines:v=void 0}=e,{show_copy_button:j=!1}=e,{show_submit_button:L=!0}=e,{color_map:W=null}=e,{ui_mode:k="both"}=e,h=k==="text",{server:C}=e,w=[];l&&l.length&&typeof l!="string"?w=[...l]:l&&typeof l!="string"&&(w=[{speaker:`${s.length?s[0]:""}`,text:""}]);let I,R=!1,z=-1,O=0,V=[],S=[],Q,X=JSON.stringify(l),_e=0,T=!1,D,q="",E=null,N=!1,c=!1,ue=!1;const Ne=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],ut={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let me={};s.length===0&&(h=!0,l="");function Pe(r){const d=s.length>0?s[0]:"";t(15,w=[...w.slice(0,r+1),{speaker:d,text:""},...w.slice(r+1)]),he().then(()=>{S[r+1]&&S[r+1].focus()})}function Re(r){t(15,w=[...w.slice(0,r),...w.slice(r+1)])}function Ce(r,d,A){t(15,w[r][d]=A,w),t(15,w=[...w])}function be(r,d){const A=r.target||HTMLTextAreaElement;A&&!S[d]&&t(16,S[d]=A,S);const Y=A.selectionStart||0,te=A.value;let ne=!1,se=-1;if(te[Y-1]===":"){t(19,z=d),se=Y;const H=En(te,Y);t(21,V=i.filter(J=>H===""||J.toLowerCase().includes(H.toLowerCase()))),ne=V.length>0,t(20,O=0)}else{const H=te.lastIndexOf(":",Y-1);if(H>=0&&!te.substring(H+1,Y).includes(" ")){t(19,z=d),se=H+1;const J=te.substring(H+1,Y);t(21,V=i.filter(le=>J===""||le.toLowerCase().includes(J.toLowerCase()))),ne=V.length>0,t(20,O=0)}}if(ne&&se!==-1){t(18,R=!0);const H=A.getBoundingClientRect();if(I){const J=I.getBoundingClientRect();t(23,_e=J.top+H.height*(d+1.5))}}else t(18,R=!1)}async function Ie(){const r=V[O];if(r){let d,A;h?(A=Q,d=q):(A=S[z],d=w[z].text);const Y=A?.selectionStart||0,te=d.lastIndexOf(":",Y-1);if(te>=0){const ne=d.substring(0,te),se=d.substring(Y);if(h){const H=`${ne}${r} ${se}`;t(25,q=H),s.length===0?t(0,l=H):t(0,l=await C.unformat({text:H})),he().then(()=>{if(Q){const J=ne.length+r.length+1;Q.setSelectionRange(J,J),Q.focus()}})}else{const H=ne.replace(/\[S\d+\]/g,"").trim(),J=`${H}${r} ${se}`;Ce(z,"text",J),he().then(()=>{const le=S[z];if(le){const ce=H.length+r.length+1;le.setSelectionRange(ce,ce),le.focus()}})}}t(18,R=!1),t(20,O=0)}}async function Oe(r){const d=i[r.detail.target.dataset.index];if(d){let A,Y;h?(Y=Q,A=q):(Y=S[z],A=w[z].text);const te=Y?.selectionStart||0,ne=A.lastIndexOf(":",te-1);if(ne>=0){const se=A.substring(0,ne),H=A.substring(te);if(h){const J=`${se}${d} ${H}`;t(25,q=J),s.length===0?t(0,l=J):t(0,l=await C.unformat({text:J})),he().then(()=>{if(Q){const le=se.length+d.length+1;Q.setSelectionRange(le,le),Q.focus()}})}else{const J=se.replace(/\[S\d+\]/g,"").trim(),le=`${J}${d} ${H}`;Ce(z,"text",le),he().then(()=>{const ce=S[z];if(ce){const qe=J.length+d.length+1;ce.setSelectionRange(qe,qe),ce.focus()}})}}t(18,R=!1),t(20,O=0)}}function ft(r){if(R){const d=r.target,A=document.getElementById("tag-menu");A&&!A.contains(d)&&t(18,R=!1)}}const Se=pn();function at(){Se("change",l),o||Se("input")}function _t(r){s.length!==0&&(t(43,ue=!0),t(0,l=[...r]))}async function we(r){return typeof r=="string"?r:await C.format(r)}async function ct(){if("clipboard"in navigator){const r=await we(l);await navigator.clipboard.writeText(r),Se("copy",{value:r}),ht()}}function ht(){t(24,T=!0),D&&clearTimeout(D),D=setTimeout(()=>{t(24,T=!1)},1e3)}async function dt(){h&&t(0,l=await C.unformat({text:q})),Se("submit")}kn(async()=>{if(typeof l=="string")t(25,q=l);else if(l&&l.length>0){const r=await we(l);t(25,q=r)}else t(25,q="")});function gt(r){h=r,t(14,h)}const mt=async r=>{if(r.detail.checked){t(28,c=!0);try{t(25,q=await we(w))}finally{t(28,c=!1)}}else{t(27,N=!0);try{t(0,l=await C.unformat({text:q})),t(15,w=[...l])}finally{t(27,N=!1)}}};function bt(r,d){r[d].speaker=this.value,t(15,w),t(0,l),t(42,X),t(43,ue),t(14,h)}function wt(r,d){n.$$.not_equal(d.speaker,r)&&(d.speaker=r,t(15,w),t(0,l),t(42,X),t(43,ue),t(14,h))}const pt=(r,d)=>Ce(r,"speaker",d.speaker),kt=r=>a&&t(26,E=r.speaker),vt=()=>a&&t(26,E=null);function yt(r,d){r[d].text=this.value,t(15,w),t(0,l),t(42,X),t(43,ue),t(14,h)}const Ct=(r,d)=>be(d,r),St=(r,d)=>be(d,r),Tt=(r,d)=>{d.key==="Escape"&&R?(t(18,R=!1),t(20,O=0),d.preventDefault()):R&&z===r&&(d.key==="ArrowDown"?(t(20,O=Math.min(O+1,V.length-1)),d.preventDefault()):d.key==="ArrowUp"?(t(20,O=Math.max(O-1,0)),d.preventDefault()):d.key==="Enter"&&(V[O]&&Ie(),d.preventDefault()))};function Dt(r,d){ke[r?"unshift":"push"](()=>{S[d]=r,t(16,S),t(15,w),t(0,l),t(42,X),t(43,ue),t(14,h)})}const It=r=>i.indexOf(r),Ot=r=>i.indexOf(r),Et=r=>Oe(r),Bt=r=>Pe(r),At=r=>Re(r);function Mt(r){ke[r?"unshift":"push"](()=>{I=r,t(17,I)})}function Lt(){q=this.value,t(25,q),t(0,l),t(42,X),t(43,ue),t(14,h),t(15,w)}const Nt=r=>{be(r,0)},Pt=r=>be(r,0),Rt=r=>{r.key==="Escape"&&R?(t(18,R=!1),t(20,O=0),r.preventDefault()):R&&(r.key==="ArrowDown"?(t(20,O=Math.min(O+1,V.length-1)),r.preventDefault()):r.key==="ArrowUp"?(t(20,O=Math.max(O-1,0)),r.preventDefault()):r.key==="Enter"&&(V[O]&&Ie(),r.preventDefault()))};function qt(r){ke[r?"unshift":"push"](()=>{Q=r,t(22,Q)})}const Ht=r=>i.indexOf(r),Jt=r=>i.indexOf(r),jt=r=>Oe(r);return n.$$set=r=>{"speakers"in r&&t(1,s=r.speakers),"tags"in r&&t(2,i=r.tags),"value"in r&&t(0,l=r.value),"value_is_output"in r&&t(40,o=r.value_is_output),"placeholder"in r&&t(3,f=r.placeholder),"label"in r&&t(4,u=r.label),"info"in r&&t(5,_=r.info),"disabled"in r&&t(6,a=r.disabled),"show_label"in r&&t(7,g=r.show_label),"container"in r&&t(8,m=r.container),"max_lines"in r&&t(9,v=r.max_lines),"show_copy_button"in r&&t(10,j=r.show_copy_button),"show_submit_button"in r&&t(11,L=r.show_submit_button),"color_map"in r&&t(41,W=r.color_map),"ui_mode"in r&&t(12,k=r.ui_mode),"server"in r&&t(13,C=r.server)},n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1024&&(W?t(29,me={...W}):(t(29,me={}),s.forEach((r,d)=>{const A=Ne[d%Ne.length];t(29,me[r]=ut[A],me)}))),n.$$.dirty[0]&49153|n.$$.dirty[1]&6144&&JSON.stringify(l)!==X&&(l==null&&t(15,w=[]),t(42,X=JSON.stringify(l)),typeof l=="string"?t(25,q=l):typeof l=="object"&&Array.isArray(l)&&(t(15,w=[...l]),(!ue||h)&&we(w).then(r=>{t(25,q=r)})),t(43,ue=!1),at()),n.$$.dirty[0]&98304&&(w.length>S.length?t(16,S=[...S,...Array(w.length-S.length).fill(null)]):w.length<S.length&&t(16,S=S.slice(0,w.length)),he().then(()=>{S.forEach(r=>{r&&r instanceof HTMLTextAreaElement&&(r.style.height="auto",r.style.height=r.scrollHeight+"px")})})),n.$$.dirty[0]&32768&&_t(w)},[l,s,i,f,u,_,a,g,m,v,j,L,k,C,h,w,S,I,R,z,O,V,Q,_e,T,q,E,N,c,me,Pe,Re,Ce,be,Ie,Oe,ft,we,ct,dt,o,W,X,ue,gt,mt,bt,wt,pt,kt,vt,yt,Ct,St,Tt,Dt,It,Ot,Et,Bt,At,Mt,Lt,Nt,Pt,Rt,qt,Ht,Jt,jt]}class An extends _n{constructor(e){super(),gn(this,e,Bn,On,mn,{speakers:1,tags:2,value:0,value_is_output:40,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,show_submit_button:11,color_map:41,ui_mode:12,server:13},null,[-1,-1,-1])}get speakers(){return this.$$.ctx[1]}set speakers(e){this.$$set({speakers:e}),U()}get tags(){return this.$$.ctx[2]}set tags(e){this.$$set({tags:e}),U()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),U()}get value_is_output(){return this.$$.ctx[40]}set value_is_output(e){this.$$set({value_is_output:e}),U()}get placeholder(){return this.$$.ctx[3]}set placeholder(e){this.$$set({placeholder:e}),U()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),U()}get info(){return this.$$.ctx[5]}set info(e){this.$$set({info:e}),U()}get disabled(){return this.$$.ctx[6]}set disabled(e){this.$$set({disabled:e}),U()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),U()}get container(){return this.$$.ctx[8]}set container(e){this.$$set({container:e}),U()}get max_lines(){return this.$$.ctx[9]}set max_lines(e){this.$$set({max_lines:e}),U()}get show_copy_button(){return this.$$.ctx[10]}set show_copy_button(e){this.$$set({show_copy_button:e}),U()}get show_submit_button(){return this.$$.ctx[11]}set show_submit_button(e){this.$$set({show_submit_button:e}),U()}get color_map(){return this.$$.ctx[41]}set color_map(e){this.$$set({color_map:e}),U()}get ui_mode(){return this.$$.ctx[12]}set ui_mode(e){this.$$set({ui_mode:e}),U()}get server(){return this.$$.ctx[13]}set server(e){this.$$set({server:e}),U()}}const Mn=An,{SvelteComponent:Ln,add_flush_callback:et,assign:Nn,bind:tt,binding_callbacks:nt,check_outros:Pn,create_component:Ae,destroy_component:Me,detach:Rn,flush:M,get_spread_object:qn,get_spread_update:Hn,group_outros:Jn,init:jn,insert:zn,mount_component:Le,safe_not_equal:Un,space:Fn,transition_in:de,transition_out:ve}=window.__gradio__svelte__internal;function st(n){let e,t;const s=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[18]];let i={};for(let l=0;l<s.length;l+=1)i=Nn(i,s[l]);return e=new Xt({props:i}),e.$on("clear_status",n[22]),{c(){Ae(e.$$.fragment)},m(l,o){Le(e,l,o),t=!0},p(l,o){const f=o[0]&262148?Hn(s,[o[0]&4&&{autoscroll:l[2].autoscroll},o[0]&4&&{i18n:l[2].i18n},o[0]&262144&&qn(l[18])]):{};e.$set(f)},i(l){t||(de(e.$$.fragment,l),t=!0)},o(l){ve(e.$$.fragment,l),t=!1},d(l){Me(e,l)}}}function Gn(n){let e,t,s,i,l,o=n[18]&&st(n);function f(a){n[23](a)}function u(a){n[24](a)}let _={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:n[17],container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],show_submit_button:n[20],server:n[3],ui_mode:n[21],disabled:!n[19]};return n[0]!==void 0&&(_.value=n[0]),n[1]!==void 0&&(_.value_is_output=n[1]),t=new Mn({props:_}),nt.push(()=>tt(t,"value",f)),nt.push(()=>tt(t,"value_is_output",u)),t.$on("change",n[25]),t.$on("input",n[26]),t.$on("submit",n[27]),t.$on("blur",n[28]),t.$on("select",n[29]),t.$on("focus",n[30]),t.$on("copy",n[31]),{c(){o&&o.c(),e=Fn(),Ae(t.$$.fragment)},m(a,g){o&&o.m(a,g),zn(a,e,g),Le(t,a,g),l=!0},p(a,g){a[18]?o?(o.p(a,g),g[0]&262144&&de(o,1)):(o=st(a),o.c(),de(o,1),o.m(e.parentNode,e)):o&&(Jn(),ve(o,1,1,()=>{o=null}),Pn());const m={};g[0]&16&&(m.label=a[4]),g[0]&128&&(m.info=a[7]),g[0]&4096&&(m.show_label=a[12]),g[0]&8192&&(m.max_lines=a[13]),g[0]&131072&&(m.show_copy_button=a[17]),g[0]&16384&&(m.container=a[14]),g[0]&32&&(m.speakers=a[5]),g[0]&64&&(m.tags=a[6]),g[0]&256&&(m.placeholder=a[8]),g[0]&1048576&&(m.show_submit_button=a[20]),g[0]&8&&(m.server=a[3]),g[0]&2097152&&(m.ui_mode=a[21]),g[0]&524288&&(m.disabled=!a[19]),!s&&g[0]&1&&(s=!0,m.value=a[0],et(()=>s=!1)),!i&&g[0]&2&&(i=!0,m.value_is_output=a[1],et(()=>i=!1)),t.$set(m)},i(a){l||(de(o),de(t.$$.fragment,a),l=!0)},o(a){ve(o),ve(t.$$.fragment,a),l=!1},d(a){a&&Rn(e),o&&o.d(a),Me(t,a)}}}function Kn(n){let e,t;return e=new Wt({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[Gn]},$$scope:{ctx:n}}}),{c(){Ae(e.$$.fragment)},m(s,i){Le(e,s,i),t=!0},p(s,i){const l={};i[0]&2048&&(l.visible=s[11]),i[0]&512&&(l.elem_id=s[9]),i[0]&1024&&(l.elem_classes=s[10]),i[0]&32768&&(l.scale=s[15]),i[0]&65536&&(l.min_width=s[16]),i[0]&16384&&(l.padding=s[14]),i[0]&4092415|i[1]&2&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){t||(de(e.$$.fragment,s),t=!0)},o(s){ve(e.$$.fragment,s),t=!1},d(s){Me(e,s)}}}function Qn(n,e,t){let{gradio:s}=e,{server:i}=e,{label:l="Dialogue"}=e,{speakers:o=[]}=e,{tags:f=[]}=e,{info:u=void 0}=e,{placeholder:_=void 0}=e,{elem_id:a=""}=e,{elem_classes:g=[]}=e,{visible:m=!0}=e,{value:v=[]}=e,{show_label:j}=e,{max_lines:L=void 0}=e,{container:W=!0}=e,{scale:k=null}=e,{min_width:h=void 0}=e,{show_copy_button:C=!1}=e,{loading_status:w=void 0}=e,{value_is_output:I=!1}=e,{interactive:R}=e,{show_submit_button:z=!0}=e,{ui_mode:O="both"}=e;const V=()=>s.dispatch("clear_status",w);function S(c){v=c,t(0,v)}function Q(c){I=c,t(1,I)}const X=()=>s.dispatch("change",v),_e=()=>s.dispatch("input"),T=()=>s.dispatch("submit"),D=()=>s.dispatch("blur"),q=c=>s.dispatch("select",c.detail),E=()=>s.dispatch("focus"),N=c=>s.dispatch("copy",c.detail);return n.$$set=c=>{"gradio"in c&&t(2,s=c.gradio),"server"in c&&t(3,i=c.server),"label"in c&&t(4,l=c.label),"speakers"in c&&t(5,o=c.speakers),"tags"in c&&t(6,f=c.tags),"info"in c&&t(7,u=c.info),"placeholder"in c&&t(8,_=c.placeholder),"elem_id"in c&&t(9,a=c.elem_id),"elem_classes"in c&&t(10,g=c.elem_classes),"visible"in c&&t(11,m=c.visible),"value"in c&&t(0,v=c.value),"show_label"in c&&t(12,j=c.show_label),"max_lines"in c&&t(13,L=c.max_lines),"container"in c&&t(14,W=c.container),"scale"in c&&t(15,k=c.scale),"min_width"in c&&t(16,h=c.min_width),"show_copy_button"in c&&t(17,C=c.show_copy_button),"loading_status"in c&&t(18,w=c.loading_status),"value_is_output"in c&&t(1,I=c.value_is_output),"interactive"in c&&t(19,R=c.interactive),"show_submit_button"in c&&t(20,z=c.show_submit_button),"ui_mode"in c&&t(21,O=c.ui_mode)},[v,I,s,i,l,o,f,u,_,a,g,m,j,L,W,k,h,C,w,R,z,O,V,S,Q,X,_e,T,D,q,E,N]}class gs extends Ln{constructor(e){super(),jn(this,e,Qn,Kn,Un,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,show_copy_button:17,loading_status:18,value_is_output:1,interactive:19,show_submit_button:20,ui_mode:21},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(e){this.$$set({gradio:e}),M()}get server(){return this.$$.ctx[3]}set server(e){this.$$set({server:e}),M()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),M()}get speakers(){return this.$$.ctx[5]}set speakers(e){this.$$set({speakers:e}),M()}get tags(){return this.$$.ctx[6]}set tags(e){this.$$set({tags:e}),M()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),M()}get placeholder(){return this.$$.ctx[8]}set placeholder(e){this.$$set({placeholder:e}),M()}get elem_id(){return this.$$.ctx[9]}set elem_id(e){this.$$set({elem_id:e}),M()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(e){this.$$set({elem_classes:e}),M()}get visible(){return this.$$.ctx[11]}set visible(e){this.$$set({visible:e}),M()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),M()}get show_label(){return this.$$.ctx[12]}set show_label(e){this.$$set({show_label:e}),M()}get max_lines(){return this.$$.ctx[13]}set max_lines(e){this.$$set({max_lines:e}),M()}get container(){return this.$$.ctx[14]}set container(e){this.$$set({container:e}),M()}get scale(){return this.$$.ctx[15]}set scale(e){this.$$set({scale:e}),M()}get min_width(){return this.$$.ctx[16]}set min_width(e){this.$$set({min_width:e}),M()}get show_copy_button(){return this.$$.ctx[17]}set show_copy_button(e){this.$$set({show_copy_button:e}),M()}get loading_status(){return this.$$.ctx[18]}set loading_status(e){this.$$set({loading_status:e}),M()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(e){this.$$set({value_is_output:e}),M()}get interactive(){return this.$$.ctx[19]}set interactive(e){this.$$set({interactive:e}),M()}get show_submit_button(){return this.$$.ctx[20]}set show_submit_button(e){this.$$set({show_submit_button:e}),M()}get ui_mode(){return this.$$.ctx[21]}set ui_mode(e){this.$$set({ui_mode:e}),M()}}export{Mn as BaseDialogue,ws as BaseExample,gs as default};
//# sourceMappingURL=Index-eLjoXyN7.js.map
