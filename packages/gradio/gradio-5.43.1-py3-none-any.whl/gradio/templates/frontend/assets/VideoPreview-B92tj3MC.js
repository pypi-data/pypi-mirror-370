/* empty css                                                        */import"./MarkdownCode.svelte_svelte_type_style_lang-DqSyeVpi.js";import{B as Tt}from"./BlockLabel-BBGJEuAL.js";import{I as Ze}from"./IconButton-BYr8xyoS.js";import{E as Vt}from"./Empty-bLNTKrFA.js";import{S as Dt}from"./ShareButton-CxO0NbY-.js";import{D as St}from"./Download-DVtk-Jv3.js";import{V as vt}from"./Video-fsmLZWjA.js";import{I as qt}from"./IconButtonWrapper-BGXYrwVF.js";import{n as Rt}from"./index-D4QfqgLg.js";import{f as fe,u as Lt}from"./utils-BsGrhMNe.js";import{D as Mt}from"./DownloadLink-QIttOhoR.js";import{M as Ct}from"./Maximize-BhYEg8t_.js";import{T as Pt,P as Bt}from"./Trim-JQYgj7Jd.js";import{P as It}from"./Play-B0Q0U1Qz.js";import{U as pt}from"./Undo-DCjBnnSO.js";import{b as At,t as Nt,V as Xt}from"./Video-DtShVFLe.js";/* empty css                                             */import{M as Ht}from"./ModifyUpload-C9rAP5ou.js";const{SvelteComponent:Ut,append:se,attr:I,destroy_block:zt,detach:Ae,element:re,ensure_array_like:et,flush:pe,init:Ft,insert:Ne,listen:ue,noop:Ke,run_all:$t,safe_not_equal:jt,set_style:Z,space:We,src_url_equal:tt,update_keyed_each:Ot}=window.__gradio__svelte__internal,{onMount:nt,onDestroy:Wt}=window.__gradio__svelte__internal;function it(i,e,n){const t=i.slice();return t[20]=e[n],t[22]=n,t}function Gt(i){let e,n,t,l,o,r=[],a=new Map,f,g,_,u,d=et(i[1]);const c=w=>w[22];for(let w=0;w<d.length;w+=1){let v=it(i,d,w),k=c(v);a.set(k,r[w]=lt(k,v))}return{c(){e=re("div"),n=re("button"),t=We(),l=re("div"),o=We();for(let w=0;w<r.length;w+=1)r[w].c();f=We(),g=re("button"),I(n,"aria-label","start drag handle for trimming video"),I(n,"class","handle left svelte-10c4beq"),Z(n,"left",i[2]+"%"),I(l,"class","opaque-layer svelte-10c4beq"),Z(l,"left",i[2]+"%"),Z(l,"right",100-i[3]+"%"),I(g,"aria-label","end drag handle for trimming video"),I(g,"class","handle right svelte-10c4beq"),Z(g,"left",i[3]+"%"),I(e,"id","timeline"),I(e,"class","thumbnail-wrapper svelte-10c4beq")},m(w,v){Ne(w,e,v),se(e,n),se(e,t),se(e,l),se(e,o);for(let k=0;k<r.length;k+=1)r[k]&&r[k].m(e,null);se(e,f),se(e,g),_||(u=[ue(n,"mousedown",i[10]),ue(n,"blur",i[5]),ue(n,"keydown",i[11]),ue(g,"mousedown",i[12]),ue(g,"blur",i[5]),ue(g,"keydown",i[13])],_=!0)},p(w,v){v&4&&Z(n,"left",w[2]+"%"),v&4&&Z(l,"left",w[2]+"%"),v&8&&Z(l,"right",100-w[3]+"%"),v&2&&(d=et(w[1]),r=Ot(r,v,c,1,w,d,a,e,zt,lt,f,it)),v&8&&Z(g,"left",w[3]+"%")},d(w){w&&Ae(e);for(let v=0;v<r.length;v+=1)r[v].d();_=!1,$t(u)}}}function Jt(i){let e;return{c(){e=re("div"),e.innerHTML='<span aria-label="loading timeline" class="loader svelte-10c4beq"></span>',I(e,"class","load-wrap svelte-10c4beq")},m(n,t){Ne(n,e,t)},p:Ke,d(n){n&&Ae(e)}}}function lt(i,e){let n,t,l;return{key:i,first:null,c(){n=re("img"),tt(n.src,t=e[20])||I(n,"src",t),I(n,"alt",l=`frame-${e[22]}`),I(n,"draggable","false"),I(n,"class","svelte-10c4beq"),this.first=n},m(o,r){Ne(o,n,r)},p(o,r){e=o,r&2&&!tt(n.src,t=e[20])&&I(n,"src",t),r&2&&l!==(l=`frame-${e[22]}`)&&I(n,"alt",l)},d(o){o&&Ae(n)}}}function Kt(i){let e;function n(o,r){return o[0]?Jt:Gt}let t=n(i),l=t(i);return{c(){e=re("div"),l.c(),I(e,"class","container svelte-10c4beq")},m(o,r){Ne(o,e,r),l.m(e,null)},p(o,[r]){t===(t=n(o))&&l?l.p(o,r):(l.d(1),l=t(o),l&&(l.c(),l.m(e,null)))},i:Ke,o:Ke,d(o){o&&Ae(e),l.d()}}}let Ge=10;function Qt(i,e,n){let{videoElement:t}=e,{trimmedDuration:l}=e,{dragStart:o}=e,{dragEnd:r}=e,{loadingTimeline:a}=e,f=[],g,_=0,u=100,d=null;const c=h=>{d=h},w=()=>{d=null},v=(h,T)=>{if(d){const y=document.getElementById("timeline");if(!y)return;const m=y.getBoundingClientRect();let D=(h.clientX-m.left)/m.width*100;if(T?D=d==="left"?_+T:u+T:D=(h.clientX-m.left)/m.width*100,D=Math.max(0,Math.min(D,100)),d==="left"){n(2,_=Math.min(D,u));const M=_/100*g;n(6,t.currentTime=M,t),n(8,o=M)}else if(d==="right"){n(3,u=Math.max(D,_));const M=u/100*g;n(6,t.currentTime=M,t),n(9,r=M)}const G=_/100*g,p=u/100*g;n(7,l=p-G),n(2,_),n(3,u)}},k=h=>{if(d){const T=1/g*100;h.key==="ArrowLeft"?v({clientX:0},-T):h.key==="ArrowRight"&&v({clientX:0},T)}},P=()=>{const h=document.createElement("canvas"),T=h.getContext("2d");if(!T)return;h.width=t.videoWidth,h.height=t.videoHeight,T.drawImage(t,0,0,h.width,h.height);const y=h.toDataURL("image/jpeg",.7);n(1,f=[...f,y])};nt(()=>{const h=()=>{g=t.duration;const T=g/Ge;let y=0;const m=()=>{P(),y++,y<Ge?n(6,t.currentTime+=T,t):t.removeEventListener("seeked",m)};t.addEventListener("seeked",m),n(6,t.currentTime=0,t)};t.readyState>=1?h():t.addEventListener("loadedmetadata",h)}),Wt(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",w),window.removeEventListener("keydown",k)}),nt(()=>{window.addEventListener("mousemove",v),window.addEventListener("mouseup",w),window.addEventListener("keydown",k)});const A=()=>c("left"),B=h=>{(h.key==="ArrowLeft"||h.key=="ArrowRight")&&c("left")},H=()=>c("right"),L=h=>{(h.key==="ArrowLeft"||h.key=="ArrowRight")&&c("right")};return i.$$set=h=>{"videoElement"in h&&n(6,t=h.videoElement),"trimmedDuration"in h&&n(7,l=h.trimmedDuration),"dragStart"in h&&n(8,o=h.dragStart),"dragEnd"in h&&n(9,r=h.dragEnd),"loadingTimeline"in h&&n(0,a=h.loadingTimeline)},i.$$.update=()=>{i.$$.dirty&2&&n(0,a=f.length!==Ge)},[a,f,_,u,c,w,t,l,o,r,A,B,H,L]}class Yt extends Ut{constructor(e){super(),Ft(this,e,Qt,Kt,jt,{videoElement:6,trimmedDuration:7,dragStart:8,dragEnd:9,loadingTimeline:0})}get videoElement(){return this.$$.ctx[6]}set videoElement(e){this.$$set({videoElement:e}),pe()}get trimmedDuration(){return this.$$.ctx[7]}set trimmedDuration(e){this.$$set({trimmedDuration:e}),pe()}get dragStart(){return this.$$.ctx[8]}set dragStart(e){this.$$set({dragStart:e}),pe()}get dragEnd(){return this.$$.ctx[9]}set dragEnd(e){this.$$set({dragEnd:e}),pe()}get loadingTimeline(){return this.$$.ctx[0]}set loadingTimeline(e){this.$$set({loadingTimeline:e}),pe()}}const{SvelteComponent:Zt,add_flush_callback:Re,append:ce,attr:O,bind:Le,binding_callbacks:Me,check_outros:Qe,create_component:Xe,destroy_component:He,detach:Q,element:ee,empty:xt,flush:U,group_outros:Ye,init:en,insert:Y,listen:ot,mount_component:Ue,noop:tn,run_all:nn,safe_not_equal:ln,set_data:on,space:Ve,text:rn,toggle_class:x,transition_in:X,transition_out:W}=window.__gradio__svelte__internal,{onMount:an}=window.__gradio__svelte__internal;function rt(i){let e,n,t,l,o,r,a;function f(c){i[18](c)}function g(c){i[19](c)}function _(c){i[20](c)}function u(c){i[21](c)}let d={videoElement:i[2]};return i[14]!==void 0&&(d.dragStart=i[14]),i[15]!==void 0&&(d.dragEnd=i[15]),i[12]!==void 0&&(d.trimmedDuration=i[12]),i[16]!==void 0&&(d.loadingTimeline=i[16]),n=new Yt({props:d}),Me.push(()=>Le(n,"dragStart",f)),Me.push(()=>Le(n,"dragEnd",g)),Me.push(()=>Le(n,"trimmedDuration",_)),Me.push(()=>Le(n,"loadingTimeline",u)),{c(){e=ee("div"),Xe(n.$$.fragment),O(e,"class","timeline-wrapper svelte-7yrr5f")},m(c,w){Y(c,e,w),Ue(n,e,null),a=!0},p(c,w){const v={};w&4&&(v.videoElement=c[2]),!t&&w&16384&&(t=!0,v.dragStart=c[14],Re(()=>t=!1)),!l&&w&32768&&(l=!0,v.dragEnd=c[15],Re(()=>l=!1)),!o&&w&4096&&(o=!0,v.trimmedDuration=c[12],Re(()=>o=!1)),!r&&w&65536&&(r=!0,v.loadingTimeline=c[16],Re(()=>r=!1)),n.$set(v)},i(c){a||(X(n.$$.fragment,c),a=!0)},o(c){W(n.$$.fragment,c),a=!1},d(c){c&&Q(e),He(n)}}}function sn(i){let e;return{c(){e=ee("div"),O(e,"class","svelte-7yrr5f")},m(n,t){Y(n,e,t)},p:tn,d(n){n&&Q(e)}}}function un(i){let e,n=fe(i[12])+"",t,l,o,r,a,f,g,_;return{c(){e=ee("time"),t=rn(n),l=Ve(),o=ee("div"),r=ee("button"),r.textContent="Trim",a=Ve(),f=ee("button"),f.textContent="Cancel",O(e,"aria-label","duration of selected region in seconds"),O(e,"class","svelte-7yrr5f"),x(e,"hidden",i[16]),O(r,"class","text-button svelte-7yrr5f"),x(r,"hidden",i[16]),O(f,"class","text-button svelte-7yrr5f"),x(f,"hidden",i[16]),O(o,"class","edit-buttons svelte-7yrr5f")},m(u,d){Y(u,e,d),ce(e,t),Y(u,l,d),Y(u,o,d),ce(o,r),ce(o,a),ce(o,f),g||(_=[ot(r,"click",i[22]),ot(f,"click",i[17])],g=!0)},p(u,d){d&4096&&n!==(n=fe(u[12])+"")&&on(t,n),d&65536&&x(e,"hidden",u[16]),d&65536&&x(r,"hidden",u[16]),d&65536&&x(f,"hidden",u[16])},d(u){u&&(Q(e),Q(l),Q(o)),g=!1,nn(_)}}}function at(i){let e,n;return e=new Ze({props:{Icon:pt,label:"Reset video to initial value",disabled:i[1]||!i[11]}}),e.$on("click",i[23]),{c(){Xe(e.$$.fragment)},m(t,l){Ue(e,t,l),n=!0},p(t,l){const o={};l&2050&&(o.disabled=t[1]||!t[11]),e.$set(o)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){He(e,t)}}}function st(i){let e,n;return e=new Ze({props:{Icon:Pt,label:"Trim video to selection",disabled:i[1]}}),e.$on("click",i[17]),{c(){Xe(e.$$.fragment)},m(t,l){Ue(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.disabled=t[1]),e.$set(o)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){He(e,t)}}}function _n(i){let e,n,t,l=i[3]&&i[0]===""&&at(i),o=i[4]&&i[0]===""&&st(i);return{c(){l&&l.c(),e=Ve(),o&&o.c(),n=xt()},m(r,a){l&&l.m(r,a),Y(r,e,a),o&&o.m(r,a),Y(r,n,a),t=!0},p(r,a){r[3]&&r[0]===""?l?(l.p(r,a),a&9&&X(l,1)):(l=at(r),l.c(),X(l,1),l.m(e.parentNode,e)):l&&(Ye(),W(l,1,1,()=>{l=null}),Qe()),r[4]&&r[0]===""?o?(o.p(r,a),a&17&&X(o,1)):(o=st(r),o.c(),X(o,1),o.m(n.parentNode,n)):o&&(Ye(),W(o,1,1,()=>{o=null}),Qe())},i(r){t||(X(l),X(o),t=!0)},o(r){W(l),W(o),t=!1},d(r){r&&(Q(e),Q(n)),l&&l.d(r),o&&o.d(r)}}}function dn(i){let e,n,t,l,o,r,a=i[0]==="edit"&&rt(i);function f(u,d){return u[0]==="edit"&&u[12]!==null?un:sn}let g=f(i),_=g(i);return o=new Ht({props:{i18n:i[7],download:i[9]?i[8]?.url:null,$$slots:{default:[_n]},$$scope:{ctx:i}}}),o.$on("clear",i[24]),{c(){e=ee("div"),a&&a.c(),n=Ve(),t=ee("div"),_.c(),l=Ve(),Xe(o.$$.fragment),O(t,"class","controls svelte-7yrr5f"),O(t,"data-testid","waveform-controls"),O(e,"class","container svelte-7yrr5f"),x(e,"hidden",i[0]!=="edit")},m(u,d){Y(u,e,d),a&&a.m(e,null),ce(e,n),ce(e,t),_.m(t,null),Y(u,l,d),Ue(o,u,d),r=!0},p(u,[d]){u[0]==="edit"?a?(a.p(u,d),d&1&&X(a,1)):(a=rt(u),a.c(),X(a,1),a.m(e,n)):a&&(Ye(),W(a,1,1,()=>{a=null}),Qe()),g===(g=f(u))&&_?_.p(u,d):(_.d(1),_=g(u),_&&(_.c(),_.m(t,null))),(!r||d&1)&&x(e,"hidden",u[0]!=="edit");const c={};d&128&&(c.i18n=u[7]),d&768&&(c.download=u[9]?u[8]?.url:null),d&33556539&&(c.$$scope={dirty:d,ctx:u}),o.$set(c)},i(u){r||(X(a),X(o.$$.fragment,u),r=!0)},o(u){W(a),W(o.$$.fragment,u),r=!1},d(u){u&&(Q(e),Q(l)),a&&a.d(),_.d(),He(o,u)}}}function fn(i,e,n){let{videoElement:t}=e,{showRedo:l=!1}=e,{interactive:o=!0}=e,{mode:r=""}=e,{handle_reset_value:a}=e,{handle_trim_video:f}=e,{processingVideo:g=!1}=e,{i18n:_}=e,{value:u=null}=e,{show_download_button:d=!1}=e,{handle_clear:c=()=>{}}=e,{has_change_history:w=!1}=e,v;an(async()=>{n(13,v=await At())});let k=null,P=0,A=0,B=!1;const H=()=>{r==="edit"?(n(0,r=""),n(12,k=t.duration)):n(0,r="edit")};function L(p){P=p,n(14,P)}function h(p){A=p,n(15,A)}function T(p){k=p,n(12,k),n(0,r),n(2,t)}function y(p){B=p,n(16,B)}const m=()=>{n(0,r=""),n(1,g=!0),Nt(v,P,A,t).then(p=>{f(p)}).then(()=>{n(1,g=!1)})},D=()=>{a(),n(0,r="")},G=()=>c();return i.$$set=p=>{"videoElement"in p&&n(2,t=p.videoElement),"showRedo"in p&&n(3,l=p.showRedo),"interactive"in p&&n(4,o=p.interactive),"mode"in p&&n(0,r=p.mode),"handle_reset_value"in p&&n(5,a=p.handle_reset_value),"handle_trim_video"in p&&n(6,f=p.handle_trim_video),"processingVideo"in p&&n(1,g=p.processingVideo),"i18n"in p&&n(7,_=p.i18n),"value"in p&&n(8,u=p.value),"show_download_button"in p&&n(9,d=p.show_download_button),"handle_clear"in p&&n(10,c=p.handle_clear),"has_change_history"in p&&n(11,w=p.has_change_history)},i.$$.update=()=>{i.$$.dirty&4101&&r==="edit"&&k===null&&t&&n(12,k=t.duration)},[r,g,t,l,o,a,f,_,u,d,c,w,k,v,P,A,B,H,L,h,T,y,m,D,G]}class cn extends Zt{constructor(e){super(),en(this,e,fn,dn,ln,{videoElement:2,showRedo:3,interactive:4,mode:0,handle_reset_value:5,handle_trim_video:6,processingVideo:1,i18n:7,value:8,show_download_button:9,handle_clear:10,has_change_history:11})}get videoElement(){return this.$$.ctx[2]}set videoElement(e){this.$$set({videoElement:e}),U()}get showRedo(){return this.$$.ctx[3]}set showRedo(e){this.$$set({showRedo:e}),U()}get interactive(){return this.$$.ctx[4]}set interactive(e){this.$$set({interactive:e}),U()}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),U()}get handle_reset_value(){return this.$$.ctx[5]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),U()}get handle_trim_video(){return this.$$.ctx[6]}set handle_trim_video(e){this.$$set({handle_trim_video:e}),U()}get processingVideo(){return this.$$.ctx[1]}set processingVideo(e){this.$$set({processingVideo:e}),U()}get i18n(){return this.$$.ctx[7]}set i18n(e){this.$$set({i18n:e}),U()}get value(){return this.$$.ctx[8]}set value(e){this.$$set({value:e}),U()}get show_download_button(){return this.$$.ctx[9]}set show_download_button(e){this.$$set({show_download_button:e}),U()}get handle_clear(){return this.$$.ctx[10]}set handle_clear(e){this.$$set({handle_clear:e}),U()}get has_change_history(){return this.$$.ctx[11]}set has_change_history(e){this.$$set({has_change_history:e}),U()}}const{SvelteComponent:mn,add_flush_callback:ye,append:N,attr:R,bind:Ee,binding_callbacks:Te,bubble:_e,check_outros:ut,create_component:me,destroy_component:he,detach:Ce,element:K,empty:hn,flush:q,group_outros:_t,init:gn,insert:Pe,listen:oe,mount_component:ge,prevent_default:dt,run_all:bn,safe_not_equal:wn,set_data:ft,space:ke,src_url_equal:ct,stop_propagation:vn,text:Je,toggle_class:mt,transition_in:F,transition_out:j}=window.__gradio__svelte__internal,{createEventDispatcher:pn}=window.__gradio__svelte__internal;function kn(i){let e,n;return{c(){e=K("track"),R(e,"kind","captions"),ct(e.src,n=i[1])||R(e,"src",n),e.default=!0},m(t,l){Pe(t,e,l)},p(t,l){l[0]&2&&!ct(e.src,n=t[1])&&R(e,"src",n)},d(t){t&&Ce(e)}}}function yn(i){let e,n;return e=new Bt({}),{c(){me(e.$$.fragment)},m(t,l){ge(e,t,l),n=!0},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){j(e.$$.fragment,t),n=!1},d(t){he(e,t)}}}function En(i){let e,n;return e=new It({}),{c(){me(e.$$.fragment)},m(t,l){ge(e,t,l),n=!0},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){j(e.$$.fragment,t),n=!1},d(t){he(e,t)}}}function Tn(i){let e,n;return e=new pt({}),{c(){me(e.$$.fragment)},m(t,l){ge(e,t,l),n=!0},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){j(e.$$.fragment,t),n=!1},d(t){he(e,t)}}}function ht(i){let e,n,t;function l(r){i[38](r)}let o={videoElement:i[17],showRedo:!0,handle_trim_video:i[23],handle_reset_value:i[7],value:i[11],i18n:i[9],show_download_button:i[10],handle_clear:i[12],has_change_history:i[13]};return i[18]!==void 0&&(o.processingVideo=i[18]),e=new cn({props:o}),Te.push(()=>Ee(e,"processingVideo",l)),{c(){me(e.$$.fragment)},m(r,a){ge(e,r,a),t=!0},p(r,a){const f={};a[0]&131072&&(f.videoElement=r[17]),a[0]&128&&(f.handle_reset_value=r[7]),a[0]&2048&&(f.value=r[11]),a[0]&512&&(f.i18n=r[9]),a[0]&1024&&(f.show_download_button=r[10]),a[0]&4096&&(f.handle_clear=r[12]),a[0]&8192&&(f.has_change_history=r[13]),!n&&a[0]&262144&&(n=!0,f.processingVideo=r[18],ye(()=>n=!1)),e.$set(f)},i(r){t||(F(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){he(e,r)}}}function Vn(i){let e,n,t,l,o,r,a,f,g,_,u,d,c,w,v,k=fe(i[14])+"",P,A,B=fe(i[15])+"",H,L,h,T,y,m,D,G,p,M,ve,De;function ze(b){i[28](b)}function Fe(b){i[29](b)}function $e(b){i[30](b)}function je(b){i[31](b)}let le={src:i[0],preload:"auto",autoplay:i[3],loop:i[4],is_stream:i[8],"data-testid":`${i[5]}-player`,processingVideo:i[18],$$slots:{default:[kn]},$$scope:{ctx:i}};i[14]!==void 0&&(le.currentTime=i[14]),i[15]!==void 0&&(le.duration=i[15]),i[16]!==void 0&&(le.paused=i[16]),i[17]!==void 0&&(le.node=i[17]),t=new Xt({props:le}),Te.push(()=>Ee(t,"currentTime",ze)),Te.push(()=>Ee(t,"duration",Fe)),Te.push(()=>Ee(t,"paused",$e)),Te.push(()=>Ee(t,"node",je)),t.$on("click",i[20]),t.$on("play",i[32]),t.$on("pause",i[33]),t.$on("error",i[34]),t.$on("ended",i[22]),t.$on("loadstart",i[35]),t.$on("loadeddata",i[36]),t.$on("loadedmetadata",i[37]);const Se=[Tn,En,yn],J=[];function qe(b,E){return b[14]===b[15]?0:b[16]?1:2}d=qe(i),c=J[d]=Se[d](i),D=new Ct({});let V=i[6]&&ht(i);return{c(){e=K("div"),n=K("div"),me(t.$$.fragment),f=ke(),g=K("div"),_=K("div"),u=K("span"),c.c(),w=ke(),v=K("span"),P=Je(k),A=Je(" / "),H=Je(B),L=ke(),h=K("progress"),y=ke(),m=K("div"),me(D.$$.fragment),G=ke(),V&&V.c(),p=hn(),R(n,"class","mirror-wrap svelte-euo1cw"),mt(n,"mirror",i[2]),R(u,"role","button"),R(u,"tabindex","0"),R(u,"class","icon svelte-euo1cw"),R(u,"aria-label","play-pause-replay-button"),R(v,"class","time svelte-euo1cw"),h.value=T=i[14]/i[15]||0,R(h,"class","svelte-euo1cw"),R(m,"role","button"),R(m,"tabindex","0"),R(m,"class","icon svelte-euo1cw"),R(m,"aria-label","full-screen"),R(_,"class","inner svelte-euo1cw"),R(g,"class","controls svelte-euo1cw"),R(e,"class","wrap svelte-euo1cw")},m(b,E){Pe(b,e,E),N(e,n),ge(t,n,null),N(e,f),N(e,g),N(g,_),N(_,u),J[d].m(u,null),N(_,w),N(_,v),N(v,P),N(v,A),N(v,H),N(_,L),N(_,h),N(_,y),N(_,m),ge(D,m,null),Pe(b,G,E),V&&V.m(b,E),Pe(b,p,E),M=!0,ve||(De=[oe(u,"click",i[20]),oe(u,"keydown",i[20]),oe(h,"mousemove",i[19]),oe(h,"touchmove",dt(i[19])),oe(h,"click",vn(dt(i[21]))),oe(m,"click",i[24]),oe(m,"keypress",i[24])],ve=!0)},p(b,E){const s={};E[0]&1&&(s.src=b[0]),E[0]&8&&(s.autoplay=b[3]),E[0]&16&&(s.loop=b[4]),E[0]&256&&(s.is_stream=b[8]),E[0]&32&&(s["data-testid"]=`${b[5]}-player`),E[0]&262144&&(s.processingVideo=b[18]),E[0]&2|E[1]&512&&(s.$$scope={dirty:E,ctx:b}),!l&&E[0]&16384&&(l=!0,s.currentTime=b[14],ye(()=>l=!1)),!o&&E[0]&32768&&(o=!0,s.duration=b[15],ye(()=>o=!1)),!r&&E[0]&65536&&(r=!0,s.paused=b[16],ye(()=>r=!1)),!a&&E[0]&131072&&(a=!0,s.node=b[17],ye(()=>a=!1)),t.$set(s),(!M||E[0]&4)&&mt(n,"mirror",b[2]);let $=d;d=qe(b),d!==$&&(_t(),j(J[$],1,1,()=>{J[$]=null}),ut(),c=J[d],c||(c=J[d]=Se[d](b),c.c()),F(c,1),c.m(u,null)),(!M||E[0]&16384)&&k!==(k=fe(b[14])+"")&&ft(P,k),(!M||E[0]&32768)&&B!==(B=fe(b[15])+"")&&ft(H,B),(!M||E[0]&49152&&T!==(T=b[14]/b[15]||0))&&(h.value=T),b[6]?V?(V.p(b,E),E[0]&64&&F(V,1)):(V=ht(b),V.c(),F(V,1),V.m(p.parentNode,p)):V&&(_t(),j(V,1,1,()=>{V=null}),ut())},i(b){M||(F(t.$$.fragment,b),F(c),F(D.$$.fragment,b),F(V),M=!0)},o(b){j(t.$$.fragment,b),j(c),j(D.$$.fragment,b),j(V),M=!1},d(b){b&&(Ce(e),Ce(G),Ce(p)),he(t),J[d].d(),he(D),V&&V.d(b),ve=!1,bn(De)}}}function Dn(i,e,n){let{root:t=""}=e,{src:l}=e,{subtitle:o=null}=e,{mirror:r}=e,{autoplay:a}=e,{loop:f}=e,{label:g="test"}=e,{interactive:_=!1}=e,{handle_change:u=()=>{}}=e,{handle_reset_value:d=()=>{}}=e,{upload:c}=e,{is_stream:w}=e,{i18n:v}=e,{show_download_button:k=!1}=e,{value:P=null}=e,{handle_clear:A=()=>{}}=e,{has_change_history:B=!1}=e;const H=pn();let L=0,h,T=!0,y,m=!1;function D(s){if(!h)return;if(s.type==="click"){p(s);return}if(s.type!=="touchmove"&&!(s.buttons&1))return;const $=s.type==="touchmove"?s.touches[0].clientX:s.clientX,{left:ae,right:Oe}=s.currentTarget.getBoundingClientRect();n(14,L=h*($-ae)/(Oe-ae))}async function G(){document.fullscreenElement!=y&&(y.currentTime>0&&!y.paused&&!y.ended&&y.readyState>y.HAVE_CURRENT_DATA?y.pause():await y.play())}function p(s){const{left:$,right:ae}=s.currentTarget.getBoundingClientRect();n(14,L=h*(s.clientX-$)/(ae-$))}function M(){H("stop"),H("end")}const ve=async s=>{let $=new File([s],"video.mp4");const ae=await Rt([$]);let Oe=(await c(ae,t))?.filter(Boolean)[0];u(Oe)};function De(){y.requestFullscreen()}function ze(s){L=s,n(14,L)}function Fe(s){h=s,n(15,h)}function $e(s){T=s,n(16,T)}function je(s){y=s,n(17,y)}function le(s){_e.call(this,i,s)}function Se(s){_e.call(this,i,s)}function J(s){_e.call(this,i,s)}function qe(s){_e.call(this,i,s)}function V(s){_e.call(this,i,s)}function b(s){_e.call(this,i,s)}function E(s){m=s,n(18,m)}return i.$$set=s=>{"root"in s&&n(25,t=s.root),"src"in s&&n(0,l=s.src),"subtitle"in s&&n(1,o=s.subtitle),"mirror"in s&&n(2,r=s.mirror),"autoplay"in s&&n(3,a=s.autoplay),"loop"in s&&n(4,f=s.loop),"label"in s&&n(5,g=s.label),"interactive"in s&&n(6,_=s.interactive),"handle_change"in s&&n(26,u=s.handle_change),"handle_reset_value"in s&&n(7,d=s.handle_reset_value),"upload"in s&&n(27,c=s.upload),"is_stream"in s&&n(8,w=s.is_stream),"i18n"in s&&n(9,v=s.i18n),"show_download_button"in s&&n(10,k=s.show_download_button),"value"in s&&n(11,P=s.value),"handle_clear"in s&&n(12,A=s.handle_clear),"has_change_history"in s&&n(13,B=s.has_change_history)},i.$$.update=()=>{i.$$.dirty[0]&16384&&n(14,L=L||0),i.$$.dirty[0]&32768&&n(15,h=h||0)},[l,o,r,a,f,g,_,d,w,v,k,P,A,B,L,h,T,y,m,D,G,p,M,ve,De,t,u,c,ze,Fe,$e,je,le,Se,J,qe,V,b,E]}class Sn extends mn{constructor(e){super(),gn(this,e,Dn,Vn,wn,{root:25,src:0,subtitle:1,mirror:2,autoplay:3,loop:4,label:5,interactive:6,handle_change:26,handle_reset_value:7,upload:27,is_stream:8,i18n:9,show_download_button:10,value:11,handle_clear:12,has_change_history:13},null,[-1,-1])}get root(){return this.$$.ctx[25]}set root(e){this.$$set({root:e}),q()}get src(){return this.$$.ctx[0]}set src(e){this.$$set({src:e}),q()}get subtitle(){return this.$$.ctx[1]}set subtitle(e){this.$$set({subtitle:e}),q()}get mirror(){return this.$$.ctx[2]}set mirror(e){this.$$set({mirror:e}),q()}get autoplay(){return this.$$.ctx[3]}set autoplay(e){this.$$set({autoplay:e}),q()}get loop(){return this.$$.ctx[4]}set loop(e){this.$$set({loop:e}),q()}get label(){return this.$$.ctx[5]}set label(e){this.$$set({label:e}),q()}get interactive(){return this.$$.ctx[6]}set interactive(e){this.$$set({interactive:e}),q()}get handle_change(){return this.$$.ctx[26]}set handle_change(e){this.$$set({handle_change:e}),q()}get handle_reset_value(){return this.$$.ctx[7]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),q()}get upload(){return this.$$.ctx[27]}set upload(e){this.$$set({upload:e}),q()}get is_stream(){return this.$$.ctx[8]}set is_stream(e){this.$$set({is_stream:e}),q()}get i18n(){return this.$$.ctx[9]}set i18n(e){this.$$set({i18n:e}),q()}get show_download_button(){return this.$$.ctx[10]}set show_download_button(e){this.$$set({show_download_button:e}),q()}get value(){return this.$$.ctx[11]}set value(e){this.$$set({value:e}),q()}get handle_clear(){return this.$$.ctx[12]}set handle_clear(e){this.$$set({handle_clear:e}),q()}get has_change_history(){return this.$$.ctx[13]}set has_change_history(e){this.$$set({has_change_history:e}),q()}}const qn=Sn,{SvelteComponent:Rn,attr:Ln,bubble:de,check_outros:Be,create_component:te,destroy_component:ne,detach:be,element:Mn,empty:kt,flush:z,group_outros:Ie,init:Cn,insert:we,mount_component:ie,noop:yt,safe_not_equal:Et,space:xe,transition_in:S,transition_out:C}=window.__gradio__svelte__internal,{createEventDispatcher:Pn,afterUpdate:Bn,tick:In}=window.__gradio__svelte__internal;function An(i){let e=i[0].url,n,t,l,o,r=gt(i);return l=new qt({props:{display_top_corner:i[10],$$slots:{default:[Hn]},$$scope:{ctx:i}}}),{c(){r.c(),n=xe(),t=Mn("div"),te(l.$$.fragment),Ln(t,"data-testid","download-div")},m(a,f){r.m(a,f),we(a,n,f),we(a,t,f),ie(l,t,null),o=!0},p(a,f){f&1&&Et(e,e=a[0].url)?(Ie(),C(r,1,1,yt),Be(),r=gt(a),r.c(),S(r,1),r.m(n.parentNode,n)):r.p(a,f);const g={};f&1024&&(g.display_top_corner=a[10]),f&4194657&&(g.$$scope={dirty:f,ctx:a}),l.$set(g)},i(a){o||(S(r),S(l.$$.fragment,a),o=!0)},o(a){C(r),C(l.$$.fragment,a),o=!1},d(a){a&&(be(n),be(t)),r.d(a),ne(l)}}}function Nn(i){let e,n;return e=new Vt({props:{unpadded_box:!0,size:"large",$$slots:{default:[Un]},$$scope:{ctx:i}}}),{c(){te(e.$$.fragment)},m(t,l){ie(e,t,l),n=!0},p(t,l){const o={};l&4194304&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function gt(i){let e,n;return e=new qn({props:{src:i[0].url,subtitle:i[1]?.url,is_stream:i[0].is_stream,autoplay:i[4],mirror:!1,label:i[2],loop:i[7],interactive:!1,upload:i[9],i18n:i[8]}}),e.$on("play",i[12]),e.$on("pause",i[13]),e.$on("stop",i[14]),e.$on("end",i[15]),e.$on("loadedmetadata",i[16]),{c(){te(e.$$.fragment)},m(t,l){ie(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.src=t[0].url),l&2&&(o.subtitle=t[1]?.url),l&1&&(o.is_stream=t[0].is_stream),l&16&&(o.autoplay=t[4]),l&4&&(o.label=t[2]),l&128&&(o.loop=t[7]),l&512&&(o.upload=t[9]),l&256&&(o.i18n=t[8]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function bt(i){let e,n;return e=new Mt({props:{href:i[0].is_stream?i[0].url?.replace("playlist.m3u8","playlist-file"):i[0].url,download:i[0].orig_name||i[0].path,$$slots:{default:[Xn]},$$scope:{ctx:i}}}),{c(){te(e.$$.fragment)},m(t,l){ie(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.href=t[0].is_stream?t[0].url?.replace("playlist.m3u8","playlist-file"):t[0].url),l&1&&(o.download=t[0].orig_name||t[0].path),l&4194304&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function Xn(i){let e,n;return e=new Ze({props:{Icon:St,label:"Download"}}),{c(){te(e.$$.fragment)},m(t,l){ie(e,t,l),n=!0},p:yt,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function wt(i){let e,n;return e=new Dt({props:{i18n:i[8],value:i[0],formatter:i[17]}}),e.$on("error",i[18]),e.$on("share",i[19]),{c(){te(e.$$.fragment)},m(t,l){ie(e,t,l),n=!0},p(t,l){const o={};l&256&&(o.i18n=t[8]),l&1&&(o.value=t[0]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function Hn(i){let e,n,t,l=i[6]&&bt(i),o=i[5]&&wt(i);return{c(){l&&l.c(),e=xe(),o&&o.c(),n=kt()},m(r,a){l&&l.m(r,a),we(r,e,a),o&&o.m(r,a),we(r,n,a),t=!0},p(r,a){r[6]?l?(l.p(r,a),a&64&&S(l,1)):(l=bt(r),l.c(),S(l,1),l.m(e.parentNode,e)):l&&(Ie(),C(l,1,1,()=>{l=null}),Be()),r[5]?o?(o.p(r,a),a&32&&S(o,1)):(o=wt(r),o.c(),S(o,1),o.m(n.parentNode,n)):o&&(Ie(),C(o,1,1,()=>{o=null}),Be())},i(r){t||(S(l),S(o),t=!0)},o(r){C(l),C(o),t=!1},d(r){r&&(be(e),be(n)),l&&l.d(r),o&&o.d(r)}}}function Un(i){let e,n;return e=new vt({}),{c(){te(e.$$.fragment)},m(t,l){ie(e,t,l),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function zn(i){let e,n,t,l,o,r;e=new Tt({props:{show_label:i[3],Icon:vt,label:i[2]||"Video"}});const a=[Nn,An],f=[];function g(_,u){return!_[0]||_[0].url===void 0?0:1}return t=g(i),l=f[t]=a[t](i),{c(){te(e.$$.fragment),n=xe(),l.c(),o=kt()},m(_,u){ie(e,_,u),we(_,n,u),f[t].m(_,u),we(_,o,u),r=!0},p(_,[u]){const d={};u&8&&(d.show_label=_[3]),u&4&&(d.label=_[2]||"Video"),e.$set(d);let c=t;t=g(_),t===c?f[t].p(_,u):(Ie(),C(f[c],1,1,()=>{f[c]=null}),Be(),l=f[t],l?l.p(_,u):(l=f[t]=a[t](_),l.c()),S(l,1),l.m(o.parentNode,o))},i(_){r||(S(e.$$.fragment,_),S(l),r=!0)},o(_){C(e.$$.fragment,_),C(l),r=!1},d(_){_&&(be(n),be(o)),ne(e,_),f[t].d(_)}}}function Fn(i,e,n){let{value:t=null}=e,{subtitle:l=null}=e,{label:o=void 0}=e,{show_label:r=!0}=e,{autoplay:a}=e,{show_share_button:f=!0}=e,{show_download_button:g=!0}=e,{loop:_}=e,{i18n:u}=e,{upload:d}=e,{display_icon_button_wrapper_top_corner:c=!1}=e,w=null,v=null;const k=Pn();Bn(async()=>{t!==w&&l!==v&&v!==null&&(w=t,n(0,t=null),await In(),n(0,t=w)),w=t,v=l});function P(m){de.call(this,i,m)}function A(m){de.call(this,i,m)}function B(m){de.call(this,i,m)}function H(m){de.call(this,i,m)}const L=()=>{k("load")},h=async m=>m?await Lt(m.data):"";function T(m){de.call(this,i,m)}function y(m){de.call(this,i,m)}return i.$$set=m=>{"value"in m&&n(0,t=m.value),"subtitle"in m&&n(1,l=m.subtitle),"label"in m&&n(2,o=m.label),"show_label"in m&&n(3,r=m.show_label),"autoplay"in m&&n(4,a=m.autoplay),"show_share_button"in m&&n(5,f=m.show_share_button),"show_download_button"in m&&n(6,g=m.show_download_button),"loop"in m&&n(7,_=m.loop),"i18n"in m&&n(8,u=m.i18n),"upload"in m&&n(9,d=m.upload),"display_icon_button_wrapper_top_corner"in m&&n(10,c=m.display_icon_button_wrapper_top_corner)},i.$$.update=()=>{i.$$.dirty&1&&t&&k("change",t)},[t,l,o,r,a,f,g,_,u,d,c,k,P,A,B,H,L,h,T,y]}class $n extends Rn{constructor(e){super(),Cn(this,e,Fn,zn,Et,{value:0,subtitle:1,label:2,show_label:3,autoplay:4,show_share_button:5,show_download_button:6,loop:7,i18n:8,upload:9,display_icon_button_wrapper_top_corner:10})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),z()}get subtitle(){return this.$$.ctx[1]}set subtitle(e){this.$$set({subtitle:e}),z()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),z()}get show_label(){return this.$$.ctx[3]}set show_label(e){this.$$set({show_label:e}),z()}get autoplay(){return this.$$.ctx[4]}set autoplay(e){this.$$set({autoplay:e}),z()}get show_share_button(){return this.$$.ctx[5]}set show_share_button(e){this.$$set({show_share_button:e}),z()}get show_download_button(){return this.$$.ctx[6]}set show_download_button(e){this.$$set({show_download_button:e}),z()}get loop(){return this.$$.ctx[7]}set loop(e){this.$$set({loop:e}),z()}get i18n(){return this.$$.ctx[8]}set i18n(e){this.$$set({i18n:e}),z()}get upload(){return this.$$.ctx[9]}set upload(e){this.$$set({upload:e}),z()}get display_icon_button_wrapper_top_corner(){return this.$$.ctx[10]}set display_icon_button_wrapper_top_corner(e){this.$$set({display_icon_button_wrapper_top_corner:e}),z()}}const ui=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"}));export{qn as P,$n as V,ui as a};
//# sourceMappingURL=VideoPreview-B92tj3MC.js.map
