"""Main FastAPI application for {{ project_name }}."""

from fastapi import FastAPI

from config.settings import get_settings
from config.middleware import setup_middleware

# Get application settings
settings = get_settings()

# Create FastAPI application
app = FastAPI(
    title=settings.app_name,
    description="A FastAPI project generated with FasCraft",
    version=settings.app_version,
    debug=settings.debug
)

# Setup middleware
setup_middleware(app)

# Import base router
from routers import base_router

# Include base router (all module routers are included here)
app.include_router(base_router)

@app.get("/")
async def root():
    """Root endpoint."""
    return {"message": f"Hello from {settings.app_name}!"}


# Health check is now handled by base router at /api/v1/health


# Database setup note:
# After creating models, run 'alembic init alembic' to initialize migrations
# Then configure alembic/env.py to import your models and use your database URL
# See README.md for detailed setup instructions

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
