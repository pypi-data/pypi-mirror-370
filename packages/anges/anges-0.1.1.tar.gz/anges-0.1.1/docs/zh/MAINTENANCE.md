<!-- Language Switcher -->
**语言**: [English](../MAINTENANCE.md) | [中文](MAINTENANCE.md)

---

# 双语文档维护指南

本指南提供了维护此仓库中双语（英文/中文）文档系统的全面说明。

## 概述

我们的文档系统支持英文和中文版本之间的无缝切换，具有以下结构：

```
.
├── README.md (英文)
├── README.zh.md (中文)
├── docs/
│   ├── *.md (英文文档)
│   └── zh/
│       └── *.md (中文文档)
└── scripts/
    ├── validate-translations.py
    └── sync-language-structure.py
```

## 语言切换器格式

每个markdown文件都必须在顶部包含语言切换器：

### 英文文件
```markdown
<!-- Language Switcher -->
**Language**: [English](filename.md) | [中文](zh/filename.md)

---
```

### 中文文件
```markdown
<!-- Language Switcher -->
**语言**: [English](../filename.md) | [中文](filename.md)

---
```

## 添加新文档

### 步骤1：创建英文版本
1. 在适当位置创建英文markdown文件
2. 添加语言切换器头部
3. 编写内容

### 步骤2：创建中文版本
1. 在`zh/`子目录中创建对应的中文文件
2. 添加中文语言切换器头部
3. 翻译内容，保持相同结构

### 步骤3：验证
运行验证脚本确保一切正确：
```bash
python scripts/validate-translations.py
```

## 更新现有文档

### 更新英文文件时：
1. 对英文版本进行更改
2. 更新对应的中文版本
3. 确保结构一致性（相同数量的标题）
4. 运行验证脚本

### 更新中文文件时：
1. 对中文版本进行更改
2. 考虑英文版本是否需要更新
3. 运行验证脚本

## 验证工具

### 翻译验证器
```bash
python scripts/validate-translations.py
```

此脚本检查：
- 翻译完整性
- 结构一致性
- 语言切换器链接
- 损坏的交叉引用

### 结构同步器
```bash
python scripts/sync-language-structure.py
```

此脚本帮助维护语言版本之间的结构一致性。

## 常见问题和解决方案

### 问题：缺少语言切换器
**解决方案**：在文件顶部添加适当的语言切换器头部。

### 问题：结构不匹配
**解决方案**：确保两个语言版本具有相同数量和级别的标题。

### 问题：链接损坏
**解决方案**：更新相对路径以确保它们在两个语言版本中都能正常工作。

### 问题：孤立翻译
**解决方案**：要么创建缺失的英文版本，要么删除孤立的中文文件。

## 最佳实践

1. **一致性**：在语言之间保持相同的文档结构
2. **定期验证**：在提交更改前运行验证脚本
3. **原子更新**：尽可能同时更新两个语言版本
4. **清晰路径**：使用在两个语言版本中都能工作的相对路径
5. **标题层次**：保持相同的标题级别和组织

## 文件命名约定

- 英文文件：`filename.md`
- 中文文件：`filename.md`（在`zh/`子目录中）
- 根级中文文件：`filename.zh.md`

## 目录结构规则

- 中文翻译放在并行的`zh/`子目录中
- 根级中文文件使用`.zh.md`后缀
- 在两种语言中保持相同的目录结构

## 自动化和CI/CD

考虑在CI/CD管道中添加这些检查：

```yaml
# GitHub Actions步骤示例
- name: Validate Translations
  run: python scripts/validate-translations.py
```

## 故障排除

### 验证脚本问题
- 确保从项目根目录运行
- 检查所有markdown文件都有适当的语言切换器
- 验证目录结构符合预期

### 链接问题
- 一致使用相对路径
- 从两个语言版本测试链接
- 考虑使用同步脚本修复结构问题

## 未来增强

考虑的潜在改进：
- 自动翻译建议
- 跨语言链接验证
- 内容同步警报
- 翻译状态跟踪

---

如有关于双语文档系统的问题或疑问，请参考本指南或在仓库中创建issue。