<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>sasdata.data_util.nxsunit module &#8212; SasData 0.11.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css?v=2bf1fcf8" />
    
    <script src="../../_static/documentation_options.js?v=f3b36f1a"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="sasdata.data_util.registry module" href="sasdata.data_util.registry.html" />
    <link rel="prev" title="sasdata.data_util.manipulations module" href="sasdata.data_util.manipulations.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sasdata.data_util.registry.html" title="sasdata.data_util.registry module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sasdata.data_util.manipulations.html" title="sasdata.data_util.manipulations module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SasData 0.11.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../dev.html" >Developer Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="sasdata.html" >sasdata package</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="sasdata.data_util.html" accesskey="U">sasdata.data_util package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">sasdata.data_util.nxsunit module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-sasdata.data_util.nxsunit">
<span id="sasdata-data-util-nxsunit-module"></span><h1>sasdata.data_util.nxsunit module<a class="headerlink" href="#module-sasdata.data_util.nxsunit" title="Link to this heading">¶</a></h1>
<p>Define unit conversion support for NeXus style units.</p>
<p>The unit format is somewhat complicated.  There are variant spellings
and incorrect capitalization to worry about, as well as forms such as
“mili*metre” and “1e-7 seconds”.</p>
<p>This is a minimal implementation of units including only what I happen to
need now.  It does not support the complete dimensional analysis provided
by the package udunits on which NeXus is based, or even the units used
in the NeXus definition files.</p>
<p>Unlike other units packages, this package does not carry the units along with
the value but merely provides a conversion function for transforming values.</p>
<p>Usage example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">nxsunit</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">nxsunit</span><span class="o">.</span><span class="n">Converter</span><span class="p">(</span><span class="s1">&#39;mili*metre&#39;</span><span class="p">)</span>  <span class="c1"># Units stored in mm</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">u</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>  <span class="c1"># Convert the value 3000 mm into meters</span>
</pre></div>
</div>
<p>NeXus example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load sample orientation in radians regardless of how it is stored.</span>
<span class="c1"># 1. Open the path</span>
<span class="n">file</span><span class="o">.</span><span class="n">openpath</span><span class="p">(</span><span class="s1">&#39;/entry1/sample/sample_orientation&#39;</span><span class="p">)</span>
<span class="c1"># 2. scan the attributes, retrieving &#39;units&#39;</span>
<span class="n">units</span> <span class="o">=</span> <span class="p">[</span><span class="k">for</span> <span class="n">attr</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">attrs</span><span class="p">()</span> <span class="k">if</span> <span class="n">attr</span> <span class="o">==</span> <span class="s1">&#39;units&#39;</span><span class="p">]</span>
<span class="c1"># 3. set up the converter (assumes that units actually exists)</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">nxsunit</span><span class="o">.</span><span class="n">Converter</span><span class="p">(</span><span class="n">units</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="c1"># 4. read the data and convert to the correct units</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">u</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span><span class="s1">&#39;radians&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a standalone module, not relying on either DANSE or NeXus, and
can be used for other unit conversion tasks.</p>
<p>Note: minutes are used for angle and seconds are used for time.  We
cannot tell what the correct interpretation is without knowing something
about the fields themselves.  If this becomes an issue, we will need to
allow the application to set the dimension for the unit rather than
inferring the dimension from an example unit.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sasdata.data_util.nxsunit.Converter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sasdata.data_util.nxsunit.</span></span><span class="sig-name descname"><span class="pre">Converter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sasdata.data_util.nxsunit.Converter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Unit converter for NeXus style units.</p>
<p>The converter is initialized with the units of the source value.  Various
source values can then be converted to target values based on target
value name.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sasdata.data_util.nxsunit.Converter.dimension">
<span class="sig-name descname"><span class="pre">dimension</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sasdata.data_util.nxsunit.Converter.dimension" title="Link to this definition">¶</a></dt>
<dd><p>Type of the source units (distance, time, frequency, …)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sasdata.data_util.nxsunit.Converter.get_compatible_units">
<span class="sig-name descname"><span class="pre">get_compatible_units</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sasdata.data_util.nxsunit.Converter.get_compatible_units" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of compatible units for the current Convertor object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sasdata.data_util.nxsunit.Converter.scale">
<span class="sig-name descname"><span class="pre">scale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">T</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">T</span></span></span><a class="headerlink" href="#sasdata.data_util.nxsunit.Converter.scale" title="Link to this definition">¶</a></dt>
<dd><p>Scale the given value using the units string supplied</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sasdata.data_util.nxsunit.Converter.scalebase">
<span class="sig-name descname"><span class="pre">scalebase</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sasdata.data_util.nxsunit.Converter.scalebase" title="Link to this definition">¶</a></dt>
<dd><p>Scale base for the source units</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sasdata.data_util.nxsunit.Converter.scalemap">
<span class="sig-name descname"><span class="pre">scalemap</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sasdata.data_util.nxsunit.Converter.scalemap" title="Link to this definition">¶</a></dt>
<dd><p>Scale converter, mapping unit name to scale factor or (scale, offset)
for temperature units.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sasdata.data_util.nxsunit.Converter.scaleoffset">
<span class="sig-name descname"><span class="pre">scaleoffset</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sasdata.data_util.nxsunit.Converter.scaleoffset" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="sasdata.data_util.nxsunit.Converter.units">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">units</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#sasdata.data_util.nxsunit.Converter.units" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sasdata.data_util.nxsunit.standardize_units">
<span class="sig-prename descclassname"><span class="pre">sasdata.data_util.nxsunit.</span></span><span class="sig-name descname"><span class="pre">standardize_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sasdata.data_util.nxsunit.standardize_units" title="Link to this definition">¶</a></dt>
<dd><p>Convert supplied units to a standard format for maintainability
:param unit: Raw unit as supplied
:return: Unit with known, reduced values</p>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">sasdata.data_util.nxsunit module</a><ul>
<li><a class="reference internal" href="#sasdata.data_util.nxsunit.Converter"><code class="docutils literal notranslate"><span class="pre">Converter</span></code></a><ul>
<li><a class="reference internal" href="#sasdata.data_util.nxsunit.Converter.dimension"><code class="docutils literal notranslate"><span class="pre">Converter.dimension</span></code></a></li>
<li><a class="reference internal" href="#sasdata.data_util.nxsunit.Converter.get_compatible_units"><code class="docutils literal notranslate"><span class="pre">Converter.get_compatible_units()</span></code></a></li>
<li><a class="reference internal" href="#sasdata.data_util.nxsunit.Converter.scale"><code class="docutils literal notranslate"><span class="pre">Converter.scale()</span></code></a></li>
<li><a class="reference internal" href="#sasdata.data_util.nxsunit.Converter.scalebase"><code class="docutils literal notranslate"><span class="pre">Converter.scalebase</span></code></a></li>
<li><a class="reference internal" href="#sasdata.data_util.nxsunit.Converter.scalemap"><code class="docutils literal notranslate"><span class="pre">Converter.scalemap</span></code></a></li>
<li><a class="reference internal" href="#sasdata.data_util.nxsunit.Converter.scaleoffset"><code class="docutils literal notranslate"><span class="pre">Converter.scaleoffset</span></code></a></li>
<li><a class="reference internal" href="#sasdata.data_util.nxsunit.Converter.units"><code class="docutils literal notranslate"><span class="pre">Converter.units</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sasdata.data_util.nxsunit.standardize_units"><code class="docutils literal notranslate"><span class="pre">standardize_units()</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="sasdata.data_util.manipulations.html"
                          title="previous chapter">sasdata.data_util.manipulations module</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="sasdata.data_util.registry.html"
                          title="next chapter">sasdata.data_util.registry module</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/dev/generated/sasdata.data_util.nxsunit.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sasdata.data_util.registry.html" title="sasdata.data_util.registry module"
             >next</a> |</li>
        <li class="right" >
          <a href="sasdata.data_util.manipulations.html" title="sasdata.data_util.manipulations module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SasData 0.11.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../dev.html" >Developer Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="sasdata.html" >sasdata package</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="sasdata.data_util.html" >sasdata.data_util package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">sasdata.data_util.nxsunit module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, The SasView Project.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>