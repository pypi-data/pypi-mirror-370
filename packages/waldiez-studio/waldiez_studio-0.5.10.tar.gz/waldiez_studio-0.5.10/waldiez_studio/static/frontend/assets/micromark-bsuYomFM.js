import{c as e}from"./micromark-util-combine-extensions-DQ8C0oVl.js";import{f as n}from"./micromark-factory-space-O0Sojo8n.js";import{m as t}from"./micromark-util-character-DUwsRT9L.js";import{s as r,p as o}from"./micromark-util-chunked-3k3e5hER.js";import{b as i,c as s,a as u,l as c,d as l,e as f,f as a,t as d,s as p,h as m,g as h,i as v,j as x,k as g,m as k,n as b,o as _,p as y,q as w,r as I,u as S,v as z}from"./micromark-core-commonmark-BjKFe3K_.js";import{r as A}from"./micromark-util-resolve-all-U8fstr8o.js";import{s as C}from"./micromark-util-subtokenize-C06FymM9.js";const j={tokenize:function(e){const r=e.attempt(this.parser.constructs.contentInitial,function(t){if(null===t)return void e.consume(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),n(e,r,"linePrefix")},function(n){return e.enter("paragraph"),i(n)});let o;return r;function i(n){const t=e.enter("chunkText",{contentType:"text",previous:o});return o&&(o.next=t),o=t,s(n)}function s(n){return null===n?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(n)):t(n)?(e.consume(n),e.exit("chunkText"),i):(e.consume(n),s)}}};const T={tokenize:function(e){const n=this,o=[];let i,s,u,c=0;return l;function l(t){if(c<o.length){const r=o[c];return n.containerState=r[1],e.attempt(r[0].continuation,f,a)(t)}return a(t)}function f(e){if(c++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,i&&b();const t=n.events.length;let o,s=t;for(;s--;)if("exit"===n.events[s][0]&&"chunkFlow"===n.events[s][1].type){o=n.events[s][1].end;break}k(c);let u=t;for(;u<n.events.length;)n.events[u][1].end={...o},u++;return r(n.events,s+1,0,n.events.slice(t)),n.events.length=u,a(e)}return l(e)}function a(t){if(c===o.length){if(!i)return m(t);if(i.currentConstruct&&i.currentConstruct.concrete)return v(t);n.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(F,d,p)(t)}function d(e){return i&&b(),k(c),m(e)}function p(e){return n.parser.lazy[n.now().line]=c!==o.length,u=n.now().offset,v(e)}function m(t){return n.containerState={},e.attempt(F,h,v)(t)}function h(e){return c++,o.push([n.currentConstruct,n.containerState]),m(e)}function v(t){return null===t?(i&&b(),k(0),void e.consume(t)):(i=i||n.parser.flow(n.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),x(t))}function x(r){return null===r?(g(e.exit("chunkFlow"),!0),k(0),void e.consume(r)):t(r)?(e.consume(r),g(e.exit("chunkFlow")),c=0,n.interrupt=void 0,l):(e.consume(r),x)}function g(e,t){const o=n.sliceStream(e);if(t&&o.push(null),e.previous=s,s&&(s.next=e),s=e,i.defineSkip(e.start),i.write(o),n.parser.lazy[e.start.line]){let e=i.events.length;for(;e--;)if(i.events[e][1].start.offset<u&&(!i.events[e][1].end||i.events[e][1].end.offset>u))return;const t=n.events.length;let o,s,l=t;for(;l--;)if("exit"===n.events[l][0]&&"chunkFlow"===n.events[l][1].type){if(o){s=n.events[l][1].end;break}o=!0}for(k(c),e=t;e<n.events.length;)n.events[e][1].end={...s},e++;r(n.events,l+1,0,n.events.slice(t)),n.events.length=e}}function k(t){let r=o.length;for(;r-- >t;){const t=o[r];n.containerState=t[1],t[0].exit.call(n,e)}o.length=t}function b(){i.write([null]),s=void 0,i=void 0,n.containerState._closeFlow=void 0}}},F={tokenize:function(e,t,r){return n(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const E={tokenize:function(e){const t=this,r=e.attempt(i,function(n){if(null===n)return void e.consume(n);return e.enter("lineEndingBlank"),e.consume(n),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r},e.attempt(this.parser.constructs.flowInitial,o,n(e,e.attempt(this.parser.constructs.flow,o,e.attempt(s,o)),"linePrefix")));return r;function o(n){if(null!==n)return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),t.currentConstruct=void 0,r;e.consume(n)}}};const O={resolveAll:D()},B=P("string"),M=P("text");function P(e){return{resolveAll:D("text"===e?H:void 0),tokenize:function(n){const t=this,r=this.parser.constructs[e],o=n.attempt(r,i,s);return i;function i(e){return c(e)?o(e):s(e)}function s(e){if(null!==e)return n.enter("data"),n.consume(e),u;n.consume(e)}function u(e){return c(e)?(n.exit("data"),o(e)):(n.consume(e),u)}function c(e){if(null===e)return!0;const n=r[e];let o=-1;if(n)for(;++o<n.length;){const e=n[o];if(!e.previous||e.previous.call(t,t.previous))return!0}return!1}}}}function D(e){return function(n,t){let r,o=-1;for(;++o<=n.length;)void 0===r?n[o]&&"data"===n[o][1].type&&(r=o,o++):n[o]&&"data"===n[o][1].type||(o!==r+2&&(n[r][1].end=n[o-1][1].end,n.splice(r+2,o-r-2),o=r+2),r=void 0);return e?e(n,t):n}}function H(e,n){let t=0;for(;++t<=e.length;)if((t===e.length||"lineEnding"===e[t][1].type)&&"data"===e[t-1][1].type){const r=e[t-1][1],o=n.sliceStream(r);let i,s=o.length,u=-1,c=0;for(;s--;){const e=o[s];if("string"==typeof e){for(u=e.length;32===e.charCodeAt(u-1);)c++,u--;if(u)break;u=-1}else if(-2===e)i=!0,c++;else if(-1!==e){s++;break}}if(n._contentTypeTextTrailing&&t===e.length&&(c=0),c){const o={type:t===e.length||i||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?u:r.start._bufferIndex+u,_index:r.start._index+s,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...o.start},r.start.offset===r.end.offset?Object.assign(r,o):(e.splice(t,0,["enter",o,n],["exit",o,n]),t+=2)}t++}return e}const q={42:c,43:c,45:c,48:c,49:c,50:c,51:c,52:c,53:c,54:c,55:c,56:c,57:c,62:u},J={91:l},K={[-2]:f,[-1]:f,32:f},L={35:h,42:d,45:[p,d],60:m,61:p,95:d,96:a,126:a},G={38:x,92:v},N={[-5]:z,[-4]:z,[-3]:z,33:S,38:x,42:k,60:[w,I],91:y,92:[_,v],93:b,95:k,96:g},Q={null:[k,O]},R=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:J,disable:{null:[]},document:q,flow:L,flowInitial:K,insideSpan:Q,string:G,text:N},Symbol.toStringTag,{value:"Module"}));function U(e,n,i){let s={_bufferIndex:-1,_index:0,line:i&&i.line||1,column:i&&i.column||1,offset:i&&i.offset||0};const u={},c=[];let l=[],f=[];const a={attempt:k(function(e,n){b(e,n.from)}),check:k(g),consume:function(e){t(e)?(s.line++,s.column=1,s.offset+=-3===e?2:1,_()):-1!==e&&(s.column++,s.offset++);s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===l[s._index].length&&(s._bufferIndex=-1,s._index++));d.previous=e},enter:function(e,n){const t=n||{};return t.type=e,t.start=h(),d.events.push(["enter",t,d]),f.push(t),t},exit:function(e){const n=f.pop();return n.end=h(),d.events.push(["exit",n,d]),n},interrupt:k(g,{interrupt:!0})},d={code:null,containerState:{},defineSkip:function(e){u[e.line]=e.column,_()},events:[],now:h,parser:e,previous:null,sliceSerialize:function(e,n){return function(e,n){let t=-1;const r=[];let o;for(;++t<e.length;){const i=e[t];let s;if("string"==typeof i)s=i;else switch(i){case-5:s="\r";break;case-4:s="\n";break;case-3:s="\r\n";break;case-2:s=n?" ":"\t";break;case-1:if(!n&&o)continue;s=" ";break;default:s=String.fromCharCode(i)}o=-2===i,r.push(s)}return r.join("")}(m(e),n)},sliceStream:m,write:function(e){if(l=o(l,e),v(),null!==l[l.length-1])return[];return b(n,0),d.events=A(c,d.events,d),d.events}};let p=n.tokenize.call(d,a);return n.resolveAll&&c.push(n),d;function m(e){return function(e,n){const t=n.start._index,r=n.start._bufferIndex,o=n.end._index,i=n.end._bufferIndex;let s;if(t===o)s=[e[t].slice(r,i)];else{if(s=e.slice(t,o),r>-1){const e=s[0];"string"==typeof e?s[0]=e.slice(r):s.shift()}i>0&&s.push(e[o].slice(0,i))}return s}(l,e)}function h(){const{_bufferIndex:e,_index:n,line:t,column:r,offset:o}=s;return{_bufferIndex:e,_index:n,line:t,column:r,offset:o}}function v(){let e;for(;s._index<l.length;){const n=l[s._index];if("string"==typeof n)for(e=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===e&&s._bufferIndex<n.length;)x(n.charCodeAt(s._bufferIndex));else x(n)}}function x(e){p=p(e)}function g(e,n){n.restore()}function k(e,n){return function(t,r,o){let i,u,c,l;return Array.isArray(t)?p(t):"tokenize"in t?p([t]):function(e){return n;function n(n){const t=null!==n&&e[n],r=null!==n&&e.null;return p([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(r)?r:r?[r]:[]])(n)}}(t);function p(e){return i=e,u=0,0===e.length?o:m(e[u])}function m(e){return function(t){l=function(){const e=h(),n=d.previous,t=d.currentConstruct,r=d.events.length,o=Array.from(f);return{from:r,restore:i};function i(){s=e,d.previous=n,d.currentConstruct=t,d.events.length=r,f=o,_()}}(),c=e,e.partial||(d.currentConstruct=e);if(e.name&&d.parser.constructs.disable.null.includes(e.name))return x();return e.tokenize.call(n?Object.assign(Object.create(d),n):d,a,v,x)(t)}}function v(n){return e(c,l),r}function x(e){return l.restore(),++u<i.length?m(i[u]):o}}}function b(e,n){e.resolveAll&&!c.includes(e)&&c.push(e),e.resolve&&r(d.events,n,d.events.length-n,e.resolve(d.events.slice(n),d)),e.resolveTo&&(d.events=e.resolveTo(d.events,d))}function _(){s.line in u&&s.column<2&&(s.column=u[s.line],s.offset+=u[s.line]-1)}}function V(n){const t={constructs:e([R,...(n||{}).extensions||[]]),content:r(j),defined:[],document:r(T),flow:r(E),lazy:{},string:r(B),text:r(M)};return t;function r(e){return function(n){return U(t,e,n)}}}function W(e){for(;!C(e););return e}const X=/[\0\t\n\r]/g;function Y(){let e,n=1,t="",r=!0;return function(o,i,s){const u=[];let c,l,f,a,d;o=t+("string"==typeof o?o.toString():new TextDecoder(i||void 0).decode(o)),f=0,t="",r&&(65279===o.charCodeAt(0)&&f++,r=void 0);for(;f<o.length;){if(X.lastIndex=f,c=X.exec(o),a=c&&void 0!==c.index?c.index:o.length,d=o.charCodeAt(a),!c){t=o.slice(f);break}if(10===d&&f===a&&e)u.push(-3),e=void 0;else switch(e&&(u.push(-5),e=void 0),f<a&&(u.push(o.slice(f,a)),n+=a-f),d){case 0:u.push(65533),n++;break;case 9:for(l=4*Math.ceil(n/4),u.push(-2);n++<l;)u.push(-1);break;case 10:u.push(-4),n=1;break;default:e=!0,n=1}f=a+1}s&&(e&&u.push(-5),t&&u.push(t),u.push(null));return u}}export{V as a,Y as b,W as p};
