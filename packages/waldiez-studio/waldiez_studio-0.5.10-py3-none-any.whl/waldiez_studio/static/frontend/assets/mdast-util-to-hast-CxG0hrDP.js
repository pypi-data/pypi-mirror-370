import{s as e}from"./@ungap-DadG6O39.js";import{n as t}from"./micromark-util-sanitize-uri-BWVGcVPt.js";import{p as n,a,b as r}from"./unist-util-position-CVUg9P9R.js";import{t as o}from"./trim-lines-C03Dth7Y.js";import{v as l}from"./unist-util-visit-BGZk_7Z4.js";function i(e,t){const n=t.referenceType;let a="]";if("collapsed"===n?a+="[]":"full"===n&&(a+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+a}];const r=e.all(t),o=r[0];o&&"text"===o.type?o.value="["+o.value:r.unshift({type:"text",value:"["});const l=r[r.length-1];return l&&"text"===l.type?l.value+=a:r.push({type:"text",value:a}),r}function p(e){const t=e.spread;return null==t?e.children.length>1:t}const s={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",a={};t.lang&&(a.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r=e.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},e.patch(t,r),r},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,n){const a="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(n.identifier).toUpperCase(),o=t(r.toLowerCase()),l=e.footnoteOrder.indexOf(r);let i,p=e.footnoteCounts.get(r);void 0===p?(p=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=l+1,p+=1,e.footnoteCounts.set(r,p);const s={type:"element",tagName:"a",properties:{href:"#"+a+"fn-"+o,id:a+"fnref-"+o+(p>1?"-"+p:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(n,s);const c={type:"element",tagName:"sup",properties:{},children:[s]};return e.patch(n,c),e.applyData(n,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,n){const a=String(n.identifier).toUpperCase(),r=e.definitionById.get(a);if(!r)return i(e,n);const o={src:t(r.url||""),alt:n.alt};null!==r.title&&void 0!==r.title&&(o.title=r.title);const l={type:"element",tagName:"img",properties:o,children:[]};return e.patch(n,l),e.applyData(n,l)},image:function(e,n){const a={src:t(n.url)};null!==n.alt&&void 0!==n.alt&&(a.alt=n.alt),null!==n.title&&void 0!==n.title&&(a.title=n.title);const r={type:"element",tagName:"img",properties:a,children:[]};return e.patch(n,r),e.applyData(n,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,a),e.applyData(t,a)},linkReference:function(e,n){const a=String(n.identifier).toUpperCase(),r=e.definitionById.get(a);if(!r)return i(e,n);const o={href:t(r.url||"")};null!==r.title&&void 0!==r.title&&(o.title=r.title);const l={type:"element",tagName:"a",properties:o,children:e.all(n)};return e.patch(n,l),e.applyData(n,l)},link:function(e,n){const a={href:t(n.url)};null!==n.title&&void 0!==n.title&&(a.title=n.title);const r={type:"element",tagName:"a",properties:a,children:e.all(n)};return e.patch(n,r),e.applyData(n,r)},listItem:function(e,t,n){const a=e.all(t),r=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let a=-1;for(;!t&&++a<n.length;)t=p(n[a])}return t}(n):p(t),o={},l=[];if("boolean"==typeof t.checked){const e=a[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},a.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let i=-1;for(;++i<a.length;){const e=a[i];(r||0!==i||"element"!==e.type||"p"!==e.tagName)&&l.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||r?l.push(e):l.push(...e.children)}const s=a[a.length-1];s&&(r||"element"!==s.type||"p"!==s.tagName)&&l.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},a=e.all(t);let r=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++r<a.length;){const e=a[r];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(a,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const r=e.all(t),o=r.shift(),l=[];if(o){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([o],!0)};e.patch(t.children[0],n),l.push(n)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},i=n(t.children[1]),p=a(t.children[t.children.length-1]);i&&p&&(o.position={start:i,end:p}),l.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(l,!0)};return e.patch(t,i),e.applyData(t,i)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const a=n?n.children:void 0,r=0===(a?a.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,l=o?o.length:t.children.length;let i=-1;const p=[];for(;++i<l;){const n=t.children[i],a={},l=o?o[i]:void 0;l&&(a.align=l);let s={type:"element",tagName:r,properties:a,children:[]};n&&(s.children=e.all(n),e.patch(n,s),s=e.applyData(n,s)),p.push(s)}const s={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,s),e.applyData(t,s)},text:function(e,t){const n={type:"text",value:o(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:c,yaml:c,definition:c,footnoteDefinition:c};function c(){}function u(e,t){const n=[{type:"text",value:"â†©"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function h(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const d={}.hasOwnProperty,f={};function y(e,t){e.position&&(t.position=r(e))}function m(t,n){let a=n;if(t&&t.data){const n=t.data.hName,r=t.data.hChildren,o=t.data.hProperties;if("string"==typeof n)if("element"===a.type)a.tagName=n;else{a={type:"element",tagName:n,properties:{},children:"children"in a?a.children:[a]}}"element"===a.type&&o&&Object.assign(a.properties,e(o)),"children"in a&&a.children&&null!=r&&(a.children=r)}return a}function g(e,t){const n=t.data||{},a=!("value"in t)||d.call(n,"hProperties")||d.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,a),e.applyData(t,a)}function v(e,t){const n=[];let a=-1;for(t&&n.push({type:"text",value:"\n"});++a<e.length;)a&&n.push({type:"text",value:"\n"}),n.push(e[a]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function N(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function x(n,a){const r=function(t,n){const a=n||f,r=new Map,o=new Map,i=new Map,p={...s,...a.handlers},c={all:function(e){const t=[];if("children"in e){const n=e.children;let a=-1;for(;++a<n.length;){const r=c.one(n[a],e);if(r){if(a&&"break"===n[a-1].type&&(Array.isArray(r)||"text"!==r.type||(r.value=N(r.value)),!Array.isArray(r)&&"element"===r.type)){const e=r.children[0];e&&"text"===e.type&&(e.value=N(e.value))}Array.isArray(r)?t.push(...r):t.push(r)}}}return t},applyData:m,definitionById:r,footnoteById:o,footnoteCounts:i,footnoteOrder:[],handlers:p,one:function(t,n){const a=t.type,r=c.handlers[a];if(d.call(c.handlers,a)&&r)return r(c,t,n);if(c.options.passThrough&&c.options.passThrough.includes(a)){if("children"in t){const{children:n,...a}=t,r=e(a);return r.children=c.all(t),r}return e(t)}return(c.options.unknownHandler||g)(c,t,n)},options:a,patch:y,wrap:v};return l(t,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:o,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),c}(n,a),o=r.one(n,void 0),i=function(n){const a="string"==typeof n.options.clobberPrefix?n.options.clobberPrefix:"user-content-",r=n.options.footnoteBackContent||u,o=n.options.footnoteBackLabel||h,l=n.options.footnoteLabel||"Footnotes",i=n.options.footnoteLabelTagName||"h2",p=n.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let c=-1;for(;++c<n.footnoteOrder.length;){const e=n.footnoteById.get(n.footnoteOrder[c]);if(!e)continue;const l=n.all(e),i=String(e.identifier).toUpperCase(),p=t(i.toLowerCase());let u=0;const h=[],d=n.footnoteCounts.get(i);for(;void 0!==d&&++u<=d;){h.length>0&&h.push({type:"text",value:" "});let e="string"==typeof r?r:r(c,u);"string"==typeof e&&(e={type:"text",value:e}),h.push({type:"element",tagName:"a",properties:{href:"#"+a+"fnref-"+p+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof o?o:o(c,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const f=l[l.length-1];if(f&&"element"===f.type&&"p"===f.tagName){const e=f.children[f.children.length-1];e&&"text"===e.type?e.value+=" ":f.children.push({type:"text",value:" "}),f.children.push(...h)}else l.push(...h);const y={type:"element",tagName:"li",properties:{id:a+"fn-"+p},children:n.wrap(l,!0)};n.patch(e,y),s.push(y)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...e(p),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:n.wrap(s,!0)},{type:"text",value:"\n"}]}}(r),p=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return i&&p.children.push({type:"text",value:"\n"},i),p}export{x as t};
