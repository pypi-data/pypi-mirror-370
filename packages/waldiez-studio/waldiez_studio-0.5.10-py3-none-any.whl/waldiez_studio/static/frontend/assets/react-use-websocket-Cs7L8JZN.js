import{g as e}from"./es-toolkit-DjuajZ5e.js";import{b as t}from"./react-Blzc5Mwu.js";import{a as r}from"./react-dom-CqFGak3y.js";var n,o={},c={},u={};function a(){return n||(n=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEventSourceSupported=e.isReactNative=e.ReadyState=e.DEFAULT_HEARTBEAT=e.UNPARSABLE_JSON_OBJECT=e.DEFAULT_RECONNECT_INTERVAL_MS=e.DEFAULT_RECONNECT_LIMIT=e.SOCKET_IO_PING_CODE=e.SOCKET_IO_PATH=e.SOCKET_IO_PING_INTERVAL=e.DEFAULT_EVENT_SOURCE_OPTIONS=e.EMPTY_EVENT_HANDLERS=e.DEFAULT_OPTIONS=void 0;var t;e.DEFAULT_OPTIONS={},e.EMPTY_EVENT_HANDLERS={},e.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:e.EMPTY_EVENT_HANDLERS},e.SOCKET_IO_PING_INTERVAL=25e3,e.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",e.SOCKET_IO_PING_CODE="2",e.DEFAULT_RECONNECT_LIMIT=20,e.DEFAULT_RECONNECT_INTERVAL_MS=5e3,e.UNPARSABLE_JSON_OBJECT={},e.DEFAULT_HEARTBEAT={message:"ping",timeout:6e4,interval:25e3},function(e){e[e.UNINSTANTIATED=-1]="UNINSTANTIATED",e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t||(e.ReadyState=t={}));e.isReactNative="undefined"!=typeof navigator&&"ReactNative"===navigator.product,e.isEventSourceSupported=!e.isReactNative&&function(){try{return"EventSource"in globalThis}catch(e){return!1}}()}(u)),u}var s,i={},l={};function f(){return s||(s=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetWebSockets=e.sharedWebSockets=void 0,e.sharedWebSockets={};e.resetWebSockets=function(t){if(t&&e.sharedWebSockets.hasOwnProperty(t))delete e.sharedWebSockets[t];else for(var r in e.sharedWebSockets)e.sharedWebSockets.hasOwnProperty(r)&&delete e.sharedWebSockets[r]}}(l)),l}var v,d={},p={};function S(){if(v)return p;v=1,Object.defineProperty(p,"__esModule",{value:!0}),p.setUpSocketIOPing=p.appendQueryParams=p.parseSocketIOUrl=void 0;var e=a();p.parseSocketIOUrl=function(t){if(t){var r=/^https|wss/.test(t),n=t.replace(/^(https?|wss?)(:\/\/)?/,"").replace(/\/$/,"");return"".concat(o=r?"wss":"ws","://").concat(n).concat(e.SOCKET_IO_PATH)}if(""===t){var o=(r=/^https/.test(window.location.protocol))?"wss":"ws",c=window.location.port?":".concat(window.location.port):"";return"".concat(o,"://").concat(window.location.hostname).concat(c).concat(e.SOCKET_IO_PATH)}return t};p.appendQueryParams=function(e,t){void 0===t&&(t={});var r=/\?([\w]+=[\w]+)/.test(e),n="".concat(Object.entries(t).reduce(function(e,t){var r=t[0],n=t[1];return e+"".concat(r,"=").concat(n,"&")},"").slice(0,-1));return"".concat(e).concat(r?"&":"?").concat(n)};return p.setUpSocketIOPing=function(t,r){void 0===r&&(r=e.SOCKET_IO_PING_INTERVAL);return window.setInterval(function(){return t(e.SOCKET_IO_PING_CODE)},r)},p}var b,E={};function O(){if(b)return E;b=1,Object.defineProperty(E,"__esModule",{value:!0}),E.heartbeat=function(t,r,n){var o=n||{},c=o.interval,u=void 0===c?e.DEFAULT_HEARTBEAT.interval:c,a=o.timeout,s=void 0===a?e.DEFAULT_HEARTBEAT.timeout:a,i=o.message,l=void 0===i?e.DEFAULT_HEARTBEAT.message:i,f=Math.max(100,u/10),v=Date.now(),d=setInterval(function(){var e=Date.now(),n=function(e){if(Array.isArray(e))return e.reduce(function(e,t){return e.current>t.current?e:t}).current;return e.current}(r);if(n+s<=e)t.close();else if(n+u<=e&&v+u<=e)try{"function"==typeof l?t.send(l()):t.send(l),v=e}catch(o){t.close()}},f);return t.addEventListener("close",function(){clearInterval(d)}),function(){}};var e=a();return E}var y,_,h,T={},R={};function N(){return y||(y=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetSubscribers=e.removeSubscriber=e.addSubscriber=e.hasSubscribers=e.getSubscribers=void 0;var t={},r=[];e.getSubscribers=function(n){return(0,e.hasSubscribers)(n)?Array.from(t[n]):r};e.hasSubscribers=function(e){var r;return(null===(r=t[e])||void 0===r?void 0:r.size)>0};e.addSubscriber=function(e,r){t[e]=t[e]||new Set,t[e].add(r)};e.removeSubscriber=function(e,r){t[e].delete(r)};e.resetSubscribers=function(e){if(e&&t.hasOwnProperty(e))delete t[e];else for(var r in t)t.hasOwnProperty(r)&&delete t[r]}}(R)),R}function I(){if(_)return T;_=1,Object.defineProperty(T,"__esModule",{value:!0}),T.assertIsWebSocket=function(e,t){if(!t&&e instanceof WebSocket==!1)throw new Error("")},T.resetGlobalState=function(r){(0,t.resetSubscribers)(r),(0,e.resetWebSockets)(r)};var e=f(),t=N();return T}function w(){if(h)return d;h=1;var e=d&&d.__assign||function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};Object.defineProperty(d,"__esModule",{value:!0}),d.attachListeners=void 0;var t=S(),r=O(),n=a(),o=I();return d.attachListeners=function(c,u,a,s,i,l,f){var v,d,p,S=u.setLastMessage,b=u.setReadyState;return a.current.fromSocketIO&&(v=(0,t.setUpSocketIOPing)(f)),function(e,t,r,n){e.onmessage=function(e){var o;t.current.onMessage&&t.current.onMessage(e),"number"==typeof(null==n?void 0:n.current)&&(n.current=Date.now()),"function"==typeof t.current.filter&&!0!==t.current.filter(e)||t.current.heartbeat&&"boolean"!=typeof t.current.heartbeat&&(null===(o=t.current.heartbeat)||void 0===o?void 0:o.returnMessage)===e.data||r(e)}}(c,a,S,l),function(e,t,o,c,u){e.onopen=function(a){if(t.current.onOpen&&t.current.onOpen(a),c.current=0,o(n.ReadyState.OPEN),t.current.heartbeat&&e instanceof WebSocket){var s="boolean"==typeof t.current.heartbeat?void 0:t.current.heartbeat;u.current=Date.now(),(0,r.heartbeat)(e,u,s)}}}(c,a,b,i,l),d=function(e,t,r,c,u){return n.isEventSourceSupported&&e instanceof EventSource?function(){}:((0,o.assertIsWebSocket)(e,t.current.skipAssert),e.onclose=function(e){var o;if(t.current.onClose&&t.current.onClose(e),r(n.ReadyState.CLOSED),t.current.shouldReconnect&&t.current.shouldReconnect(e)){var s=null!==(o=t.current.reconnectAttempts)&&void 0!==o?o:n.DEFAULT_RECONNECT_LIMIT;if(u.current<s){var i="function"==typeof t.current.reconnectInterval?t.current.reconnectInterval(u.current):t.current.reconnectInterval;a=window.setTimeout(function(){u.current++,c()},null!=i?i:n.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(s)}},function(){return a&&window.clearTimeout(a)});var a}(c,a,b,s,i),p=function(t,r,o,c,u){var a;return t.onerror=function(s){var i;if(r.current.onError&&r.current.onError(s),n.isEventSourceSupported&&t instanceof EventSource&&(r.current.onClose&&r.current.onClose(e(e({},s),{code:1006,reason:"An error occurred with the EventSource: ".concat(s),wasClean:!1})),o(n.ReadyState.CLOSED),t.close()),r.current.retryOnError)if(u.current<(null!==(i=r.current.reconnectAttempts)&&void 0!==i?i:n.DEFAULT_RECONNECT_LIMIT)){var l="function"==typeof r.current.reconnectInterval?r.current.reconnectInterval(u.current):r.current.reconnectInterval;a=window.setTimeout(function(){u.current++,c()},null!=l?l:n.DEFAULT_RECONNECT_INTERVAL_MS)}else r.current.onReconnectStop&&r.current.onReconnectStop(r.current.reconnectAttempts)},function(){return a&&window.clearTimeout(a)}}(c,a,b,s,i),function(){b(n.ReadyState.CLOSING),d(),p(),c.close(),v&&clearInterval(v)}},d}var g,C,A={};function k(){if(g)return A;g=1;var e=A&&A.__assign||function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};Object.defineProperty(A,"__esModule",{value:!0}),A.attachSharedListeners=void 0;var t=f(),r=a(),n=N(),o=S(),c=O();return A.attachSharedListeners=function(u,a,s,i){var l;return s.current.fromSocketIO&&(l=(0,o.setUpSocketIOPing)(i)),function(e,t,r){e.onmessage=function(e){(0,n.getSubscribers)(t).forEach(function(t){var n;t.optionsRef.current.onMessage&&t.optionsRef.current.onMessage(e),"number"==typeof(null===(n=null==t?void 0:t.lastMessageTime)||void 0===n?void 0:n.current)&&(t.lastMessageTime.current=Date.now()),"function"==typeof t.optionsRef.current.filter&&!0!==t.optionsRef.current.filter(e)||r&&"boolean"!=typeof r&&(null==r?void 0:r.returnMessage)===e.data||t.setLastMessage(e)})}}(u,a,s.current.heartbeat),function(e,o){e instanceof WebSocket&&(e.onclose=function(e){(0,n.getSubscribers)(o).forEach(function(t){t.optionsRef.current.onClose&&t.optionsRef.current.onClose(e),t.setReadyState(r.ReadyState.CLOSED)}),delete t.sharedWebSockets[o],(0,n.getSubscribers)(o).forEach(function(t){var n;if(t.optionsRef.current.shouldReconnect&&t.optionsRef.current.shouldReconnect(e)){var o=null!==(n=t.optionsRef.current.reconnectAttempts)&&void 0!==n?n:r.DEFAULT_RECONNECT_LIMIT;if(t.reconnectCount.current<o){var c="function"==typeof t.optionsRef.current.reconnectInterval?t.optionsRef.current.reconnectInterval(t.reconnectCount.current):t.optionsRef.current.reconnectInterval;setTimeout(function(){t.reconnectCount.current++,t.reconnect.current()},null!=c?c:r.DEFAULT_RECONNECT_INTERVAL_MS)}else t.optionsRef.current.onReconnectStop&&t.optionsRef.current.onReconnectStop(t.optionsRef.current.reconnectAttempts)}})})}(u,a),function(e,t,o){e.onopen=function(u){var a=(0,n.getSubscribers)(t);a.forEach(function(t){t.reconnectCount.current=0,t.optionsRef.current.onOpen&&t.optionsRef.current.onOpen(u),t.setReadyState(r.ReadyState.OPEN),o&&e instanceof WebSocket&&(t.lastMessageTime.current=Date.now())}),o&&e instanceof WebSocket&&(0,c.heartbeat)(e,a.map(function(e){return e.lastMessageTime}),"boolean"==typeof o?void 0:o)}}(u,a,s.current.heartbeat),function(t,o){t.onerror=function(c){(0,n.getSubscribers)(o).forEach(function(n){n.optionsRef.current.onError&&n.optionsRef.current.onError(c),r.isEventSourceSupported&&t instanceof EventSource&&(n.optionsRef.current.onClose&&n.optionsRef.current.onClose(e(e({},c),{code:1006,reason:"An error occurred with the EventSource: ".concat(c),wasClean:!1})),n.setReadyState(r.ReadyState.CLOSED))}),r.isEventSourceSupported&&t instanceof EventSource&&t.close()}}(u,a),function(){l&&clearInterval(l)}},A}function P(){if(C)return i;C=1,Object.defineProperty(i,"__esModule",{value:!0}),i.createOrJoinSocket=void 0;var e=f(),t=a(),r=w(),n=k(),o=N();return i.createOrJoinSocket=function(c,u,a,s,i,l,f,v,d){if(!t.isEventSourceSupported&&s.current.eventSourceOptions)throw t.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(s.current.share){var p=null;void 0===e.sharedWebSockets[u]?(e.sharedWebSockets[u]=s.current.eventSourceOptions?new EventSource(u,s.current.eventSourceOptions):new WebSocket(u,s.current.protocols),c.current=e.sharedWebSockets[u],a(t.ReadyState.CONNECTING),p=(0,n.attachSharedListeners)(e.sharedWebSockets[u],u,s,d)):(c.current=e.sharedWebSockets[u],a(e.sharedWebSockets[u].readyState));var S={setLastMessage:i,setReadyState:a,optionsRef:s,reconnectCount:f,lastMessageTime:v,reconnect:l};return(0,o.addSubscriber)(u,S),function(r,n,c,u,a){return function(){if((0,o.removeSubscriber)(r,n),!(0,o.hasSubscribers)(r)){try{var s=e.sharedWebSockets[r];s instanceof WebSocket&&(s.onclose=function(e){c.current.onClose&&c.current.onClose(e),u(t.ReadyState.CLOSED)}),s.close()}catch(i){}a&&a(),delete e.sharedWebSockets[r]}}}(u,S,s,a,p)}if(c.current=s.current.eventSourceOptions?new EventSource(u,s.current.eventSourceOptions):new WebSocket(u,s.current.protocols),a(t.ReadyState.CONNECTING),!c.current)throw new Error("WebSocket failed to be created");return(0,r.attachListeners)(c.current,{setLastMessage:i,setReadyState:a},s,l.current,f,v,d)},i}var m,L={};function M(){return m||(m=1,function(e){var t=L&&L.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,c){function u(e){try{s(n.next(e))}catch(t){c(t)}}function a(e){try{s(n.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(u,a)}s((n=n.apply(e,t||[])).next())})},r=L&&L.__generator||function(e,t){var r,n,o,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,a[0]&&(c=0)),c;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,n=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},n=L&&L.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,c=t.length;o<c;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.getUrl=void 0;var o=S(),c=a();e.getUrl=function(u,a){for(var s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t(void 0,n([u,a],s,!0),void 0,function(t,n,u){var a,s,i,l,f,v,d;return void 0===u&&(u=0),r(this,function(r){switch(r.label){case 0:if("function"!=typeof t)return[3,10];r.label=1;case 1:return r.trys.push([1,3,,9]),[4,t()];case 2:return a=r.sent(),[3,9];case 3:return r.sent(),n.current.retryOnError?(s=null!==(f=n.current.reconnectAttempts)&&void 0!==f?f:c.DEFAULT_RECONNECT_LIMIT,u<s?(i="function"==typeof n.current.reconnectInterval?n.current.reconnectInterval(u):n.current.reconnectInterval,[4,(p=null!=i?i:c.DEFAULT_RECONNECT_INTERVAL_MS,new Promise(function(e){return window.setTimeout(e,p)}))]):[3,5]):[3,7];case 4:return r.sent(),[2,(0,e.getUrl)(t,n,u+1)];case 5:return null===(d=(v=n.current).onReconnectStop)||void 0===d||d.call(v,u),[2,null];case 6:return[3,8];case 7:return[2,null];case 8:return[3,9];case 9:return[3,11];case 10:a=t,r.label=11;case 11:return l=n.current.fromSocketIO?(0,o.parseSocketIOUrl)(a):a,[2,n.current.queryParams?(0,o.appendQueryParams)(l,n.current.queryParams):l]}var p})})}}(L)),L}var D,j,U={};function W(){if(j)return c;j=1;var e=c&&c.__assign||function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)},n=c&&c.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,c){function u(e){try{s(n.next(e))}catch(t){c(t)}}function a(e){try{s(n.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(u,a)}s((n=n.apply(e,t||[])).next())})},o=c&&c.__generator||function(e,t){var r,n,o,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,a[0]&&(c=0)),c;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,n=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},u=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(c,"__esModule",{value:!0}),c.useWebSocket=void 0;var s,i=t(),l=r(),f=a(),v=P(),d=M(),p=u((D||(D=1,s=U,Object.defineProperty(s,"__esModule",{value:!0}),s.websocketWrapper=void 0,s.websocketWrapper=function(e,t){return new Proxy(e,{get:function(e,r){var n=e[r];return"reconnect"===r?t:"function"==typeof n?function(){}:n},set:function(e,t,r){return!/^on/.test(t)&&(e[t]=r,!0)}})},s.default=s.websocketWrapper),U)),S=I();return c.useWebSocket=function(t,r,c){void 0===r&&(r=f.DEFAULT_OPTIONS),void 0===c&&(c=!0);var u=(0,i.useState)(null),a=u[0],s=u[1],b=(0,i.useState)({}),E=b[0],O=b[1],y=(0,i.useMemo)(function(){if(!r.disableJson&&a)try{return JSON.parse(a.data)}catch(e){return f.UNPARSABLE_JSON_OBJECT}return null},[a,r.disableJson]),_=(0,i.useRef)(null),h=(0,i.useRef)(null),T=(0,i.useRef)(function(){}),R=(0,i.useRef)(0),N=(0,i.useRef)(Date.now()),I=(0,i.useRef)([]),w=(0,i.useRef)(null),g=(0,i.useRef)(r);g.current=r;var C=_.current&&void 0!==E[_.current]?E[_.current]:null!==t&&!0===c?f.ReadyState.CONNECTING:f.ReadyState.UNINSTANTIATED,A=r.queryParams?JSON.stringify(r.queryParams):null,k=(0,i.useCallback)(function(e,t){var r;void 0===t&&(t=!0),f.isEventSourceSupported&&h.current instanceof EventSource||((null===(r=h.current)||void 0===r?void 0:r.readyState)===f.ReadyState.OPEN?((0,S.assertIsWebSocket)(h.current,g.current.skipAssert),h.current.send(e)):t&&I.current.push(e))},[]),P=(0,i.useCallback)(function(e,t){void 0===t&&(t=!0),k(JSON.stringify(e),t)},[k]),m=(0,i.useCallback)(function(){return!0!==g.current.share||f.isEventSourceSupported&&h.current instanceof EventSource?h.current:(null===w.current&&h.current&&((0,S.assertIsWebSocket)(h.current,g.current.skipAssert),w.current=(0,p.default)(h.current,T)),w.current)},[]);return(0,i.useEffect)(function(){if(null!==t&&!0===c){var r,u=!1,a=!0,i=function(){return n(void 0,void 0,void 0,function(){var n,c,i;return o(this,function(o){switch(o.label){case 0:return n=_,[4,(0,d.getUrl)(t,g)];case 1:return n.current=o.sent(),null===_.current?(_.current="ABORTED",(0,l.flushSync)(function(){return O(function(t){return e(e({},t),{ABORTED:f.ReadyState.CLOSED})})}),[2]):(c=function(e){u||(0,l.flushSync)(function(){return s(e)})},i=function(t){u||(0,l.flushSync)(function(){return O(function(r){var n;return e(e({},r),_.current&&((n={})[_.current]=t,n))})})},a&&(r=(0,v.createOrJoinSocket)(h,_.current,i,g,c,T,R,N,k)),[2])}})})};return T.current=function(){u||(w.current&&(w.current=null),null==r||r(),i())},i(),function(){u=!0,a=!1,w.current&&(w.current=null),null==r||r(),s(null)}}null!==t&&!1!==c||(R.current=0,O(function(t){var r;return e(e({},t),_.current&&((r={})[_.current]=f.ReadyState.CLOSED,r))}))},[t,c,A,k]),(0,i.useEffect)(function(){C===f.ReadyState.OPEN&&I.current.splice(0).forEach(function(e){k(e)})},[C]),{sendMessage:k,sendJsonMessage:P,lastMessage:a,lastJsonMessage:y,readyState:C,getWebSocket:m}},c}var F,G={};function J(){if(F)return G;F=1;var e=G&&G.__assign||function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.useSocketIO=void 0;var r=t(),n=W(),o=a(),c={type:"empty",payload:null};return G.useSocketIO=function(t,u,a){void 0===u&&(u=o.DEFAULT_OPTIONS),void 0===a&&(a=!0);var s=(0,r.useMemo)(function(){return e(e({},u),{fromSocketIO:!0})},[]),i=(0,n.useWebSocket)(t,s,a),l=i.sendMessage,f=i.sendJsonMessage,v=i.lastMessage,d=i.readyState,p=i.getWebSocket,S=(0,r.useMemo)(function(){return function(e){if(!e||!e.data)return c;var t=e.data.match(/\[.*]/);if(!t)return c;var r=JSON.parse(t);return Array.isArray(r)&&r[1]?{type:r[0],payload:r[1]}:c}(v)},[v]);return{sendMessage:l,sendJsonMessage:f,lastMessage:S,lastJsonMessage:S,readyState:d,getWebSocket:p}},G}var V,x,B={};const H=e((x||(x=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetGlobalState=e.useEventSource=e.ReadyState=e.useSocketIO=e.default=void 0;var r=W();Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.useWebSocket}});var n=J();Object.defineProperty(e,"useSocketIO",{enumerable:!0,get:function(){return n.useSocketIO}});var o=a();Object.defineProperty(e,"ReadyState",{enumerable:!0,get:function(){return o.ReadyState}});var c=function(){if(V)return B;V=1;var e=B&&B.__assign||function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)},r=B&&B.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(B,"__esModule",{value:!0}),B.useEventSource=void 0;var n=t(),o=W(),c=a();return B.useEventSource=function(t,u,a){void 0===u&&(u=c.DEFAULT_EVENT_SOURCE_OPTIONS);var s=u.withCredentials,i=u.events,l=r(u,["withCredentials","events"]);void 0===a&&(a=!0);var f=e(e({},l),{eventSourceOptions:{withCredentials:s}}),v=(0,n.useRef)(c.EMPTY_EVENT_HANDLERS);i&&(v.current=i);var d=(0,o.useWebSocket)(t,f,a),p=d.lastMessage,S=d.readyState,b=d.getWebSocket;return(0,n.useEffect)(function(){(null==p?void 0:p.type)&&Object.entries(v.current).forEach(function(e){var t=e[0],r=e[1];t===p.type&&r(p)})},[p]),{lastEvent:p,readyState:S,getEventSource:b}},B}();Object.defineProperty(e,"useEventSource",{enumerable:!0,get:function(){return c.useEventSource}});var u=I();Object.defineProperty(e,"resetGlobalState",{enumerable:!0,get:function(){return u.resetGlobalState}})}(o)),o));export{H as u};
