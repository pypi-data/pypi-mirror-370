Metadata-Version: 2.4
Name: sopel-amputator
Version: 0.3.0
Summary: Sopel plugin that detects AMP links and finds their canonical forms using AmputatorBot
Author-email: dgw <dgw@technobabbl.es>
License-Expression: EFL-2.0
Project-URL: Homepage, https://github.com/dgw/sopel-amputator
Project-URL: Bug Tracker, https://github.com/dgw/sopel-amputator/issues
Keywords: sopel,plugin,bot,irc
Platform: Linux x86, x86-64
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: System Administrators
Classifier: Topic :: Communications :: Chat :: Internet Relay Chat
Requires-Python: <4,>=3.8
Description-Content-Type: text/markdown
License-File: COPYING
Requires-Dist: sopel>=8.0
Dynamic: license-file

# sopel-amputator

Sopel plugin that detects AMP links and finds their canonical forms using
[AmputatorBot](https://www.amputatorbot.com/)

## Installing

Releases are hosted on PyPI, so after installing Sopel, all you need is `pip`:

```shell
$ pip install sopel-amputator
```

## Configuring

The easiest way to configure `sopel-amputator` is via Sopel's configuration
wizard—simply run `sopel-plugins configure amputator` and enter the values for
which it prompts you.

Individual settings are described below.

### `ignore_domains` (`list[str]`)

This is a list of hostnames which `sopel-amputator` will ignore, even if they
match one of the common AMP substrings it looks for. By default it contains a
set of ignored domains from the AmputatorBot project.

Setting this value _overrides_ the default, so make sure to also enter any
entries that you would like to keep from the default list.

### `guess_and_check` (`bool`, default `true`)

The default behavior for AMPutatorBot's "guess and check" feature, which tries
to guess canonical URLs when the page doesn't provide one in its HTML.

Behavior can be changed per-channel by chanops and bot admins using the
`.ampguess` command on IRC.

### `skip_safe_filetypes` (`bool`, default `true`)

Whether to skip AMP-checking links that look like they point to safe MIME types,
e.g. media files.

## Changelog

### 0.3.0

* Guess MIME type of links (by file extension, if present) and skip "safe" types
  that are probably not wrapped in AMP [#3]
  * Configurable with `skip_safe_filetypes` config setting.
* Added configuration for AMPutatorBot's "guess and check" function, both a
  global setting (`guess_and_check`) and a per-channel override (new `ampguess`
  command for chanops and bot admins) [#2]

Under the hood:
* Require _stable_ Sopel 8.x, no more pre-releases
* Updated package metadata & release workflow


### 0.2.1

* Added Twitter/X domains to default ignore list


### 0.2.0

Under-the-hood improvements:

* More robust domain matching against ignore list
  * Includes distinct log messages for exact matches vs. subdomain matches
* More granular error handling
* Better error logging
* Migrated package metadata from `setup.py`+`setup.cfg` to `pyproject.toml`


### 0.1.0

Initial release.

Pending conversion from `setup.py`+`setup.cfg` template to newer style package
using `pyproject.toml`—plus some other features on the todo list—but the basics
are here:

* Detect likely AMP links
* Call AmputatorBot API for the canonical URL of each suspected AMP link
* Skip links from a configurable list of ignored domains
* Silently fail if no better URL is found
