<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIForge - 智能意图自适应执行引擎</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="/static/css/aiforge.css" rel="stylesheet">
</head>

<body class="bg-gray-50">
    <!-- 顶部导航 -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-bold text-gray-900">🚀 AIForge</h1>
                    <span class="ml-2 text-sm text-gray-500">智能意图自适应执行引擎</span>
                </div>
                <div class="flex items-center space-x-4">
                    <select id="providerSelect" class="border rounded px-3 py-1">
                        <option value="openrouter">OpenRouter</option>
                        <option value="deepseek">DeepSeek</option>
                        <option value="ollama">Ollama</option>
                    </select>
                    <button id="settingsBtn" class="text-gray-500 hover:text-gray-700">⚙️</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- 左侧：输入区域 -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow p-6">
                    <h2 class="text-lg font-semibold mb-4">指令输入</h2>

                    <!-- 任务类型快速选择 -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">任务类型</label>
                        <div class="grid grid-cols-2 gap-2" id="taskTypeButtons">
                            <button class="task-type-btn" data-type="data_fetch">📊 数据获取</button>
                            <button class="task-type-btn" data-type="data_analysis">📈 数据分析</button>
                            <button class="task-type-btn" data-type="content_generation">✍️ 内容生成</button>
                            <button class="task-type-btn" data-type="code_generation">💻 代码生成</button>
                            <button class="task-type-btn" data-type="search">🔍 搜索查询</button>
                            <button class="task-type-btn" data-type="direct_response">💬 知识问答</button>
                        </div>
                    </div>

                    <!-- 指令输入框 -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">自然语言指令</label>
                        <textarea id="instructionInput" rows="4"
                            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="请输入您的指令，例如：搜索最新的AI技术趋势并生成分析报告"></textarea>
                    </div>

                    <!-- 执行按钮 -->
                    <div class="flex space-x-2">
                        <button id="executeBtn"
                            class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50">
                            <span id="executeText">🚀 执行指令</span>
                        </button>
                        <button id="stopBtn"
                            class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50"
                            disabled>
                            ⏹️ 停止
                        </button>
                    </div>

                    <!-- 示例指令 -->
                    <div class="mt-4">
                        <details class="text-sm">
                            <summary class="cursor-pointer text-gray-600">💡 示例指令</summary>
                            <div class="mt-2 space-y-1 text-gray-500">
                                <div class="example-instruction cursor-pointer hover:text-blue-600"
                                    data-instruction="搜索最新的人工智能发展趋势">📊 搜索最新的人工智能发展趋势</div>
                                <div class="example-instruction cursor-pointer hover:text-blue-600"
                                    data-instruction="生成一份关于Python编程的学习计划">✍️ 生成一份关于Python编程的学习计划</div>
                                <div class="example-instruction cursor-pointer hover:text-blue-600"
                                    data-instruction="编写一个计算斐波那契数列的函数">💻 编写一个计算斐波那契数列的函数</div>
                            </div>
                        </details>
                    </div>
                </div>
            </div>

            <!-- 右侧：执行进度和结果 -->
            <div class="lg:col-span-2">
                <!-- 执行进度 -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h2 class="text-lg font-semibold mb-4">执行进度</h2>
                    <div id="progressContainer" class="h-48 overflow-y-auto bg-gray-50 rounded p-4 font-mono text-sm">
                        <div class="text-gray-500 text-center py-8">等待指令执行...</div>
                    </div>
                </div>

                <!-- 结果展示区域 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold">执行结果</h2>
                    </div>
                    <div id="resultContainer" class="min-h-64">
                        <div class="text-gray-500 text-center py-8">执行结果将在这里显示...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 设置模态框 -->
    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg max-w-md w-full p-6">
                <h3 class="text-lg font-semibold mb-4">系统设置</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">最大执行轮数</label>
                        <input type="number" id="maxRounds" value="5" min="1" max="10"
                            class="w-full border rounded px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">语言设置</label>
                        <select id="languageSelect" class="w-full border rounded px-3 py-2">
                            <option value="zh">中文</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label for="progressLevelSelect" class="block text-sm font-medium text-gray-700 mb-2">
                            进度显示级别
                        </label>
                        <select id="progressLevelSelect" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <option value="detailed">详细模式 - 显示所有进度信息</option>
                            <option value="minimal">简化模式 - 只显示关键节点</option>
                            <option value="none">静默模式 - 不显示进度信息</option>
                        </select>
                    </div>
                </div>
                <div class="flex justify-end space-x-2 mt-6">
                    <button id="cancelSettings" class="px-4 py-2 border rounded hover:bg-gray-50">取消</button>
                    <button id="saveSettings"
                        class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">保存</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/config-manager.js"></script>
    <script src="/static/js/streaming-client.js"></script>
    <script src="/static/js/ui-adapters.js"></script>
    <script src="/static/js/main.js"></script>
</body>

</html>