syntax = "proto3";

package tinder.events.model.server;

import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";
import "tinder/events/model/common/session/app.proto";
import "tinder/events/model/common/session/server.proto";
import "tinder/events/model/common/session/service.proto";
import "tinder/events/model/common/session/user.proto";
import "tinder/events/model/options.proto";
import "tinder/events/model/server/platform.proto";

option java_multiple_files = true;
option java_package = "com.tinder.generated.events.model.server";

message ServerEventBatch {
    google.protobuf.StringValue id = 1;
    repeated ServerEvent events = 2;
}

message ServerEvent {
    google.protobuf.StringValue id = 1;
    google.protobuf.Timestamp create_time = 2;
    ServerEventSession event_session = 5;
    
    oneof value {
        ServerPlatformEvent platform = 9;
    }
    
    reserved 10;
    
    reserved "feature";
}

message ServerEventSession {
    common.session.ServiceAttributes service = 1;
    common.session.ServerAttributes server = 2;
    common.session.UserAttributes user = 3;
    common.session.AppAttributes app = 4;
}
