# <!-- Powered by JTECH™ Core -->
template:
  id: architecture-template-v2
  name: Documento de Arquitetura
  version: 2.0
  output:
    format: markdown
    filename: docs/architecture.md
    title: "Documento de Arquitetura {{project_name}}"

workflow:
  mode: interactive
  elicitation: advanced-elicitation

sections:
  - id: introduction
    title: Introdução
    instruction: |
      Se disponível, revise todos os documentos relevantes fornecidos para coletar todo o contexto relevante antes de começar. Se no mínimo você não conseguir localizar docs/prd.md, pergunte ao usuário quais documentos fornecerão a base para a arquitetura.
    sections:
      - id: intro-content
        content: |
          Este documento delineia a arquitetura geral do projeto para {{project_name}}, incluindo sistemas backend, serviços compartilhados e preocupações não específicas da UI. Seu objetivo principal é servir como o blueprint arquitetônico orientador para desenvolvimento orientado por IA, garantindo consistência e aderência aos padrões e tecnologias escolhidos.

          **Relacionamento com Arquitetura Frontend:**
          Se o projeto incluir uma interface de usuário significativa, um Documento de Arquitetura Frontend separado detalhará o design específico do frontend e DEVE ser usado em conjunto com este documento. As escolhas centrais da stack tecnológica documentadas aqui (veja "Stack Tecnológica") são definitivas para todo o projeto, incluindo quaisquer componentes frontend.
      - id: starter-template
        title: Template Inicial ou Projeto Existente
        instruction: |
          Antes de prosseguir com o design da arquitetura, verifique se o projeto é baseado em um template inicial ou codebase existente:

          1. Revise o PRD e o briefing de brainstorming para quaisquer menções de:
          - Templates iniciais (ex: Create React App, Next.js, Vue CLI, Angular CLI, etc.)
          - Projetos existentes ou codebases sendo usados como fundação
          - Projetos boilerplate ou ferramentas de scaffolding
          - Projetos anteriores para serem clonados ou adaptados

          2. Se um template inicial ou projeto existente for mencionado:
          - Peça ao usuário para fornecer acesso através de um destes métodos:
            - Link para a documentação do template inicial
            - Upload/anexar os arquivos do projeto (para projetos pequenos)
            - Compartilhar um link para o repositório do projeto (GitHub, GitLab, etc.)
          - Analise o projeto inicial/existente para entender:
            - Stack tecnológica pré-configurada e versões
            - Estrutura e padrões de organização do projeto
            - Scripts e ferramentas embutidas
            - Padrões arquiteturais e convenções existentes
            - Quaisquer limitações ou restrições impostas pelo starter
          - Use esta análise para informar e alinhar suas decisões arquiteturais

          3. Se nenhum template inicial ou projeto existente for especificado:
          - Prossiga com o design de arquitetura novo baseado nos requisitos
          - Documente todas as decisões de stack tecnológica e padrões arquiteturais

      - id: project-type
        title: Tipo de Projeto
        instruction: |
          Determine o tipo de aplicação baseado na análise do PRD e qualquer contexto adicional:
        template: |
          **Tipo de Aplicação:** {{app_type}}
          
          *Selecione entre: Web Application, Mobile App, Desktop Application, API/Microservice, CLI Tool, Library/Package, Full-Stack Application, Data Pipeline, ML/AI System, IoT System, ou Other (especificar)*

  - id: tech-stack
    title: Stack Tecnológica
    instruction: |
      Define as escolhas fundamentais de tecnologia para o projeto. Estas decisões são definitivas e devem estar alinhadas com qualquer starter template ou projeto existente identificado na seção anterior.
    sections:
      - id: programming-languages
        title: Linguagens de Programação
        template: |
          **Linguagens Primárias:**
          - {{primary_languages}}

          **Linguagens de Suporte/Específicas:**
          - {{support_languages}}

          **Justificativa:**
          {{language_justification}}

      - id: frameworks-libraries
        title: Frameworks e Bibliotecas
        template: |
          **Framework Principal:**
          - {{main_framework}} - {{framework_justification}}

          **Bibliotecas-Chave:**
          {{key_libraries}}

          **Ferramentas de Build/Bundling:**
          - {{build_tools}}

      - id: database-data-storage
        title: Banco de Dados e Armazenamento de Dados
        template: |
          **Banco de Dados Primário:**
          - {{primary_database}} - {{db_justification}}

          **Armazenamento Adicional:**
          {{additional_storage}}

          **ORM/Abstração de Dados:**
          - {{data_layer}}

      - id: infrastructure-deployment
        title: Infraestrutura e Deployment
        template: |
          **Plataforma de Deployment:**
          - {{deployment_platform}}

          **Containerização:**
          - {{containerization}}

          **CI/CD:**
          - {{cicd_approach}}

  - id: architecture-overview
    title: Visão Geral da Arquitetura
    instruction: |
      Forneça uma visão de alto nível da arquitetura do sistema, incluindo componentes principais e suas interações.
    sections:
      - id: system-architecture
        title: Arquitetura do Sistema
        instruction: |
          Descreva a arquitetura geral do sistema, identificando componentes principais, camadas e padrões arquiteturais.
        template: |
          **Padrão Arquitetônico:**
          {{architectural_pattern}}

          **Componentes Principais:**
          {{main_components}}

          **Fluxo de Dados:**
          {{data_flow}}

      - id: folder-structure
        title: Estrutura de Pastas
        instruction: |
          Se você identificou um starter template ou projeto existente, adapte a estrutura de pastas recomendada para ser consistente com os padrões estabelecidos. Caso contrário, proponha uma estrutura que siga as melhores práticas para a stack tecnológica escolhida.
        template: |
          ```
          {{folder_structure}}
          ```

          **Convenções de Organização:**
          {{organization_conventions}}

  - id: detailed-design
    title: Design Detalhado
    instruction: |
      Aprofunde nos detalhes arquiteturais específicos, incluindo padrões, configurações e decisões de implementação.
    sections:
      - id: api-design
        title: Design de API
        condition: "{{needs_api}}"
        template: |
          **Estilo de API:**
          {{api_style}}

          **Endpoints Principais:**
          {{main_endpoints}}

          **Autenticação/Autorização:**
          {{auth_approach}}

          **Documentação de API:**
          {{api_documentation}}

      - id: data-modeling
        title: Modelagem de Dados
        template: |
          **Esquema Principal:**
          {{data_schema}}

          **Relacionamentos:**
          {{data_relationships}}

          **Estratégia de Migração:**
          {{migration_strategy}}

      - id: security-considerations
        title: Considerações de Segurança
        template: |
          **Medidas de Segurança:**
          {{security_measures}}

          **Tratamento de Dados Sensíveis:**
          {{sensitive_data_handling}}

          **Conformidade:**
          {{compliance_requirements}}

  - id: performance-scalability
    title: Performance e Escalabilidade
    instruction: |
      Aborde considerações de performance, otimização e escalabilidade baseadas nos requisitos identificados no PRD.
    template: |
      **Metas de Performance:**
      {{performance_targets}}

      **Estratégias de Otimização:**
      {{optimization_strategies}}

      **Plano de Escalabilidade:**
      {{scalability_plan}}

      **Monitoramento:**
      {{monitoring_approach}}

  - id: testing-strategy
    title: Estratégia de Testes
    template: |
      **Níveis de Teste:**
      {{test_levels}}

      **Ferramentas de Teste:**
      {{testing_tools}}

      **Estratégia de Automação:**
      {{automation_strategy}}

      **Ambiente de Testes:**
      {{test_environment}}

  - id: deployment-operations
    title: Deployment e Operações
    template: |
      **Estratégia de Deployment:**
      {{deployment_strategy}}

      **Ambientes:**
      {{environments}}

      **Configuração:**
      {{configuration_management}}

      **Logging e Monitoramento:**
      {{logging_monitoring}}

  - id: risks-mitigation
    title: Riscos e Mitigação
    template: |
      **Riscos Técnicos Identificados:**
      {{technical_risks}}

      **Estratégias de Mitigação:**
      {{mitigation_strategies}}

      **Planos de Contingência:**
      {{contingency_plans}}

  - id: future-considerations
    title: Considerações Futuras
    template: |
      **Evolução Arquitetural:**
      {{architectural_evolution}}

      **Funcionalidades Futuras:**
      {{future_features}}

      **Pontos de Extensão:**
      {{extension_points}}

validation:
  required_sections:
    - introduction
    - tech-stack
    - architecture-overview
    - detailed-design
  
  review_prompts:
    - "A arquitetura está alinhada com os requisitos do PRD?"
    - "As escolhas tecnológicas são justificadas e apropriadas?"
    - "A estrutura suporta os requisitos de escalabilidade?"
    - "As considerações de segurança são adequadas?"
    - "O documento fornece orientação suficiente para desenvolvimento?"
