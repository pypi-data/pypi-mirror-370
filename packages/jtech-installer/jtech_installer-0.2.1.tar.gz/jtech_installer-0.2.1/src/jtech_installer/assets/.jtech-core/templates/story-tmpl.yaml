# <!-- Powered by JTECH™ Core -->
template:
  id: story-template-v2
  name: Documento de Story
  version: 2.0
  output:
    format: markdown
    filename: docs/stories/{{epic_num}}.{{story_num}}.{{story_title_short}}.md
    title: "Story {{epic_num}}.{{story_num}}: {{story_title_short}}"

workflow:
  mode: interactive
  elicitation: advanced-elicitation

agent_config:
  editable_sections:
    - Status
    - Story
    - Critérios de Aceitação
    - Tarefas / Subtarefas
    - Notas de Dev
    - Testes
    - Log de Mudanças

sections:
  - id: status
    title: Status
    type: choice
    choices: [Rascunho, Aprovada, EmAndamento, Revisão, Concluída]
    instruction: Selecione o status atual da story
    owner: scrum-master
    editors: [scrum-master, dev-agent]

  - id: story
    title: Story
    type: template-text
    template: |
      **Como um** {{role}},
      **Eu quero** {{action}},
      **Para que** {{benefit}}
    instruction: |
      Defina a user story usando o formato padrão. Seja específico sobre:
      - Papel/persona do usuário
      - Ação ou funcionalidade desejada  
      - Benefício ou valor esperado
    elicit: true
    owner: product-owner
    editors: [product-owner, scrum-master]

  - id: epic-context
    title: Contexto do Épico
    template: |
      **Épico:** {{epic_name}}
      
      **Relacionamento:** {{epic_relationship}}
      
      **Dependências:** {{story_dependencies}}
    instruction: Forneça contexto sobre como esta story se relaciona com o épico maior
    owner: product-owner
    editors: [product-owner, scrum-master]

  - id: acceptance-criteria
    title: Critérios de Aceitação
    type: bullet-list
    instruction: |
      Liste critérios específicos, mensuráveis e testáveis. Use formato "Dado... Quando... Então..." quando apropriado.
      Cada critério deve ser:
      - Específico e claro
      - Testável
      - Focado no valor para o usuário
    elicit: true
    owner: product-owner
    editors: [product-owner, qa-agent, scrum-master]

  - id: definition-of-done
    title: Definição de Pronto
    type: checklist
    template: |
      - [ ] Código implementado e revisado
      - [ ] Testes unitários escritos e passando
      - [ ] Testes de integração passando
      - [ ] Documentação atualizada
      - [ ] Design review completado (se aplicável)
      - [ ] Testes de aceitação passando
      - [ ] Deploy em ambiente de staging realizado
      - [ ] Aprovação do Product Owner
    instruction: Customize a definição de pronto padrão conforme necessário para esta story
    owner: scrum-master
    editors: [scrum-master, qa-agent]

  - id: technical-notes
    title: Notas Técnicas
    template: |
      **Abordagem Técnica:** {{technical_approach}}
      
      **Considerações de Arquitetura:** {{architecture_considerations}}
      
      **APIs/Integrações:** {{api_integrations}}
      
      **Considerações de Performance:** {{performance_considerations}}
    instruction: Documente aspectos técnicos importantes e decisões de implementação
    owner: tech-lead
    editors: [tech-lead, dev-agent, architect]

  - id: design-specifications
    title: Especificações de Design
    template: |
      **Wireframes/Mockups:** {{design_wireframes}}
      
      **Interações:** {{interaction_specifications}}
      
      **Estados da UI:** {{ui_states}}
      
      **Responsividade:** {{responsive_requirements}}
    instruction: Inclua especificações de design e UX relevantes
    owner: ux-designer
    editors: [ux-designer, product-owner]
    conditional: "{{has_ui_components}}"

  - id: tasks-subtasks
    title: Tarefas / Subtarefas
    type: task-list
    template: |
      **Tarefas de Desenvolvimento:**
      - [ ] {{dev_task_1}}
      - [ ] {{dev_task_2}}
      - [ ] {{dev_task_3}}
      
      **Tarefas de Teste:**
      - [ ] {{test_task_1}}
      - [ ] {{test_task_2}}
      
      **Tarefas de Documentação:**
      - [ ] {{doc_task_1}}
    instruction: Quebre a story em tarefas específicas e acionáveis
    owner: scrum-master
    editors: [scrum-master, dev-agent, qa-agent]

  - id: estimation
    title: Estimativa
    template: |
      **Story Points:** {{story_points}}
      
      **Horas Estimadas:** {{estimated_hours}}
      
      **Complexidade:** {{complexity_rating}}
      
      **Riscos/Incertezas:** {{estimation_risks}}
    instruction: Forneça estimativas baseadas na complexidade e esforço esperado
    owner: development-team
    editors: [scrum-master, dev-agent, tech-lead]

  - id: testing-strategy
    title: Estratégia de Testes
    template: |
      **Cenários de Teste:** {{test_scenarios}}
      
      **Tipos de Teste:** {{test_types}}
      
      **Dados de Teste:** {{test_data_requirements}}
      
      **Critérios de Teste:** {{test_criteria}}
    instruction: Defina abordagem e requisitos específicos de teste
    owner: qa-agent
    editors: [qa-agent, dev-agent]

  - id: risks-assumptions
    title: Riscos e Suposições
    template: |
      **Riscos Identificados:** {{identified_risks}}
      
      **Suposições:** {{key_assumptions}}
      
      **Mitigações:** {{risk_mitigations}}
      
      **Planos de Contingência:** {{contingency_plans}}
    instruction: Documente riscos e suposições que podem impactar a entrega
    owner: scrum-master
    editors: [scrum-master, tech-lead, product-owner]

  - id: dev-notes
    title: Notas de Desenvolvimento
    type: free-text
    instruction: |
      Espaço para desenvolvedores documentarem:
      - Decisões de implementação
      - Desafios encontrados
      - Soluções aplicadas
      - Lições aprendidas
    owner: dev-agent
    editors: [dev-agent, tech-lead]

  - id: testing-results
    title: Resultados de Testes
    template: |
      **Testes Executados:** {{tests_executed}}
      
      **Cobertura de Testes:** {{test_coverage}}
      
      **Issues Encontradas:** {{issues_found}}
      
      **Status de QA:** {{qa_status}}
    instruction: Documente resultados dos testes e status de qualidade
    owner: qa-agent
    editors: [qa-agent]

  - id: review-feedback
    title: Feedback de Revisão
    template: |
      **Code Review:** {{code_review_feedback}}
      
      **Design Review:** {{design_review_feedback}}
      
      **Feedback do PO:** {{po_feedback}}
      
      **Ações Requeridas:** {{required_actions}}
    instruction: Capture feedback de revisões e ações necessárias
    owner: scrum-master
    editors: [scrum-master, product-owner, tech-lead, qa-agent]

  - id: changelog
    title: Log de Mudanças
    type: table
    columns: [Data, Versão, Mudança, Autor]
    instruction: Rastreie mudanças na story ao longo do tempo
    owner: scrum-master
    editors: [scrum-master, product-owner, dev-agent, qa-agent]

validation:
  required_sections:
    - story
    - acceptance-criteria
    - definition-of-done
    - tasks-subtasks
    - estimation
  
  status_workflow:
    Draft: [Aprovada]
    Aprovada: [EmAndamento]
    EmAndamento: [Revisão, Aprovada]
    Revisão: [Concluída, EmAndamento]
    Concluída: []
  
  review_prompts:
    - "A story está clara e bem definida?"
    - "Os critérios de aceitação são testáveis?"
    - "A estimativa é realista baseada na complexidade?"
    - "Todos os riscos foram identificados?"
    - "A strategy de testes é adequada?"
