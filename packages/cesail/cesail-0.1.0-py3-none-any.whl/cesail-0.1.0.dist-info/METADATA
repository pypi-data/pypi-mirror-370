Metadata-Version: 2.4
Name: cesail
Version: 0.1.0
Summary: A comprehensive web automation and DOM parsing platform with AI-powered agents
Home-page: https://github.com/yourusername/cesail
Author: Rachita Pradeep
Author-email: Rachita Pradeep <ajjayawardane@gmail.com>
Maintainer-email: Rachita Pradeep <ajjayawardane@gmail.com>
License: MIT
Project-URL: Homepage, https://github.com/yourusername/cesail
Project-URL: Documentation, https://github.com/yourusername/cesail#readme
Project-URL: Repository, https://github.com/yourusername/cesail
Project-URL: Issues, https://github.com/yourusername/cesail/issues
Project-URL: Changelog, https://github.com/yourusername/cesail/blob/main/CHANGELOG.md
Keywords: web-automation,dom-parser,ai,playwright,mcp,web-scraping
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Internet :: WWW/HTTP :: Browsers
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: playwright>=1.40.0
Requires-Dist: pytest>=8.0.0
Requires-Dist: pytest-asyncio>=0.23.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: fastmcp>=2.0.0
Requires-Dist: openai>=1.0.0
Requires-Dist: tenacity>=8.0.0
Requires-Dist: python-dotenv>=1.0.0
Provides-Extra: dev
Requires-Dist: pytest>=8.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.23.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: isort>=5.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Requires-Dist: flake8>=4.0.0; extra == "dev"
Provides-Extra: docs
Requires-Dist: sphinx>=4.0.0; extra == "docs"
Requires-Dist: sphinx-rtd-theme>=1.0.0; extra == "docs"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# CeSail

A comprehensive web automation and DOM parsing platform with AI-powered agents.

## Project Overview

CeSail is a multi-component system for web automation, DOM parsing, and AI-powered web interactions. It consists of several interconnected modules designed to work together to provide intelligent web automation capabilities.

### Key Features

- **ðŸ¤– AI-Powered Automation**: Natural language task processing with LLM integration
- **ðŸŒ Web Scraping & Analysis**: Advanced DOM parsing and element extraction
- **ðŸ”§ MCP Integration**: FastMCP server for standardized automation APIs
- **ðŸ“¸ Visual Analysis**: Screenshot capture and visual element detection
- **âš¡ High Performance**: Optimized for speed and reliability
- **ðŸ”’ Secure**: Built-in security features and best practices

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Simple Agent  â”‚    â”‚   MCP Server    â”‚    â”‚  DOM Parser     â”‚
â”‚   (Python)      â”‚â—„â”€â”€â–ºâ”‚   (Python)      â”‚â—„â”€â”€â–ºâ”‚  (JavaScript)   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ LLM Interface â”‚    â”‚ â€¢ FastMCP APIs  â”‚    â”‚ â€¢ Element Ext.  â”‚
â”‚ â€¢ Task Planning â”‚    â”‚ â€¢ Web Automationâ”‚    â”‚ â€¢ Selector Gen. â”‚
â”‚ â€¢ Execution     â”‚    â”‚ â€¢ Screenshots   â”‚    â”‚ â€¢ Text Analysis â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Web Browser   â”‚
                    â”‚  (Playwright)   â”‚
                    â”‚                 â”‚
                    â”‚ â€¢ Page Control  â”‚
                    â”‚ â€¢ DOM Access    â”‚
                    â”‚ â€¢ Screenshots   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Components

### 1. DOM Parser (`dom_parser/`)
JavaScript-based DOM parser for extracting interactive elements and page structure.

**Language**: JavaScript/Node.js  
**Features**: 
- Element extraction and analysis
- Text content extraction and scoring
- Robust CSS selector generation
- Performance monitoring and caching
- ARIA attribute analysis
- Visual element detection

**Documentation**: See [dom_parser/README.md](dom_parser/README.md)

### 2. MCP Server (`mcp/`)
FastMCP server providing standardized web automation APIs.

**Language**: Python  
**Features**:
- Web automation APIs (click, type, navigate, etc.)
- Page analysis and element extraction
- Screenshot capture and analysis
- Session management
- Error handling and retry logic

**Usage**: `python3 mcp/fastmcp_server.py`

### 3. Simple Agent (`simple_agent/`)
AI-powered web automation agent using LLM for task breakdown and execution.

**Language**: Python  
**Features**:
- Natural language task processing
- Automated task breakdown and planning
- LLM-powered decision making
- Visual analysis with screenshots
- Interactive execution monitoring

**Usage**: `python3 simple_agent/simple_agent.py`

## Quick Start

### Prerequisites

- **Python**: 3.9 or higher
- **Node.js**: 14 or higher
- **OpenAI API Key**: Required for Simple Agent
- **Git**: For cloning the repository

### Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/yourusername/cesail.git
   cd cesail
   ```

2. **Set up Python environment**:
   ```bash
   python3 -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   pip install -e .
   ```

3. **Set up DOM Parser** (optional):
   ```bash
   cd dom_parser
   npm install
   npm run build
   cd ..
   ```

4. **Configure environment** (for Simple Agent):
   ```bash
   # Create .env file in simple_agent/ directory
   echo "OPENAI_API_KEY=your_openai_api_key_here" > simple_agent/.env
   ```

5. **Install Playwright browsers**:
   ```bash
   playwright install
   ```

## Usage Examples

### Simple Agent - Basic Usage

The Simple Agent allows you to perform web tasks using natural language:

```bash
python3 simple_agent/simple_agent.py
```

**Example Interaction**:
```
Enter the URL you want to navigate to: https://www.amazon.com

What would you like me to do? Search for wireless headphones under $100

The agent will:
1. Navigate to Amazon
2. Find the search box
3. Type "wireless headphones"
4. Apply price filter
5. Show you the results
```

### MCP Server - API Usage

Start the MCP server for programmatic access:

```bash
python3 mcp/fastmcp_server.py
```

**Example API Calls**:
```python
# Navigate to a page
await execute_action({
    "type": "navigate",
    "url": "https://example.com"
})

# Click an element
await execute_action({
    "type": "click",
    "element_id": "submit-button"
})

# Get page details
page_info = await get_page_details()
```

### DOM Parser - JavaScript Usage

Use the DOM parser directly in JavaScript:

```javascript
import { extractElements } from 'dom-parser';

// Extract all interactive elements
const result = await extractElements();
console.log(result.actions);

// Get specific element types
const buttons = result.actions.filter(action => action.type === 'BUTTON');
const forms = result.forms;
```

## Advanced Usage

### Custom Action Types

You can define custom actions for specific use cases:

```python
from dom_parser.src.py.types import Action, ActionType

# Custom action for form filling
custom_action = Action(
    type=ActionType.TYPE,
    element_id="email-input",
    text_to_type="user@example.com",
    description="Fill email field",
    confidence=0.9
)
```

### Error Handling

Implement robust error handling:

```python
try:
    result = await parser.execute_action(action)
except Exception as e:
    print(f"Action failed: {e}")
    # Implement retry logic or fallback
```

### Performance Optimization

Optimize for speed and reliability:

```python
# Configure parser for performance
parser = DOMParser(
    headless=True,  # Run in headless mode
    timeout=30000,  # 30 second timeout
    wait_for_idle=True  # Wait for page to be idle
)
```

## Configuration

### Environment Variables

Create a `.env` file in the `simple_agent/` directory:

```env
# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_API_BASE=https://api.openai.com/v1

# Optional: Custom model
OPENAI_MODEL=gpt-4o

# Optional: Custom base URL for different providers
# OPENAI_API_BASE=https://your-custom-endpoint.com/v1
```

### Playwright Configuration

Configure Playwright for your environment:

```python
# In your code
parser = DOMParser(
    headless=False,  # Show browser window
    slow_mo=1000,    # Slow down actions for debugging
    viewport={'width': 1920, 'height': 1080}
)
```

## Development

### Running Tests

```bash
# Python tests
pytest dom_parser/tests/ -v

# JavaScript tests (in dom_parser directory)
cd dom_parser && npm test

# Integration tests
pytest dom_parser/tests/playground/ -v
```

### Code Quality

```bash
# Python linting
black .
isort .
mypy .

# JavaScript linting (in dom_parser directory)
cd dom_parser && npm run lint
```

### Building

```bash
# Build Python package
pip install -e .

# Build JavaScript bundle (in dom_parser directory)
cd dom_parser && npm run build
```

## Troubleshooting

### Common Issues

#### 1. Import Errors
**Problem**: `ModuleNotFoundError: No module named 'dom_parser'`
**Solution**: Ensure you're in the correct directory and virtual environment is activated

#### 2. Playwright Browser Issues
**Problem**: Browser not found or crashes
**Solution**: Reinstall Playwright browsers:
```bash
playwright install
```

#### 3. OpenAI API Errors
**Problem**: API key invalid or rate limited
**Solution**: Check your API key and usage limits in the OpenAI dashboard

#### 4. Screenshot Failures
**Problem**: Screenshots fail with "Target page closed" error
**Solution**: Add proper error handling and retry logic

### Debug Mode

Enable debug logging:

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

### Performance Issues

If you experience performance issues:

1. **Use headless mode**: `headless=True`
2. **Reduce timeout values**: `timeout=15000`
3. **Disable unnecessary features**: `wait_for_idle=False`
4. **Use caching**: Enable element caching where possible

## API Reference

### Simple Agent API

#### `SimpleAgent.initialize(url=None)`
Initialize the agent and navigate to a URL.

**Parameters**:
- `url` (str, optional): URL to navigate to. If None, prompts user.

#### `SimpleAgent.process_user_input(user_input)`
Process natural language input and execute tasks.

**Parameters**:
- `user_input` (str): Natural language description of the task

**Returns**: Dictionary with breakdown and execution results

### MCP Server API

#### `execute_action(params)`
Execute a web automation action.

**Parameters**:
- `params` (dict): Action parameters including type, element_id, etc.

#### `get_page_details(params)`
Get detailed information about the current page.

**Parameters**:
- `params` (dict): Optional parameters for analysis

### DOM Parser API

#### `extractElements()`
Extract all interactive elements from the current page.

**Returns**: Object with actions, meta, outline, text, forms, etc.

#### `getTopLevelElements()`
Get top-level elements containing multiple interactive elements.

**Returns**: Array of top-level elements

## Contributing

We welcome contributions! Here's how to get started:

### Development Setup

1. **Fork the repository**
2. **Create a feature branch**:
   ```bash
   git checkout -b feature/your-feature-name
   ```
3. **Make your changes**
4. **Add tests** for new functionality
5. **Run tests** to ensure everything works
6. **Submit a pull request**

### Code Style

- **Python**: Follow PEP 8, use Black for formatting
- **JavaScript**: Follow ESLint rules, use Prettier for formatting
- **Documentation**: Update README files for new features

### Testing

- Write unit tests for new functions
- Add integration tests for new features
- Ensure all existing tests pass

## Project Structure

```
cesail/
â”œâ”€â”€ dom_parser/              # JavaScript DOM parser
â”‚   â”œâ”€â”€ src/                # Source code
â”‚   â”œâ”€â”€ dist/               # Built files
â”‚   â”œâ”€â”€ tests/              # JavaScript tests
â”‚   â””â”€â”€ README.md           # Component documentation
â”œâ”€â”€ mcp/                    # FastMCP server
â”‚   â”œâ”€â”€ fastmcp_server.py   # Main server file
â”‚   â”œâ”€â”€ server.py           # Alternative server
â”‚   â””â”€â”€ tests/              # MCP tests
â”œâ”€â”€ simple_agent/           # AI web automation agent
â”‚   â”œâ”€â”€ simple_agent.py     # Main agent file
â”‚   â”œâ”€â”€ llm_interface.py    # LLM integration
â”‚   â””â”€â”€ .env               # Environment variables
â”œâ”€â”€ venv/                   # Python virtual environment
â”œâ”€â”€ setup.py               # Python package configuration
â”œâ”€â”€ pyproject.toml         # Project configuration
â””â”€â”€ README.md              # This file
```

## License

MIT License - see [LICENSE](LICENSE) file for details.

## Support

- **Issues**: Report bugs and feature requests on GitHub
- **Discussions**: Join discussions for questions and ideas
- **Documentation**: Check component-specific README files for detailed docs

## Roadmap

- [ ] Enhanced error recovery mechanisms
- [ ] Support for more browser automation frameworks
- [ ] Advanced visual element detection
- [ ] Multi-language support
- [ ] Cloud deployment options
- [ ] Performance monitoring dashboard 
