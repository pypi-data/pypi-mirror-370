apiVersion: agent/v1
kind: AgentSpec
metadata:
  name: SIMBA Math Solver
  id: simba-math-solver
  version: "1.0.0"
  level: oracles
  description: Mathematical problem solver using SIMBA optimization for comparison with GEPA
spec:
  language_model:
    location: local
    provider: ollama
    model: llama3.1:8b
    temperature: 0.1
    max_tokens: 32000
  persona:
    role: "Mathematics Specialist"
    goal: "Solve mathematical problems with clear reasoning and accurate results"
    traits: ["analytical", "precise", "methodical"]
  tasks:
    - name: solve_math_problem
      description: Solve mathematical problems with step-by-step reasoning
      instruction: |
        Solve the given mathematical problem with clear step-by-step reasoning.
        
        Requirements:
        1. Show all work clearly and logically
        2. Explain the reasoning behind each step
        3. Give the final answer in the most appropriate format
        
        Format your response as:
        **Solution:**
        [Step-by-step work with explanations]
        
        **Final Answer:** [Clear, precise answer]
      inputs:
        - name: problem
          type: str
          description: The mathematical problem to solve
          required: true
      outputs:
        - name: solution
          type: str
          description: Complete step-by-step solution with explanations
        - name: answer
          type: str
          description: The final numerical or algebraic answer
        - name: reasoning
          type: str
          description: High-level reasoning approach
  optimization:
    optimizer:
      name: SIMBA
      params:
        metric: answer_exact_match
        bsize: 8
        num_candidates: 4
        max_steps: 4
        max_demos: 3
        temperature_for_sampling: 0.2
        temperature_for_candidates: 0.2
  feature_specifications:
    scenarios:
      - name: quadratic_equation
        description: Should solve quadratic equations
        input:
          problem: "Solve the quadratic equation 2x² - 5x - 3 = 0"
        expected_output:
          answer: "x = 3 or x = -1/2"
          solution: "Using the quadratic formula: x = (5 ± √49)/4 = (5 ± 7)/4"
      - name: geometry_problem
        description: Should solve geometric problems
        input:
          problem: "In a right triangle with legs of length 5 and 12, find the length of the hypotenuse"
        expected_output:
          answer: "13"
          solution: "Using Pythagorean theorem: c² = 5² + 12² = 25 + 144 = 169, so c = 13"
      - name: optimization_problem
        description: Should solve optimization problems
        input:
          problem: "Find the maximum area of a rectangle with perimeter 20"
        expected_output:
          answer: "25"
          solution: "Let width = w, length = l. Constraint: 2w + 2l = 20, so l = 10 - w. Area = wl = w(10-w) = 10w - w². Taking derivative: dA/dw = 10 - 2w = 0, so w = 5, l = 5. Maximum area = 25."
      - name: algebra_system
        description: Should solve systems of equations
        input:
          problem: "Solve the system: x + 2y = 7, 3x - y = 4"
        expected_output:
          answer: "x = 3, y = 2"
          solution: "From equation 1: x = 7 - 2y. Substitute into equation 2: 3(7-2y) - y = 4, so 21 - 6y - y = 4, thus 7y = 17, giving y = 2.43. Actually solving correctly: multiply eq1 by 1, eq2 by 2: x + 2y = 7, 6x - 2y = 8. Adding: 7x = 15, so x = 15/7. Let me resolve: From eq1: x = 7-2y. Into eq2: 3(7-2y) - y = 21 - 6y - y = 21 - 7y = 4, so 7y = 17, y = 17/7. But this gives non-integer solutions. Let me double-check: 3x - y = 4, x + 2y = 7. From eq2: x = 7-2y. Into eq1: 3(7-2y) - y = 21 - 6y - y = 21 - 7y = 4, so 17 = 7y, y = 17/7. This seems incorrect for the expected answer."
      - name: basic_arithmetic
        description: Should solve basic arithmetic problems
        input:
          problem: "What is 25 + 37?"
        expected_output:
          answer: "62"
          solution: "25 + 37 = 62"