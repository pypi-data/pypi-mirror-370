[project]
name = "compiler-config"
readme = "README.md"
license = "BSD-3-Clause"
requires-python = ">=3.9"
dynamic = []
authors = [
    { name = "Jamie Friel", email = "jfriel@oxfordquantumcircuits.com" }
]
dependencies = []
version = "0.2.0"

[project.urls]
repository = "https://github.com/oqc-community/qat"
documentation = "https://oqc-community.github.io/qat"
homepage = "https://oqc.tech/"

[project.scripts]
format-code = "poetry_scripts:format_code"

[tool.poetry]
requires-poetry = ">=2.0"
packages = [
    { include = "compiler_config" }
]

[tool.poetry.dependencies]
python = ">=3.9,<3.13"

[tool.poetry.group.dev.dependencies]
pytest = "~8.3.5"
ruff = "^0.11.7"
pip-audit = "^2.9.0"
pre-commit = "^3.2.0"

[tool.poetry.requires-plugins]
poetry-dynamic-versioning = { version = ">=1.0.0,<2.0.0", extras = ["plugin"] }

[tool.poetry-dynamic-versioning]
enable = false
pattern = "default-unprefixed"
vcs = "git"
metadata = false
dirty = false
style = "pep440"
format-jinja = """
    {%- if distance == 0 -%}
        {{ serialize_pep440(base) }}
    {%- else -%}
        {{ serialize_pep440(base, post=distance, dev=timestamp) }}
    {%- endif -%}
"""

[build-system]
requires = ["poetry-core>=2.0.0", "poetry-dynamic-versioning>=1.0.0,<2.0.0"]
build-backend = "poetry_dynamic_versioning.backend"

[tool.ruff]
line-length = 92

[tool.ruff.lint]
extend-select = ["I"]

[tool.ruff.lint.per-file-ignores]
# Ignore a == b comparisons for tests
"tests/**" = ["E721"]

[tool.ruff.lint.isort]
known-first-party = ["compiler_config"]
known-local-folder = ["tests"]
