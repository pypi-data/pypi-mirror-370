

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>What’s new in MacSyFinder v2? &mdash; MacSyFinder 2.1.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/_css/custom.css?v=b89f2dfc" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=786ba454"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="User Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MacSyFinder
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#running-macsyfinder">Running MacSyFinder</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">What’s new in MacSyFinder v2?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#v-2-1-5">V 2.1.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v-2-1-4">V 2.1.4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v-2-1-3">V 2.1.3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v-2-1-1">V 2.1.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v-2-1">V 2.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">2.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html">MacSyFinder Quick Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#an-example-data-set">An example data set</a></li>
<li class="toctree-l3"><a class="reference internal" href="input.html">Input and Options of MacSyFinder</a></li>
<li class="toctree-l3"><a class="reference internal" href="outputs.html">Output format</a></li>
<li class="toctree-l3"><a class="reference internal" href="big_data.html">For big data people</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#macsyfinder-functioning">MacSyFinder functioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#frequently-asked-questions">Frequently Asked Questions</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modeler_guide/index.html">Modeller Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html">Developer Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MacSyFinder</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">User Guide</a></li>
      <li class="breadcrumb-item active">What’s new in MacSyFinder v2?</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="what-s-new-in-macsyfinder-v2">
<span id="new-v2"></span><h1>What’s new in MacSyFinder v2?<a class="headerlink" href="#what-s-new-in-macsyfinder-v2" title="Link to this heading"></a></h1>
<section id="v-2-1-5">
<h2>V 2.1.5<a class="headerlink" href="#v-2-1-5" title="Link to this heading"></a></h2>
<p>MacSyFinder code as been refactored. Now there is a library MacSyLib that hold the most of the code.
MacSyFinder hold only specific code, and rely on MacSyLib for the rest.</p>
<section id="for-users">
<h3>For users<a class="headerlink" href="#for-users" title="Link to this heading"></a></h3>
<p>The scripts have been renamed :</p>
<ul class="simple">
<li><p><cite>macsyprofile</cite> become <cite>msf_profile</cite> (macsyprofile is deprecated and will be removed in future version)</p></li>
<li><p><cite>macsydata</cite> become <cite>msf_data</cite> (macsyprofile is deprecated and will be removed in future version)</p></li>
<li><p><cite>macsy_merge</cite> become <cite>msf_merge</cite> (macsy_merge is deprecated and will be removed in future version)</p></li>
<li><p><cite>macsy_split</cite> become <cite>msf_split</cite> (macsy_split is deprecated and will be removed in future version)</p></li>
<li><p><cite>macsyfinder</cite> stay unchanged.</p></li>
</ul>
<p><cite>msf_data</cite> have new subcommand <cite>show</cite></p>
<p>It show the structure of models available in an installed package of models.
for instance:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$msf_data show TXSScan
TXSScan
    ├-archaea
    │   └-Archaeal-T4P
    └-bacteria
         ├-diderm
         │   ├-Flagellum
         │   ├-MSH
         │   ├-T1SS
         │   ├-T2SS
         │   ├-T3SS
         │   ├-T4aP
         │   ├-T4bP
         │   ├-T5aSS
         │   ├-T5bSS
         │   ├-T5cSS
         │   ├-T6SSi
         │   ├-T6SSii
         │   ├-T6SSiii
         │   ├-T9SS
         │   ├-Tad
         │   ├-pT4SSi
         │   └-pT4SSt
         └-monoderm
              └-ComM

TXSScan (1.1.3) : 19 models
</pre></div>
</div>
</section>
<section id="for-modelers">
<h3>For modelers<a class="headerlink" href="#for-modelers" title="Link to this heading"></a></h3>
<ul>
<li><p><cite>msf_data check</cite> now check profiles</p>
<blockquote>
<div><ul class="simple">
<li><p>if hmm file is not empty</p></li>
<li><p>if there is only one profile per hmm file</p></li>
</ul>
</div></blockquote>
<p>Use <cite>msf_data check</cite>  before to publish your models.
Also consider to add a pre-push git hook that run <cite>msf_data check</cite> when you push a tag.
This hook is automatically installed when you run <cite>msf_data init</cite> to create a package skeleton (from V 2.1.4)</p>
</li>
</ul>
</section>
<section id="for-developer">
<h3>For developer<a class="headerlink" href="#for-developer" title="Link to this heading"></a></h3>
<p>Rename the default branch from <cite>master</cite> to <cite>main</cite></p>
<p>Most of the code has been moved in the MacSyLib package (<a class="reference external" href="https://pypi.org/project/MacSyLib/">https://pypi.org/project/MacSyLib/</a>, <a class="reference external" href="https://github.com/gem-pasteur/macsylib">https://github.com/gem-pasteur/macsylib</a>).
In MacSyFinder there is only the specific code and the entrypoints left.</p>
</section>
</section>
<section id="v-2-1-4">
<h2>V 2.1.4<a class="headerlink" href="#v-2-1-4" title="Link to this heading"></a></h2>
<section id="id1">
<h3>For users<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<section id="minor-bugs">
<h4>Minor bugs<a class="headerlink" href="#minor-bugs" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>when profile name ends with <cite>hmm</cite>, then the profile was not retrieved by msf (<a class="reference external" href="https://github.com/gem-pasteur/macsyfinder/issues/69">https://github.com/gem-pasteur/macsyfinder/issues/69</a>).</p></li>
<li><p>fix omitted parameter <cite>timeout</cite> in <cite>macsyfinder</cite> step in parallel_macsyfinder</p></li>
</ul>
</section>
</section>
<section id="id2">
<h3>For modelers<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>The <em>vers</em> is now deprecated in model/metadata file.
<em>macsydata</em> rely only on the tag version to get the version of the model.</p></li>
<li><p><em>macsydata</em> now create a <em>git</em> repository for you and add files to it.</p></li>
<li><p>a pre-push git hook is installed by <cite>macsydata init</cite> to prevent to push a tag (publish)
a buggy nodel.</p></li>
</ul>
</section>
<section id="for-developers">
<h3>For developers<a class="headerlink" href="#for-developers" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>all the <em>msf</em> code (macsypy and tests) pass the <a class="reference external" href="https://docs.astral.sh/ruff/">ruff</a> linter</p></li>
<li><p>all the code use type hints (required python &gt;3.10) see (<a class="reference external" href="https://github.com/gem-pasteur/macsyfinder/blob/main/CONTRIBUTING.md">https://github.com/gem-pasteur/macsyfinder/blob/main/CONTRIBUTING.md</a>)</p></li>
</ul>
</section>
</section>
<section id="v-2-1-3">
<h2>V 2.1.3<a class="headerlink" href="#v-2-1-3" title="Link to this heading"></a></h2>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Link to this heading"></a></h2>
<section id="support-of-gziped-files">
<h3>Support of <em>gziped</em> files<a class="headerlink" href="#support-of-gziped-files" title="Link to this heading"></a></h3>
<p>MSF can also read <em>.gz</em> compressed files both for hmm profiles and sequences in fasta.
It will uncompress them on the fly.
The compressed files must end with the <em>.gz</em> extension.
For the <cite>hmmsearch</cite> step You need to have <cite>gunzip</cite> installed on your system for this to work.</p>
</section>
<section id="search-engine">
<h3>search engine<a class="headerlink" href="#search-engine" title="Link to this heading"></a></h3>
<p>A group of hits that respect the distance constraints but each hit represent the same
gene on the model, is <strong>not</strong> considered as a <em>cluster</em>.</p>
<p>A group of hits that respect the distance constraints but all hits
represent a Neutral gene in model, is <strong>not</strong> considered as a <em>cluster</em>.</p>
</section>
<section id="timeout-improvement">
<h3>timeout improvement<a class="headerlink" href="#timeout-improvement" title="Link to this heading"></a></h3>
<p>If a replicon is skipped due to timeout during best_solution phase.
The results corresponding to this replicon are not produced,
but a warning indicating that msf skip this replicon appear in outputs.</p>
</section>
</section>
<section id="v-2-1-1">
<h2>V 2.1.1<a class="headerlink" href="#v-2-1-1" title="Link to this heading"></a></h2>
<p>Update MSF citation, fix minor bugs and add add few features</p>
<section id="new-features">
<h3>New features<a class="headerlink" href="#new-features" title="Link to this heading"></a></h3>
<section id="force-option">
<h4>–force option<a class="headerlink" href="#force-option" title="Link to this heading"></a></h4>
<p>Force MSF run even the out dir already exists and is not empty.
Use this option with caution, MSF will erase everything in out dir before to run.
<a class="reference external" href="https://github.com/gem-pasteur/macsyfinder/issues/61">https://github.com/gem-pasteur/macsyfinder/issues/61</a></p>
</section>
</section>
<section id="id3">
<h3>Minor bugs<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<section id="macsyfinder-with-python-subprocess-kill-main-process-on-error">
<h4>Macsyfinder with python subprocess kill main process on error<a class="headerlink" href="#macsyfinder-with-python-subprocess-kill-main-process-on-error" title="Link to this heading"></a></h4>
<p>If an error occurred during HMM phase, all processes were killed as well the mother process
but MSF stoped with an ugly traceback.
<a class="reference external" href="https://github.com/gem-pasteur/macsyfinder/issues/60">https://github.com/gem-pasteur/macsyfinder/issues/60</a></p>
</section>
<section id="in-gembase-format-parsing">
<h4>In Gembase format parsing<a class="headerlink" href="#in-gembase-format-parsing" title="Link to this heading"></a></h4>
<p>The genes were not well grouped by contigs for draft genomes.</p>
</section>
<section id="cannot-join-current-thread-error-during-unit-tests-phase">
<h4>Cannot join current thread error during unit tests phase<a class="headerlink" href="#cannot-join-current-thread-error-during-unit-tests-phase" title="Link to this heading"></a></h4>
<p>Sometimes the testsuite failed with the following error: <em>“cannot join current thread”</em>
<a class="reference external" href="https://github.com/gem-pasteur/macsyfinder/issues/58">https://github.com/gem-pasteur/macsyfinder/issues/58</a></p>
</section>
</section>
</section>
<section id="v-2-1">
<h2>V 2.1<a class="headerlink" href="#v-2-1" title="Link to this heading"></a></h2>
<section id="bug-fix">
<h3>Bug fix<a class="headerlink" href="#bug-fix" title="Link to this heading"></a></h3>
<section id="security-patch">
<h4>Security patch<a class="headerlink" href="#security-patch" title="Link to this heading"></a></h4>
<p>Patch macsydata to fix CVE-2007-4559
<a class="reference external" href="https://github.com/gem-pasteur/macsyfinder/pull/57">https://github.com/gem-pasteur/macsyfinder/pull/57</a></p>
</section>
</section>
<section id="id4">
<h3>New features<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<section id="squash-cluster-of-loners">
<h4>Squash cluster of loners<a class="headerlink" href="#squash-cluster-of-loners" title="Link to this heading"></a></h4>
<p>If a cluster is made up with only loners, then the hits are treated by MSF as loners and not as regular cluster.</p>
</section>
<section id="new-option-timeout">
<h4>New option –timeout<a class="headerlink" href="#new-option-timeout" title="Link to this heading"></a></h4>
<p>In some case msf can take a long time to find the best solution (in ‘gembase’ and ‘ordered_replicon mode’).
The timeout is per replicon. If this step reach the timeout, the replicon is skipped (for gembase mode the analyse of other replicons continue).
NUMBER[SUFFIX]  NUMBER seconds. SUFFIX may be ‘s’ for seconds (the default), ‘m’ for minutes, ‘h’ for hours or ‘d’ for days
for instance 1h2m3s means 1 hour 2 min 3 sec. NUMBER must be an integer.</p>
</section>
</section>
</section>
<section id="id5">
<h2>2.0<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<p>For Version 2, MacSyFinder was carried under <a class="reference external" href="https://www.python.org/download/releases/3.0/">Python 3</a>.</p>
<section id="new-features-and-search-engine">
<h3>New features and search engine<a class="headerlink" href="#new-features-and-search-engine" title="Link to this heading"></a></h3>
<p>MacSyFinder v2 is a major release. The <strong>search engine</strong> was changed for a more intuitive and comprehensive exploration of putative systems.</p>
<p>The search is now more thorough and avoid undesirable side-effects of the previous search engine. Being more thorough, it now also
includes a <strong>scoring scheme</strong> to build candidate systems from sets of detected components (clusters), and can offer several optimal “solutions” (sets of
detected systems) based on a combinatorial exploration of detected clusters.
See <a class="reference internal" href="functioning.html#functioning"><span class="std std-ref">here for more details</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The search engine being different, one might want to check that models carried from v1 to v2 have the expected behaviour.</p>
</div>
<p>Several <strong>new features</strong> were added, including:</p>
<ul class="simple">
<li><p>a <strong>new type of gene component</strong> “neutral” was added in order to provide more possibilities for systems’ modelling in macsy-models. <a class="reference internal" href="../modeler_guide/modeling.html#components"><span class="std std-ref">See here</span></a> for more details.</p></li>
<li><p>a <strong>new component feature</strong> was introduced: “multi-model”, that corresponds to components that are allowed to participate in occurrences of systems from different models. <a class="reference internal" href="../modeler_guide/modeling.html#multi-model-label"><span class="std std-ref">See here</span></a> for more.</p></li>
<li><p>more flexibility was introduced in the <strong>search for systems’ components using HMMER</strong>. It is now possible to use the <cite>cut_ga</cite> threshold when provided in the HMM profiles used for components’ similarity search. This enables to have a search tailored for each HMM profile, and thus component. <a class="reference internal" href="input.html#hmmer-options"><span class="std std-ref">See here</span></a> for more details.</p></li>
<li><p>a <strong>new file structure</strong> was created to better organize MacSyFinder’s packages (i.e. that include systems’ models and corresponding HMMER profiles). <a class="reference internal" href="../modeler_guide/package.html#package-structure"><span class="std std-ref">See here</span></a> for details.</p></li>
<li><p>a <strong>tool</strong> to easily install and distribute MacSyFinder’s packages was created. <a class="reference internal" href="installation.html#msf-data"><span class="std std-ref">See here</span></a> for more details on <em>macsydata</em>.</p></li>
<li><p>the <strong>format for MacSyFinder’s models</strong> has slightly changed, in order to offer more possibilities, and more readibility. To see <strong>how to carry models from v1 to v2</strong>, <a class="reference internal" href="../modeler_guide/models_V1ToV2.html#models-v1-v2"><span class="std std-ref">visit here</span></a>.</p></li>
</ul>
<p>Also, the search modes corresponding to “unordered” and “unordered_replicon” were merged into the <strong>“unordered”</strong> search mode - as they basically correspond to the same behaviour.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In v2, output files were also re-defined. See <a class="reference internal" href="outputs.html#outputs"><span class="std std-ref">here for more details</span></a>.</p>
</div>
</section>
<section id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading"></a></h3>
<p>MacSyFinder v2 no longer requires the <em>formatdb</em> or <em>makeblastdb</em> tools from NCBI.
However, new dependencies are used, but as they are Python libraries, it should be transparent for the user,
and not require manual installations. See <a class="reference internal" href="installation.html#user-dependencies"><span class="std std-ref">here for details</span></a>.</p>
</section>
<section id="models-are-more-formalized">
<h3>Models are more formalized<a class="headerlink" href="#models-are-more-formalized" title="Link to this heading"></a></h3>
<p>The models data are more formalized, with a well defined structure.
For instance the definitions and profiles must be packed together in what we call a <cite>macsy-model</cite> package
If you intend to model new systems please refer to the <a class="reference internal" href="../modeler_guide/index.html#modeler-guide"><span class="std std-ref">Modeller Guide</span></a>.</p>
</section>
<section id="models-installation">
<h3>Models installation<a class="headerlink" href="#models-installation" title="Link to this heading"></a></h3>
<p>We now provide a new tool to manage the models. See <a class="reference internal" href="installation.html#msf-data"><span class="std std-ref">Models installation with msf_data</span></a>.</p>
</section>
<section id="models-configuration">
<h3>Models configuration<a class="headerlink" href="#models-configuration" title="Link to this heading"></a></h3>
<p>The modeler can provide some spcific configuration values released along the model package. See <a class="reference internal" href="../modeler_guide/package.html#model-configuration"><span class="std std-ref">Model configuration</span></a>.</p>
</section>
<section id="modeller-helper-tool">
<h3>Modeller helper tool<a class="headerlink" href="#modeller-helper-tool" title="Link to this heading"></a></h3>
<p>To help modellers create new models we provide a new helper tool <cite>macsyprofile</cite>, which analyses HMMER raw output files from
results of a previous MacSyFinder run, to provide information on all hits even if filtered out. See <a class="reference internal" href="../modeler_guide/helper_tools.html#msf-profile"><span class="std std-ref">msf_profile</span></a>.</p>
<p><a class="reference internal" href="installation.html#msf-data"><span class="std std-ref">Models installation with msf_data</span></a> provide also some options to help the modeller as</p>
<ul class="simple">
<li><p><strong>macsydata init</strong> to init a new model package.</p></li>
<li><p><strong>macsydata check</strong> to check the integrity of a model package, before to use/publish it.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2025, &#39;Institut Pasteur (Paris), CNRS&#39;.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<div class="licensing">
  <p>
    This documentation is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License
      <img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">.
    </a>
  </p>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<a class="github" href="https://github.com/gem-pasteur/macsyfinder">
    <img style="position: absolute; top: 0; right: 0; border: 0;"
         src="https://raw.githubusercontent.com/gem-pasteur/macsyfinder/refs/heads/main/doc/source/_static/github-banner.svg"
         alt="Fork me on GitHub" />
</a>



</body>
</html>