[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[project]
dynamic = ["version"]
name = "MacSyFinder"
authors = [
    {name="Sophie Abby", email='sophie.abby@univ-grenoble-alpes.fr'},
    {name="Bertrand Neron", email='bneron@pasteur.fr'}
    ]
maintainers = [
    {name="Bertrand Neron", email='bneron@pasteur.fr'}
    ]
description = 'MacSyFinder: Detection of macromolecular systems in protein datasets using systems modelling and similarity search'
keywords = ['science', 'research', 'bioinformatic', 'microbiology', 'genomic', 'prokaryote', 'functional gene annotation']
readme = "README.md"
license = "GPL-3.0-or-later"
license-files = ["COPYING"]

classifiers = [
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Operating System :: POSIX",
    "Environment :: Console",
    "Development Status :: 5 - Production/Stable",
    "Intended Audience :: Science/Research",
    "Topic :: Scientific/Engineering :: Bio-Informatics"
]

requires-python = ">=3.10"

dependencies = [
  "macsylib >= 1.0.3, < 1.5"
]

[project.optional-dependencies]
dev = [
    "macsylib[dev] >= 1.0.3, < 1.5",
    "sphinx",
    "sphinx_rtd_theme",
    "sphinx-autodoc-typehints",
    "sphinxcontrib-svg2pdfconverter",
    "coverage[toml]",
    "build",
    "ruff",
    "pre-commit",
]

model = [
    "macsylib[model] >= 1.0.3, < 1.5"
]

[project.scripts]
macsyfinder = "macsyfinder.scripts.msf:main"

msf_data = "macsyfinder.scripts.macsydata:main"
macsydata = "macsyfinder.scripts.macsydata:deprecated_main"

msf_profile = "macsyfinder.scripts.macsyprofile:main"
macsyprofile = "macsyfinder.scripts.macsyprofile:deprecated_main"

msf_config = "macsyfinder.scripts.macsyconfig:main"
macsyconfig = "macsyfinder.scripts.macsyconfig:deprecated_main"

msf_split = "macsyfinder.scripts.macsy_gembase_split:main"
msf_merge = "macsyfinder.scripts.macsy_merge_results:main"


[project.urls]
Homepage = "https://github.com/gem-pasteur/macsyfinder/"
Documentation = "https://macsyfinder.readthedocs.io/en/latest/"
Repository = "https://github.com/gem-pasteur/macsyfinder/"
Issues = "https://github.com/gem-pasteur/macsyfinder/issues"
Changelog = "https://macsyfinder.readthedocs.io/en/latest/user_guide/new_v2.html#what-s-new-in-macsyfinder-v2"

[tool.setuptools.packages.find]
where=["src"]
include = ["macsyfinder*"]
namespaces = false

[tool.setuptools.dynamic]
version = {attr = "macsyfinder.__version__"}

[tool.coverage.run]
branch = true
source = ["macsyfinder"]
command_line = "-m unittest discover -vv"


[tool.ruff]
target-version = "py310"

# Exclude a variety of commonly ignored directories.
exclude = [
    ".eggs",
    ".git",
    ".ipynb_checkpoints",
    ".pyenv",
    ".pytest_cache",
    ".pytype",
    ".ruff_cache",
    ".venv",
    "__pypackages__",
    "_build",
    "build",
    "dist",
    "site-packages",
    "venv",
]

# Same as Black.
line-length = 120
indent-width = 4

src = ['src/macsyfinder', 'tests', 'pyproject.toml']

[tool.ruff.format]
indent-style = "space"

[tool.ruff.lint.per-file-ignores]

[tool.pylint]
py-version = 3.11
max-line-length = 120

[tool.pylint.design]
max-args = 10
max-positional-arguments = 8
