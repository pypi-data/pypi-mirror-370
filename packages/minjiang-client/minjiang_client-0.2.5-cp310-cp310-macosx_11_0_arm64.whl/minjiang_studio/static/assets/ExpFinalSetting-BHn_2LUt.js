import{d as fe,I as H,ae as ge,ab as K,cb as Nr,cc as Or,ad as Y,af as Ke,b9 as dn,cd as Pr,bX as zr,bY as Er,bc as Ka,b_ as Kr,b$ as Fa,ba as Fr,ag as tr,am as sa,ce as Br,r as B,c2 as $r,C as X,aw as ae,av as At,aH as Oe,aW as me,bI as Hr,ap as Ba,c4 as Ur,aB as he,cf as jt,cg as Wt,bJ as ar,at as St,by as nr,ch as Ia,ci as Gr,bK as jr,aq as Wr,aP as qr,bM as Se,o as ct,bq as Xr,bN as qt,b8 as Yr,bs as rr,ac as mt,cj as cn,ck as Zr,cl as Da,cm as un,aN as hn,bO as Jr,aV as It,ai as Qr,cn as ei,bV as fn,co as Dt,cp as vn,cq as ti,aj as ai,bi as qa,bj as aa,aa as na,x as Re,e as re,j as U,cr as Tt,a0 as Xa,w as Ie,c as ke,a1 as da,a2 as Ya,a3 as Za,p as Ge,$ as we,f as at,h as De,t as tt,N as ir,V as wt,bw as ca,X as Et,aJ as Kt,Y as ot,bx as ni,H as Vt,m as Nt,a4 as ri,a as ii,v as oi,aL as pn,bn as gn,bz as mn,Z as li,a7 as si,n as di,a9 as Ue}from"./index-DOdIYOkR.js";import{q as yn}from"./exp-BL6mWztX.js";import{_ as be,L as ua,s as J,M as ha,N as Ja,P as Qa,O as bn,o as ci,e as Ve,m as _t,Q as $a,T as or,U as ra,V as Pt,W as ui,X as hi,Y as xn,$ as bt,a0 as fi,g as Ft,a1 as en,a2 as tn,a3 as lr,R as xt,a4 as an,a5 as Ha,a6 as sr,a7 as vi,a8 as pi,a9 as dr,aa as gi,ab as mi,ac as yi,ad as bi,ae as xi,af as Si,ag as wi,ah as _i,ai as ia,aj as cr,ak as ki,A as lt,al as Ci,am as Te,k as Ri,i as st,l as ur,an as Ma,ao as Aa,ap as Fe,aq as Ii,ar as Di,as as dt,at as Mi,au as Ai,av as La,aw as Sn,ax as hr,ay as Li,az as Ti,aA as Vi,q as Ni,aB as Oi,aC as fr,aD as wn,C as Pi,aE as zi,aF as Ei,b as Ki,a as Fi,Z as Ot,c as ea,aG as Ua,aH as Bi,aI as $i,aJ as Hi,aK as Ta,aL as Va,aM as Ui,aN as Gi,aO as ji,aP as Wi,aQ as qi,aR as _n,aS as Xi,aT as Yi,B as fa,D as va,E as pa,F as vr,G as nn,H as ga,J as Zi,K as pr,I as Ji}from"./installCanvasRenderer-DQ3trSBi.js";import{u as Qi}from"./exp-DwbafzoG.js";function gr(n){return typeof n=="string"?`s-${n}`:`n-${n}`}const eo=fe({name:"Switcher",render(){return H("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},H("path",{d:"M12 8l10 8l-10 8z"}))}}),to=ge([K("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[Y("reverse",[K("slider-handles",[K("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),K("slider-dots",[K("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),Y("vertical",[K("slider-handles",[K("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),K("slider-marks",[K("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),K("slider-dots",[K("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),Y("vertical",`
 box-sizing: content-box;
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[K("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[K("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),K("slider-rail",`
 height: 100%;
 `,[Ke("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),Y("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),K("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 font-size: var(--n-mark-font-size);
 `,[K("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),K("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[K("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),Y("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[K("slider-handle",`
 cursor: not-allowed;
 `)]),Y("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),ge("&:hover",[K("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[Ke("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),K("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),Y("active",[K("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[Ke("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),K("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),K("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[K("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),K("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[Ke("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),K("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[K("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[K("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[ge("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),ge("&:focus",[K("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[ge("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),K("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[Y("transition-disabled",[K("slider-dot","transition: none;")]),K("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[Y("active","border: var(--n-dot-border-active);")])])]),K("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[dn()]),K("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[Y("top",`
 margin-bottom: 12px;
 `),Y("right",`
 margin-left: 12px;
 `),Y("bottom",`
 margin-top: 12px;
 `),Y("left",`
 margin-right: 12px;
 `),dn()]),Nr(K("slider",[K("slider-dot","background-color: var(--n-dot-color-modal);")])),Or(K("slider",[K("slider-dot","background-color: var(--n-dot-color-popover);")]))]);function kn(n){return window.TouchEvent&&n instanceof window.TouchEvent}function Cn(){const n=new Map,t=e=>a=>{n.set(e,a)};return Pr(()=>{n.clear()}),[n,t]}const ao=0,no=Object.assign(Object.assign({},sa.props),{to:Fa.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onDragstart:[Function],onDragend:[Function]}),ro=fe({name:"Slider",props:no,slots:Object,setup(n){const{mergedClsPrefixRef:t,namespaceRef:e,inlineThemeDisabled:a}=tr(n),r=sa("Slider","-slider",to,Br,n,t),i=B(null),[o,l]=Cn(),[s,c]=Cn(),d=B(new Set),u=$r(n),{mergedDisabledRef:h}=u,g=X(()=>{const{step:b}=n;if(Number(b)<=0||b==="mark")return 0;const I=b.toString();let N=0;return I.includes(".")&&(N=I.length-I.indexOf(".")-1),N}),v=B(n.defaultValue),y=ae(n,"value"),m=At(y,v),f=X(()=>{const{value:b}=m;return(n.range?b:[b]).map(je)}),x=X(()=>f.value.length>2),S=X(()=>n.placement===void 0?n.vertical?"right":"top":n.placement),L=X(()=>{const{marks:b}=n;return b?Object.keys(b).map(Number.parseFloat):null}),M=B(-1),_=B(-1),R=B(-1),C=B(!1),A=B(!1),D=X(()=>{const{vertical:b,reverse:I}=n;return b?I?"top":"bottom":I?"right":"left"}),k=X(()=>{if(x.value)return;const b=f.value,I=E(n.range?Math.min(...b):n.min),N=E(n.range?Math.max(...b):b[0]),{value:W}=D;return n.vertical?{[W]:`${I}%`,height:`${N-I}%`}:{[W]:`${I}%`,width:`${N-I}%`}}),P=X(()=>{const b=[],{marks:I}=n;if(I){const N=f.value.slice();N.sort((ve,ue)=>ve-ue);const{value:W}=D,{value:Q}=x,{range:de}=n,Me=Q?()=>!1:ve=>de?ve>=N[0]&&ve<=N[N.length-1]:ve<=N[0];for(const ve of Object.keys(I)){const ue=Number(ve);b.push({active:Me(ue),key:ue,label:I[ve],style:{[W]:`${E(ue)}%`}})}}return b});function O(b,I){const N=E(b),{value:W}=D;return{[W]:`${N}%`,zIndex:I===M.value?1:0}}function z(b){return n.showTooltip||R.value===b||M.value===b&&C.value}function V(b){return C.value?!(M.value===b&&_.value===b):!0}function G(b){var I;~b&&(M.value=b,(I=o.get(b))===null||I===void 0||I.focus())}function q(){s.forEach((b,I)=>{z(I)&&b.syncPosition()})}function j(b){const{"onUpdate:value":I,onUpdateValue:N}=n,{nTriggerFormInput:W,nTriggerFormChange:Q}=u;N&&he(N,b),I&&he(I,b),v.value=b,W(),Q()}function ee(b){const{range:I}=n;if(I){if(Array.isArray(b)){const{value:N}=f;b.join()!==N.join()&&j(b)}}else Array.isArray(b)||f.value[0]!==b&&j(b)}function se(b,I){if(n.range){const N=f.value.slice();N.splice(I,1,b),ee(N)}else ee(b)}function xe(b,I,N){const W=N!==void 0;N||(N=b-I>0?1:-1);const Q=L.value||[],{step:de}=n;if(de==="mark"){const ue=oe(b,Q.concat(I),W?N:void 0);return ue?ue.value:I}if(de<=0)return I;const{value:Me}=g;let ve;if(W){const ue=Number((I/de).toFixed(Me)),ze=Math.floor(ue),kt=ue>ze?ze:ze-1,$e=ue<ze?ze:ze+1;ve=oe(I,[Number((kt*de).toFixed(Me)),Number(($e*de).toFixed(Me)),...Q],N)}else{const ue=ie(b);ve=oe(b,[...Q,ue])}return ve?je(ve.value):I}function je(b){return Math.min(n.max,Math.max(n.min,b))}function E(b){const{max:I,min:N}=n;return(b-N)/(I-N)*100}function Z(b){const{max:I,min:N}=n;return N+(I-N)*b}function ie(b){const{step:I,min:N}=n;if(Number(I)<=0||I==="mark")return b;const W=Math.round((b-N)/I)*I+N;return Number(W.toFixed(g.value))}function oe(b,I=L.value,N){if(!(I!=null&&I.length))return null;let W=null,Q=-1;for(;++Q<I.length;){const de=I[Q]-b,Me=Math.abs(de);(N===void 0||de*N>0)&&(W===null||Me<W.distance)&&(W={index:Q,distance:Me,value:I[Q]})}return W}function ce(b){const I=i.value;if(!I)return;const N=kn(b)?b.touches[0]:b,W=I.getBoundingClientRect();let Q;return n.vertical?Q=(W.bottom-N.clientY)/W.height:Q=(N.clientX-W.left)/W.width,n.reverse&&(Q=1-Q),Z(Q)}function ut(b){if(h.value||!n.keyboard)return;const{vertical:I,reverse:N}=n;switch(b.key){case"ArrowUp":b.preventDefault(),Be(I&&N?-1:1);break;case"ArrowRight":b.preventDefault(),Be(!I&&N?-1:1);break;case"ArrowDown":b.preventDefault(),Be(I&&N?1:-1);break;case"ArrowLeft":b.preventDefault(),Be(!I&&N?1:-1);break}}function Be(b){const I=M.value;if(I===-1)return;const{step:N}=n,W=f.value[I],Q=Number(N)<=0||N==="mark"?W:W+N*b;se(xe(Q,W,b>0?1:-1),I)}function ht(b){var I,N;if(h.value||!kn(b)&&b.button!==ao)return;const W=ce(b);if(W===void 0)return;const Q=f.value.slice(),de=n.range?(N=(I=oe(W,Q))===null||I===void 0?void 0:I.index)!==null&&N!==void 0?N:-1:0;de!==-1&&(b.preventDefault(),G(de),ma(),se(xe(W,f.value[de]),de))}function ma(){C.value||(C.value=!0,n.onDragstart&&he(n.onDragstart),jt("touchend",document,Xe),jt("mouseup",document,Xe),jt("touchmove",document,qe),jt("mousemove",document,qe))}function We(){C.value&&(C.value=!1,n.onDragend&&he(n.onDragend),Wt("touchend",document,Xe),Wt("mouseup",document,Xe),Wt("touchmove",document,qe),Wt("mousemove",document,qe))}function qe(b){const{value:I}=M;if(!C.value||I===-1){We();return}const N=ce(b);N!==void 0&&se(xe(N,f.value[I]),I)}function Xe(){We()}function nt(b){M.value=b,h.value||(R.value=b)}function $t(b){M.value===b&&(M.value=-1,We()),R.value===b&&(R.value=-1)}function Ye(b){R.value=b}function Pe(b){R.value===b&&(R.value=-1)}Oe(M,(b,I)=>void me(()=>_.value=I)),Oe(m,()=>{if(n.marks){if(A.value)return;A.value=!0,me(()=>{A.value=!1})}me(q)}),Hr(()=>{We()});const Ht=X(()=>{const{self:{markFontSize:b,railColor:I,railColorHover:N,fillColor:W,fillColorHover:Q,handleColor:de,opacityDisabled:Me,dotColor:ve,dotColorModal:ue,handleBoxShadow:ze,handleBoxShadowHover:kt,handleBoxShadowActive:$e,handleBoxShadowFocus:ya,dotBorder:He,dotBoxShadow:Qe,railHeight:Ct,railWidthVertical:ba,handleSize:Ut,dotHeight:Rt,dotWidth:xa,dotBorderRadius:Sa,fontSize:wa,dotBorderActive:_a,dotColorPopover:ka},common:{cubicBezierEaseInOut:Ca}}=r.value;return{"--n-bezier":Ca,"--n-dot-border":He,"--n-dot-border-active":_a,"--n-dot-border-radius":Sa,"--n-dot-box-shadow":Qe,"--n-dot-color":ve,"--n-dot-color-modal":ue,"--n-dot-color-popover":ka,"--n-dot-height":Rt,"--n-dot-width":xa,"--n-fill-color":W,"--n-fill-color-hover":Q,"--n-font-size":wa,"--n-handle-box-shadow":ze,"--n-handle-box-shadow-active":$e,"--n-handle-box-shadow-focus":ya,"--n-handle-box-shadow-hover":kt,"--n-handle-color":de,"--n-handle-size":Ut,"--n-opacity-disabled":Me,"--n-rail-color":I,"--n-rail-color-hover":N,"--n-rail-height":Ct,"--n-rail-width-vertical":ba,"--n-mark-font-size":b}}),Ze=a?Ba("slider",void 0,Ht,n):void 0,rt=X(()=>{const{self:{fontSize:b,indicatorColor:I,indicatorBoxShadow:N,indicatorTextColor:W,indicatorBorderRadius:Q}}=r.value;return{"--n-font-size":b,"--n-indicator-border-radius":Q,"--n-indicator-box-shadow":N,"--n-indicator-color":I,"--n-indicator-text-color":W}}),Je=a?Ba("slider-indicator",void 0,rt,n):void 0;return{mergedClsPrefix:t,namespace:e,uncontrolledValue:v,mergedValue:m,mergedDisabled:h,mergedPlacement:S,isMounted:Ur(),adjustedTo:Fa(n),dotTransitionDisabled:A,markInfos:P,isShowTooltip:z,shouldKeepTooltipTransition:V,handleRailRef:i,setHandleRefs:l,setFollowerRefs:c,fillStyle:k,getHandleStyle:O,activeIndex:M,arrifiedValues:f,followerEnabledIndexSet:d,handleRailMouseDown:ht,handleHandleFocus:nt,handleHandleBlur:$t,handleHandleMouseEnter:Ye,handleHandleMouseLeave:Pe,handleRailKeyDown:ut,indicatorCssVars:a?void 0:rt,indicatorThemeClass:Je==null?void 0:Je.themeClass,indicatorOnRender:Je==null?void 0:Je.onRender,cssVars:a?void 0:Ht,themeClass:Ze==null?void 0:Ze.themeClass,onRender:Ze==null?void 0:Ze.onRender}},render(){var n;const{mergedClsPrefix:t,themeClass:e,formatTooltip:a}=this;return(n=this.onRender)===null||n===void 0||n.call(this),H("div",{class:[`${t}-slider`,e,{[`${t}-slider--disabled`]:this.mergedDisabled,[`${t}-slider--active`]:this.activeIndex!==-1,[`${t}-slider--with-mark`]:this.marks,[`${t}-slider--vertical`]:this.vertical,[`${t}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},H("div",{class:`${t}-slider-rail`},H("div",{class:`${t}-slider-rail__fill`,style:this.fillStyle}),this.marks?H("div",{class:[`${t}-slider-dots`,this.dotTransitionDisabled&&`${t}-slider-dots--transition-disabled`]},this.markInfos.map(r=>H("div",{key:r.key,class:[`${t}-slider-dot`,{[`${t}-slider-dot--active`]:r.active}],style:r.style}))):null,H("div",{ref:"handleRailRef",class:`${t}-slider-handles`},this.arrifiedValues.map((r,i)=>{const o=this.isShowTooltip(i);return H(zr,null,{default:()=>[H(Er,null,{default:()=>H("div",{ref:this.setHandleRefs(i),class:`${t}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,role:"slider","aria-valuenow":r,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-orientation":this.vertical?"vertical":"horizontal","aria-disabled":this.disabled,style:this.getHandleStyle(r,i),onFocus:()=>{this.handleHandleFocus(i)},onBlur:()=>{this.handleHandleBlur(i)},onMouseenter:()=>{this.handleHandleMouseEnter(i)},onMouseleave:()=>{this.handleHandleMouseLeave(i)}},Ka(this.$slots.thumb,()=>[H("div",{class:`${t}-slider-handle`})]))}),this.tooltip&&H(Kr,{ref:this.setFollowerRefs(i),show:o,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(i),teleportDisabled:this.adjustedTo===Fa.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>H(Fr,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(i),onEnter:()=>{this.followerEnabledIndexSet.add(i)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(i)}},{default:()=>{var l;return o?((l=this.indicatorOnRender)===null||l===void 0||l.call(this),H("div",{class:[`${t}-slider-handle-indicator`,this.indicatorThemeClass,`${t}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof a=="function"?a(r):r)):null}})})]})})),this.marks?H("div",{class:`${t}-slider-marks`},this.markInfos.map(r=>H("div",{key:r.key,class:`${t}-slider-mark`,style:r.style},typeof r.label=="function"?r.label():r.label))):null))}}),mr=ar("n-tree-select");function Rn({position:n,offsetLevel:t,indent:e,el:a}){const r={position:"absolute",boxSizing:"border-box",right:0};if(n==="inside")r.left=0,r.top=0,r.bottom=0,r.borderRadius="inherit",r.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const i=n==="before"?"top":"bottom";r[i]=0,r.left=`${a.offsetLeft+6-t*e}px`,r.height="2px",r.backgroundColor="var(--n-drop-mark-color)",r.transformOrigin=i,r.borderRadius="1px",r.transform=n==="before"?"translateY(-4px)":"translateY(4px)"}return H("div",{style:r})}function io({dropPosition:n,node:t}){return t.isLeaf===!1||t.children?!0:n!=="inside"}const Bt=ar("n-tree");function oo({props:n,fNodesRef:t,mergedExpandedKeysRef:e,mergedSelectedKeysRef:a,mergedCheckedKeysRef:r,handleCheck:i,handleSelect:o,handleSwitcherClick:l}){const{value:s}=a,c=St(mr,null),d=c?c.pendingNodeKeyRef:B(s.length?s[s.length-1]:null);function u(h){var g;if(!n.keyboard)return{enterBehavior:null};const{value:v}=d;let y=null;if(v===null){if((h.key==="ArrowDown"||h.key==="ArrowUp")&&h.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(h.key)&&v===null){const{value:m}=t;let f=0;for(;f<m.length;){if(!m[f].disabled){d.value=m[f].key;break}f+=1}}}else{const{value:m}=t;let f=m.findIndex(x=>x.key===v);if(!~f)return{enterBehavior:null};if(h.key==="Enter"){const x=m[f];switch(y=((g=n.overrideDefaultNodeClickBehavior)===null||g===void 0?void 0:g.call(n,{option:x.rawNode}))||null,y){case"toggleCheck":i(x,!r.value.includes(x.key));break;case"toggleSelect":o(x);break;case"toggleExpand":l(x);break;case"none":break;case"default":default:y="default",o(x)}}else if(h.key==="ArrowDown")for(h.preventDefault(),f+=1;f<m.length;){if(!m[f].disabled){d.value=m[f].key;break}f+=1}else if(h.key==="ArrowUp")for(h.preventDefault(),f-=1;f>=0;){if(!m[f].disabled){d.value=m[f].key;break}f-=1}else if(h.key==="ArrowLeft"){const x=m[f];if(x.isLeaf||!e.value.includes(v)){const S=x.getParent();S&&(d.value=S.key)}else l(x)}else if(h.key==="ArrowRight"){const x=m[f];if(x.isLeaf)return{enterBehavior:null};if(!e.value.includes(v))l(x);else for(f+=1;f<m.length;){if(!m[f].disabled){d.value=m[f].key;break}f+=1}}}return{enterBehavior:y}}return{pendingNodeKeyRef:d,handleKeydown:u}}const lo=fe({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(n){const t=St(Bt);function e(r){const{onCheck:i}=n;i&&i(r)}function a(r){e(r)}return{handleUpdateValue:a,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:n,mergedTheme:t,checked:e,indeterminate:a,disabled:r,focusable:i,indent:o,handleUpdateValue:l}=this;return H("span",{class:[`${n}-tree-node-checkbox`,this.right&&`${n}-tree-node-checkbox--right`],style:{width:`${o}px`},"data-checkbox":!0},H(nr,{focusable:i,disabled:r,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:e,indeterminate:a,onUpdateChecked:l}))}}),so=fe({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(n){const{renderLabelRef:t,renderPrefixRef:e,renderSuffixRef:a,labelFieldRef:r}=St(Bt),i=B(null);function o(s){const{onClick:c}=n;c&&c(s)}function l(s){o(s)}return{selfRef:i,renderLabel:t,renderPrefix:e,renderSuffix:a,labelField:r,handleClick:l}},render(){const{clsPrefix:n,labelField:t,nodeProps:e,checked:a=!1,selected:r=!1,renderLabel:i,renderPrefix:o,renderSuffix:l,handleClick:s,onDragstart:c,tmNode:{rawNode:d,rawNode:{prefix:u,suffix:h,[t]:g}}}=this;return H("span",Object.assign({},e,{ref:"selfRef",class:[`${n}-tree-node-content`,e==null?void 0:e.class],onClick:s,draggable:c===void 0?void 0:!0,onDragstart:c}),o||u?H("div",{class:`${n}-tree-node-content__prefix`},o?o({option:d,selected:r,checked:a}):Ia(u)):null,H("div",{class:`${n}-tree-node-content__text`},i?i({option:d,selected:r,checked:a}):Ia(g)),l||h?H("div",{class:`${n}-tree-node-content__suffix`},l?l({option:d,selected:r,checked:a}):Ia(h)):null)}}),co=fe({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(n){const{renderSwitcherIconRef:t}=St(Bt,null);return()=>{const{clsPrefix:e,expanded:a,hide:r,indent:i,onClick:o}=n;return H("span",{"data-switcher":!0,class:[`${e}-tree-node-switcher`,a&&`${e}-tree-node-switcher--expanded`,r&&`${e}-tree-node-switcher--hide`],style:{width:`${i}px`},onClick:o},H("div",{class:`${e}-tree-node-switcher__icon`},H(Gr,null,{default:()=>{if(n.loading)return H(jr,{clsPrefix:e,key:"loading",radius:85,strokeWidth:20});const{value:l}=t;return l?l({expanded:n.expanded,selected:n.selected,option:n.tmNode.rawNode}):H(Wr,{clsPrefix:e,key:"switcher"},{default:()=>H(eo,null)})}})))}}});function uo(n){return X(()=>n.leafOnly?"child":n.checkStrategy)}function et(n,t){return!!n.rawNode[t]}function yr(n,t,e,a){n==null||n.forEach(r=>{e(r),yr(r[t],t,e,a),a(r)})}function ho(n,t,e,a,r){const i=new Set,o=new Set,l=[];return yr(n,a,s=>{if(l.push(s),r(t,s)){o.add(s[e]);for(let c=l.length-2;c>=0;--c)if(!i.has(l[c][e]))i.add(l[c][e]);else return}},()=>{l.pop()}),{expandedKeys:Array.from(i),highlightKeySet:o}}if(qr&&Image){const n=new Image;n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function fo(n,t,e,a,r){const i=new Set,o=new Set,l=new Set,s=[],c=[],d=[];function u(g){g.forEach(v=>{if(d.push(v),t(e,v)){i.add(v[a]),l.add(v[a]);for(let m=d.length-2;m>=0;--m){const f=d[m][a];if(!o.has(f))o.add(f),i.has(f)&&i.delete(f);else break}}const y=v[r];y&&u(y),d.pop()})}u(n);function h(g,v){g.forEach(y=>{const m=y[a],f=i.has(m),x=o.has(m);if(!f&&!x)return;const S=y[r];if(S)if(f)v.push(y);else{s.push(m);const L=Object.assign(Object.assign({},y),{[r]:[]});v.push(L),h(S,L[r])}else v.push(y)})}return h(n,c),{filteredTree:c,highlightKeySet:l,expandedKeys:s}}const br=fe({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(n){const t=St(Bt),{droppingNodeParentRef:e,droppingMouseNodeRef:a,draggingNodeRef:r,droppingPositionRef:i,droppingOffsetLevelRef:o,nodePropsRef:l,indentRef:s,blockLineRef:c,checkboxPlacementRef:d,checkOnClickRef:u,disabledFieldRef:h,showLineRef:g,renderSwitcherIconRef:v,overrideDefaultNodeClickBehaviorRef:y}=t,m=Se(()=>!!n.tmNode.rawNode.checkboxDisabled),f=Se(()=>et(n.tmNode,h.value)),x=Se(()=>t.disabledRef.value||f.value),S=X(()=>{const{value:E}=l;if(E)return E({option:n.tmNode.rawNode})}),L=B(null),M={value:null};ct(()=>{M.value=L.value.$el});function _(){const E=()=>{const{tmNode:Z}=n;if(!Z.isLeaf&&!Z.shallowLoaded){if(!t.loadingKeysRef.value.has(Z.key))t.loadingKeysRef.value.add(Z.key);else return;const{onLoadRef:{value:ie}}=t;ie&&ie(Z.rawNode).then(oe=>{oe!==!1&&t.handleSwitcherClick(Z)}).finally(()=>{t.loadingKeysRef.value.delete(Z.key)})}else t.handleSwitcherClick(Z)};v.value?setTimeout(E,0):E()}const R=Se(()=>!f.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||n.tmNode.isLeaf:!0)),C=Se(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||n.tmNode.isLeaf)),A=Se(()=>t.displayedCheckedKeysRef.value.includes(n.tmNode.key)),D=Se(()=>{const{value:E}=C;if(!E)return!1;const{value:Z}=u,{tmNode:ie}=n;return typeof Z=="boolean"?!ie.disabled&&Z:Z(n.tmNode.rawNode)});function k(E){const{value:Z}=t.expandOnClickRef,{value:ie}=R,{value:oe}=D;if(!ie&&!Z&&!oe||qt(E,"checkbox")||qt(E,"switcher"))return;const{tmNode:ce}=n;ie&&t.handleSelect(ce),Z&&!ce.isLeaf&&_(),oe&&V(!A.value)}function P(E){var Z,ie;if(!(qt(E,"checkbox")||qt(E,"switcher"))){if(!x.value){const oe=y.value;let ce=!1;if(oe)switch(oe({option:n.tmNode.rawNode})){case"toggleCheck":ce=!0,V(!A.value);break;case"toggleSelect":ce=!0,t.handleSelect(n.tmNode);break;case"toggleExpand":ce=!0,_(),ce=!0;break;case"none":ce=!0,ce=!0;return}ce||k(E)}(ie=(Z=S.value)===null||Z===void 0?void 0:Z.onClick)===null||ie===void 0||ie.call(Z,E)}}function O(E){c.value||P(E)}function z(E){c.value&&P(E)}function V(E){t.handleCheck(n.tmNode,E)}function G(E){t.handleDragStart({event:E,node:n.tmNode})}function q(E){E.currentTarget===E.target&&t.handleDragEnter({event:E,node:n.tmNode})}function j(E){E.preventDefault(),t.handleDragOver({event:E,node:n.tmNode})}function ee(E){t.handleDragEnd({event:E,node:n.tmNode})}function se(E){E.currentTarget===E.target&&t.handleDragLeave({event:E,node:n.tmNode})}function xe(E){E.preventDefault(),i.value!==null&&t.handleDrop({event:E,node:n.tmNode,dropPosition:i.value})}const je=X(()=>{const{clsPrefix:E}=n,{value:Z}=s;if(g.value){const ie=[];let oe=n.tmNode.parent;for(;oe;)oe.isLastChild?ie.push(H("div",{class:`${E}-tree-node-indent`},H("div",{style:{width:`${Z}px`}}))):ie.push(H("div",{class:[`${E}-tree-node-indent`,`${E}-tree-node-indent--show-line`]},H("div",{style:{width:`${Z}px`}}))),oe=oe.parent;return ie.reverse()}else return Xr(n.tmNode.level,H("div",{class:`${n.clsPrefix}-tree-node-indent`},H("div",{style:{width:`${Z}px`}})))});return{showDropMark:Se(()=>{const{value:E}=r;if(!E)return;const{value:Z}=i;if(!Z)return;const{value:ie}=a;if(!ie)return;const{tmNode:oe}=n;return oe.key===ie.key}),showDropMarkAsParent:Se(()=>{const{value:E}=e;if(!E)return!1;const{tmNode:Z}=n,{value:ie}=i;return ie==="before"||ie==="after"?E.key===Z.key:!1}),pending:Se(()=>t.pendingNodeKeyRef.value===n.tmNode.key),loading:Se(()=>t.loadingKeysRef.value.has(n.tmNode.key)),highlight:Se(()=>{var E;return(E=t.highlightKeySetRef.value)===null||E===void 0?void 0:E.has(n.tmNode.key)}),checked:A,indeterminate:Se(()=>t.displayedIndeterminateKeysRef.value.includes(n.tmNode.key)),selected:Se(()=>t.mergedSelectedKeysRef.value.includes(n.tmNode.key)),expanded:Se(()=>t.mergedExpandedKeysRef.value.includes(n.tmNode.key)),disabled:x,checkable:C,mergedCheckOnClick:D,checkboxDisabled:m,selectable:R,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:c,nodeProps:S,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:i,droppingOffsetLevel:o,indent:s,checkboxPlacement:d,showLine:g,contentInstRef:L,contentElRef:M,indentNodes:je,handleCheck:V,handleDrop:xe,handleDragStart:G,handleDragEnter:q,handleDragOver:j,handleDragEnd:ee,handleDragLeave:se,handleLineClick:z,handleContentClick:O,handleSwitcherClick:_}},render(){const{tmNode:n,clsPrefix:t,checkable:e,expandOnClick:a,selectable:r,selected:i,checked:o,highlight:l,draggable:s,blockLine:c,indent:d,indentNodes:u,disabled:h,pending:g,internalScrollable:v,nodeProps:y,checkboxPlacement:m}=this,f=s&&!h?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,x=v?gr(n.key):void 0,S=m==="right",L=e?H(lo,{indent:d,right:S,focusable:this.checkboxFocusable,disabled:h||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return H("div",Object.assign({class:`${t}-tree-node-wrapper`},f),H("div",Object.assign({},c?y:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:i,[`${t}-tree-node--checkable`]:e,[`${t}-tree-node--highlight`]:l,[`${t}-tree-node--pending`]:g,[`${t}-tree-node--disabled`]:h,[`${t}-tree-node--selectable`]:r,[`${t}-tree-node--clickable`]:r||a||this.mergedCheckOnClick},y==null?void 0:y.class],"data-key":x,draggable:s&&c,onClick:this.handleLineClick,onDragstart:s&&c&&!h?this.handleDragStart:void 0}),u,n.isLeaf&&this.showLine?H("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,n.isLeaf&&`${t}-tree-node-indent--is-leaf`,n.isLastChild&&`${t}-tree-node-indent--last-child`]},H("div",{style:{width:`${d}px`}})):H(co,{clsPrefix:t,expanded:this.expanded,selected:i,loading:this.loading,hide:n.isLeaf,tmNode:this.tmNode,indent:d,onClick:this.handleSwitcherClick}),S?null:L,H(so,{ref:"contentInstRef",clsPrefix:t,checked:o,selected:i,onClick:this.handleContentClick,nodeProps:c?void 0:y,onDragstart:s&&!c&&!h?this.handleDragStart:void 0,tmNode:n}),s?this.showDropMark?Rn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:d}):this.showDropMarkAsParent?Rn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:d}):null:null,S?L:null))}}),vo=fe({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:n}=this;return H(Yr,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>H("div",{class:[`${n}-tree-motion-wrapper`,`${n}-tree-motion-wrapper--${this.mode}`],style:{height:rr(this.height)}},this.nodes.map(t=>H(br,{clsPrefix:n,tmNode:t})))})}}),Na=Zr(),po=K("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[ge("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),ge(">",[K("tree-node",[ge("&:first-child","margin-top: 0;")])]),K("tree-motion-wrapper",[Y("expand",[cn({duration:"0.2s"})]),Y("collapse",[cn({duration:"0.2s",reverse:!0})])]),K("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),K("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[Y("highlight",[K("tree-node-content",[Ke("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),Y("disabled",[K("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),mt("disabled",[Y("clickable",[K("tree-node-content",`
 cursor: pointer;
 `)])])]),Y("block-node",[K("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),mt("block-line",[K("tree-node",[mt("disabled",[K("tree-node-content",[ge("&:hover","background: var(--n-node-color-hover);")]),Y("selectable",[K("tree-node-content",[ge("&:active","background: var(--n-node-color-pressed);")])]),Y("pending",[K("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),Y("selected",[K("tree-node-content","background: var(--n-node-color-active);")])]),Y("selected",[K("tree-node-content","background: var(--n-node-color-active);")])])]),Y("block-line",[K("tree-node",[mt("disabled",[ge("&:hover","background: var(--n-node-color-hover);"),Y("pending",`
 background: var(--n-node-color-hover);
 `),Y("selectable",[mt("selected",[ge("&:active","background: var(--n-node-color-pressed);")])]),Y("selected","background: var(--n-node-color-active);")]),Y("selected","background: var(--n-node-color-active);"),Y("disabled",`
 cursor: not-allowed;
 `)])]),K("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[Y("show-line","position: relative",[ge("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),Y("last-child",[ge("&::before",`
 bottom: 50%;
 `)]),Y("is-leaf",[ge("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),mt("show-line","height: 0;")]),K("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Ke("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[K("icon",[Na]),K("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[Na]),K("base-icon",[Na])]),Y("hide","visibility: hidden;"),Y("expanded","transform: rotate(90deg);")]),K("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),K("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ge("&:last-child","margin-bottom: 0;"),Ke("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Ke("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Ke("suffix",`
 display: inline-flex;
 `)]),Ke("empty","margin: auto;")]);var go=function(n,t,e,a){function r(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function l(d){try{c(a.next(d))}catch(u){o(u)}}function s(d){try{c(a.throw(d))}catch(u){o(u)}}function c(d){d.done?i(d.value):r(d.value).then(l,s)}c((a=a.apply(n,[])).next())})};function In(n,t,e,a){return{getIsGroup(){return!1},getKey(i){return i[n]},getChildren:a||(i=>i[t]),getDisabled(i){return!!(i[e]||i.checkboxDisabled)}}}const mo={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},yo=Object.assign(Object.assign(Object.assign(Object.assign({},sa.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:io},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),mo),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),bo=fe({name:"Tree",props:yo,slots:Object,setup(n){const{mergedClsPrefixRef:t,inlineThemeDisabled:e,mergedRtlRef:a}=tr(n),r=Qr("Tree",a,t),i=sa("Tree","-tree",po,ei,n,t),o=B(null),l=B(null),s=B(null);function c(){var p;return(p=s.value)===null||p===void 0?void 0:p.listElRef}function d(){var p;return(p=s.value)===null||p===void 0?void 0:p.itemsElRef}const u=X(()=>{const{filter:p}=n;if(p)return p;const{labelField:w}=n;return(T,F)=>{if(!T.length)return!0;const $=F[w];return typeof $=="string"?$.toLowerCase().includes(T.toLowerCase()):!1}}),h=X(()=>{const{pattern:p}=n;return p?!p.length||!u.value?{filteredTree:n.data,highlightKeySet:null,expandedKeys:void 0}:fo(n.data,u.value,p,n.keyField,n.childrenField):{filteredTree:n.data,highlightKeySet:null,expandedKeys:void 0}}),g=X(()=>fn(n.showIrrelevantNodes?n.data:h.value.filteredTree,In(n.keyField,n.childrenField,n.disabledField,n.getChildren))),v=St(mr,null),y=n.internalTreeSelect?v.dataTreeMate:X(()=>n.showIrrelevantNodes?g.value:fn(n.data,In(n.keyField,n.childrenField,n.disabledField,n.getChildren))),{watchProps:m}=n,f=B([]);m!=null&&m.includes("defaultCheckedKeys")?Dt(()=>{f.value=n.defaultCheckedKeys}):f.value=n.defaultCheckedKeys;const x=ae(n,"checkedKeys"),S=At(x,f),L=X(()=>y.value.getCheckedKeys(S.value,{cascade:n.cascade,allowNotLoaded:n.allowCheckingNotLoaded})),M=uo(n),_=X(()=>L.value.checkedKeys),R=X(()=>{const{indeterminateKeys:p}=n;return p!==void 0?p:L.value.indeterminateKeys}),C=B([]);m!=null&&m.includes("defaultSelectedKeys")?Dt(()=>{C.value=n.defaultSelectedKeys}):C.value=n.defaultSelectedKeys;const A=ae(n,"selectedKeys"),D=At(A,C),k=B([]),P=p=>{k.value=n.defaultExpandAll?y.value.getNonLeafKeys():p===void 0?n.defaultExpandedKeys:p};m!=null&&m.includes("defaultExpandedKeys")?Dt(()=>{P(void 0)}):Dt(()=>{P(n.defaultExpandedKeys)});const O=ae(n,"expandedKeys"),z=At(O,k),V=X(()=>g.value.getFlattenedNodes(z.value)),{pendingNodeKeyRef:G,handleKeydown:q}=oo({props:n,mergedCheckedKeysRef:S,mergedSelectedKeysRef:D,fNodesRef:V,mergedExpandedKeysRef:z,handleCheck:Ct,handleSelect:Rt,handleSwitcherClick:Ut});let j=null,ee=null;const se=B(new Set),xe=X(()=>n.internalHighlightKeySet||h.value.highlightKeySet),je=At(xe,se),E=B(new Set),Z=X(()=>z.value.filter(p=>!E.value.has(p)));let ie=0;const oe=B(null),ce=B(null),ut=B(null),Be=B(null),ht=B(0),ma=X(()=>{const{value:p}=ce;return p?p.parent:null});let We=!1;Oe(ae(n,"data"),()=>{We=!0,me(()=>{We=!1}),E.value.clear(),G.value=null,$e()},{deep:!1});let qe=!1;const Xe=()=>{qe=!0,me(()=>{qe=!1})};let nt;Oe(ae(n,"pattern"),(p,w)=>{if(n.showIrrelevantNodes)if(nt=void 0,p){const{expandedKeys:T,highlightKeySet:F}=ho(n.data,n.pattern,n.keyField,n.childrenField,u.value);se.value=F,Xe(),I(T,b(T),{node:null,action:"filter"})}else se.value=new Set;else if(!p.length)nt!==void 0&&(Xe(),I(nt,b(nt),{node:null,action:"filter"}));else{w.length||(nt=z.value);const{expandedKeys:T}=h.value;T!==void 0&&(Xe(),I(T,b(T),{node:null,action:"filter"}))}});function $t(p){return go(this,void 0,void 0,function*(){const{onLoad:w}=n;if(!w){yield Promise.resolve();return}const{value:T}=E;if(!T.has(p.key)){T.add(p.key);try{(yield w(p.rawNode))===!1&&Qe()}catch(F){console.error(F),Qe()}T.delete(p.key)}})}Dt(()=>{var p;const{value:w}=g;if(!w)return;const{getNode:T}=w;(p=z.value)===null||p===void 0||p.forEach(F=>{const $=T(F);$&&!$.shallowLoaded&&$t($)})});const Ye=B(!1),Pe=B([]);Oe(Z,(p,w)=>{if(!n.animated||qe){me(rt);return}if(We)return;const T=It(i.value.self.nodeHeight),F=new Set(w);let $=null,le=null;for(const ne of p)if(!F.has(ne)){if($!==null)return;$=ne}const _e=new Set(p);for(const ne of w)if(!_e.has(ne)){if(le!==null)return;le=ne}if($===null&&le===null)return;const{virtualScroll:Ce}=n,vt=(Ce?s.value.listElRef:o.value).offsetHeight,pt=Math.ceil(vt/T)+1;let Ae;if($!==null&&(Ae=w),le!==null&&(Ae===void 0?Ae=p:Ae=Ae.filter(ne=>ne!==le)),Ye.value=!0,Pe.value=g.value.getFlattenedNodes(Ae),$!==null){const ne=Pe.value.findIndex(Le=>Le.key===$);if(~ne){const Le=Pe.value[ne].children;if(Le){const Ne=vn(Le,p);Pe.value.splice(ne+1,0,{__motion:!0,mode:"expand",height:Ce?Ne.length*T:void 0,nodes:Ce?Ne.slice(0,pt):Ne})}}}if(le!==null){const ne=Pe.value.findIndex(Le=>Le.key===le);if(~ne){const Le=Pe.value[ne].children;if(!Le)return;Ye.value=!0;const Ne=vn(Le,p);Pe.value.splice(ne+1,0,{__motion:!0,mode:"collapse",height:Ce?Ne.length*T:void 0,nodes:Ce?Ne.slice(0,pt):Ne})}}});const Ht=X(()=>ti(V.value)),Ze=X(()=>Ye.value?Pe.value:V.value);function rt(){const{value:p}=l;p&&p.sync()}function Je(){Ye.value=!1,n.virtualScroll&&me(rt)}function b(p){const{getNode:w}=y.value;return p.map(T=>{var F;return((F=w(T))===null||F===void 0?void 0:F.rawNode)||null})}function I(p,w,T){const{"onUpdate:expandedKeys":F,onUpdateExpandedKeys:$}=n;k.value=p,F&&he(F,p,w,T),$&&he($,p,w,T)}function N(p,w,T){const{"onUpdate:checkedKeys":F,onUpdateCheckedKeys:$}=n;f.value=p,$&&he($,p,w,T),F&&he(F,p,w,T)}function W(p,w){const{"onUpdate:indeterminateKeys":T,onUpdateIndeterminateKeys:F}=n;T&&he(T,p,w),F&&he(F,p,w)}function Q(p,w,T){const{"onUpdate:selectedKeys":F,onUpdateSelectedKeys:$}=n;C.value=p,$&&he($,p,w,T),F&&he(F,p,w,T)}function de(p){const{onDragenter:w}=n;w&&he(w,p)}function Me(p){const{onDragleave:w}=n;w&&he(w,p)}function ve(p){const{onDragend:w}=n;w&&he(w,p)}function ue(p){const{onDragstart:w}=n;w&&he(w,p)}function ze(p){const{onDragover:w}=n;w&&he(w,p)}function kt(p){const{onDrop:w}=n;w&&he(w,p)}function $e(){ya(),He()}function ya(){oe.value=null}function He(){ht.value=0,ce.value=null,ut.value=null,Be.value=null,Qe()}function Qe(){j&&(window.clearTimeout(j),j=null),ee=null}function Ct(p,w){if(n.disabled||et(p,n.disabledField))return;if(n.internalUnifySelectCheck&&!n.multiple){Rt(p);return}const T=w?"check":"uncheck",{checkedKeys:F,indeterminateKeys:$}=y.value[T](p.key,_.value,{cascade:n.cascade,checkStrategy:M.value,allowNotLoaded:n.allowCheckingNotLoaded});N(F,b(F),{node:p.rawNode,action:T}),W($,b($))}function ba(p){if(n.disabled)return;const{key:w}=p,{value:T}=z,F=T.findIndex($=>$===w);if(~F){const $=Array.from(T);$.splice(F,1),I($,b($),{node:p.rawNode,action:"collapse"})}else{const $=g.value.getNode(w);if(!$||$.isLeaf)return;let le;if(n.accordion){const _e=new Set(p.siblings.map(({key:Ce})=>Ce));le=T.filter(Ce=>!_e.has(Ce)),le.push(w)}else le=T.concat(w);I(le,b(le),{node:p.rawNode,action:"expand"})}}function Ut(p){n.disabled||Ye.value||ba(p)}function Rt(p){if(!(n.disabled||!n.selectable)){if(G.value=p.key,n.internalUnifySelectCheck){const{value:{checkedKeys:w,indeterminateKeys:T}}=L;n.multiple?Ct(p,!(w.includes(p.key)||T.includes(p.key))):N([p.key],b([p.key]),{node:p.rawNode,action:"check"})}if(n.multiple){const w=Array.from(D.value),T=w.findIndex(F=>F===p.key);~T?n.cancelable&&w.splice(T,1):~T||w.push(p.key),Q(w,b(w),{node:p.rawNode,action:~T?"unselect":"select"})}else D.value.includes(p.key)?n.cancelable&&Q([],[],{node:p.rawNode,action:"unselect"}):Q([p.key],b([p.key]),{node:p.rawNode,action:"select"})}}function xa(p){if(j&&(window.clearTimeout(j),j=null),p.isLeaf)return;ee=p.key;const w=()=>{if(ee!==p.key)return;const{value:T}=ut;if(T&&T.key===p.key&&!z.value.includes(p.key)){const F=z.value.concat(p.key);I(F,b(F),{node:p.rawNode,action:"expand"})}j=null,ee=null};p.shallowLoaded?j=window.setTimeout(()=>{w()},1e3):j=window.setTimeout(()=>{$t(p).then(()=>{w()})},1e3)}function Sa({event:p,node:w}){!n.draggable||n.disabled||et(w,n.disabledField)||(rn({event:p,node:w},!1),de({event:p,node:w.rawNode}))}function wa({event:p,node:w}){!n.draggable||n.disabled||et(w,n.disabledField)||Me({event:p,node:w.rawNode})}function _a(p){p.target===p.currentTarget&&He()}function ka({event:p,node:w}){$e(),!(!n.draggable||n.disabled||et(w,n.disabledField))&&ve({event:p,node:w.rawNode})}function Ca({event:p,node:w}){!n.draggable||n.disabled||et(w,n.disabledField)||(ie=p.clientX,oe.value=w,ue({event:p,node:w.rawNode}))}function rn({event:p,node:w},T=!0){var F;if(!n.draggable||n.disabled||et(w,n.disabledField))return;const{value:$}=oe;if(!$)return;const{allowDrop:le,indent:_e}=n;T&&ze({event:p,node:w.rawNode});const Ce=p.currentTarget,{height:vt,top:pt}=Ce.getBoundingClientRect(),Ae=p.clientY-pt;let ne;le({node:w.rawNode,dropPosition:"inside",phase:"drag"})?Ae<=8?ne="before":Ae>=vt-8?ne="after":ne="inside":Ae<=vt/2?ne="before":ne="after";const{value:Ne}=Ht;let te,pe;const gt=Ne(w.key);if(gt===null){He();return}let Gt=!1;ne==="inside"?(te=w,pe="inside"):ne==="before"?w.isFirstChild?(te=w,pe="before"):(te=V.value[gt-1],pe="after"):(te=w,pe="after"),!te.isLeaf&&z.value.includes(te.key)&&(Gt=!0,pe==="after"&&(te=V.value[gt+1],te?pe="before":(te=w,pe="inside")));const ln=te;if(ut.value=ln,!Gt&&$.isLastChild&&$.key===te.key&&(pe="after"),pe==="after"){let sn=ie-p.clientX,Ra=0;for(;sn>=_e/2&&te.parent!==null&&te.isLastChild&&Ra<1;)sn-=_e,Ra+=1,te=te.parent;ht.value=Ra}else ht.value=0;if(($.contains(te)||pe==="inside"&&((F=$.parent)===null||F===void 0?void 0:F.key)===te.key)&&!($.key===ln.key&&$.key===te.key)){He();return}if(!le({node:te.rawNode,dropPosition:pe,phase:"drag"})){He();return}if($.key===te.key)Qe();else if(ee!==te.key)if(pe==="inside"){if(n.expandOnDragenter){if(xa(te),!te.shallowLoaded&&ee!==te.key){$e();return}}else if(!te.shallowLoaded){$e();return}}else Qe();else pe!=="inside"&&Qe();Be.value=pe,ce.value=te}function Dr({event:p,node:w,dropPosition:T}){if(!n.draggable||n.disabled||et(w,n.disabledField))return;const{value:F}=oe,{value:$}=ce,{value:le}=Be;if(!(!F||!$||!le)&&n.allowDrop({node:$.rawNode,dropPosition:le,phase:"drag"})&&F.key!==$.key){if(le==="before"){const _e=F.getNext({includeDisabled:!0});if(_e&&_e.key===$.key){He();return}}if(le==="after"){const _e=F.getPrev({includeDisabled:!0});if(_e&&_e.key===$.key){He();return}}kt({event:p,node:$.rawNode,dragNode:F.rawNode,dropPosition:T}),$e()}}function Mr(){rt()}function Ar(){rt()}function Lr(p){var w;if(n.virtualScroll||n.internalScrollable){const{value:T}=l;if(!((w=T==null?void 0:T.containerRef)===null||w===void 0)&&w.contains(p.relatedTarget))return;G.value=null}else{const{value:T}=o;if(T!=null&&T.contains(p.relatedTarget))return;G.value=null}}Oe(G,p=>{var w,T;if(p!==null){if(n.virtualScroll)(w=s.value)===null||w===void 0||w.scrollTo({key:p});else if(n.internalScrollable){const{value:F}=l;if(F===null)return;const $=(T=F.contentRef)===null||T===void 0?void 0:T.querySelector(`[data-key="${gr(p)}"]`);if(!$)return;F.scrollTo({el:$})}}}),ai(Bt,{loadingKeysRef:E,highlightKeySetRef:je,displayedCheckedKeysRef:_,displayedIndeterminateKeysRef:R,mergedSelectedKeysRef:D,mergedExpandedKeysRef:z,mergedThemeRef:i,mergedCheckStrategyRef:M,nodePropsRef:ae(n,"nodeProps"),disabledRef:ae(n,"disabled"),checkableRef:ae(n,"checkable"),selectableRef:ae(n,"selectable"),expandOnClickRef:ae(n,"expandOnClick"),onLoadRef:ae(n,"onLoad"),draggableRef:ae(n,"draggable"),blockLineRef:ae(n,"blockLine"),indentRef:ae(n,"indent"),cascadeRef:ae(n,"cascade"),checkOnClickRef:ae(n,"checkOnClick"),checkboxPlacementRef:n.checkboxPlacement,droppingMouseNodeRef:ut,droppingNodeParentRef:ma,draggingNodeRef:oe,droppingPositionRef:Be,droppingOffsetLevelRef:ht,fNodesRef:V,pendingNodeKeyRef:G,showLineRef:ae(n,"showLine"),disabledFieldRef:ae(n,"disabledField"),internalScrollableRef:ae(n,"internalScrollable"),internalCheckboxFocusableRef:ae(n,"internalCheckboxFocusable"),internalTreeSelect:n.internalTreeSelect,renderLabelRef:ae(n,"renderLabel"),renderPrefixRef:ae(n,"renderPrefix"),renderSuffixRef:ae(n,"renderSuffix"),renderSwitcherIconRef:ae(n,"renderSwitcherIcon"),labelFieldRef:ae(n,"labelField"),multipleRef:ae(n,"multiple"),overrideDefaultNodeClickBehaviorRef:ae(n,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:Ut,handleDragEnd:ka,handleDragEnter:Sa,handleDragLeave:wa,handleDragStart:Ca,handleDrop:Dr,handleDragOver:rn,handleSelect:Rt,handleCheck:Ct});function Tr(p,w){var T,F;typeof p=="number"?(T=s.value)===null||T===void 0||T.scrollTo(p,w||0):(F=s.value)===null||F===void 0||F.scrollTo(p)}const Vr={handleKeydown:q,scrollTo:Tr,getCheckedData:()=>{if(!n.checkable)return{keys:[],options:[]};const{checkedKeys:p}=L.value;return{keys:p,options:b(p)}},getIndeterminateData:()=>{if(!n.checkable)return{keys:[],options:[]};const{indeterminateKeys:p}=L.value;return{keys:p,options:b(p)}}},on=X(()=>{const{common:{cubicBezierEaseInOut:p},self:{fontSize:w,nodeBorderRadius:T,nodeColorHover:F,nodeColorPressed:$,nodeColorActive:le,arrowColor:_e,loadingColor:Ce,nodeTextColor:vt,nodeTextColorDisabled:pt,dropMarkColor:Ae,nodeWrapperPadding:ne,nodeHeight:Le,lineHeight:Ne,lineColor:te}}=i.value,pe=Da(ne,"top"),gt=Da(ne,"bottom"),Gt=rr(It(Le)-It(pe)-It(gt));return{"--n-arrow-color":_e,"--n-loading-color":Ce,"--n-bezier":p,"--n-font-size":w,"--n-node-border-radius":T,"--n-node-color-active":le,"--n-node-color-hover":F,"--n-node-color-pressed":$,"--n-node-text-color":vt,"--n-node-text-color-disabled":pt,"--n-drop-mark-color":Ae,"--n-node-wrapper-padding":ne,"--n-line-offset-top":`-${pe}`,"--n-line-offset-bottom":`-${gt}`,"--n-node-content-height":Gt,"--n-line-height":Ne,"--n-line-color":te}}),ft=e?Ba("tree",void 0,on,n):void 0;return Object.assign(Object.assign({},Vr),{mergedClsPrefix:t,mergedTheme:i,rtlEnabled:r,fNodes:Ze,aip:Ye,selfElRef:o,virtualListInstRef:s,scrollbarInstRef:l,handleFocusout:Lr,handleDragLeaveTree:_a,handleScroll:Mr,getScrollContainer:c,getScrollContent:d,handleAfterEnter:Je,handleResize:Ar,cssVars:e?void 0:on,themeClass:ft==null?void 0:ft.themeClass,onRender:ft==null?void 0:ft.onRender})},render(){var n;const{fNodes:t,internalRenderEmpty:e}=this;if(!t.length&&e)return e();const{mergedClsPrefix:a,blockNode:r,blockLine:i,draggable:o,disabled:l,internalFocusable:s,checkable:c,handleKeydown:d,rtlEnabled:u,handleFocusout:h,scrollbarProps:g}=this,v=s&&!l,y=v?"0":void 0,m=[`${a}-tree`,u&&`${a}-tree--rtl`,c&&`${a}-tree--checkable`,(i||r)&&`${a}-tree--block-node`,i&&`${a}-tree--block-line`],f=S=>"__motion"in S?H(vo,{height:S.height,nodes:S.nodes,clsPrefix:a,mode:S.mode,onAfterEnter:this.handleAfterEnter}):H(br,{key:S.key,tmNode:S,clsPrefix:a});if(this.virtualScroll){const{mergedTheme:S,internalScrollablePadding:L}=this,M=Da(L||"0");return H(un,Object.assign({},g,{ref:"scrollbarInstRef",onDragleave:o?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:m,theme:S.peers.Scrollbar,themeOverrides:S.peerOverrides.Scrollbar,tabindex:y,onKeydown:v?d:void 0,onFocusout:v?h:void 0}),{default:()=>{var _;return(_=this.onRender)===null||_===void 0||_.call(this),t.length?H(Jr,{ref:"virtualListInstRef",items:this.fNodes,itemSize:It(S.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:M.top,paddingBottom:M.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:M.left,paddingRight:M.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:R})=>f(R)}):Ka(this.$slots.empty,()=>[H(hn,{class:`${a}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:x}=this;return m.push(this.themeClass),(n=this.onRender)===null||n===void 0||n.call(this),x?H(un,Object.assign({},g,{class:m,tabindex:y,onKeydown:v?d:void 0,onFocusout:v?h:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>H("div",{onDragleave:o?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(f))}):H("div",{class:m,tabindex:y,ref:"selfElRef",style:this.cssVars,onKeydown:v?d:void 0,onFocusout:v?h:void 0,onDragleave:o?this.handleDragLeaveTree:void 0},t.length?t.map(f):Ka(this.$slots.empty,()=>[H(hn,{class:`${a}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),xo=fe({__name:"DataFields",props:qa({allFields:{},dividerKey:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,e=aa(n,"modelValue"),a=X(()=>{const i=[];return na(t.allFields,(o,l)=>{i.push({key:l,label:l,children:o==null?void 0:o.map(s=>({key:`${l}${t.dividerKey}${s}`,label:s}))})}),i}),r=(i,o)=>{};return(i,o)=>{const l=bo;return re(),Re(l,{"block-line":"","show-line":"",checkable:"","expand-on-click":"","check-on-click":"","default-expand-all":"","check-strategy":"child",data:U(a),"checked-keys":e.value,"onUpdate:checkedKeys":o[0]||(o[0]=s=>e.value=s),onUpdateCheckedKeys:r},null,8,["data","checked-keys"])}}}),So={key:0,class:"flex items-center gap-2"},wo={class:"w-2"},_o=fe({__name:"VarSelect",props:qa({options:{},plotType:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,e=aa(n,"modelValue"),a=["X","Y","Z"],r=X(()=>{var o;return(o=t.options)==null?void 0:o.map(l=>l==null?void 0:l.map((s,c)=>({...s,label:Tt(s),value:c})))}),i=(o,l)=>{};return(o,l)=>{const s=ir,c=Za,d=Xa;return re(),Re(d,{cols:o.plotType==="1d_normal"?1:2,"x-gap":10,"y-gap":"10"},{default:Ie(()=>[(re(!0),ke(da,null,Ya(o.options,(u,h)=>(re(),Re(c,null,{default:Ie(()=>[!U(we)(u)&&U(r)?(re(),ke("div",So,[at("span",wo,tt(a[h]),1),De(s,{options:U(r)[h],value:e.value[h],"onUpdate:value":g=>e.value[h]=g,class:"flex-1",onUpdateValue:i,size:"small"},null,8,["options","value","onUpdate:value"])])):Ge("",!0)]),_:2},1024))),256))]),_:1},8,["cols"])}}});var Ga=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){return ua(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,a,r){var i=this.coordinateSystem;if(i&&i.clampData){var o=i.clampData(e),l=i.dataToPoint(o);if(r)J(i.getAxes(),function(h,g){if(h.type==="category"&&a!=null){var v=h.getTicksCoords(),y=h.getTickModel().get("alignWithLabel"),m=o[g],f=a[g]==="x1"||a[g]==="y1";if(f&&!y&&(m+=1),v.length<2)return;if(v.length===2){l[g]=h.toGlobalCoord(h.getExtent()[f?1:0]);return}for(var x=void 0,S=void 0,L=1,M=0;M<v.length;M++){var _=v[M].coord,R=M===v.length-1?v[M-1].tickValue+L:v[M].tickValue;if(R===m){S=_;break}else if(R<m)x=_;else if(x!=null&&R>m){S=(_+x)/2;break}M===1&&(L=R-v[0].tickValue)}S==null&&(x?x&&(S=v[v.length-1].coord):S=v[0].coord),l[g]=h.toGlobalCoord(S)}});else{var s=this.getData(),c=s.getLayout("offset"),d=s.getLayout("size"),u=i.getBaseAxis().isHorizontal()?0:1;l[u]+=c+d/2}return l}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(ha);ha.registerClass(Ga);var ko=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return ua(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),a=this.get("largeThreshold");return a>e&&(e=a),e},t.prototype.brushSelector=function(e,a,r){return r.rect(a.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Ja(Ga.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(Ga),Co=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),Dn=function(n){be(t,n);function t(e){var a=n.call(this,e)||this;return a.type="sausage",a}return t.prototype.getDefaultShape=function(){return new Co},t.prototype.buildPath=function(e,a){var r=a.cx,i=a.cy,o=Math.max(a.r0||0,0),l=Math.max(a.r,0),s=(l-o)*.5,c=o+s,d=a.startAngle,u=a.endAngle,h=a.clockwise,g=Math.PI*2,v=h?u-d<g:d-u<g;v||(d=u-(h?g:-g));var y=Math.cos(d),m=Math.sin(d),f=Math.cos(u),x=Math.sin(u);v?(e.moveTo(y*o+r,m*o+i),e.arc(y*c+r,m*c+i,s,-Math.PI+d,d,!h)):e.moveTo(y*l+r,m*l+i),e.arc(r,i,l,d,u,!h),e.arc(f*c+r,x*c+i,s,u-Math.PI*2,u-Math.PI,!h),o!==0&&e.arc(r,i,o,u,d,h)},t}(Qa);function Ro(n,t){t=t||{};var e=t.isRoundCap;return function(a,r,i){var o=r.position;if(!o||o instanceof Array)return bn(a,r,i);var l=n(o),s=r.distance!=null?r.distance:5,c=this.shape,d=c.cx,u=c.cy,h=c.r,g=c.r0,v=(h+g)/2,y=c.startAngle,m=c.endAngle,f=(y+m)/2,x=e?Math.abs(h-g)/2:0,S=Math.cos,L=Math.sin,M=d+h*S(y),_=u+h*L(y),R="left",C="top";switch(l){case"startArc":M=d+(g-s)*S(f),_=u+(g-s)*L(f),R="center",C="top";break;case"insideStartArc":M=d+(g+s)*S(f),_=u+(g+s)*L(f),R="center",C="bottom";break;case"startAngle":M=d+v*S(y)+Xt(y,s+x,!1),_=u+v*L(y)+Yt(y,s+x,!1),R="right",C="middle";break;case"insideStartAngle":M=d+v*S(y)+Xt(y,-s+x,!1),_=u+v*L(y)+Yt(y,-s+x,!1),R="left",C="middle";break;case"middle":M=d+v*S(f),_=u+v*L(f),R="center",C="middle";break;case"endArc":M=d+(h+s)*S(f),_=u+(h+s)*L(f),R="center",C="bottom";break;case"insideEndArc":M=d+(h-s)*S(f),_=u+(h-s)*L(f),R="center",C="top";break;case"endAngle":M=d+v*S(m)+Xt(m,s+x,!0),_=u+v*L(m)+Yt(m,s+x,!0),R="left",C="middle";break;case"insideEndAngle":M=d+v*S(m)+Xt(m,-s+x,!0),_=u+v*L(m)+Yt(m,-s+x,!0),R="right",C="middle";break;default:return bn(a,r,i)}return a=a||{},a.x=M,a.y=_,a.align=R,a.verticalAlign=C,a}}function Io(n,t,e,a){if(ci(a)){n.setTextConfig({rotation:a});return}else if(Ve(t)){n.setTextConfig({rotation:0});return}var r=n.shape,i=r.clockwise?r.startAngle:r.endAngle,o=r.clockwise?r.endAngle:r.startAngle,l=(i+o)/2,s,c=e(t);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":s=l;break;case"startAngle":case"insideStartAngle":s=i;break;case"endAngle":case"insideEndAngle":s=o;break;default:n.setTextConfig({rotation:0});return}var d=Math.PI*1.5-s;c==="middle"&&d>Math.PI/2&&d<Math.PI*1.5&&(d-=Math.PI),n.setTextConfig({rotation:d})}function Xt(n,t,e){return t*Math.sin(n)*(e?-1:1)}function Yt(n,t,e){return t*Math.cos(n)*(e?1:-1)}function Do(n,t,e){var a=n.get("borderRadius");if(a==null)return{cornerRadius:0};Ve(a)||(a=[a,a,a,a]);var r=Math.abs(t.r||0-t.r0||0);return{cornerRadius:_t(a,function(i){return $a(i,r)})}}var Oa=Math.max,Pa=Math.min;function Mo(n,t){var e=n.getArea&&n.getArea();if(tn(n,"cartesian2d")){var a=n.getBaseAxis();if(a.type!=="category"||!a.onBand){var r=t.getLayout("bandWidth");a.isHorizontal()?(e.x-=r,e.width+=r*2):(e.y-=r,e.height+=r*2)}}return e}var Ao=function(n){be(t,n);function t(){var e=n.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,a,r,i){this._model=e,this._removeOnRenderedListener(r),this._updateDrawMode(e);var o=e.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,a,r):this._renderNormal(e,a,r,i))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,a){this._progressiveEls=[],this._incrementalRenderLarge(e,a)},t.prototype.eachRendered=function(e){or(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var a=e.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},t.prototype._renderNormal=function(e,a,r,i){var o=this.group,l=e.getData(),s=this._data,c=e.coordinateSystem,d=c.getBaseAxis(),u;c.type==="cartesian2d"?u=d.isHorizontal():c.type==="polar"&&(u=d.dim==="angle");var h=e.isAnimationEnabled()?e:null,g=Lo(e,c);g&&this._enableRealtimeSort(g,l,r);var v=e.get("clip",!0)||g,y=Mo(c,l);o.removeClipPath();var m=e.get("roundCap",!0),f=e.get("showBackground",!0),x=e.getModel("backgroundStyle"),S=x.get("borderRadius")||0,L=[],M=this._backgroundEls,_=i&&i.isInitSort,R=i&&i.type==="changeAxisOrder";function C(k){var P=Zt[c.type](l,k),O=Eo(c,u,P);return O.useStyle(x.getItemStyle()),c.type==="cartesian2d"?O.setShape("r",S):O.setShape("cornerRadius",S),L[k]=O,O}l.diff(s).add(function(k){var P=l.getItemModel(k),O=Zt[c.type](l,k,P);if(f&&C(k),!(!l.hasValue(k)||!Vn[c.type](O))){var z=!1;v&&(z=Mn[c.type](y,O));var V=An[c.type](e,l,k,O,u,h,d.model,!1,m);g&&(V.forceLabelAnimation=!0),Nn(V,l,k,P,O,e,u,c.type==="polar"),_?V.attr({shape:O}):g?Ln(g,h,V,O,k,u,!1,!1):ra(V,{shape:O},e,k),l.setItemGraphicEl(k,V),o.add(V),V.ignore=z}}).update(function(k,P){var O=l.getItemModel(k),z=Zt[c.type](l,k,O);if(f){var V=void 0;M.length===0?V=C(P):(V=M[P],V.useStyle(x.getItemStyle()),c.type==="cartesian2d"?V.setShape("r",S):V.setShape("cornerRadius",S),L[k]=V);var G=Zt[c.type](l,k),q=Sr(u,G,c);Pt(V,{shape:q},h,k)}var j=s.getItemGraphicEl(P);if(!l.hasValue(k)||!Vn[c.type](z)){o.remove(j);return}var ee=!1;if(v&&(ee=Mn[c.type](y,z),ee&&o.remove(j)),j?ui(j):j=An[c.type](e,l,k,z,u,h,d.model,!!j,m),g&&(j.forceLabelAnimation=!0),R){var se=j.getTextContent();if(se){var xe=hi(se);xe.prevValue!=null&&(xe.prevValue=xe.value)}}else Nn(j,l,k,O,z,e,u,c.type==="polar");_?j.attr({shape:z}):g?Ln(g,h,j,z,k,u,!0,R):Pt(j,{shape:z},e,k,null),l.setItemGraphicEl(k,j),j.ignore=ee,o.add(j)}).remove(function(k){var P=s.getItemGraphicEl(k);P&&xn(P,e,k)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new bt);A.removeAll();for(var D=0;D<L.length;++D)A.add(L[D]);o.add(A),this._backgroundEls=L,this._data=l},t.prototype._renderLarge=function(e,a,r){this._clear(),Pn(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,a){this._removeBackground(),Pn(a,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var a=e.get("clip",!0)&&fi(e.coordinateSystem,!1,e),r=this.group;a?r.setClipPath(a):r.removeClipPath()},t.prototype._enableRealtimeSort=function(e,a,r){var i=this;if(a.count()){var o=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(a,e,r),this._isFirstFrame=!1;else{var l=function(s){var c=a.getItemGraphicEl(s),d=c&&c.shape;return d&&Math.abs(o.isHorizontal()?d.height:d.width)||0};this._onRendered=function(){i._updateSortWithinSameData(a,l,o,r)},r.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,a,r){var i=[];return e.each(e.mapDimension(a.dim),function(o,l){var s=r(l);s=s??NaN,i.push({dataIndex:l,mappedValue:s,ordinalNumber:o})}),i.sort(function(o,l){return l.mappedValue-o.mappedValue}),{ordinalNumbers:_t(i,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,a,r){for(var i=r.scale,o=e.mapDimension(r.dim),l=Number.MAX_VALUE,s=0,c=i.getOrdinalMeta().categories.length;s<c;++s){var d=e.rawIndexOf(o,i.getRawOrdinalNumber(s)),u=d<0?Number.MIN_VALUE:a(e.indexOfRawIndex(d));if(u>l)return!0;l=u}return!1},t.prototype._isOrderDifferentInView=function(e,a){for(var r=a.scale,i=r.getExtent(),o=Math.max(0,i[0]),l=Math.min(i[1],r.getOrdinalMeta().categories.length-1);o<=l;++o)if(e.ordinalNumbers[o]!==r.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(e,a,r,i){if(this._isOrderChangedWithinSameData(e,a,r)){var o=this._dataSort(e,r,a);this._isOrderDifferentInView(o,r)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",axisId:r.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(e,a,r){var i=a.baseAxis,o=this._dataSort(e,i,function(l){return e.get(e.mapDimension(a.otherAxis.dim),l)});r.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:o})},t.prototype.remove=function(e,a){this._clear(this._model),this._removeOnRenderedListener(a)},t.prototype.dispose=function(e,a){this._removeOnRenderedListener(a)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var a=this.group,r=this._data;e&&e.isAnimationEnabled()&&r&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],r.eachItemGraphicEl(function(i){xn(i,e,Ft(i).dataIndex)})):a.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(en),Mn={cartesian2d:function(n,t){var e=t.width<0?-1:1,a=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var r=n.x+n.width,i=n.y+n.height,o=Oa(t.x,n.x),l=Pa(t.x+t.width,r),s=Oa(t.y,n.y),c=Pa(t.y+t.height,i),d=l<o,u=c<s;return t.x=d&&o>r?l:o,t.y=u&&s>i?c:s,t.width=d?0:l-o,t.height=u?0:c-s,e<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),d||u},polar:function(n,t){var e=t.r0<=t.r?1:-1;if(e<0){var a=t.r;t.r=t.r0,t.r0=a}var r=Pa(t.r,n.r),i=Oa(t.r0,n.r0);t.r=r,t.r0=i;var o=r-i<0;if(e<0){var a=t.r;t.r=t.r0,t.r0=a}return o}},An={cartesian2d:function(n,t,e,a,r,i,o,l,s){var c=new xt({shape:an({},a),z2:1});if(c.__dataIndex=e,c.name="item",i){var d=c.shape,u=r?"height":"width";d[u]=0}return c},polar:function(n,t,e,a,r,i,o,l,s){var c=!r&&s?Dn:lr,d=new c({shape:a,z2:1});d.name="item";var u=xr(r);if(d.calculateTextPosition=Ro(u,{isRoundCap:c===Dn}),i){var h=d.shape,g=r?"r":"endAngle",v={};h[g]=r?a.r0:a.startAngle,v[g]=a[g],(l?Pt:ra)(d,{shape:v},i)}return d}};function Lo(n,t){var e=n.get("realtimeSort",!0),a=t.getBaseAxis();if(e&&a.type==="category"&&t.type==="cartesian2d")return{baseAxis:a,otherAxis:t.getOtherAxis(a)}}function Ln(n,t,e,a,r,i,o,l){var s,c;i?(c={x:a.x,width:a.width},s={y:a.y,height:a.height}):(c={y:a.y,height:a.height},s={x:a.x,width:a.width}),l||(o?Pt:ra)(e,{shape:s},t,r,null);var d=t?n.baseAxis.model:null;(o?Pt:ra)(e,{shape:c},d,r)}function Tn(n,t){for(var e=0;e<t.length;e++)if(!isFinite(n[t[e]]))return!0;return!1}var To=["x","y","width","height"],Vo=["cx","cy","r","startAngle","endAngle"],Vn={cartesian2d:function(n){return!Tn(n,To)},polar:function(n){return!Tn(n,Vo)}},Zt={cartesian2d:function(n,t,e){var a=n.getItemLayout(t),r=e?Oo(e,a):0,i=a.width>0?1:-1,o=a.height>0?1:-1;return{x:a.x+i*r/2,y:a.y+o*r/2,width:a.width-i*r,height:a.height-o*r}},polar:function(n,t,e){var a=n.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function No(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function xr(n){return function(t){var e=t?"Arc":"Angle";return function(a){switch(a){case"start":case"insideStart":case"end":case"insideEnd":return a+e;default:return a}}}(n)}function Nn(n,t,e,a,r,i,o,l){var s=t.getItemVisual(e,"style");if(l){if(!i.get("roundCap")){var d=n.shape,u=Do(a.getModel("itemStyle"),d);an(d,u),n.setShape(d)}}else{var c=a.get(["itemStyle","borderRadius"])||0;n.setShape("r",c)}n.useStyle(s);var h=a.getShallow("cursor");h&&n.attr("cursor",h);var g=l?o?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":o?r.height>=0?"bottom":"top":r.width>=0?"right":"left",v=Ha(a);sr(n,v,{labelFetcher:i,labelDataIndex:e,defaultText:vi(i.getData(),e),inheritColor:s.fill,defaultOpacity:s.opacity,defaultOutsidePosition:g});var y=n.getTextContent();if(l&&y){var m=a.get(["label","position"]);n.textConfig.inside=m==="middle"?!0:null,Io(n,m==="outside"?g:m,xr(o),a.get(["label","rotate"]))}pi(y,v,i.getRawValue(e),function(x){return yi(t,x)});var f=a.getModel(["emphasis"]);dr(n,f.get("focus"),f.get("blurScope"),f.get("disabled")),gi(n,a),No(r)&&(n.style.fill="none",n.style.stroke="none",J(n.states,function(x){x.style&&(x.style.fill=x.style.stroke="none")}))}function Oo(n,t){var e=n.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var a=n.get(["itemStyle","borderWidth"])||0,r=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),i=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(a,r,i)}var Po=function(){function n(){}return n}(),On=function(n){be(t,n);function t(e){var a=n.call(this,e)||this;return a.type="largeBar",a}return t.prototype.getDefaultShape=function(){return new Po},t.prototype.buildPath=function(e,a){for(var r=a.points,i=this.baseDimIdx,o=1-this.baseDimIdx,l=[],s=[],c=this.barWidth,d=0;d<r.length;d+=3)s[i]=c,s[o]=r[d+2],l[i]=r[d+i],l[o]=r[d+o],e.rect(l[0],l[1],s[0],s[1])},t}(Qa);function Pn(n,t,e,a){var r=n.getData(),i=r.getLayout("valueAxisHorizontal")?1:0,o=r.getLayout("largeDataIndices"),l=r.getLayout("size"),s=n.getModel("backgroundStyle"),c=r.getLayout("largeBackgroundPoints");if(c){var d=new On({shape:{points:c},incremental:!!a,silent:!0,z2:0});d.baseDimIdx=i,d.largeDataIndices=o,d.barWidth=l,d.useStyle(s.getItemStyle()),t.add(d),e&&e.push(d)}var u=new On({shape:{points:r.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});u.baseDimIdx=i,u.largeDataIndices=o,u.barWidth=l,t.add(u),u.useStyle(r.getVisual("style")),u.style.stroke=null,Ft(u).seriesIndex=n.seriesIndex,n.get("silent")||(u.on("mousedown",zn),u.on("mousemove",zn)),e&&e.push(u)}var zn=mi(function(n){var t=this,e=zo(t,n.offsetX,n.offsetY);Ft(t).dataIndex=e>=0?e:null},30,!1);function zo(n,t,e){for(var a=n.baseDimIdx,r=1-a,i=n.shape.points,o=n.largeDataIndices,l=[],s=[],c=n.barWidth,d=0,u=i.length/3;d<u;d++){var h=d*3;if(s[a]=c,s[r]=i[h+2],l[a]=i[h+a],l[r]=i[h+r],s[r]<0&&(l[r]+=s[r],s[r]=-s[r]),t>=l[0]&&t<=l[0]+s[0]&&e>=l[1]&&e<=l[1]+s[1])return o[d]}return-1}function Sr(n,t,e){if(tn(e,"cartesian2d")){var a=t,r=e.getArea();return{x:n?a.x:r.x,y:n?r.y:a.y,width:n?a.width:r.width,height:n?r.height:a.height}}else{var r=e.getArea(),i=t;return{cx:r.cx,cy:r.cy,r0:n?r.r0:i.r0,r:n?r.r:i.r,startAngle:n?i.startAngle:0,endAngle:n?i.endAngle:Math.PI*2}}}function Eo(n,t,e){var a=n.type==="polar"?lr:xt;return new a({shape:Sr(t,e,n),silent:!0,z2:0})}function Ko(n){n.registerChartView(Ao),n.registerSeriesModel(ko),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,bi(wi,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,xi("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Si("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var a=t.componentType||"series";e.eachComponent({mainType:a,query:t},function(r){t.sortInfo&&r.axis.setCategorySortInfo(t.sortInfo)})})}var Fo=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,a){return ua(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,a,r){return r.point(a.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(ha),wr=4,Bo=function(){function n(){}return n}(),$o=function(n){be(t,n);function t(e){var a=n.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.getDefaultShape=function(){return new Bo},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,a){var r=a.points,i=a.size,o=this.symbolProxy,l=o.shape,s=e.getContext?e.getContext():e,c=s&&i[0]<wr,d=this.softClipShape,u;if(c){this._ctx=s;return}for(this._ctx=null,u=this._off;u<r.length;){var h=r[u++],g=r[u++];isNaN(h)||isNaN(g)||d&&!d.contain(h,g)||(l.x=h-i[0]/2,l.y=g-i[1]/2,l.width=i[0],l.height=i[1],o.buildPath(e,l,!0))}this.incremental&&(this._off=u,this.notClear=!0)},t.prototype.afterBrush=function(){var e=this.shape,a=e.points,r=e.size,i=this._ctx,o=this.softClipShape,l;if(i){for(l=this._off;l<a.length;){var s=a[l++],c=a[l++];isNaN(s)||isNaN(c)||o&&!o.contain(s,c)||i.fillRect(s-r[0]/2,c-r[1]/2,r[0],r[1])}this.incremental&&(this._off=l,this.notClear=!0)}},t.prototype.findDataIndex=function(e,a){for(var r=this.shape,i=r.points,o=r.size,l=Math.max(o[0],4),s=Math.max(o[1],4),c=i.length/2-1;c>=0;c--){var d=c*2,u=i[d]-l/2,h=i[d+1]-s/2;if(e>=u&&a>=h&&e<=u+l&&a<=h+s)return c}return-1},t.prototype.contain=function(e,a){var r=this.transformCoordToLocal(e,a),i=this.getBoundingRect();if(e=r[0],a=r[1],i.contain(e,a)){var o=this.hoverDataIdx=this.findDataIndex(e,a);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var a=this.shape,r=a.points,i=a.size,o=i[0],l=i[1],s=1/0,c=1/0,d=-1/0,u=-1/0,h=0;h<r.length;){var g=r[h++],v=r[h++];s=Math.min(g,s),d=Math.max(g,d),c=Math.min(v,c),u=Math.max(v,u)}e=this._rect=new _i(s-o/2,c-l/2,d-s+o,u-c+l)}return e},t}(Qa),Ho=function(){function n(){this.group=new bt}return n.prototype.updateData=function(t,e){this._clear();var a=this._create();a.setShape({points:t.getLayout("points")}),this._setCommon(a,t,e)},n.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var r=(a.endIndex-a.startIndex)*2,i=a.startIndex*4*2;e=new Float32Array(e.buffer,i,r)}a.setShape("points",e),a.reset()})},n.prototype.incrementalPrepareUpdate=function(t){this._clear()},n.prototype.incrementalUpdate=function(t,e,a){var r=this._newAdded[0],i=e.getLayout("points"),o=r&&r.shape.points;if(o&&o.length<2e4){var l=o.length,s=new Float32Array(l+i.length);s.set(o),s.set(i,l),r.endIndex=t.end,r.setShape({points:s})}else{this._newAdded=[];var c=this._create();c.startIndex=t.start,c.endIndex=t.end,c.incremental=!0,c.setShape({points:i}),this._setCommon(c,e,a)}},n.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},n.prototype._create=function(){var t=new $o({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},n.prototype._setCommon=function(t,e,a){var r=e.hostModel;a=a||{};var i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=a.clipShape||null,t.symbolProxy=ia(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<wr;t.useStyle(r.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var l=e.getVisual("style"),s=l&&l.fill;s&&t.setColor(s);var c=Ft(t);c.seriesIndex=r.seriesIndex,t.on("mousemove",function(d){c.dataIndex=null;var u=t.hoverDataIdx;u>=0&&(c.dataIndex=u+(t.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),Uo=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,r){var i=e.getData(),o=this._updateSymbolDraw(i,e);o.updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,a,r){var i=e.getData(),o=this._updateSymbolDraw(i,e);o.incrementalPrepareUpdate(i),this._finished=!1},t.prototype.incrementalRender=function(e,a,r){this._symbolDraw.incrementalUpdate(e,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=e.end===a.getData().count()},t.prototype.updateTransform=function(e,a,r){var i=e.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var o=cr("").reset(e,a,r);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var a=e.coordinateSystem;return a&&a.getArea&&a.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,a){var r=this._symbolDraw,i=a.pipelineContext,o=i.large;return(!r||o!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=o?new Ho:new ki,this._isLargeDraw=o,this.group.removeAll()),this.group.add(r.group),r},t.prototype.remove=function(e,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(en);function Go(n){lt(Ci),n.registerSeriesModel(Fo),n.registerChartView(Uo),n.registerLayout(cr("scatter"))}var zt=J,jo=st,oa=-1,ye=function(){function n(t){var e=t.mappingMethod,a=t.type,r=this.option=Fe(t);this.type=a,this.mappingMethod=e,this._normalizeData=Xo[e];var i=n.visualHandlers[a];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[e],e==="piecewise"?(za(r),Wo(r)):e==="category"?r.categories?qo(r):za(r,!0):(Di(e!=="linear"||r.dataExtent),za(r))}return n.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},n.prototype.getNormalizer=function(){return Te(this._normalizeData,this)},n.listVisualTypes=function(){return Ri(n.visualHandlers)},n.isValidType=function(t){return n.visualHandlers.hasOwnProperty(t)},n.eachVisual=function(t,e,a){st(t)?J(t,e,a):e.call(a,t)},n.mapVisual=function(t,e,a){var r,i=Ve(t)?[]:st(t)?{}:(r=!0,null);return n.eachVisual(t,function(o,l){var s=e.call(a,o,l);r?i=s:i[l]=s}),i},n.retrieveVisuals=function(t){var e={},a;return t&&zt(n.visualHandlers,function(r,i){t.hasOwnProperty(i)&&(e[i]=t[i],a=!0)}),a?e:null},n.prepareVisualTypes=function(t){if(Ve(t))t=t.slice();else if(jo(t)){var e=[];zt(t,function(a,r){e.push(r)}),t=e}else return[];return t.sort(function(a,r){return r==="color"&&a!=="color"&&a.indexOf("color")===0?1:-1}),t},n.dependsOn=function(t,e){return e==="color"?!!(t&&t.indexOf(e)===0):t===e},n.findPieceIndex=function(t,e,a){for(var r,i=1/0,o=0,l=e.length;o<l;o++){var s=e[o].value;if(s!=null){if(s===t||ur(s)&&s===t+"")return o;a&&h(s,o)}}for(var o=0,l=e.length;o<l;o++){var c=e[o],d=c.interval,u=c.close;if(d){if(d[0]===-1/0){if(Qt(u[1],t,d[1]))return o}else if(d[1]===1/0){if(Qt(u[0],d[0],t))return o}else if(Qt(u[0],d[0],t)&&Qt(u[1],t,d[1]))return o;a&&h(d[0],o),a&&h(d[1],o)}}if(a)return t===1/0?e.length-1:t===-1/0?0:r;function h(g,v){var y=Math.abs(g-t);y<i&&(i=y,r=v)}},n.visualHandlers={color:{applyVisual:Mt("color"),getColorMapper:function(){var t=this.option;return Te(t.mappingMethod==="category"?function(e,a){return!a&&(e=this._normalizeData(e)),Lt.call(this,e)}:function(e,a,r){var i=!!r;return!a&&(e=this._normalizeData(e)),r=Aa(e,t.parsedVisual,r),i?r:Ma(r,"rgba")},this)},_normalizedToVisual:{linear:function(t){return Ma(Aa(t,this.option.parsedVisual),"rgba")},category:Lt,piecewise:function(t,e){var a=Wa.call(this,e);return a==null&&(a=Ma(Aa(t,this.option.parsedVisual),"rgba")),a},fixed:it}},colorHue:Jt(function(t,e){return La(t,e)}),colorSaturation:Jt(function(t,e){return La(t,null,e)}),colorLightness:Jt(function(t,e){return La(t,null,null,e)}),colorAlpha:Jt(function(t,e){return Ai(t,e)}),decal:{applyVisual:Mt("decal"),_normalizedToVisual:{linear:null,category:Lt,piecewise:null,fixed:null}},opacity:{applyVisual:Mt("opacity"),_normalizedToVisual:ja([0,1])},liftZ:{applyVisual:Mt("liftZ"),_normalizedToVisual:{linear:it,category:it,piecewise:it,fixed:it}},symbol:{applyVisual:function(t,e,a){var r=this.mapValueToVisual(t);a("symbol",r)},_normalizedToVisual:{linear:En,category:Lt,piecewise:function(t,e){var a=Wa.call(this,e);return a==null&&(a=En.call(this,t)),a},fixed:it}},symbolSize:{applyVisual:Mt("symbolSize"),_normalizedToVisual:ja([0,1])}},n}();function Wo(n){var t=n.pieceList;n.hasSpecialVisual=!1,J(t,function(e,a){e.originIndex=a,e.visual!=null&&(n.hasSpecialVisual=!0)})}function qo(n){var t=n.categories,e=n.categoryMap={},a=n.visual;if(zt(t,function(o,l){e[o]=l}),!Ve(a)){var r=[];st(a)?zt(a,function(o,l){var s=e[l];r[s??oa]=o}):r[oa]=a,a=_r(n,r)}for(var i=t.length-1;i>=0;i--)a[i]==null&&(delete e[t[i]],t.pop())}function za(n,t){var e=n.visual,a=[];st(e)?zt(e,function(i){a.push(i)}):e!=null&&a.push(e);var r={color:1,symbol:1};!t&&a.length===1&&!r.hasOwnProperty(n.type)&&(a[1]=a[0]),_r(n,a)}function Jt(n){return{applyVisual:function(t,e,a){var r=this.mapValueToVisual(t);a("color",n(e("color"),r))},_normalizedToVisual:ja([0,1])}}function En(n){var t=this.option.visual;return t[Math.round(dt(n,[0,1],[0,t.length-1],!0))]||{}}function Mt(n){return function(t,e,a){a(n,this.mapValueToVisual(t))}}function Lt(n){var t=this.option.visual;return t[this.option.loop&&n!==oa?n%t.length:n]}function it(){return this.option.visual[0]}function ja(n){return{linear:function(t){return dt(t,n,this.option.visual,!0)},category:Lt,piecewise:function(t,e){var a=Wa.call(this,e);return a==null&&(a=dt(t,n,this.option.visual,!0)),a},fixed:it}}function Wa(n){var t=this.option,e=t.pieceList;if(t.hasSpecialVisual){var a=ye.findPieceIndex(n,e),r=e[a];if(r&&r.visual)return r.visual[this.type]}}function _r(n,t){return n.visual=t,n.type==="color"&&(n.parsedVisual=_t(t,function(e){var a=Mi(e);return a||[0,0,0,1]})),t}var Xo={linear:function(n){return dt(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var t=this.option.pieceList,e=ye.findPieceIndex(n,t,!0);if(e!=null)return dt(e,[0,t.length-1],[0,1],!0)},category:function(n){var t=this.option.categories?this.option.categoryMap[n]:n;return t??oa},fixed:Ii};function Qt(n,t,e){return n?t<=e:t<e}var Yo=256,Zo=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Sn.createCanvas();this.canvas=t}return n.prototype.update=function(t,e,a,r,i,o){var l=this._getBrush(),s=this._getGradient(i,"inRange"),c=this._getGradient(i,"outOfRange"),d=this.pointSize+this.blurSize,u=this.canvas,h=u.getContext("2d"),g=t.length;u.width=e,u.height=a;for(var v=0;v<g;++v){var y=t[v],m=y[0],f=y[1],x=y[2],S=r(x);h.globalAlpha=S,h.drawImage(l,m-d,f-d)}if(!u.width||!u.height)return u;for(var L=h.getImageData(0,0,u.width,u.height),M=L.data,_=0,R=M.length,C=this.minOpacity,A=this.maxOpacity,D=A-C;_<R;){var S=M[_+3]/256,k=Math.floor(S*(Yo-1))*4;if(S>0){var P=o(S)?s:c;S>0&&(S=S*D+C),M[_++]=P[k],M[_++]=P[k+1],M[_++]=P[k+2],M[_++]=P[k+3]*S*256}else _+=4}return h.putImageData(L,0,0),u},n.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Sn.createCanvas()),e=this.pointSize+this.blurSize,a=e*2;t.width=a,t.height=a;var r=t.getContext("2d");return r.clearRect(0,0,a,a),r.shadowOffsetX=a,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-e,e,this.pointSize,0,Math.PI*2,!0),r.closePath(),r.fill(),t},n.prototype._getGradient=function(t,e){for(var a=this._gradientPixels,r=a[e]||(a[e]=new Uint8ClampedArray(256*4)),i=[0,0,0,0],o=0,l=0;l<256;l++)t[e](l/255,!0,i),r[o++]=i[0],r[o++]=i[1],r[o++]=i[2],r[o++]=i[3];return r},n}();function Jo(n,t,e){var a=n[1]-n[0];t=_t(t,function(o){return{interval:[(o.interval[0]-n[0])/a,(o.interval[1]-n[0])/a]}});var r=t.length,i=0;return function(o){var l;for(l=i;l<r;l++){var s=t[l].interval;if(s[0]<=o&&o<=s[1]){i=l;break}}if(l===r)for(l=i-1;l>=0;l--){var s=t[l].interval;if(s[0]<=o&&o<=s[1]){i=l;break}}return l>=0&&l<r&&e[l]}}function Qo(n,t){var e=n[1]-n[0];return t=[(t[0]-n[0])/e,(t[1]-n[0])/e],function(a){return a>=t[0]&&a<=t[1]}}function Kn(n){var t=n.dimensions;return t[0]==="lng"&&t[1]==="lat"}var el=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,r){var i;a.eachComponent("visualMap",function(l){l.eachTargetSeries(function(s){s===e&&(i=l)})}),this._progressiveEls=null,this.group.removeAll();var o=e.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(e,r,0,e.getData().count()):Kn(o)&&this._renderOnGeo(o,e,i,r)},t.prototype.incrementalPrepareRender=function(e,a,r){this.group.removeAll()},t.prototype.incrementalRender=function(e,a,r,i){var o=a.coordinateSystem;o&&(Kn(o)?this.render(a,r,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(a,i,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){or(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,a,r,i,o){var l=e.coordinateSystem,s=tn(l,"cartesian2d"),c,d,u,h;if(s){var g=l.getAxis("x"),v=l.getAxis("y");c=g.getBandWidth()+.5,d=v.getBandWidth()+.5,u=g.scale.getExtent(),h=v.scale.getExtent()}for(var y=this.group,m=e.getData(),f=e.getModel(["emphasis","itemStyle"]).getItemStyle(),x=e.getModel(["blur","itemStyle"]).getItemStyle(),S=e.getModel(["select","itemStyle"]).getItemStyle(),L=e.get(["itemStyle","borderRadius"]),M=Ha(e),_=e.getModel("emphasis"),R=_.get("focus"),C=_.get("blurScope"),A=_.get("disabled"),D=s?[m.mapDimension("x"),m.mapDimension("y"),m.mapDimension("value")]:[m.mapDimension("time"),m.mapDimension("value")],k=r;k<i;k++){var P=void 0,O=m.getItemVisual(k,"style");if(s){var z=m.get(D[0],k),V=m.get(D[1],k);if(isNaN(m.get(D[2],k))||isNaN(z)||isNaN(V)||z<u[0]||z>u[1]||V<h[0]||V>h[1])continue;var G=l.dataToPoint([z,V]);P=new xt({shape:{x:G[0]-c/2,y:G[1]-d/2,width:c,height:d},style:O})}else{if(isNaN(m.get(D[1],k)))continue;P=new xt({z2:1,shape:l.dataToRect([m.get(D[0],k)]).contentShape,style:O})}if(m.hasItemOption){var q=m.getItemModel(k),j=q.getModel("emphasis");f=j.getModel("itemStyle").getItemStyle(),x=q.getModel(["blur","itemStyle"]).getItemStyle(),S=q.getModel(["select","itemStyle"]).getItemStyle(),L=q.get(["itemStyle","borderRadius"]),R=j.get("focus"),C=j.get("blurScope"),A=j.get("disabled"),M=Ha(q)}P.shape.r=L;var ee=e.getRawValue(k),se="-";ee&&ee[2]!=null&&(se=ee[2]+""),sr(P,M,{labelFetcher:e,labelDataIndex:k,defaultOpacity:O.opacity,defaultText:se}),P.ensureState("emphasis").style=f,P.ensureState("blur").style=x,P.ensureState("select").style=S,dr(P,R,C,A),P.incremental=o,o&&(P.states.emphasis.hoverLayer=!0),y.add(P),m.setItemGraphicEl(k,P),this._progressiveEls&&this._progressiveEls.push(P)}},t.prototype._renderOnGeo=function(e,a,r,i){var o=r.targetVisuals.inRange,l=r.targetVisuals.outOfRange,s=a.getData(),c=this._hmLayer||this._hmLayer||new Zo;c.blurSize=a.get("blurSize"),c.pointSize=a.get("pointSize"),c.minOpacity=a.get("minOpacity"),c.maxOpacity=a.get("maxOpacity");var d=e.getViewRect().clone(),u=e.getRoamTransform();d.applyTransform(u);var h=Math.max(d.x,0),g=Math.max(d.y,0),v=Math.min(d.width+d.x,i.getWidth()),y=Math.min(d.height+d.y,i.getHeight()),m=v-h,f=y-g,x=[s.mapDimension("lng"),s.mapDimension("lat"),s.mapDimension("value")],S=s.mapArray(x,function(R,C,A){var D=e.dataToPoint([R,C]);return D[0]-=h,D[1]-=g,D.push(A),D}),L=r.getExtent(),M=r.type==="visualMap.continuous"?Qo(L,r.option.range):Jo(L,r.getPieceList(),r.option.selected);c.update(S,m,f,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:l.color.getColorMapper()},M);var _=new hr({style:{width:m,height:f,x:h,y:g,image:c.canvas},silent:!0});this.group.add(_)},t.type="heatmap",t}(en),tl=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){return ua(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=Li.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(ha);function al(n){n.registerChartView(el),n.registerSeriesModel(tl)}var Fn=J;function Bn(n){if(n){for(var t in n)if(n.hasOwnProperty(t))return!0}}function $n(n,t,e){var a={};return Fn(t,function(i){var o=a[i]=r();Fn(n[i],function(l,s){if(ye.isValidType(s)){var c={type:s,visual:l};e&&e(c,i),o[s]=new ye(c),s==="opacity"&&(c=Fe(c),c.type="colorAlpha",o.__hidden.__alphaForOpacity=new ye(c))}})}),a;function r(){var i=function(){};i.prototype.__hidden=i.prototype;var o=new i;return o}}function nl(n,t,e){var a;J(e,function(r){t.hasOwnProperty(r)&&Bn(t[r])&&(a=!0)}),a&&J(e,function(r){t.hasOwnProperty(r)&&Bn(t[r])?n[r]=Fe(t[r]):delete n[r]})}function rl(n,t,e,a){var r={};return J(n,function(i){var o=ye.prepareVisualTypes(t[i]);r[i]=o}),{progress:function(o,l){var s;a!=null&&(s=l.getDimensionIndex(a));function c(M){return Ti(l,u,M)}function d(M,_){Vi(l,u,M,_)}for(var u,h=l.getStore();(u=o.next())!=null;){var g=l.getRawDataItem(u);if(!(g&&g.visualMap===!1))for(var v=a!=null?h.get(s,u):u,y=e(v),m=t[y],f=r[y],x=0,S=f.length;x<S;x++){var L=f[x];m[L]&&m[L].applyVisual(v,c,d)}}}}}var kr={get:function(n,t,e){var a=Fe((il[n]||{})[t]);return e&&Ve(a)?a[a.length-1]:a}},il={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Hn=ye.mapVisual,ol=ye.eachVisual,ll=Ve,Un=J,sl=fr,dl=dt,la=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return t.prototype.init=function(e,a,r){this.mergeDefaultAndTheme(e,r)},t.prototype.optionUpdated=function(e,a){var r=this.option;!a&&nl(r,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var a=this.stateList;e=Te(e,this),this.controllerVisuals=$n(this.option.controller,a,e),this.targetVisuals=$n(this.option.target,a,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,a=[];return e==null||e==="all"?this.ecModel.eachSeries(function(r,i){a.push(i)}):a=Ni(e),a},t.prototype.eachTargetSeries=function(e,a){J(this.getTargetSeriesIndices(),function(r){var i=this.ecModel.getSeriesByIndex(r);i&&e.call(a,i)},this)},t.prototype.isTargetSeries=function(e){var a=!1;return this.eachTargetSeries(function(r){r===e&&(a=!0)}),a},t.prototype.formatValueText=function(e,a,r){var i=this.option,o=i.precision,l=this.dataBound,s=i.formatter,c;r=r||["<",">"],Ve(e)&&(e=e.slice(),c=!0);var d=a?e:c?[u(e[0]),u(e[1])]:u(e);if(ur(s))return s.replace("{value}",c?d[0]:d).replace("{value2}",c?d[1]:d);if(Oi(s))return c?s(e[0],e[1]):s(e);if(c)return e[0]===l[0]?r[0]+" "+d[1]:e[1]===l[1]?r[1]+" "+d[0]:d[0]+" - "+d[1];return d;function u(h){return h===l[0]?"min":h===l[1]?"max":(+h).toFixed(Math.min(o,20))}},t.prototype.resetExtent=function(){var e=this.option,a=sl([e.min,e.max]);this._dataExtent=a},t.prototype.getDataDimensionIndex=function(e){var a=this.option.dimension;if(a!=null)return e.getDimensionIndex(a);for(var r=e.dimensions,i=r.length-1;i>=0;i--){var o=r[i],l=e.getDimensionInfo(o);if(!l.isCalculationCoord)return l.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,a=this.option,r={inRange:a.inRange,outOfRange:a.outOfRange},i=a.target||(a.target={}),o=a.controller||(a.controller={});wn(i,r),wn(o,r);var l=this.isCategory();s.call(this,i),s.call(this,o),c.call(this,i,"inRange","outOfRange"),d.call(this,o);function s(u){ll(a.color)&&!u.inRange&&(u.inRange={color:a.color.slice().reverse()}),u.inRange=u.inRange||{color:e.get("gradientColor")}}function c(u,h,g){var v=u[h],y=u[g];v&&!y&&(y=u[g]={},Un(v,function(m,f){if(ye.isValidType(f)){var x=kr.get(f,"inactive",l);x!=null&&(y[f]=x,f==="color"&&!y.hasOwnProperty("opacity")&&!y.hasOwnProperty("colorAlpha")&&(y.opacity=[0,0]))}}))}function d(u){var h=(u.inRange||{}).symbol||(u.outOfRange||{}).symbol,g=(u.inRange||{}).symbolSize||(u.outOfRange||{}).symbolSize,v=this.get("inactiveColor"),y=this.getItemSymbol(),m=y||"roundRect";Un(this.stateList,function(f){var x=this.itemSize,S=u[f];S||(S=u[f]={color:l?v:[v]}),S.symbol==null&&(S.symbol=h&&Fe(h)||(l?m:[m])),S.symbolSize==null&&(S.symbolSize=g&&Fe(g)||(l?x[0]:[x[0],x[0]])),S.symbol=Hn(S.symbol,function(_){return _==="none"?m:_});var L=S.symbolSize;if(L!=null){var M=-1/0;ol(L,function(_){_>M&&(M=_)}),S.symbolSize=Hn(L,function(_){return dl(_,[0,M],[0,x[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Pi),Gn=[20,140],cl=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(e,a){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(r){r.mappingMethod="linear",r.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=Gn[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=Gn[1])},t.prototype._resetRange=function(){var e=this.getExtent(),a=this.option.range;!a||a.auto?(e.auto=1,this.option.range=e):Ve(a)&&(a[0]>a[1]&&a.reverse(),a[0]=Math.max(a[0],e[0]),a[1]=Math.min(a[1],e[1]))},t.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),J(this.stateList,function(e){var a=this.option.controller[e].symbolSize;a&&a[0]!==a[1]&&(a[0]=a[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),a=fr((this.get("range")||[]).slice());return a[0]>e[1]&&(a[0]=e[1]),a[1]>e[1]&&(a[1]=e[1]),a[0]<e[0]&&(a[0]=e[0]),a[1]<e[0]&&(a[1]=e[0]),a},t.prototype.getValueState=function(e){var a=this.option.range,r=this.getExtent();return(a[0]<=r[0]||a[0]<=e)&&(a[1]>=r[1]||e<=a[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var a=[];return this.eachTargetSeries(function(r){var i=[],o=r.getData();o.each(this.getDataDimensionIndex(o),function(l,s){e[0]<=l&&l<=e[1]&&i.push(s)},this),a.push({seriesId:r.id,dataIndex:i})},this),a},t.prototype.getVisualMeta=function(e){var a=jn(this,"outOfRange",this.getExtent()),r=jn(this,"inRange",this.option.range.slice()),i=[];function o(g,v){i.push({value:g,color:e(g,v)})}for(var l=0,s=0,c=r.length,d=a.length;s<d&&(!r.length||a[s]<=r[0]);s++)a[s]<r[l]&&o(a[s],"outOfRange");for(var u=1;l<c;l++,u=0)u&&i.length&&o(r[l],"outOfRange"),o(r[l],"inRange");for(var u=1;s<d;s++)(!r.length||r[r.length-1]<a[s])&&(u&&(i.length&&o(i[i.length-1].value,"outOfRange"),u=0),o(a[s],"outOfRange"));var h=i.length;return{stops:i,outerColors:[h?i[0].color:"transparent",h?i[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Ja(la.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(la);function jn(n,t,e){if(e[0]===e[1])return e.slice();for(var a=200,r=(e[1]-e[0])/a,i=e[0],o=[],l=0;l<=a&&i<e[1];l++)o.push(i),i+=r;return o.push(e[1]),o}var Cr=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return t.prototype.init=function(e,a){this.ecModel=e,this.api=a},t.prototype.render=function(e,a,r,i){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,a,r,i)},t.prototype.renderBackground=function(e){var a=this.visualMapModel,r=zi(a.get("padding")||0),i=e.getBoundingRect();e.add(new xt({z2:-1,silent:!0,shape:{x:i.x-r[3],y:i.y-r[0],width:i.width+r[3]+r[1],height:i.height+r[0]+r[2]},style:{fill:a.get("backgroundColor"),stroke:a.get("borderColor"),lineWidth:a.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,a,r){r=r||{};var i=r.forceState,o=this.visualMapModel,l={};if(a==="color"){var s=o.get("contentColor");l.color=s}function c(g){return l[g]}function d(g,v){l[g]=v}var u=o.controllerVisuals[i||o.getValueState(e)],h=ye.prepareVisualTypes(u);return J(h,function(g){var v=u[g];r.convertOpacityToAlpha&&g==="opacity"&&(g="colorAlpha",v=u.__alphaForOpacity),ye.dependsOn(g,a)&&v&&v.applyVisual(e,c,d)}),l[a]},t.prototype.positionGroup=function(e){var a=this.visualMapModel,r=this.api;Ei(e,a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})},t.prototype.doRender=function(e,a,r,i){},t.type="visualMap",t}(Ki),Wn=[["left","right","width"],["top","bottom","height"]];function Rr(n,t,e){var a=n.option,r=a.align;if(r!=null&&r!=="auto")return r;for(var i={width:t.getWidth(),height:t.getHeight()},o=a.orient==="horizontal"?1:0,l=Wn[o],s=[0,null,10],c={},d=0;d<3;d++)c[Wn[1-o][d]]=s[d],c[l[d]]=d===2?e[0]:a[l[d]];var u=[["x","width",3],["y","height",0]][o],h=Fi(c,i,a.padding);return l[(h.margin[u[2]]||0)+h[u[0]]+h[u[1]]*.5<i[u[1]]*.5?0:1]}function ta(n,t){return J(n||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),n}var Ee=dt,ul=J,qn=Math.min,Ea=Math.max,hl=12,fl=6,vl=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return t.prototype.init=function(e,a){n.prototype.init.call(this,e,a),this._hoverLinkFromSeriesMouseOver=Te(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Te(this._hideIndicator,this)},t.prototype.doRender=function(e,a,r,i){(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,a=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(a);var r=e.get("text");this._renderEndsText(a,r,0),this._renderEndsText(a,r,1),this._updateView(!0),this.renderBackground(a),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(a)},t.prototype._renderEndsText=function(e,a,r){if(a){var i=a[1-r];i=i!=null?i+"":"";var o=this.visualMapModel,l=o.get("textGap"),s=o.itemSize,c=this._shapes.mainGroup,d=this._applyTransform([s[0]/2,r===0?-l:s[1]+l],c),u=this._applyTransform(r===0?"bottom":"top",c),h=this._orient,g=this.visualMapModel.textStyleModel;this.group.add(new Ot({style:ea(g,{x:d[0],y:d[1],verticalAlign:h==="horizontal"?"middle":u,align:h==="horizontal"?u:"center",text:i})}))}},t.prototype._renderBar=function(e){var a=this.visualMapModel,r=this._shapes,i=a.itemSize,o=this._orient,l=this._useHandle,s=Rr(a,this.api,i),c=r.mainGroup=this._createBarGroup(s),d=new bt;c.add(d),d.add(r.outOfRange=Xn()),d.add(r.inRange=Xn(null,l?Zn(this._orient):null,Te(this._dragHandle,this,"all",!1),Te(this._dragHandle,this,"all",!0))),d.setClipPath(new xt({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var u=a.textStyleModel.getTextRect(""),h=Ea(u.width,u.height);l&&(r.handleThumbs=[],r.handleLabels=[],r.handleLabelPoints=[],this._createHandle(a,c,0,i,h,o),this._createHandle(a,c,1,i,h,o)),this._createIndicator(a,c,i,h,o),e.add(c)},t.prototype._createHandle=function(e,a,r,i,o,l){var s=Te(this._dragHandle,this,r,!1),c=Te(this._dragHandle,this,r,!0),d=$a(e.get("handleSize"),i[0]),u=ia(e.get("handleIcon"),-d/2,-d/2,d,d,null,!0),h=Zn(this._orient);u.attr({cursor:h,draggable:!0,drift:s,ondragend:c,onmousemove:function(f){Ua(f.event)}}),u.x=i[0]/2,u.useStyle(e.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Bi(u,!0),a.add(u);var g=this.visualMapModel.textStyleModel,v=new Ot({cursor:h,draggable:!0,drift:s,onmousemove:function(f){Ua(f.event)},ondragend:c,style:ea(g,{x:0,y:0,text:""})});v.ensureState("blur").style={opacity:.1},v.stateTransition={duration:200},this.group.add(v);var y=[d,0],m=this._shapes;m.handleThumbs[r]=u,m.handleLabelPoints[r]=y,m.handleLabels[r]=v},t.prototype._createIndicator=function(e,a,r,i,o){var l=$a(e.get("indicatorSize"),r[0]),s=ia(e.get("indicatorIcon"),-l/2,-l/2,l,l,null,!0);s.attr({cursor:"move",invisible:!0,silent:!0,x:r[0]/2});var c=e.getModel("indicatorStyle").getItemStyle();if(s instanceof hr){var d=s.style;s.useStyle(an({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},c))}else s.useStyle(c);a.add(s);var u=this.visualMapModel.textStyleModel,h=new Ot({silent:!0,invisible:!0,style:ea(u,{x:0,y:0,text:""})});this.group.add(h);var g=[(o==="horizontal"?i/2:fl)+r[0]/2,0],v=this._shapes;v.indicator=s,v.indicatorLabel=h,v.indicatorLabelPoint=g,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,a,r,i){if(this._useHandle){if(this._dragging=!a,!a){var o=this._applyTransform([r,i],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}a===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),a?!this._hovering&&this._clearHoverLinkToSeries():Yn(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,a=this._dataInterval=e.getSelected(),r=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[Ee(a[0],r,i,!0),Ee(a[1],r,i,!0)]},t.prototype._updateInterval=function(e,a){a=a||0;var r=this.visualMapModel,i=this._handleEnds,o=[0,r.itemSize[1]];$i(a,i,o,e,0);var l=r.getExtent();this._dataInterval=[Ee(i[0],o,l,!0),Ee(i[1],o,l,!0)]},t.prototype._updateView=function(e){var a=this.visualMapModel,r=a.getExtent(),i=this._shapes,o=[0,a.itemSize[1]],l=e?o:this._handleEnds,s=this._createBarVisual(this._dataInterval,r,l,"inRange"),c=this._createBarVisual(r,r,o,"outOfRange");i.inRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),i.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(l,s)},t.prototype._createBarVisual=function(e,a,r,i){var o={forceState:i,convertOpacityToAlpha:!0},l=this._makeColorGradient(e,o),s=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],c=this._createBarPoints(r,s);return{barColor:new Hi(0,0,0,1,l),barPoints:c,handlesColor:[l[0].color,l[l.length-1].color]}},t.prototype._makeColorGradient=function(e,a){var r=100,i=[],o=(e[1]-e[0])/r;i.push({color:this.getControllerVisual(e[0],"color",a),offset:0});for(var l=1;l<r;l++){var s=e[0]+o*l;if(s>e[1])break;i.push({color:this.getControllerVisual(s,"color",a),offset:l/r})}return i.push({color:this.getControllerVisual(e[1],"color",a),offset:1}),i},t.prototype._createBarPoints=function(e,a){var r=this.visualMapModel.itemSize;return[[r[0]-a[0],e[0]],[r[0],e[0]],[r[0],e[1]],[r[0]-a[1],e[1]]]},t.prototype._createBarGroup=function(e){var a=this._orient,r=this.visualMapModel.get("inverse");return new bt(a==="horizontal"&&!r?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:a==="horizontal"&&r?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:a==="vertical"&&!r?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},t.prototype._updateHandle=function(e,a){if(this._useHandle){var r=this._shapes,i=this.visualMapModel,o=r.handleThumbs,l=r.handleLabels,s=i.itemSize,c=i.getExtent(),d=this._applyTransform("left",r.mainGroup);ul([0,1],function(u){var h=o[u];h.setStyle("fill",a.handlesColor[u]),h.y=e[u];var g=Ee(e[u],[0,s[1]],c,!0),v=this.getControllerVisual(g,"symbolSize");h.scaleX=h.scaleY=v/s[0],h.x=s[0]-v/2;var y=Ta(r.handleLabelPoints[u],Va(h,this.group));if(this._orient==="horizontal"){var m=d==="left"||d==="top"?(s[0]-v)/2:(s[0]-v)/-2;y[1]+=m}l[u].setStyle({x:y[0],y:y[1],text:i.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",r.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,a,r,i){var o=this.visualMapModel,l=o.getExtent(),s=o.itemSize,c=[0,s[1]],d=this._shapes,u=d.indicator;if(u){u.attr("invisible",!1);var h={convertOpacityToAlpha:!0},g=this.getControllerVisual(e,"color",h),v=this.getControllerVisual(e,"symbolSize"),y=Ee(e,l,c,!0),m=s[0]-v/2,f={x:u.x,y:u.y};u.y=y,u.x=m;var x=Ta(d.indicatorLabelPoint,Va(u,this.group)),S=d.indicatorLabel;S.attr("invisible",!1);var L=this._applyTransform("left",d.mainGroup),M=this._orient,_=M==="horizontal";S.setStyle({text:(r||"")+o.formatValueText(a),verticalAlign:_?L:"middle",align:_?"center":L});var R={x:m,y,style:{fill:g}},C={style:{x:x[0],y:x[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};u.x=f.x,u.y=f.y,u.animateTo(R,A),S.animateTo(C,A)}else u.attr(R),S.attr(C);this._firstShowIndicator=!1;var D=this._shapes.handleLabels;if(D)for(var k=0;k<D.length;k++)this.api.enterBlur(D[k])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(a){if(e._hovering=!0,!e._dragging){var r=e.visualMapModel.itemSize,i=e._applyTransform([a.offsetX,a.offsetY],e._shapes.mainGroup,!0,!0);i[1]=qn(Ea(0,i[1]),r[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=r[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,a){var r=this.visualMapModel,i=r.itemSize;if(r.option.hoverLink){var o=[0,i[1]],l=r.getExtent();e=qn(Ea(o[0],e),o[1]);var s=pl(r,l,o),c=[e-s,e+s],d=Ee(e,o,l,!0),u=[Ee(c[0],o,l,!0),Ee(c[1],o,l,!0)];c[0]<o[0]&&(u[0]=-1/0),c[1]>o[1]&&(u[1]=1/0),a&&(u[0]===-1/0?this._showIndicator(d,u[1],"< ",s):u[1]===1/0?this._showIndicator(d,u[0],"> ",s):this._showIndicator(d,d," ",s));var h=this._hoverLinkDataIndices,g=[];(a||Yn(r))&&(g=this._hoverLinkDataIndices=r.findTargetDataIndices(u));var v=Ui(h,g);this._dispatchHighDown("downplay",ta(v[0],r)),this._dispatchHighDown("highlight",ta(v[1],r))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var a;if(Gi(e.target,function(s){var c=Ft(s);if(c.dataIndex!=null)return a=c,!0},!0),!!a){var r=this.ecModel.getSeriesByIndex(a.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(r)){var o=r.getData(a.dataType),l=o.getStore().get(i.getDataDimensionIndex(o),a.dataIndex);isNaN(l)||this._showIndicator(l,l)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var a=this._shapes.handleLabels;if(a)for(var r=0;r<a.length;r++)this.api.leaveBlur(a[r])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",ta(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,a,r,i){var o=Va(a,i?null:this.group);return Ve(e)?Ta(e,o,r):ji(e,o,r)},t.prototype._dispatchHighDown=function(e,a){a&&a.length&&this.api.dispatchAction({type:e,batch:a})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(Cr);function Xn(n,t,e,a){return new Wi({shape:{points:n},draggable:!!e,cursor:t,drift:e,onmousemove:function(r){Ua(r.event)},ondragend:a})}function pl(n,t,e){var a=hl/2,r=n.get("hoverLinkDataSize");return r&&(a=Ee(r,t,e,!0)/2),a}function Yn(n){var t=n.get("hoverLinkOnHandle");return!!(t??n.get("realtime"))}function Zn(n){return n==="vertical"?"ns-resize":"ew-resize"}var gl={type:"selectDataRange",event:"dataRangeSelected",update:"update"},ml=function(n,t){t.eachComponent({mainType:"visualMap",query:n},function(e){e.setSelected(n.selected)})},yl=[{createOnAllSeries:!0,reset:function(n,t){var e=[];return t.eachComponent("visualMap",function(a){var r=n.pipelineContext;!a.isTargetSeries(n)||r&&r.large||e.push(rl(a.stateList,a.targetVisuals,Te(a.getValueState,a),a.getDataDimensionIndex(n.getData())))}),e}},{createOnAllSeries:!0,reset:function(n,t){var e=n.getData(),a=[];t.eachComponent("visualMap",function(r){if(r.isTargetSeries(n)){var i=r.getVisualMeta(Te(bl,null,n,r))||{stops:[],outerColors:[]},o=r.getDataDimensionIndex(e);o>=0&&(i.dimension=o,a.push(i))}}),n.getData().setVisual("visualMeta",a)}}];function bl(n,t,e,a){for(var r=t.targetVisuals[a],i=ye.prepareVisualTypes(r),o={color:qi(n.getData(),"color")},l=0,s=i.length;l<s;l++){var c=i[l],d=r[c==="opacity"?"__alphaForOpacity":c];d&&d.applyVisual(e,u,h)}return o.color;function u(g){return o[g]}function h(g,v){o[g]=v}}var Jn=J;function xl(n){var t=n&&n.visualMap;Ve(t)||(t=t?[t]:[]),Jn(t,function(e){if(e){yt(e,"splitList")&&!yt(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var a=e.pieces;a&&Ve(a)&&Jn(a,function(r){st(r)&&(yt(r,"start")&&!yt(r,"min")&&(r.min=r.start),yt(r,"end")&&!yt(r,"max")&&(r.max=r.end))})}})}function yt(n,t){return n&&n.hasOwnProperty&&n.hasOwnProperty(t)}var Qn=!1;function Ir(n){Qn||(Qn=!0,n.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),n.registerAction(gl,ml),J(yl,function(t){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,t)}),n.registerPreprocessor(xl))}function Sl(n){n.registerComponentModel(cl),n.registerComponentView(vl),Ir(n)}var wl=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._pieceList=[],e}return t.prototype.optionUpdated=function(e,a){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],_l[this._mode].call(this,this._pieceList),this._resetSelected(e,a);var i=this.option.categories;this.resetVisual(function(o,l){r==="categories"?(o.mappingMethod="category",o.categories=Fe(i)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=_t(this._pieceList,function(s){return s=Fe(s),l!=="inRange"&&(s.visual=null),s}))})},t.prototype.completeVisualOption=function(){var e=this.option,a={},r=ye.listVisualTypes(),i=this.isCategory();J(e.pieces,function(l){J(r,function(s){l.hasOwnProperty(s)&&(a[s]=1)})}),J(a,function(l,s){var c=!1;J(this.stateList,function(d){c=c||o(e,d,s)||o(e.target,d,s)},this),!c&&J(this.stateList,function(d){(e[d]||(e[d]={}))[s]=kr.get(s,d==="inRange"?"active":"inactive",i)})},this);function o(l,s,c){return l&&l[s]&&l[s].hasOwnProperty(c)}n.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,a){var r=this.option,i=this._pieceList,o=(a?r:e).selected||{};if(r.selected=o,J(i,function(s,c){var d=this.getSelectedMapKey(s);o.hasOwnProperty(d)||(o[d]=!0)},this),r.selectedMode==="single"){var l=!1;J(i,function(s,c){var d=this.getSelectedMapKey(s);o[d]&&(l?o[d]=!1:l=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=Fe(e)},t.prototype.getValueState=function(e){var a=ye.findPieceIndex(e,this._pieceList);return a!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[a])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var a=[],r=this._pieceList;return this.eachTargetSeries(function(i){var o=[],l=i.getData();l.each(this.getDataDimensionIndex(l),function(s,c){var d=ye.findPieceIndex(s,r);d===e&&o.push(c)},this),a.push({seriesId:i.id,dataIndex:o})},this),a},t.prototype.getRepresentValue=function(e){var a;if(this.isCategory())a=e.value;else if(e.value!=null)a=e.value;else{var r=e.interval||[];a=r[0]===-1/0&&r[1]===1/0?0:(r[0]+r[1])/2}return a},t.prototype.getVisualMeta=function(e){if(this.isCategory())return;var a=[],r=["",""],i=this;function o(d,u){var h=i.getRepresentValue({interval:d});u||(u=i.getValueState(h));var g=e(h,u);d[0]===-1/0?r[0]=g:d[1]===1/0?r[1]=g:a.push({value:d[0],color:g},{value:d[1],color:g})}var l=this._pieceList.slice();if(!l.length)l.push({interval:[-1/0,1/0]});else{var s=l[0].interval[0];s!==-1/0&&l.unshift({interval:[-1/0,s]}),s=l[l.length-1].interval[1],s!==1/0&&l.push({interval:[s,1/0]})}var c=-1/0;return J(l,function(d){var u=d.interval;u&&(u[0]>c&&o([c,u[0]],"outOfRange"),o(u.slice()),c=u[1])},this),{stops:a,outerColors:r}},t.type="visualMap.piecewise",t.defaultOption=Ja(la.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(la),_l={splitNumber:function(n){var t=this.option,e=Math.min(t.precision,20),a=this.getExtent(),r=t.splitNumber;r=Math.max(parseInt(r,10),1),t.splitNumber=r;for(var i=(a[1]-a[0])/r;+i.toFixed(e)!==i&&e<5;)e++;t.precision=e,i=+i.toFixed(e),t.minOpen&&n.push({interval:[-1/0,a[0]],close:[0,0]});for(var o=0,l=a[0];o<r;l+=i,o++){var s=o===r-1?a[1]:l+i;n.push({interval:[l,s],close:[1,1]})}t.maxOpen&&n.push({interval:[a[1],1/0],close:[0,0]}),_n(n),J(n,function(c,d){c.index=d,c.text=this.formatValueText(c.interval)},this)},categories:function(n){var t=this.option;J(t.categories,function(e){n.push({text:this.formatValueText(e,!0),value:e})},this),er(t,n)},pieces:function(n){var t=this.option;J(t.pieces,function(e,a){st(e)||(e={value:e});var r={text:"",index:a};if(e.label!=null&&(r.text=e.label),e.hasOwnProperty("value")){var i=r.value=e.value;r.interval=[i,i],r.close=[1,1]}else{for(var o=r.interval=[],l=r.close=[0,0],s=[1,0,1],c=[-1/0,1/0],d=[],u=0;u<2;u++){for(var h=[["gte","gt","min"],["lte","lt","max"]][u],g=0;g<3&&o[u]==null;g++)o[u]=e[h[g]],l[u]=s[g],d[u]=g===2;o[u]==null&&(o[u]=c[u])}d[0]&&o[1]===1/0&&(l[0]=0),d[1]&&o[0]===-1/0&&(l[1]=0),o[0]===o[1]&&l[0]&&l[1]&&(r.value=o[0])}r.visual=ye.retrieveVisuals(e),n.push(r)},this),er(t,n),_n(n),J(n,function(e){var a=e.close,r=[["<",""][a[1]],[">",""][a[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,r)},this)}};function er(n,t){var e=n.inverse;(n.orient==="vertical"?!e:e)&&t.reverse()}var kl=function(n){be(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.doRender=function(){var e=this.group;e.removeAll();var a=this.visualMapModel,r=a.get("textGap"),i=a.textStyleModel,o=i.getFont(),l=i.getTextColor(),s=this._getItemAlign(),c=a.itemSize,d=this._getViewData(),u=d.endsText,h=Xi(a.get("showLabel",!0),!u),g=!a.get("selectedMode");u&&this._renderEndsText(e,u[0],c,h,s),J(d.viewPieceList,function(v){var y=v.piece,m=new bt;m.onclick=Te(this._onItemClick,this,y),this._enableHoverLink(m,v.indexInModelPieceList);var f=a.getRepresentValue(y);if(this._createItemSymbol(m,f,[0,0,c[0],c[1]],g),h){var x=this.visualMapModel.getValueState(f);m.add(new Ot({style:{x:s==="right"?-r:c[0]+r,y:c[1]/2,text:y.text,verticalAlign:"middle",align:s,font:o,fill:l,opacity:x==="outOfRange"?.5:1},silent:g}))}e.add(m)},this),u&&this._renderEndsText(e,u[1],c,h,s),Yi(a.get("orient"),e,a.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,a){var r=this;e.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(o){var l=r.visualMapModel;l.option.hoverLink&&r.api.dispatchAction({type:o,batch:ta(l.findTargetDataIndices(a),l)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,a=e.option;if(a.orient==="vertical")return Rr(e,this.api,e.itemSize);var r=a.align;return(!r||r==="auto")&&(r="left"),r},t.prototype._renderEndsText=function(e,a,r,i,o){if(a){var l=new bt,s=this.visualMapModel.textStyleModel;l.add(new Ot({style:ea(s,{x:i?o==="right"?r[0]:0:r[0]/2,y:r[1]/2,verticalAlign:"middle",align:i?o:"center",text:a})})),e.add(l)}},t.prototype._getViewData=function(){var e=this.visualMapModel,a=_t(e.getPieceList(),function(l,s){return{piece:l,indexInModelPieceList:s}}),r=e.get("text"),i=e.get("orient"),o=e.get("inverse");return(i==="horizontal"?o:!o)?a.reverse():r&&(r=r.slice().reverse()),{viewPieceList:a,endsText:r}},t.prototype._createItemSymbol=function(e,a,r,i){var o=ia(this.getControllerVisual(a,"symbol"),r[0],r[1],r[2],r[3],this.getControllerVisual(a,"color"));o.silent=i,e.add(o)},t.prototype._onItemClick=function(e){var a=this.visualMapModel,r=a.option,i=r.selectedMode;if(i){var o=Fe(r.selected),l=a.getSelectedMapKey(e);i==="single"||i===!0?(o[l]=!0,J(o,function(s,c){o[c]=c===l})):o[l]=!o[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(Cr);function Cl(n){n.registerComponentModel(wl),n.registerComponentView(kl),Ir(n)}function Rl(n){lt(Sl),lt(Cl)}const Il=fe({__name:"LineChart",props:{data:{},yname:{},size:{}},setup(n){const t=n;lt([va,pa,vr,nn,ga,Zi,pr]);const e=wt(),a=B(),r=B();return ct(()=>{a.value=ca(fa(r.value,e.value.baseColor==="#000"?"dark":"light"))}),Oe(()=>t.data,i=>{var l,s,c,d,u;if(!i)return;const o={backgroundColor:e.value.cardColor,tooltip:{trigger:"none",axisPointer:{type:"cross"}},grid:{top:"20px",left:"100px",right:"20px",bottom:"60px"},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"filter",start:0}],xAxis:{type:"category",name:(l=t.data)==null?void 0:l.xname,nameLocation:"middle",nameGap:30,axisTick:{alignWithLabel:!0},data:(s=t.data)==null?void 0:s.x,nameTextStyle:{color:e.value.primaryColor}},yAxis:{type:"value",name:t.yname||"",nameLocation:"middle",nameGap:80,nameTextStyle:{color:e.value.primaryColor},axisLine:{show:!0},min:(c=t.data)!=null&&c.y?Math.min(...t.data.y):0,max:(d=t.data)!=null&&d.y?Math.max(...t.data.y):0,axisTick:{show:!0,alignWithLabel:!0},axisLabel:{formatter:function(h){if(h===0)return"0";if(Math.abs(h)>=1e4){const g=Math.floor(Math.log10(Math.abs(h)));return`${(h/Math.pow(10,g)).toPrecision(3)}10{sup|${g}}`}return parseFloat(h.toFixed(4)).toString()},rich:{sup:{verticalAlign:"super",fontSize:10,padding:[0,2]}}}},series:[{type:"line",data:(u=t.data)==null?void 0:u.y}]};me(()=>{var h;(h=a.value)==null||h.setOption(o)})},{immediate:!0}),Et(()=>{var i;(i=a.value)==null||i.dispose()}),(i,o)=>{var l,s,c,d;return re(),ke("div",{ref_key:"chartRef",ref:r,style:ot({width:`${((l=i.size)==null?void 0:l.w)||690}px`,height:`${((s=i.size)==null?void 0:s.h)||400}px`}),class:Kt([[`min-w-[${((c=i.size)==null?void 0:c.w)||690}px] min-h-[${((d=i.size)==null?void 0:d.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),Dl=fe({__name:"HeatMap",props:{data:{},size:{},activeKey:{}},setup(n){const t=n;lt([va,pa,Rl,ga,al]);const e=wt(),a=B(),r=B();return ct(()=>{a.value=ca(fa(r.value,e.value.baseColor==="#000"?"dark":"light"))}),Oe(()=>t.data,i=>{var l,s,c,d,u,h,g;if(!i)return;const o={backgroundColor:e.value.cardColor,tooltip:{formatter:function({data:v}){var y,m;return`x: ${(y=t.data)==null?void 0:y.x[v[0]]}<br> y: ${(m=t.data)==null?void 0:m.y[v[1]]}<br> value: ${v[2]}`}},grid:{top:"20px",left:"80px",right:"90px",bottom:"50"},xAxis:{type:"category",name:(l=t.data)==null?void 0:l.xname,nameLocation:"middle",nameGap:25,data:(s=t.data)==null?void 0:s.x,axisLabel:{width:75,overflow:"truncate"},nameTextStyle:{color:e.value.primaryColor}},yAxis:[{type:"category",name:((c=t.data)==null?void 0:c.yname)||"",nameLocation:"middle",nameGap:70,nameTextStyle:{color:e.value.primaryColor},splitArea:{show:!0},data:(d=t.data)==null?void 0:d.y,axisLabel:{width:40,overflow:"truncate"}},{name:(t.activeKey||"").replace(/^.*\/([^/]+)$/,"$1"),nameLocation:"middle",nameGap:5}],visualMap:{min:((u=t.data)==null?void 0:u.min)||0,max:((h=t.data)==null?void 0:h.max)||1,calculable:!0,realtime:!1,align:"left",right:0,bottom:40,width:"100%",itemHeight:320,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},formatter:function(v){if(v===0)return"0";if(Math.abs(v)>=1e4){const y=Math.floor(Math.log10(Math.abs(v)));return`${(v/Math.pow(10,y)).toPrecision(3)}10{sup|${y}}`}return parseFloat(v.toFixed(4)).toString()},textStyle:{width:30,overflow:"break",rich:{sup:{verticalAlign:"super",fontSize:10,padding:[0,2],rotate:30}}}},series:[{type:"heatmap",data:(g=t.data)==null?void 0:g.data}]};me(()=>{var v;(v=a.value)==null||v.setOption(o)})},{immediate:!0}),Et(()=>{var i;(i=a.value)==null||i.dispose()}),(i,o)=>{var l,s,c,d;return re(),ke("div",{ref_key:"chartRef",ref:r,style:ot({width:`${((l=i.size)==null?void 0:l.w)||690}px`,height:`${((s=i.size)==null?void 0:s.h)||400}px`}),class:Kt([[`min-w-[${((c=i.size)==null?void 0:c.w)||690}px] min-h-[${((d=i.size)==null?void 0:d.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),Ml=fe({__name:"ScatterView",props:{data:{},size:{},allValues:{}},setup(n){const t=n;lt([va,pa,nn,ga,pr,Go,Ji]);const e=wt(),a=B(),r=B();return ct(()=>{a.value=ca(fa(r.value,e.value.baseColor==="#000"?"dark":"light"))}),Oe(()=>t.data,i=>{var l;if(!i)return;const o={backgroundColor:e.value.cardColor,tooltip:{axisPointer:{type:"cross"}},grid:{top:"20px",left:"100px",right:"20px",bottom:"60px"},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"filter",start:0}],xAxis:{name:"Real",nameLocation:"middle",nameGap:25,nameTextStyle:{color:e.value.primaryColor},axisLabel:{width:75,overflow:"truncate"}},yAxis:{name:"Imag",nameLocation:"middle",nameGap:60,nameTextStyle:{color:e.value.primaryColor},axisLabel:{width:40,overflow:"truncate"}}};i.length==1?o.series={type:"scatter",data:i[0]}:(o.series=i.map((s,c)=>({type:"scatter",data:s,name:we(t.allValues)?"":String(t.allValues[c])})),o.legend={type:"scroll",data:(l=t.allValues)==null?void 0:l.map(s=>String(s)),left:"center",bottom:1}),me(()=>{var s;(s=a.value)==null||s.setOption(o,{notMerge:!0})})},{immediate:!0}),Et(()=>{var i;(i=a.value)==null||i.dispose()}),(i,o)=>{var l,s,c,d;return re(),ke("div",{ref_key:"chartRef",ref:r,style:ot({width:`${((l=i.size)==null?void 0:l.w)||690}px`,height:`${((s=i.size)==null?void 0:s.h)||400}px`}),class:Kt([[`min-w-[${((c=i.size)==null?void 0:c.w)||690}px] min-h-[${((d=i.size)==null?void 0:d.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),Al={key:0,class:"flex items-center gap-2"},Ll=fe({__name:"SliderView",props:qa({options:{}},{value:{},valueModifiers:{},showall:{},showallModifiers:{}}),emits:["update:value","update:showall"],setup(n){const t=wt(),e=n,a=aa(n,"value"),r=aa(n,"showall"),i=B(),o=X(()=>{var v;return(v=e.options)==null?void 0:v.map(y=>y==null?void 0:y.map((m,f)=>({...m,label:Tt(m),value:f})))}),l=X(()=>{var v;return(v=e.options)==null?void 0:v.map(y=>{if(!we(y))return 100/(y[0].value.length-1)})}),s=(v,y,m)=>{if(m===void 0)return"";const f=Math.round(v/m);return e.options?e.options[y][0].value[f]:"0"},c=(v,y)=>{if(l.value){const m=Math.round(v/l.value[y]),f=a.value||[];f[y]=m,a.value=f}},d=X(()=>{var y;let v=0;return(y=e.options)==null||y.forEach(m=>{we(m)||v++}),v}),u=v=>{we(v)?i.value=[]:i.value=[v.pop()],me(()=>{r.value=i.value[0]})},h=B(),g=B();return ct(()=>{var v;h.value&&(g.value=(v=h.value)==null?void 0:v.offsetWidth)}),(v,y)=>{const m=ir,f=nr,x=ro,S=Za,L=Xa,M=ni;return re(),ke("div",null,[De(M,{value:U(i),"onUpdate:value":[y[0]||(y[0]=_=>Vt(i)?i.value=_:null),u]},{default:Ie(()=>[at("div",{ref_key:"wrapRef",ref:h},[De(L,{cols:U(g)<650?1:U(d)>2?2:U(d),"x-gap":5,"y-gap":5},{default:Ie(()=>[(re(!0),ke(da,null,Ya(v.options,(_,R)=>(re(),Re(S,{key:R,class:Kt(["p-2",[U(we)(_)?"w-0 hidden":""]]),style:ot({border:`1px solid ${U(t).tabColor}`})},{default:Ie(()=>{var C;return[U(we)(_)?Ge("",!0):(re(),ke("div",Al,[Nt(tt(["X","Y","Z"][R])+" : ",1),De(m,{options:U(o)?U(o)[R]:[],"default-value":0,class:"flex-1",size:"small"},null,8,["options"]),De(f,{value:R},{default:Ie(()=>y[1]||(y[1]=[Nt("Show All")])),_:2},1032,["value"])])),U(l)&&U(l)[R]!==void 0&&!U(we)(_)?(re(),Re(x,{key:1,class:"!flex-1",disabled:(C=U(i))==null?void 0:C.includes(R),step:U(l)[R],"format-tooltip":A=>s(A,R,U(l)?U(l)[R]:void 0),onUpdateValue:A=>c(A,R)},null,8,["disabled","step","format-tooltip","onUpdateValue"])):Ge("",!0)]}),_:2},1032,["class","style"]))),128))]),_:1},8,["cols"])],512)]),_:1},8,["value"])])}}}),Tl=fe({__name:"BarChart",props:{data:{},size:{}},setup(n){const t=n;lt([va,pa,vr,nn,ga,Ko]);const e=wt(),a=B(),r=B();return ct(()=>{a.value=ca(fa(r.value,e.value.baseColor==="#000"?"dark":"light"))}),Oe(()=>t.data,i=>{var l,s,c,d;if(!i)return;const o={backgroundColor:e.value.cardColor,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"20px",left:"100px",right:"20px",bottom:"60px"},xAxis:{type:"category",name:(l=t.data)==null?void 0:l.xname,nameLocation:"middle",nameGap:30,nameTextStyle:{color:e.value.primaryColor},axisTick:{alignWithLabel:!0},data:(s=t.data)==null?void 0:s.x},yAxis:{type:"value",name:((c=t.data)==null?void 0:c.yname)||"",nameLocation:"middle",nameGap:70,nameTextStyle:{color:e.value.primaryColor},axisLabel:{width:40,overflow:"truncate"},axisTick:{alignWithLabel:!0}},series:[{type:"bar",data:(d=t.data)==null?void 0:d.data}]};me(()=>{var u;(u=a.value)==null||u.setOption(o)})},{immediate:!0}),Et(()=>{var i;(i=a.value)==null||i.dispose()}),(i,o)=>{var l,s,c,d;return re(),ke("div",{ref_key:"chartRef",ref:r,style:ot({width:`${((l=i.size)==null?void 0:l.w)||690}px`,height:`${((s=i.size)==null?void 0:s.h)||400}px`}),class:Kt([[`min-w-[${((c=i.size)==null?void 0:c.w)||690}px] min-h-[${((d=i.size)==null?void 0:d.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),Vl={class:"h-8 text-center"},Nl={key:0},Ol=fe({__name:"ChartView",props:{activeKey:{},latestStep:{},barChart:{}},setup(n,{expose:t}){const e=["1d_complex_scatter","2d_complex_scatter","3d_complex_scatter","scalar_complex_scatter"],a=n,r=Qi(),i=B(),o=B([]),l=B({}),s=B(),c=B([]),d=B([0,0]),u=B(),h=({data:f,type:x})=>{var S,L;Array.isArray(a.activeKey)||(x==="concat"?l.value={[a.activeKey]:(L=(S=l.value[a.activeKey])==null?void 0:S.slice(0,a.latestStep))==null?void 0:L.concat(f||[])}:l.value={[a.activeKey]:f||[]})},g=X(()=>{let f=0;return na(o.value,x=>{we(x)||f++}),f}),v=async f=>{i.value=f.exp_detail,l.value=f.data.result,s.value=f.data.plot_type;const x=[];na(f.sweep_variables,S=>{x.push(S)}),o.value=x,we(c.value)&&(c.value=x.map(S=>{if(!we(S))return 0}))},y=X(()=>{const f=Object.keys(s.value||{});return!we(f)&&s.value?s.value[f[0]]:""}),m=X(()=>{var x,S,L,M;if(Array.isArray(a.activeKey))return;const f=l.value[a.activeKey];if(y.value==="1d_normal"){const _=c.value[0],R=_!==void 0?o.value[0][_]:{};return{x:R==null?void 0:R.value,y:f,xname:Tt(R)}}if(y.value==="2d_normal"){const _=c.value[0],R=c.value[1];if(_===void 0||R===void 0)return[];const C=o.value[0][_].value,A=o.value[1][R].value,D=A.length;let k=[];return A.forEach((P,O)=>{const z=[];C.forEach((V,G)=>{z.push([G,O,f[G*D+O]])}),k=k.concat(z)}),{data:k,x:C,y:A,xname:Tt(o.value[0][_]),yname:Tt(o.value[1][R]),min:Math.min(...f),max:Math.max(...f)}}if(y.value==="scalar_complex_scatter")return[(x=f.real[0])==null?void 0:x.map((_,R)=>[_,f.imag[0][R]])];if(y.value==="1d_complex_scatter"){const[_=0]=d.value;if(u.value===0){const R=[];return o.value[u.value][0].value.forEach((A,D)=>{var k;R.push((k=f.real[D])==null?void 0:k.map((P,O)=>[P,f.imag[D][O]]))}),R}return[(S=f.real[_])==null?void 0:S.map((R,C)=>[R,f.imag[_][C]])]}if(y.value==="2d_complex_scatter"){const _=[],[R=0,C=0]=d.value,A=o.value[1][0].value.length;if(u.value!==void 0){const D=o.value[u.value][0].value;if(u.value===0)return D.forEach((k,P)=>{var O;_.push((O=f.real[P*A+C])==null?void 0:O.map((z,V)=>[z,f.imag[P*A+C][V]]))}),_;if(u.value===1)return D.forEach((k,P)=>{var O;_.push((O=f.real[R*A+P])==null?void 0:O.map((z,V)=>[z,f.imag[R*A+P][V]]))}),_}return[(L=f.real[R*A+C])==null?void 0:L.map((D,k)=>[D,f.imag[R*A+C][k]])]}if(y.value==="3d_complex_scatter"){const[_=0,R=0,C=0]=d.value,A=o.value[1][0].value.length,D=o.value[2][0].value.length,k=[],P=o.value[u.value][0].value;return u.value===0?P.forEach((O,z)=>{var V;k.push((V=f.real[z*A*D+R*D+C])==null?void 0:V.map((G,q)=>[G,f.imag[z*A*D+R*D+C][q]]))}):u.value===1?P.forEach((O,z)=>{var V;k.push((V=f.real[_*A*D+z*D+C])==null?void 0:V.map((G,q)=>[G,f.imag[_*A*D+z*D+C][q]]))}):u.value===2&&P.forEach((O,z)=>{var V;k.push((V=f.real[_*A*D+R*D+z])==null?void 0:V.map((G,q)=>[G,f.imag[_*A*D+R*D+z][q]]))}),[(M=f.real[_*A*D+R*D+C])==null?void 0:M.map((O,z)=>[O,f.imag[_*A*D+R*D+C][z]])]}return{x:[],y:[],xname:""}});return t({setData:h,updateStore:v}),(f,x)=>{var L,M,_,R,C;const S=ri;return re(),ke("div",null,[at("div",Vl,[De(S,{color:{color:"#7816ff",textColor:"#fff"},size:"tiny"},{default:Ie(()=>{var A,D;return[Nt(" Exp "+tt((D=(A=U(r))==null?void 0:A.expInfo)==null?void 0:D.exp_id),1)]}),_:1}),Nt(" "+tt((L=U(i))==null?void 0:L.title)+" ",1),at("div",null,[Nt(tt((M=U(r).expInfo)==null?void 0:M.group_name)+" :: "+tt((_=U(r).expInfo)==null?void 0:_.space_name)+" ",1),(R=U(r).expInfo)!=null&&R.create_time?(re(),ke("span",Nl,":: "+tt((C=U(r).expInfo)==null?void 0:C.create_time),1)):Ge("",!0)])]),Array.isArray(f.activeKey)?Ge("",!0):(re(),ke(da,{key:0},[U(y)==="1d_normal"?(re(),Re(Il,{key:0,data:U(m),yname:f.activeKey},null,8,["data","yname"])):Ge("",!0),U(y)==="2d_normal"?(re(),Re(Dl,{key:1,data:U(m),"active-key":f.activeKey},null,8,["data","active-key"])):Ge("",!0)],64)),e.includes(U(y))?(re(),Re(Ml,{key:1,"all-values":U(we)(U(o)[U(u)])?[]:U(o)[U(u)][0].value,data:U(m)},null,8,["all-values","data"])):Ge("",!0),Array.isArray(f.activeKey)&&f.activeKey.length>0?(re(),Re(Tl,{key:2,data:f.barChart},null,8,["data"])):Ge("",!0),!e.includes(U(y))&&U(g)>0?(re(),Re(_o,{key:3,"plot-type":U(y),options:U(o),modelValue:U(c),"onUpdate:modelValue":x[0]||(x[0]=A=>Vt(c)?c.value=A:null)},null,8,["plot-type","options","modelValue"])):(re(),Re(Ll,{key:4,options:U(o),value:U(d),"onUpdate:value":x[1]||(x[1]=A=>Vt(d)?d.value=A:null),showall:U(u),"onUpdate:showall":x[2]||(x[2]=A=>Vt(u)?u.value=A:null)},null,8,["options","value","showall"]))])}}}),Pl={class:"flex min-h-96"},zl={class:"font-bold mb-2"},El={class:"flex-1 px-5"},Kl="/",Fl=fe({__name:"PlotView",setup(n){const{t}=ii(),e=oi(),a=wt(),r=B({}),i=B(),o=B(),l=B([]),s=B(null),c=B({}),d=B([]),u=B([]),h=B(null),g=C=>{h.value=setInterval(C,1e3)},v=()=>{h.value&&(clearInterval(h.value),h.value=null)},y=C=>{const A=[Ue.SERVICE_QUEUING,Ue.SERVICE_PENDING,Ue.HOST_DOWNLOADED,Ue.WAITING,"LOADING_DATA"].includes(C),D=[Ue.RUNNING].includes(C),k=[Ue.COMPLETE,Ue.CANCELING,Ue.CANCELED,Ue.ERROR].includes(C);if(A)return"LOADING";if(D)return"RUNNING";if(k)return"COMPLETE"},m=B(0),f=pn(async()=>{var k,P,O,z,V;const C={device_group_name:e.query.device_group_name,space_id:e.query.space_id,exp_id:e.query.exp_id,fields:l.value||[],latest_step:Array(l.value.length===0?1:l.value.length).fill(m.value)},[A,D]=await yn(C);if(!A&&(D==null?void 0:D.status)===0){const G=(k=D.data.data)==null?void 0:k.result;h.value&&!we(G)&&na(c.value,(ee,se)=>{ee&&ee.setData({data:G[se],type:"concat"})});const q=Object.keys(((O=(P=D.data)==null?void 0:P.data)==null?void 0:O.data_range)||{});q.length>0?m.value=D.data.data.data_range[q[0]].pop():m.value=0;const j=y(D.data.status);j&&j!=="COMPLETE"&&!h.value&&g(f),h.value&&y(D.data.status)==="COMPLETE"&&v(),r.value=((z=D.data)==null?void 0:z.all_fields)||{},i.value=D.data.status,(V=D.data)!=null&&V.message&&(o.value=D.data.message)}},200),x=X(()=>y(i.value)),S=B(),L=B(),M=B({x:[],data:[]}),_=pn(async C=>{var P,O,z,V;const A={device_group_name:e.query.device_group_name,space_id:e.query.space_id,exp_id:e.query.exp_id,fields:C,latest_step:[0]},[D,k]=await yn(A);!D&&(k==null?void 0:k.status)===0&&(S.value={...S.value,...((O=(P=k.data)==null?void 0:P.data)==null?void 0:O.plot_type)||{}},k.data.data.plot_type[C[0]]==="scalar_normal"&&(L.value={...L.value||{},...((V=(z=k.data)==null?void 0:z.data)==null?void 0:V.result)||{}}),me(()=>{const G=[];let q=-1;l.value.forEach((ee,se)=>{if(S.value[ee]==="scalar_normal"){const xe=G.findIndex(je=>Array.isArray(je));xe>-1?(G[xe].push(ee),q=xe):(G.push([ee]),q=se)}else G.push(ee)});const j=[];Array.isArray(G[q])&&G[q].forEach(ee=>{j.push(L.value[ee][0])}),M.value={x:G[q],data:j},u.value=G}),me(()=>{setTimeout(()=>{var G;(G=c.value[C[0]])==null||G.updateStore(k.data)},100)}))},200);ct(f),Et(v),Oe(l,C=>{var D,k,P;if((C==null?void 0:C.length)>((D=d.value)==null?void 0:D.length)){const O=gn(C,d.value);_(O)}let A="";if((C==null?void 0:C.length)<d.value.length&&(A=gn(d.value,C)[0]),d.value=C,A){let O=JSON.parse(JSON.stringify(u.value||[]));O=mn(O,A);const z=O.findIndex(q=>Array.isArray(q));if(z>-1){let q=O[z];q=mn(q,A),we(q)?O.splice(z,1):O[z]=q}u.value=O;const V=JSON.parse(JSON.stringify(M.value||{})),G=(k=V.x)==null?void 0:k.findIndex(q=>q===A);G>-1&&(V.x.splice(G,1),(P=V.data)==null||P.splice(G,1)),me(()=>{M.value=V})}me(()=>{var O;(O=s.value)==null||O.scrollTo({top:384*Math.ceil(l.value.length/2),behavior:"smooth"})})});const R=(C,A)=>{c.value[A]=C};return(C,A)=>{const D=li,k=Za,P=Xa,O=si,z=di;return re(),Re(z,{style:{height:"calc(100vh - 260px)"}},{default:Ie(()=>[at("div",Pl,[at("div",{class:"w-52",style:ot({borderRight:`1px solid ${U(a).tabColor}`,height:"calc(100vh - 300px)"})},[at("div",zl,tt(U(t)("expInfo.dataField")),1),De(D,{style:{"max-height":"calc(100vh - 370px)"}},{default:Ie(()=>[De(xo,{modelValue:U(l),"onUpdate:modelValue":A[0]||(A[0]=V=>Vt(l)?l.value=V:null),"all-fields":U(r),"divider-key":Kl},null,8,["modelValue","all-fields"])]),_:1})],4),at("div",El,[De(D,{style:{"max-height":"calc(100vh - 300px)"},ref_key:"scrollbarRef",ref:s},{default:Ie(()=>[De(O,{show:U(x)==="LOADING",style:{height:"calc(100vh - 350px)"}},{default:Ie(()=>[De(P,{cols:2,"x-gap":"10","y-gap":"10"},{default:Ie(()=>[(re(!0),ke(da,null,Ya(U(u),V=>(re(),Re(k,{class:"min-h-[500px] p-4 rounded-xl",style:ot({border:`1px solid ${U(a).tabColor}`}),key:Array.isArray(V)?"bar":V},{default:Ie(()=>[De(Ol,{"latest-step":U(m),"bar-chart":U(M),ref_for:!0,ref:G=>R(G,Array.isArray(V)?"bar--":V),"active-key":V},null,8,["latest-step","bar-chart","active-key"])]),_:2},1032,["style"]))),128))]),_:1})]),_:1},8,["show"])]),_:1},512)])])]),_:1})}}}),Bl={class:"flex gap-5"},jl=fe({__name:"ExpFinalSetting",setup(n){return(t,e)=>(re(),ke("div",Bl,[De(Fl)]))}});export{jl as default};
