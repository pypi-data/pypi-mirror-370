import{d as H,c as E,e as m,f as r,aa as qe,$ as he,aE as Tt,r as D,x as B,w as i,h as s,n as we,M as Nt,j as e,H as se,F as ye,V as bt,i as ze,Z as kt,aJ as jt,v as Me,b as Ve,W as Ct,b2 as Ut,a as Ee,C as Bt,p as L,k as qt,B as St,m as $,t as u,o as zt,aY as Mt,aW as pe,X as Ft,D as Vt,a1 as xt,y as me,z as Ht,a4 as At,aZ as Qt,S as Jt,Y as Wt,b4 as vt,a5 as gt,a9 as fe,a_ as Gt,a$ as Kt,A as Yt,b0 as ge,b1 as ht,aH as Zt,I as _}from"./index-DOdIYOkR.js";import{b as Xt,c as ea,e as ta,f as aa,h as sa,s as oa,i as na,d as la,j as ia,k as ra,g as ca}from"./exp-BL6mWztX.js";import{A as wt,_ as yt,d as pa,F as It}from"./FileSaver.min-DxebSpbo.js";import{u as ua}from"./useInterval-DKIPzm9n.js";import{u as xe,n as da}from"./exp-DwbafzoG.js";import{u as _a}from"./groupDetail-DGDhYZP2.js";import{o as Ce,P as fa}from"./index-CeDoaJ3i.js";import{D as ma,R as xa,E as va}from"./ExpsTpl-Catd2eTI.js";import{i as ga}from"./json-editor-vue-BF_1KIfc.js";import{_ as ha}from"./DynamicFormItem.vue_vue_type_script_setup_true_lang-FgvCsgYW.js";import{_ as wa,a as ya}from"./FormItem-BXNzH03D.js";import{A as Ia}from"./Add-C39WCOkR.js";import{_ as ba}from"./Alert-CGrj_oNe.js";import{_ as ka}from"./Badge-MJMyfqYQ.js";import{_ as Ca,a as qa}from"./Tabs-dCRhCvDT.js";import"./index-CJcxqf5R.js";import"./Copy16Filled-B0aEZLoO.js";import"./HandRight24Filled-h8AfnU-s.js";import"./Popconfirm-D4ZFjBKK.js";import"./task-DMmcmbsE.js";import"./DynamicForm.vue_vue_type_script_setup_true_lang-r8iZL3AR.js";import"./InputNumber-jEPipemT.js";import"./Add-Cl6tY5vX.js";import"./debounce-HnRb9GPW.js";const Sa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},za=H({name:"BookDatabase20Regular",render:function(l,p){return m(),E("svg",Sa,p[0]||(p[0]=[r("g",{fill:"none"},[r("path",{d:"M4 4v12a2 2 0 0 0 2 2h9.5a.5.5 0 0 0 0-1H6a1 1 0 0 1-1-1h10a1 1 0 0 0 1-1V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2zm10-1a1 1 0 0 1 1 1v11H5V4a1 1 0 0 1 1-1h8zM8.483 6.345C8.126 6.552 8 6.787 8 7c0 .213.126.448.483.655C8.841 7.863 9.374 8 10 8c.626 0 1.159-.137 1.517-.345c.357-.207.483-.442.483-.655c0-.213-.126-.448-.483-.655C11.159 6.137 10.626 6 10 6c-.626 0-1.159.137-1.517.345zM12 8.531c-.544.31-1.254.469-2 .469c-.747 0-1.456-.16-2-.47V11c0 .123.107.365.496.607c.367.228.9.393 1.504.393s1.137-.165 1.504-.393c.389-.242.496-.484.496-.607V8.53zM7 7c0-.687.434-1.202.981-1.52C8.528 5.163 9.245 5 10 5c.755 0 1.472.163 2.019.48c.547.318.981.833.981 1.52v4c0 .627-.452 1.135-.968 1.456c-.538.334-1.256.544-2.032.544s-1.494-.21-2.032-.544C7.452 12.136 7 11.627 7 11V7z",fill:"currentColor"})],-1)]))}}),Ma={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Et=H({name:"Play24Regular",render:function(l,p){return m(),E("svg",Ma,p[0]||(p[0]=[r("g",{fill:"none"},[r("path",{d:"M7.608 4.615a.75.75 0 0 0-1.108.659v13.452a.75.75 0 0 0 1.108.659l12.362-6.726a.75.75 0 0 0 0-1.318L7.608 4.615zM5 5.274c0-1.707 1.826-2.792 3.325-1.977l12.362 6.726c1.566.853 1.566 3.101 0 3.953L8.325 20.702C6.826 21.518 5 20.432 5 18.726V5.274z",fill:"currentColor"})],-1)]))}});function Se(v){var n,f,t,d,S,y,I,O,x,V,ie,re,ce,P,z,A,Q,k,Y,j,J,W,G,N,F;const l=xe();l.expInfo=v.data,l.program={waveform_script:(f=(n=v.data)==null?void 0:n.exp)==null?void 0:f.waveform_script,space_parameter_script:(d=(t=v.data)==null?void 0:t.exp)==null?void 0:d.space_parameter_script},l.running={formValue:{title:(y=(S=v.data)==null?void 0:S.exp)==null?void 0:y.title,desc:(O=(I=v.data)==null?void 0:I.exp)==null?void 0:O.desc,...(V=(x=v.data)==null?void 0:x.exp)==null?void 0:V.options},paramsList:[]};const p=JSON.parse(JSON.stringify(l.allQubits));let w=[];qe((ce=(re=(ie=v.data)==null?void 0:ie.exp)==null?void 0:re.wave_circuit)==null?void 0:ce.gates,T=>{w=w.concat(T.entity)}),w.length>0&&p.forEach(T=>{w.includes(T.value)?T.visible=!0:T.visible=!1}),l.allQubits=p,he((A=(z=(P=v.data)==null?void 0:P.exp)==null?void 0:z.wave_circuit)==null?void 0:A.gates)||(l.gates=(Y=(k=(Q=v.data)==null?void 0:Q.exp)==null?void 0:k.wave_circuit)==null?void 0:Y.gates),he((W=(J=(j=v.data)==null?void 0:j.exp)==null?void 0:J.wave_circuit)==null?void 0:W.layers)||(l.layers=Object.values((F=(N=(G=v.data)==null?void 0:G.exp)==null?void 0:N.wave_circuit)==null?void 0:F.layers))}const Va={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ea=H({name:"BellOutlined",render:function(l,p){return m(),E("svg",Va,p[0]||(p[0]=[r("path",{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z",fill:"currentColor"},null,-1)]))}}),Ra={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},$a=H({name:"QuadrantPlot",render:function(l,p){return m(),E("svg",Ra,p[0]||(p[0]=[Tt('<path d="M30 15H17V2h-2v13H2v2h13v13h2V17h13v-2z" fill="currentColor"></path><path d="M5 30a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3zm0-4a1 1 0 1 0 1 1a1.001 1.001 0 0 0-1-1z" fill="currentColor"></path><path d="M8 8a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3zm0-4a1 1 0 1 0 1 1a1.001 1.001 0 0 0-1-1z" fill="currentColor"></path><path d="M22 13a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3zm0-4a1 1 0 1 0 1 1a1.001 1.001 0 0 0-1-1z" fill="currentColor"></path><circle cx="11" cy="11" r="2" fill="currentColor"></circle><circle cx="11" cy="21" r="2" fill="currentColor"></circle><circle cx="21" cy="21" r="2" fill="currentColor"></circle><circle cx="22" cy="28" r="2" fill="currentColor"></circle><circle cx="28" cy="24" r="2" fill="currentColor"></circle><circle cx="4" cy="11" r="2" fill="currentColor"></circle><circle cx="28" cy="4" r="2" fill="currentColor"></circle>',11)]))}}),La={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Da=H({name:"ScriptReference",render:function(l,p){return m(),E("svg",La,p[0]||(p[0]=[r("path",{d:"M4 20v2h4.586L2 28.586L3.414 30L10 23.414V28h2v-8H4z",fill:"currentColor"},null,-1),r("path",{d:"M27.17 26l-2.58 2.58L26 30l4-4l-4-4l-1.42 1.41L27.17 26z",fill:"currentColor"},null,-1),r("path",{d:"M18.83 26l2.58-2.58L20 22l-4 4l4 4l1.42-1.41L18.83 26z",fill:"currentColor"},null,-1),r("path",{d:"M25.7 9.3l-7-7A.909.909 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v12h2V4h8v6a2.006 2.006 0 0 0 2 2h6v6h2v-8a.91.91 0 0 0-.3-.7zM18 10V4.4l5.6 5.6z",fill:"currentColor"},null,-1)]))}}),Oa=H({__name:"MsgView",setup(v,{expose:l}){const p=xe(),w=D(!1),n=[{title:"Message Id",key:"message_id",width:100},{title:"Sub Process Id",key:"sub_process_id",width:130},{title:"Message Level",key:"message_level",width:130},{title:"Message",key:"message"},{title:"Timestamp",key:"timestamp",width:180,render:d=>d.timestamp?new Date(d.timestamp).toLocaleString():""}],f=d=>{d||t()},t=()=>{w.value=!1};return l({open:()=>w.value=!0,close:t}),(d,S)=>{const y=Nt,I=we,O=ye;return m(),B(O,{show:e(w),"onUpdate:show":S[0]||(S[0]=x=>se(w)?w.value=x:null),"on-update:show":f},{default:i(()=>[s(I,{style:{width:"80vw"},size:"huge",bordered:!1,role:"dialog","aria-modal":"true",class:"!pt-0"},{default:i(()=>{var x,V;return[s(y,{columns:n,data:(V=(x=e(p))==null?void 0:x.expInfo)==null?void 0:V.exp_msg,pagination:!1,"scroll-x":1e3,"max-height":"500px"},null,8,["data"])]}),_:1})]),_:1},8,["show"])}}}),Pa=H({__name:"TemplateData",props:{templateData:{}},setup(v,{expose:l}){const p=D(),w=bt(),n=D(!1);return l({open:()=>{n.value=!0}}),(t,d)=>{const S=ze,y=kt,I=we,O=ye;return m(),B(O,{show:e(n),"onUpdate:show":d[0]||(d[0]=x=>se(n)?n.value=x:null)},{default:i(()=>[s(I,{style:{width:"700px"},"aria-hidden":""},{default:i(()=>[d[1]||(d[1]=r("div",{class:"text-xl text-center"},"Template Data",-1)),s(S,{class:"!my-2"}),s(y,{style:{"max-height":"600px","min-height":"200px"}},{default:i(()=>[s(e(ga),{class:jt(["w-full",[e(w).baseColor==="#000"?"jse-theme-dark":""]]),"model-value":t.templateData,mode:"text",ref_key:"jsonEditorRef",ref:p},null,8,["class","model-value"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ta={key:1,class:"pr-3"},Na={class:"mt-7 w-full flex"},ja=H({__name:"ExpSubmit",setup(v){const l=xe(),p=Me(),w=Ve(),n=Ct(),{expInfo:f,layers:t,gates:d,program:S,expOptions:y,running:I}=Ut(l),O=D(),{t:x}=Ee(),V=D(!1),ie=Bt(()=>{const P={title:{required:!0,message:x("common.required")},desc:{required:!0,message:x("common.required")},options:{required:!0,message:x("common.required")}};return Object.keys(y.value||[]).forEach(z=>{P[z]={required:!0,message:x("common.required")}}),P}),re=async()=>{var J,W,G,N,F,T,U,oe,K,R,ve,ue,Z;if(V.value)return;V.value=!0;const P={};t.value.forEach((Ie,ne)=>{P[String(ne)]=Ie});const{title:z,desc:A,...Q}=(J=I.value)==null?void 0:J.formValue,k={template_name:(G=(W=f==null?void 0:f.value)==null?void 0:W.exp)==null?void 0:G.template.split("/")[1],device_group_name:p.query.device_group_name,space_id:p.query.space_id,task_id:(N=f.value)==null?void 0:N.task_id,experiment_json:{...f.value||{},title:z,desc:A,template:(T=(F=f==null?void 0:f.value)==null?void 0:F.exp)==null?void 0:T.template,template_data:(oe=(U=f==null?void 0:f.value)==null?void 0:U.exp)==null?void 0:oe.template_data,wave_circuit:{gates:d.value||{},layers:P},waveform_script:((K=S.value)==null?void 0:K.waveform_script)||[],space_parameter_script:((R=S.value)==null?void 0:R.space_parameter_script)||[],options:Q}};(ve=k==null?void 0:k.experiment_json)!=null&&ve.exp&&((ue=k==null?void 0:k.experiment_json)==null||delete ue.exp),(Z=k==null?void 0:k.experiment_json)==null||delete Z.nr;const[Y,j]=await Xt(k);V.value=!1,!Y&&(j==null?void 0:j.status)===0&&(n.success("Experiment Running"),l.showPlotParamsModal=!1,w.replace({name:"finalSetting",query:{...p.query,exp_id:j.data.exp_id}}).then(()=>{window.location.reload()}))},ce=P=>{P||(l.showPlotParamsModal=!1)};return(P,z)=>{const A=qt,Q=ya,k=kt,Y=ze,j=St,J=wa,W=we,G=ye;return m(),B(G,{show:e(l).showPlotParamsModal,"onUpdate:show":z[2]||(z[2]=N=>e(l).showPlotParamsModal=N),onChange:ce},{default:i(()=>[s(W,{style:{width:"800px",position:"fixed",right:"50px",top:"50px"}},{default:i(()=>{var N,F;return[s(J,{model:e(I).formValue,rules:e(ie),ref_key:"formRef",ref:O,class:"min-w-[340px]",disabled:!!((F=(N=e(l))==null?void 0:N.expInfo)!=null&&F.exp_id)},{default:i(()=>{var T,U,oe,K;return[s(k,{style:{"max-height":"calc(100vh - 370px)","padding-right":"12px"}},{default:i(()=>[r("div",null,[s(Q,{label:"Exp Title",path:"title"},{default:i(()=>[s(A,{value:e(I).formValue.title,"onUpdate:value":z[0]||(z[0]=R=>e(I).formValue.title=R)},null,8,["value"])]),_:1}),s(Q,{label:"Exp Desc",path:"desc"},{default:i(()=>[s(A,{type:"textarea",value:e(I).formValue.desc,"onUpdate:value":z[1]||(z[1]=R=>e(I).formValue.desc=R)},null,8,["value"])]),_:1})]),e(y)?(m(),B(ha,{key:0,paramsCfg:e(y),"form-value":e(I).formValue},null,8,["paramsCfg","form-value"])):L("",!0)]),_:1}),(U=(T=e(l))==null?void 0:T.expInfo)!=null&&U.exp_id?L("",!0):(m(),B(Y,{key:0,class:"!mb-0"})),(K=(oe=e(l))==null?void 0:oe.expInfo)!=null&&K.exp_id?L("",!0):(m(),E("div",Ta,[r("div",Na,[s(j,{type:"primary",size:"small",loading:e(V),onClick:re,class:"w-full flex-1"},{icon:i(()=>[s(e(Et))]),default:i(()=>[$(" "+u(e(x)("expInfo.submit")),1)]),_:1},8,["loading"])])]))]}),_:1},8,["model","rules","disabled"])]}),_:1})]),_:1},8,["show"])}}}),Ua={class:"min-h-[98px] flex justify-between"},Ba={key:0,class:"flex flex-col pr-4 mr-5",style:{"border-right":"1px solid rgba(56, 137, 197, 0.35)"}},Fa={class:"text-xl font-bold"},Ha={class:"text-sm font-light mt-2 opacity-60"},Aa={class:"flex-1 flex"},Qa={class:"flex flex-col gap-1.5 min-w-[260px] pr-5 mr-5",style:{"border-right":"1px solid rgba(56, 137, 197, 0.35)"}},Ja={class:"flex"},Wa={class:"inline-block pr-1"},Ga={class:"font-bold"},Ka={class:"inline-flex items-center"},Ya={class:"flex-1 flex gap-1.5 min-w-[260px]"},Za={class:"flex flex-col gap-1.5 flex-1"},Xa={class:"flex"},es={key:0,class:"pr-1"},ts={class:"font-bold"},as={class:"flex items-center"},ss={key:0,class:"italic opacity-70 pr-1 text-xs"},os={key:1,class:"italic pr-1 text-xs"},ns={class:"flex"},ls={key:1,class:"flex flex-col gap-2 min-w-52"},is={class:"flex gap-4 justify-between"},rs={key:1},cs={class:"flex gap-2"},ps={class:"flex items-center gap-2"},us={class:"text-lg mb-4 flex justify-between"},ds={class:"text-lg mb-4 flex justify-between"},_s={class:"relative"},fs=H({__name:"ExpInfoView",setup(v){const{t:l}=Ee(),p=bt(),w=Ct(),n=Me(),f=Ve(),t=xe(),d=_a(),S=D(),y=D(),I=()=>{var o,a,c;(a=(o=t.expInfo)==null?void 0:o.exp)!=null&&a.template&&((c=y.value)==null||c.open())},O=D(),x=async()=>{const o=n.query.device_group_name;if(!o)return;const[a,c]=await Yt({device_group_name:o});if(!a&&(c==null?void 0:c.status)===0){const{space_list:g,...b}=c.data;d.groupInfo=b,d.spaceList=g.map(h=>({...h,label:h.space_name,value:h.space_id}))}},V=async()=>{var c;if(n.query.exp_id===void 0||n.query.exp_id==="")return;const[o,a]=await ca({exp_id:n.query.exp_id,device_group_name:n.query.device_group_name,space_id:n.query.space_id});!o&&(a==null?void 0:a.status)===0&&((c=a.data)!=null&&c.data&&(a.data.data=JSON.parse(a.data.data)),t.result=a.data)},ie=async()=>{t.loading=!0;const{device_group_name:o,exp_id:a}=n.query;if(!o||!a){t.loading=!1;return}const[c,g]=await ia({device_group_name:o,exp_id:a});t.loading=!1,!c&&(g==null?void 0:g.status)===0&&(Se(g),pe(()=>{n.query.dup&&(J(),pe(()=>{setTimeout(()=>{f.replace({name:"waveforms",query:Ce(n.query,"dup")})},300)}))}),V())},re=async()=>{var c;if((c=t==null?void 0:t.expInfo)!=null&&c.status&&[fe.COMPLETE,fe.CANCELED,fe.ERROR].includes(t.expInfo.status)){z();return}if(!n.query.exp_id)return;const[o,a]=await ra({device_group_name:n.query.device_group_name,exp_id:n.query.exp_id});!o&&(a==null?void 0:a.status)===0&&(t.expInfo={...t.expInfo,...a.data||{}})},ce=async()=>{var c,g;const[o,a]=await ea();if(!o&&(a==null?void 0:a.status)===0){const b={};Object.keys(a.data).forEach(X=>{b[X]=a.data[X].default?a.data[X].default:void 0});const h=(g=(c=t.expInfo)==null?void 0:c.exp)==null?void 0:g.options;t.expOptions=a.data,t.running={...t.running,formValue:{...t.running.formValue,...he(h)?b:{}}}}},{start:P,stop:z}=ua(re,{isManual:!0,duration:3*1e3}),A=async()=>{const[o,a]=await ta();!o&&(a==null?void 0:a.status)===0&&(t.waveCompiler=a.data)},Q=async()=>{const[o,a]=await aa();!o&&(a==null?void 0:a.status)===0&&(t.waveFunctions=a.data)},k=async()=>{const[o,a]=await sa({device_group_name:n.query.device_group_name,space_id:n.query.space_id});if(!o&&(a==null?void 0:a.status)===0){let c=[];if(qe(a.data,(g,b)=>{c=c.concat(g.map((h,X)=>({id:da(),value:h,visible:X<10,type:b})))}),t.allQubits=c,!n.query.exp_id){const g=JSON.parse(JSON.stringify(t.allQubits));let b=[];qe(t==null?void 0:t.gates,h=>{b=b.concat(h.entity)}),b.length>0&&g.forEach(h=>{b.includes(h.value)?h.visible=!0:h.visible=!1}),t.allQubits=g;return}pe(()=>{ie(),P()})}},Y=()=>{var o;(o=O.value)==null||o.open()},j=()=>{const o=new URLSearchParams({device_group_name:n.query.device_group_name,task_id:n.query.task_id,task_title:n.query.task_title,space_id:n.query.space_id,exp_id:n.query.exp_id,dup:String(1)});window.open(`/experiment/waveforms?${o.toString()}`,"_blank")},J=()=>{const o=JSON.parse(JSON.stringify(t.expInfo));delete o.exp_id,delete o.progress,delete o.status,delete o.exp_msg,t.expInfo=o,t.result=void 0,pe(()=>{w.success("Duplicated successfully"),f.replace({name:"waveforms",query:Ce(n.query,["exp_id"])})})},W=async()=>{const[o,a]=await oa({exp_id:n.query.exp_id});!o&&(a==null?void 0:a.status)===0&&w.success("实验终止成功")},G=()=>{var o;(o=S.value)==null||o.open()};zt(()=>{if(ce(),k(),x(),setTimeout(()=>{A(),Q()},100),n.query.create=="1"){const o=Mt("t");o&&(Se(o),pe(()=>{setTimeout(()=>{f.replace({name:"waveforms",query:Ce(n.query,"combine")}).then(()=>{localStorage.removeItem("t")})},200)}))}});const N=()=>{t.showPlotParamsModal=!0};Ft(z);const F=async()=>{var c,g;const[o,a]=await na({group_name:n.query.device_group_name,exp_id:String((c=t==null?void 0:t.expInfo)==null?void 0:c.exp_id)});!o&&(a==null?void 0:a.status)===0&&It.saveAs(`${ge(location.origin)}/${ge((g=a==null?void 0:a.data)==null?void 0:g.filename)}`,ht(a.data.filename))},T=async()=>{var c;const[o,a]=await la({group_name:n.query.device_group_name,space_id:n.query.space_id});!o&&(a==null?void 0:a.status)===0&&It.saveAs(`${ge(location.origin)}/${ge((c=a==null?void 0:a.data)==null?void 0:c.filename)}`,ht(a.data.filename))},U=D(!1),oe=o=>{o||(U.value=!1)},K=D(),R=D(),ve=()=>{var o;(o=K.value)==null||o.refresh()},ue=()=>{U.value=!0},Z=D(!1),Ie=o=>{o||(Z.value=!1,R.value="")},ne=D(!1),Rt=o=>{o||(ne.value=!1)},$t=()=>{var o;(o=t.expInfo)!=null&&o.exp_id?ne.value=!0:Z.value=!0};return(o,a)=>{const c=me,g=Vt("router-link"),b=At,h=St,X=Qt,Lt=Jt,Dt=ka,Ot=ba,Re=ze,be=we,ke=ye,Pt=qt;return m(),E(xt,null,[s(Ot,{type:"info","show-icon":!1},{default:i(()=>{var M,ee,te,ae,le,de,$e,Le,De,Oe,Pe,Te,Ne,je,Ue,Be,Fe,He,Ae,Qe,Je,We,Ge,Ke,Ye,Ze,Xe,et,tt,at,st,ot,nt,lt,it,rt,ct,pt,ut,dt,_t,ft;return[r("div",Ua,[(M=e(d))!=null&&M.groupInfo?(m(),E("div",Ba,[s(g,{class:"underline underline-offset-4 inline-flex items-center gap-0.5",to:{name:"taskList",query:{device_group_name:e(n).query.device_group_name}}},{default:i(()=>{var C,q;return[s(c,{component:e(Ht)},null,8,["component"]),r("span",Fa,u((q=(C=e(d))==null?void 0:C.groupInfo)==null?void 0:q.device_group_name),1)]}),_:1},8,["to"]),r("span",Ha,u((te=(ee=e(d))==null?void 0:ee.groupInfo)==null?void 0:te.description),1)])):L("",!0),r("div",Aa,[(ae=e(t))!=null&&ae.expInfo?(m(),E(xt,{key:0},[r("div",Qa,[r("div",Ja,[r("span",Wa,[s(b,{type:"success",size:"small",color:{color:"#ff5722",textColor:"#fff"}},{default:i(()=>{var C,q;return[$(u(e(l)("expInfo.task"))+" "+u((q=(C=e(t))==null?void 0:C.expInfo)==null?void 0:q.task_id),1)]}),_:1})]),s(g,{to:{name:"experimentList",query:{device_group_name:e(n).query.device_group_name,task_id:(de=(le=e(t))==null?void 0:le.expInfo)==null?void 0:de.task_id,task_title:(Le=($e=e(t))==null?void 0:$e.expInfo)==null?void 0:Le.task_title,space_id:e(n).query.space_id}},class:"underline underline-offset-4"},{default:i(()=>{var C,q;return[r("span",Ga,u((q=(C=e(t))==null?void 0:C.expInfo)==null?void 0:q.task_title),1)]}),_:1},8,["to"]),s(h,{type:"primary",size:"small",class:"!ml-2 !h-[22px]",onClick:G},{icon:i(()=>[s(e(Ia))]),default:i(()=>[$(" "+u(e(l)("expInfo.create")),1)]),_:1})]),r("div",null,[r("span",Ka,[$(u(e(l)("expInfo.space"))+"： ",1),s(b,{size:"small",class:"!cursor-pointer",type:"warning",onClick:$t},{default:i(()=>{var C,q,_e,mt;return[$(u((q=(C=e(t))==null?void 0:C.expInfo)==null?void 0:q.space_name)+" ( "+u((mt=(_e=e(t))==null?void 0:_e.expInfo)==null?void 0:mt.space_time_str)+" ) ",1)]}),_:1}),s(X,{trigger:"hover"},{trigger:i(()=>[s(h,{type:"info",class:"!ml-1",size:"tiny",onClick:T},{icon:i(()=>[s(e(wt))]),_:1})]),default:i(()=>[$(" "+u(e(l)("expInfo.downloadSpaceParams")),1)]),_:1})])]),r("div",null,u((Oe=(De=e(t))==null?void 0:De.expInfo)==null?void 0:Oe.task_desc),1)]),r("div",Ya,[(Pe=e(t).result)!=null&&Pe.small_picture_url?(m(),B(Lt,{key:0,src:e(vt)((Te=e(t).result)==null?void 0:Te.small_picture_url,"t",String(+new Date)),"preview-src":((Ne=e(t).result)==null?void 0:Ne.big_picture_url)||e(vt)((je=e(t).result)==null?void 0:je.small_picture_url,"t",String(+new Date)),alt:"",class:"mr-2 h-fit p-[1px] w-[100px]",style:Wt({border:`1px solid ${e(p).dividerColor}`})},null,8,["src","preview-src","style"])):L("",!0),r("div",Za,[r("div",Xa,[(Be=(Ue=e(t))==null?void 0:Ue.expInfo)!=null&&Be.exp_id?(m(),E("span",es,[s(b,{color:{color:"#7816ff",textColor:"#fff"},size:"small"},{default:i(()=>{var C,q;return[$(u(e(l)("expInfo.exp"))+" "+u((q=(C=e(t))==null?void 0:C.expInfo)==null?void 0:q.exp_id),1)]}),_:1})])):L("",!0),r("span",ts,u((He=(Fe=e(t))==null?void 0:Fe.expInfo)==null?void 0:He.exp_title),1)]),r("div",as,[(Ae=e(t).expInfo)!=null&&Ae.exp_id?(m(),E("span",ss,u((Je=(Qe=e(t))==null?void 0:Qe.expInfo)==null?void 0:Je.create_time),1)):(m(),E("span",os,[s(b,{size:"small",bordered:!1,color:{color:"#f00",textColor:"#fff"}},{default:i(()=>[$(u(e(l)("expInfo.unsumbit")),1)]),_:1})])),r("span",null,[s(b,{type:"warning",size:"small",onClick:I,class:"!cursor-pointer"},{default:i(()=>{var C,q,_e;return[$(u(((_e=(q=(C=e(t))==null?void 0:C.expInfo)==null?void 0:q.exp)==null?void 0:_e.template)||e(l)("expInfo.notpl")),1)]}),_:1})]),(We=e(t).expInfo)!=null&&We.exp_id?(m(),B(X,{key:2,trigger:"hover"},{trigger:i(()=>[s(h,{type:"info",class:"!ml-1",size:"tiny",onClick:F},{icon:i(()=>[s(e(wt))]),_:1})]),default:i(()=>[$(" "+u(e(l)("expInfo.downloadExp")),1)]),_:1})):L("",!0)]),r("div",ns,u((Ke=(Ge=e(t))==null?void 0:Ge.expInfo)==null?void 0:Ke.exp_desc),1)])])],64)):L("",!0)]),(Ye=e(t))!=null&&Ye.expInfo?(m(),E("div",ls,[r("div",is,[(Xe=(Ze=e(t))==null?void 0:Ze.expInfo)!=null&&Xe.status?(m(),B(b,{key:0,color:{color:e(gt)[e(t).expInfo.status].color,textColor:"#fff"},size:"small"},{default:i(()=>[$(u(e(l)(e(gt)[e(t).expInfo.status].text)),1)]),_:1},8,["color"])):L("",!0),(tt=(et=e(t))==null?void 0:et.expInfo)!=null&&tt.progress?(m(),E("span",rs,u((st=(at=e(t))==null?void 0:at.expInfo)==null?void 0:st.progress),1)):L("",!0),s(Dt,{value:(nt=(ot=e(t).expInfo)==null?void 0:ot.exp_msg)==null?void 0:nt.length,max:15,class:"cursor-pointer",onClick:Y},{default:i(()=>[s(c,{size:22},{default:i(()=>[s(e(Ea))]),_:1})]),_:1},8,["value"])]),r("div",cs,[s(h,{type:"info",size:"small",class:"flex-1",onClick:j,disabled:((rt=(it=(lt=e(t))==null?void 0:lt.expInfo)==null?void 0:it.exp)==null?void 0:rt.exp_mode)==="batch_circuit"||!e(n).query.exp_id},{icon:i(()=>[s(e(ma))]),default:i(()=>[$(u(e(l)("expInfo.duplicate"))+" ",1)]),_:1},8,["disabled"]),s(h,{type:"info",size:"small",class:"flex-1",disabled:![e(fe).RUNNING,e(fe).HOST_DOWNLOADED].includes((ct=e(t).expInfo)==null?void 0:ct.status),onClick:W},{icon:i(()=>[s(e(xa))]),default:i(()=>[$(u(e(l)("expInfo.stop"))+" ",1)]),_:1},8,["disabled"])]),r("div",ps,[s(h,{class:"flex-1",type:"primary",size:"small",onClick:N,disabled:!!((ut=(pt=e(t))==null?void 0:pt.expInfo)!=null&&ut.exp_id)},{icon:i(()=>[s(e(Et))]),default:i(()=>[$(u(e(l)("expInfo.run"))+" ",1)]),_:1},8,["disabled"])])])):L("",!0),s(Oa,{ref_key:"msgViewRef",ref:O},null,512)]),s(va,{ref_key:"expsTplRef",ref:S},null,512),s(Pa,{ref_key:"tempalteDataRef",ref:y,"template-data":(ft=(_t=(dt=e(t))==null?void 0:dt.expInfo)==null?void 0:_t.exp)==null?void 0:ft.template_data},null,8,["template-data"]),s(ja)]}),_:1}),s(ke,{show:e(ne),"onUpdate:show":[a[0]||(a[0]=M=>se(ne)?ne.value=M:null),Rt],size:"huge"},{default:i(()=>[s(be,{style:{"min-height":"82vh",overflow:"auto",width:"1200px","min-width":"500px"}},{default:i(()=>{var M,ee,te,ae,le,de;return[r("div",us,[r("div",null,u(e(l)("expInfo.space"))+"： "+u((ee=(M=e(t))==null?void 0:M.expInfo)==null?void 0:ee.space_name)+" ( "+u((ae=(te=e(t))==null?void 0:te.expInfo)==null?void 0:ae.space_time_str)+" ) ",1)]),s(Re,{class:"!my-4"}),e(n).query.space_id?(m(),B(yt,{key:0,ref_key:"paramsLatestRef",ref:K,"max-height":"65vh","read-only":"",version:(de=(le=e(t))==null?void 0:le.expInfo)==null?void 0:de.space_timestamp,"space-id":+e(n).query.space_id},null,8,["version","space-id"])):L("",!0)]}),_:1})]),_:1},8,["show"]),s(ke,{show:e(Z),"onUpdate:show":[a[2]||(a[2]=M=>se(Z)?Z.value=M:null),Ie],size:"huge"},{default:i(()=>[s(be,{style:{"min-height":"82vh",overflow:"auto",width:"1200px","min-width":"500px"}},{default:i(()=>{var M,ee,te,ae;return[r("div",ds,[r("div",null,u(e(l)("expInfo.space"))+"： "+u((ee=(M=e(t))==null?void 0:M.expInfo)==null?void 0:ee.space_name)+" ( "+u((ae=(te=e(t))==null?void 0:te.expInfo)==null?void 0:ae.space_time_str)+" ) ",1),r("div",_s,[s(Pt,{style:{width:"310px","padding-right":"20px"},value:e(R),"onUpdate:value":a[1]||(a[1]=le=>se(R)?R.value=le:null),valueModifiers:{trim:!0},onKeyup:Gt(ue,["enter"]),placeholder:e(l)("groupDetail.parameterManager.searchPlaceholder")},null,8,["value","placeholder"]),r("div",{class:"absolute -right-4 top-1/2 -translate-1/2 h-full w-8 flex items-center justify-center cursor-pointer",onClick:ue},[s(c,{color:e(p).primaryColor,component:e(Kt)},null,8,["color","component"])])])]),s(Re,{class:"!my-4"}),e(n).query.space_id?(m(),B(yt,{key:0,ref_key:"paramsLatestRef",ref:K,"max-height":"65vh","space-id":+e(n).query.space_id},null,8,["space-id"])):L("",!0)]}),_:1})]),_:1},8,["show"]),s(ke,{show:e(U),"onUpdate:show":a[4]||(a[4]=M=>se(U)?U.value=M:null),size:"huge",onUpdateShow:oe},{default:i(()=>[s(be,{style:{"min-height":"82vh",overflow:"auto",width:"1300px","max-width":"95vw","min-width":"500px"}},{default:i(()=>[e(n).query.space_id?(m(),B(pa,{key:0,search:"","space-id":+e(n).query.space_id,"hide-history-option":"",modelValue:e(R),"onUpdate:modelValue":a[3]||(a[3]=M=>se(R)?R.value=M:null),onRefresh:ve},null,8,["space-id","modelValue"])):L("",!0)]),_:1})]),_:1},8,["show"])],64)}}}),ms={class:"flex mt-5"},xs={class:"ml-5 flex-1"},Us=H({__name:"ExperimentView",setup(v){const{t:l}=Ee(),p=Me(),w=Ve(),n=xe(),f=D(),t=d=>{w.push({name:d,query:p.query})};return Zt(p,d=>{f.value=d.name},{deep:!0,immediate:!0}),zt(()=>{const d=Mt("t");he(d)||(n.reset(),pe(()=>{Se(d),localStorage.removeItem("t")}))}),(d,S)=>{const y=Ca,I=qa,O=Vt("router-view");return m(),E("div",null,[s(fs),r("div",ms,[s(I,{type:"card",animated:"",placement:"left",class:"!h-full !w-auto",value:e(f),"onUpdate:value":S[0]||(S[0]=x=>se(f)?f.value=x:null),onUpdateValue:t},{default:i(()=>{var x,V;return[s(y,{name:"waveforms",tab:_("div",{class:"flex items-center gap-2"},[_("div",_(e(me),{size:20},{default:()=>_(e(fa))})),_("div",[_("div",e(l)("expInfo.step1")),_("div",{class:"font-bold"},e(l)("expInfo.waveforms"))])])},null,8,["tab"]),s(y,{name:"program",tab:_("div",{class:"flex items-center gap-2"},[_("div",_(e(me),{size:20},{default:()=>_(e(Da))})),_("div",[_("div",e(l)("expInfo.step2")),_("div",{class:"font-bold"},e(l)("expInfo.program"))])])},null,8,["tab"]),s(y,{name:"finalSetting",disabled:!((x=e(n).expInfo)!=null&&x.exp_id),tab:_("div",{class:"flex items-center gap-2"},[_("div",_(e(me),{size:20},{default:()=>_(e($a))})),_("div",[_("div",e(l)("expInfo.step3")),_("div",{class:"font-bold"},e(l)("expInfo.plotter"))])])},null,8,["disabled","tab"]),s(y,{name:"result",disabled:!((V=e(n).expInfo)!=null&&V.exp_id),tab:_("div",{class:"flex items-center gap-2"},[_("div",_(e(me),{size:20},{default:()=>_(e(za))})),_("div",[_("div",e(l)("expInfo.step4")),_("div",{class:"font-bold"},e(l)("expInfo.fitting"))])])},null,8,["disabled","tab"])]}),_:1},8,["value"]),r("div",xs,[s(O)])])])}}});export{Us as default};
