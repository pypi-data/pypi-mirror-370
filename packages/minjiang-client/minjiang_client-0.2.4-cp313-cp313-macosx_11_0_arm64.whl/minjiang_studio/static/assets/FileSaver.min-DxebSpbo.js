import{d as ee,c as J,e as F,f as W,P as ne,u as X,G as ie,bi as se,bj as Se,h as w,w as S,a1 as qe,a2 as $e,x as Z,m as fe,p as D,t as me,B as N,j as a,E as Ve,a as le,v as ue,V as ze,r as T,bk as K,C as Ie,F as ce,H as _e,n as pe,N as Be,bl as ge,k as Te,b3 as Ke,aI as Ne,aJ as Ge,bm as ke,W as we,aL as Me,I as i,y as Q,a6 as Ee,J as Je,K as We,aH as ve,D as Xe,M as xe,O as Qe,aF as Ye,a4 as Le,$ as Ze,bn as De,o as et,aW as tt,a_ as nt,a$ as at,aM as ae}from"./index-DOdIYOkR.js";import{a as ot,_ as st}from"./Tabs-dCRhCvDT.js";import{c as re}from"./index-CJcxqf5R.js";import{C as te}from"./Copy16Filled-B0aEZLoO.js";import{H as je}from"./HandRight24Filled-h8AfnU-s.js";import{_ as be}from"./Popconfirm-D4ZFjBKK.js";import{i as rt}from"./json-editor-vue-BF_1KIfc.js";import{_ as it,a as lt}from"./FormItem-BXNzH03D.js";const ut={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ye=ee({name:"RefreshCircle",render:function(U,k){return F(),J("svg",ut,k[0]||(k[0]=[W("path",{d:"M256 48C141.31 48 48 141.32 48 256c0 114.86 93.14 208 208 208c114.69 0 208-93.31 208-208c0-114.87-93.13-208-208-208zm0 313a94 94 0 0 1 0-188h4.21l-14.11-14.1a14 14 0 0 1 19.8-19.8l40 40a14 14 0 0 1 0 19.8l-40 40a14 14 0 0 1-19.8-19.8l18-18c-2.38-.1-5.1-.1-8.1-.1a66 66 0 1 0 66 66a14 14 0 0 1 28 0a94.11 94.11 0 0 1-94 94z",fill:"currentColor"},null,-1)]))}});function ct(v){return ne(X.getParamsByTree,v)}function Pe(v){return ne(X.submitParams,v)}function Fe(v){return ne(X.removeParams,v)}function pt(v){return ie(X.getHistoryParams,v)}function dt(v){return ie(X.searchSpaceParameters,v)}function Ht(){return ie(X.getSpaceInitializerList)}function At(v){return ie(X.getSpaceInitializerSetup,v)}function Ut(v){return ne(X.spaceInitializerPreview,v)}function qt(v){return ne(X.submitInitializerPreview,v)}function $t(v){return ne(X.insertSpace,v)}const ft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},he=ee({name:"AddCircle16Filled",render:function(U,k){return F(),J("svg",ft,k[0]||(k[0]=[W("g",{fill:"none"},[W("path",{d:"M2 8a6 6 0 1 1 12 0A6 6 0 0 1 2 8zm6-3a.5.5 0 0 0-.5.5v2h-2a.5.5 0 0 0 0 1h2v2a.5.5 0 0 0 1 0v-2h2a.5.5 0 0 0 0-1h-2v-2A.5.5 0 0 0 8 5z",fill:"currentColor"})],-1)]))}}),mt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Vt=ee({name:"ArrowDownload24Filled",render:function(U,k){return F(),J("svg",mt,k[0]||(k[0]=[W("g",{fill:"none"},[W("path",{d:"M5.25 20.5h13.498a.75.75 0 0 1 .101 1.494l-.101.006H5.25a.75.75 0 0 1-.102-1.493l.102-.007h13.498H5.25zm6.633-18.497L12 1.996a1 1 0 0 1 .993.883l.007.117v12.59l3.294-3.293a1 1 0 0 1 1.32-.083l.094.083a1 1 0 0 1 .083 1.32l-.083.095l-4.997 4.996a1 1 0 0 1-1.32.084l-.094-.083l-5.004-4.997a1 1 0 0 1 1.32-1.498l.094.083L11 15.58V2.996a1 1 0 0 1 .883-.993L12 1.996l-.117.007z",fill:"currentColor"})],-1)]))}}),vt={class:"flex justify-between items-center gap-2"},yt={key:0},ht={key:0,class:"flex justify-center w-full"},_t=ee({__name:"CategoryTabs",props:se({readOnly:{type:Boolean},tabs:{}},{modelValue:{},modelModifiers:{}}),emits:se(["insert","refresh"],["update:modelValue"]),setup(v,{emit:U}){const k=U,x=Se(v,"modelValue"),M=(p="")=>{k("insert",{full_key:p})},I=()=>{k("refresh")};return(p,O)=>{const b=N,s=st,r=ot;return F(),J("div",null,[w(r,{type:"card",placement:"left",value:x.value,"onUpdate:value":O[1]||(O[1]=o=>x.value=o),class:"tabs",style:{"max-height":"calc(100vh - 340px)"}},{suffix:S(()=>[p.readOnly?D("",!0):(F(),J("div",ht,[w(b,{type:"info",quaternary:"",onClick:O[0]||(O[0]=()=>M()),size:"small"},{icon:S(()=>[w(a(he))]),_:1}),w(b,{type:"info",quaternary:"",onClick:I,size:"small"},{icon:S(()=>[w(a(ye))]),_:1})]))]),default:S(()=>[(F(!0),J(qe,null,$e(p.tabs,(o,c)=>(F(),Z(s,{name:o.node_name,class:"!flex-1 w-full",key:c},{default:S(()=>[W("div",vt,[fe(me(o.node_name)+" ",1),p.readOnly?D("",!0):(F(),J("div",yt,[w(b,{type:"info",quaternary:"",onClick:()=>M(o.full_key),size:"small"},{icon:S(()=>[w(a(he))]),_:2},1032,["onClick"]),w(b,{type:"info",quaternary:"",onClick:I,size:"small"},{icon:S(()=>[w(a(ye))]),_:1})]))])]),_:2},1032,["name"]))),128))]),_:1},8,["value"])])}}}),gt=Ve(_t,[["__scopeId","data-v-6fd4e427"]]),kt={class:"flex gap-5"},wt={class:"float-right"},He=ee({__name:"ParamsAction",props:{info:{},spaceId:{},actionTye:{},hideParentTree:{type:Boolean}},emits:["update:success","ok"],setup(v,{expose:U,emit:k}){const{t:x}=le(),M=ue(),I=ze(),p=T(!1),O=T(!1),b=v,s=k,r=T(null),o=T({types:K.str,keys:void 0,values:void 0}),c=T({keys:{required:!0},values:{required:!0},types:{required:!0}}),C=[K.float,K.str,K.int,K.complex],H=[K.list,K.tuple,K.dict,K.ndarray],z=()=>{O.value=!1,o.value={types:K.str,keys:void 0,values:void 0}},q=h=>{h||(o.value={types:K.str,keys:void 0,values:void 0})},R=Ie(()=>{var h,_;if((h=o.value)!=null&&h.types)return(_=o.value)==null?void 0:_.types}),$=()=>{var h;p.value||(p.value=!0,(h=r.value)==null||h.validate(async _=>{var G;if(_){p.value=!1;return}if(b.actionTye==="custom"){s("ok",o.value),z(),p.value=!1;return}const{keys:u,values:f,types:g}=o.value,[j,V]=await Pe({keys:[`${L.value}/${u}`],values:[f||""],types:[g],device_group_name:M.query.device_group_name,space_id:b.spaceId});p.value=!1,!j&&(V==null?void 0:V.status)===0&&(z(),s("update:success",((G=L.value)==null?void 0:G.split("/"))||[]))}))},l=h=>{o.value=h},L=Ie(()=>{var h,_,u,f;return((h=b.info)==null?void 0:h.type)==="add"?(_=b.info)==null?void 0:_.full_key:(f=(u=b.info)==null?void 0:u.full_key)==null?void 0:f.replace(/(.*)\/.*$/,"$1")});return U({open:()=>O.value=!0,close:z,setFormValue:l}),(h,_)=>{const u=Be,f=lt,g=Te,j=Ne,V=N,G=it,t=pe,d=ce;return F(),Z(d,{show:a(O),"onUpdate:show":_[5]||(_[5]=m=>_e(O)?O.value=m:null),size:"huge",onUpdateShow:q},{default:S(()=>[w(t,{style:{"min-height":"400px",overflow:"auto",width:"800px","min-width":"500px"}},{default:S(()=>[w(G,{model:a(o),rules:a(c),ref_key:"formRef",ref:r},{default:S(()=>[W("div",kt,[w(f,{label:"Type",path:"types",class:"w-40"},{default:S(()=>[w(u,{options:a(ge),value:a(o).types,"onUpdate:value":_[0]||(_[0]=m=>a(o).types=m)},null,8,["options","value"])]),_:1}),w(f,{label:"Key",path:"keys",class:"flex-1"},{default:S(()=>{var m;return[w(g,{value:a(o).keys,"onUpdate:value":_[1]||(_[1]=P=>a(o).keys=P),disabled:((m=h.info)==null?void 0:m.type)==="edit"},Ke({_:2},[h.hideParentTree?void 0:{name:"prefix",fn:S(()=>[fe(me(a(L))+"/ ",1)]),key:"0"}]),1032,["value","disabled"])]}),_:1})]),w(f,{label:"Value",path:"values"},{default:S(()=>[a(R)&&C.includes(a(R))?(F(),Z(g,{key:0,value:a(o).values,"onUpdate:value":_[2]||(_[2]=m=>a(o).values=m)},null,8,["value"])):D("",!0),a(R)&&a(R)===a(K).bool?(F(),Z(j,{key:1,value:a(o).values,"onUpdate:value":_[3]||(_[3]=m=>a(o).values=m)},null,8,["value"])):D("",!0),a(R)&&H.includes(a(R))?(F(),Z(a(rt),{key:2,class:Ge(["w-full max-h-[65vh] overflow-auto",[a(I).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:a(o).values,"onUpdate:modelValue":_[4]||(_[4]=m=>a(o).values=m),mode:"text"},null,8,["class","modelValue"])):D("",!0)]),_:1}),W("div",wt,[w(V,{type:"primary",loading:a(p),onClick:$},{default:S(()=>[fe(me(a(x)("common.OK")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"])}}}),Ae=ee({__name:"ParamsHistory",props:{spaceId:{},hkey:{},maxHeight:{},hideHistoryOption:{type:Boolean},hideRevertOption:{type:Boolean}},emits:["update:success"],setup(v,{expose:U,emit:k}){const x=v,M=k,{t:I}=le(),{copy:p,isSupported:O}=ke({legacy:!0}),b=we(),s=ue(),r=T(),o=T({show:!1,info:{k_full:void 0}}),c=async l=>{p(l),b.success(I("common.copied"))},C=Me(async l=>{const[L,h]=await Pe({keys:[l.k_full],values:[l.v],types:[l.t],device_group_name:s.query.device_group_name,space_id:x.spaceId});if(!L&&(h==null?void 0:h.status)===0){b.success(I("groupDetail.parameterManager.revertSuccess"));const _=l.k_full.replace(/(.*)\/.*$/,"$1").split("/");M("update:success",re(_),!1)}},300),H=Me(l=>{o.value={show:!0,info:l}},300),z=[{title:I("groupDetail.parameterManager.keyPath"),key:"k_full",render:l=>i("div",{class:"inline-flex gap-2"},[i("div",l.k_full),O.value?i(Q,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>{c(l.k_full)}},{default:()=>i(te)}):void 0])},{title:I("groupDetail.parameterManager.dataType"),key:"t",width:100},{title:I("groupDetail.parameterManager.value"),key:"v",render:l=>{if(l.v)return i("div",{class:"flex gap-2"},[i(Ee,{tooltip:{show:!1}},{default:()=>l.v}),O.value?i(Q,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>{c(l.v)}},{default:()=>i(te)}):void 0])}},{title:I("groupDetail.parameterManager.time"),key:"timestamp",width:180},{title:I("groupDetail.parameterManager.options"),key:"options",width:!x.hideHistoryOption&&!x.hideRevertOption?160:90,align:"center",render:l=>i("div",{class:"flex justify-center"},re([x.hideRevertOption?null:i(be,{onPositiveClick:()=>C(l),placement:"left"},{default:()=>I("groupDetail.parameterManager.revertConfirm"),trigger:()=>i(N,{quaternary:!0,type:"info",size:"small"},{default:()=>I("groupDetail.parameterManager.optionRevert")})}),x.hideHistoryOption?void 0:i(N,{size:"small",type:"info",quaternary:!0,onClick:()=>H(l)},{default:()=>I("groupDetail.parameterManager.optionHistory")})]))}],q=l=>({class:l.deleted_flag?"removed":""}),R=Je({page:1,per_page:We,total:0}),$=async()=>{const l=s.query.device_group_name;if(!x.spaceId||!l)return;const[L,h]=await pt({device_group_name:l,space_id:x.spaceId,key:x.hkey,page:R.page,per_page:R.per_page});!L&&(h==null?void 0:h.status)===0&&(r.value=h.data.list,R.total=h.data.total)};return ve(()=>x.spaceId,l=>{l&&$()},{immediate:!0}),U({refresh:$}),(l,L)=>{const h=xe,_=Xe("params-history",!0),u=pe,f=ce;return F(),J("div",null,[w(h,{columns:z,data:a(r),pagination:!1,"row-props":q,"max-height":l.maxHeight||"calc(100vh - 420px)"},null,8,["data","max-height"]),w(Qe,{"page-info":a(R),"onUpdate:pageInfo":L[0]||(L[0]=g=>_e(R)?R.value=g:null),onUpdateList:$},null,8,["page-info"]),w(f,{show:a(o).show,"onUpdate:show":L[1]||(L[1]=g=>a(o).show=g),size:"huge"},{default:S(()=>[w(u,{style:{"min-height":"400px",overflow:"auto",width:"1200px","min-width":"500px"}},{default:S(()=>{var g;return[w(_,{"max-height":l.maxHeight,"space-id":l.spaceId,hkey:(g=a(o).info)==null?void 0:g.k_full,"hide-history-option":l.hideHistoryOption,"hide-revert-option":l.hideRevertOption},null,8,["max-height","space-id","hkey","hide-history-option","hide-revert-option"])]}),_:1})]),_:1},8,["show"])])}}});var de,Re;function xt(){if(Re)return de;Re=1;var v=9007199254740991,U="[object Arguments]",k="[object Function]",x="[object GeneratorFunction]",M=/^(?:0|[1-9]\d*)$/;function I(e,n){for(var y=-1,E=e?e.length:0;++y<E&&n(e[y],y,e)!==!1;);return e}function p(e,n){for(var y=-1,E=Array(e);++y<e;)E[y]=n(y);return E}function O(e,n){return function(y){return e(n(y))}}var b=Object.prototype,s=b.hasOwnProperty,r=b.toString,o=b.propertyIsEnumerable,c=O(Object.keys,Object);function C(e,n){var y=f(e)||u(e)?p(e.length,String):[],E=y.length,A=!!E;for(var B in e)s.call(e,B)&&!(A&&(B=="length"||L(B,E)))&&y.push(B);return y}var H=$(q),z=l();function q(e,n){return e&&z(e,n,m)}function R(e){if(!h(e))return c(e);var n=[];for(var y in Object(e))s.call(e,y)&&y!="constructor"&&n.push(y);return n}function $(e,n){return function(y,E){if(y==null)return y;if(!g(y))return e(y,E);for(var A=y.length,B=-1,Y=Object(y);++B<A&&E(Y[B],B,Y)!==!1;);return y}}function l(e){return function(n,y,E){for(var A=-1,B=Object(n),Y=E(n),Ue=Y.length;Ue--;){var Ce=Y[++A];if(y(B[Ce],Ce,B)===!1)break}return n}}function L(e,n){return n=n??v,!!n&&(typeof e=="number"||M.test(e))&&e>-1&&e%1==0&&e<n}function h(e){var n=e&&e.constructor,y=typeof n=="function"&&n.prototype||b;return e===y}function _(e,n){var y=f(e)?I:H;return y(e,typeof n=="function"?n:P)}function u(e){return j(e)&&s.call(e,"callee")&&(!o.call(e,"callee")||r.call(e)==U)}var f=Array.isArray;function g(e){return e!=null&&G(e.length)&&!V(e)}function j(e){return d(e)&&g(e)}function V(e){var n=t(e)?r.call(e):"";return n==k||n==x}function G(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=v}function t(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function d(e){return!!e&&typeof e=="object"}function m(e){return g(e)?C(e):R(e)}function P(e){return e}return de=_,de}var bt=xt();const Ct=Ye(bt),It={class:"flex gap-5"},Bt=ee({__name:"ParamsLatest",props:{spaceId:{},maxHeight:{},readOnly:{type:Boolean},version:{}},setup(v,{expose:U}){const k=v,x=ue(),{t:M}=le(),{copy:I,isSupported:p}=ke({legacy:!0}),O=we(),b=T(),s=T(!1),r=T(),o=T(),c=T({show:!1,info:void 0}),C=T(),H=T(),z=T(),q=t=>{I(t),O.success(M("common.copied"))},R=t=>{var d;(d=C.value)==null||d.open(),H.value={...t,type:"add"}},$=t=>{var d,m;(d=C.value)==null||d.open(),(m=C.value)==null||m.setFormValue({types:t.t,keys:t.node_name,values:t.v}),H.value={...t,type:"edit"}},l=(t,d,m)=>{const P=JSON.parse(JSON.stringify(o.value));let e=!1;const n=(y,E)=>{Ct(y,(A,B)=>{var Y;if(e)return!1;if(A.full_key===t){switch(d){case"rchildren":delete A.children;break;case"rself":(Y=E.children)==null||Y.splice(B,1);break;case"update":m&&(A.children=m);break;case"insert":A.children=m}return e=!0,!1}A.children&&n(A.children,A)})};n(P,{children:P}),o.value=P},L=async t=>{const[d,m]=await Fe({key:t.full_key,device_group_name:x.query.device_group_name,space_id:k.spaceId});!d&&(m==null?void 0:m.status)===0&&l(t.full_key,"rself")},h=(t,d)=>{var m;j(t,void 0,d!==void 0?d:((m=H.value)==null?void 0:m.type)==="add")},_=t=>{c.value={show:!0,info:t}},u=()=>{j([r.value])},f=t=>{j(t.full_key.split("/"));const d=(z.value||[]).concat(t.full_key);z.value=[...new Set(d)]},g=[{title:M("groupDetail.parameterManager.key"),key:"node_name",render:t=>t.expandable?i("div",{class:"inline-flex items-center gap-1"},re([i("span",t.node_name),k.readOnly?null:i(N,{quaternary:!0,type:"info",size:"small",onClick:()=>R(t)},{icon:()=>i(he)}),k.readOnly?null:i(N,{quaternary:!0,type:"info",size:"small",onClick:()=>f(t)},{icon:()=>i(ye)})])):i("div",{class:"inline-flex gap-2"},[i("div",t.node_name),p.value?i(Q,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>q(t.full_key)},{default:()=>i(te)}):void 0])},{title:M("groupDetail.parameterManager.dataType"),key:"t",width:100,render:t=>{if(t.expandable)return;const d=ge.find(m=>m.value===t.t);return i(Le,{size:"small",bordered:!1,color:{textColor:"#fff",color:(d==null?void 0:d.color)||"#2080f0"},class:"min-w-16 text-center inline-flex justify-center"},{default:()=>t.t})}},{title:M("groupDetail.parameterManager.value"),key:"v",render:t=>t.expandable?t.v:i("div",{class:"flex gap-2"},[i(Ee,{tooltip:{show:!1}},{default:()=>t.v}),p.value?i(Q,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>q(t.v)},{default:()=>i(te)}):void 0])}];k.readOnly||g.push({title:M("groupDetail.parameterManager.options"),key:"options",width:260,align:"center",render:t=>{if(!(t!=null&&t.isLeaf))return;const d={quaternary:!0,type:"info",size:"small"},m=i(N,{...d,onClick:()=>{$(t)}},{default:()=>M("groupDetail.parameterManager.optionEdit")}),P=i(N,{...d,onClick:()=>_(t)},{default:()=>M("groupDetail.parameterManager.optionHistory")}),e=i(be,{onPositiveClick:()=>L(t)},{default:()=>M("groupDetail.parameterManager.removeConfirm"),icon:()=>i(Q,{color:"#e88080",size:22},i(je)),trigger:()=>i(N,{...d,type:"error"},{default:()=>M("groupDetail.parameterManager.optionRemove")})});return i("div",{class:"flex justify-end"},[m,P,e])}});const j=async(t=[],d,m)=>{if(!k.spaceId||s.value)return;s.value=!0;const P=re(t);try{const[e,n]=await ct({device_group_name:x.query.device_group_name,space_id:k.spaceId,parent_tree:P,version:k.version});if(s.value=!1,e||(n==null?void 0:n.status)!==0)return;if(P.length===0){b.value=n.data,n.data&&n.data.length>0&&j([n.data[0].node_name]),Ze(n.data)&&(o.value=[]);return}const y="/"+P.join("/"),E=n.data.map(A=>({...A,isLeaf:!A.expandable}));if(d)return d.resolve(),E;P.length===1?o.value=E:m?l(y,"insert",E):l(y,"update",E)}catch{d&&d.reject(),s.value=!1}},V=t=>new Promise(async(d,m)=>{const P=await j(t.full_key.split("/"),{resolve:d,reject:m});t.children=P}),G=t=>{const[d]=De(z.value,t);d&&l(d,"rchildren"),z.value=t};return ve(()=>k.spaceId,t=>{t&&j()},{immediate:!0}),ve(r,t=>{t&&(z.value=[],o.value=[],j([t]))}),U({refresh:j}),(t,d)=>{const m=xe,P=pe,e=ce;return F(),J("div",It,[a(b)?(F(),Z(gt,{key:0,tabs:a(b),modelValue:a(r),"onUpdate:modelValue":d[0]||(d[0]=n=>_e(r)?r.value=n:null),onInsert:R,onRefresh:u,"read-only":t.readOnly},null,8,["tabs","modelValue","read-only"])):D("",!0),w(m,{size:"small","max-height":t.maxHeight?t.maxHeight:"calc(100vh - 340px)",columns:g,data:a(o),loading:a(s),"row-key":n=>n.full_key,"expanded-row-keys":a(z),onLoad:V,onUpdateExpandedRowKeys:G},null,8,["max-height","data","loading","row-key","expanded-row-keys"]),t.spaceId?(F(),Z(He,{key:1,info:a(H),ref_key:"actionInfoRef",ref:C,"space-id":t.spaceId,"onUpdate:success":h},null,8,["info","space-id"])):D("",!0),w(e,{show:a(c).show,"onUpdate:show":d[1]||(d[1]=n=>a(c).show=n),size:"huge"},{default:S(()=>[w(P,{style:{"min-height":"400px",overflow:"auto",width:"1000px","min-width":"500px"}},{default:S(()=>{var n;return[w(Ae,{"max-height":"auto","space-id":t.spaceId,hkey:(n=a(c).info)==null?void 0:n.full_key,"hide-history-option":"","onUpdate:success":h},null,8,["space-id","hkey"])]}),_:1})]),_:1},8,["show"])])}}}),Mt={class:"relative mb-2 w-[450px]"},Kt=ee({__name:"ParamsSearch",props:se({spaceId:{}},{modelValue:{},modelModifiers:{}}),emits:se(["refresh"],["update:modelValue"]),setup(v,{emit:U}){const k=U,x=v,M=ue(),I=ze(),{t:p}=le(),{copy:O,isSupported:b}=ke({legacy:!0}),s=we(),r=T(!1),o=T(),c=Se(v,"modelValue"),C=T({show:!1,info:void 0}),H=T(),z=T(),q=u=>{O(u),s.success(p("common.copied"))},R=u=>{var f,g;(f=H.value)==null||f.open(),(g=H.value)==null||g.setFormValue({types:u.t,keys:u.full_key.replace(/^.*\/([^\/]*)$/,"$1"),values:u.v}),z.value={...u,type:"edit"}},$=async u=>{const[f,g]=await Fe({key:u.full_key,device_group_name:M.query.device_group_name,space_id:x.spaceId});!f&&(g==null?void 0:g.status)===0&&(_(),k("refresh"))},l=()=>{_(),k("refresh")},L=u=>{C.value={show:!0,info:u}},h=[{title:p("groupDetail.parameterManager.key"),key:"full_key",render:u=>i("div",{class:"inline-flex gap-2"},[i("div",u.full_key),i(Q,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>q(u.full_key)},{default:()=>i(te)})])},{title:p("groupDetail.parameterManager.dataType"),key:"t",width:100,render:u=>{if(u.expandable)return;const f=ge.find(g=>g.value===u.t);return i(Le,{size:"small",bordered:!1,color:{textColor:"#fff",color:(f==null?void 0:f.color)||"#2080f0"},class:"min-w-16 text-center inline-flex justify-center"},{default:()=>u.t})}},{title:p("groupDetail.parameterManager.value"),key:"v",ellipsis:{tooltip:!0},render:u=>u.expandable?u.v:i("div",{class:"flex gap-2"},[i("div",u.v),b.value?i(Q,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>q(u.v)},{default:()=>i(te)}):void 0])},{title:p("groupDetail.parameterManager.options"),key:"options",width:260,align:"center",render:u=>{const f={quaternary:!0,type:"info",size:"small"},g=i(N,{...f,onClick:()=>{R(u)}},{default:()=>p("groupDetail.parameterManager.optionEdit")}),j=i(N,{...f,onClick:()=>L(u)},{default:()=>p("groupDetail.parameterManager.optionHistory")}),V=i(be,{onPositiveClick:()=>$(u),placement:"left-start"},{default:()=>p("groupDetail.parameterManager.removeConfirm"),icon:()=>i(Q,{color:"#e88080",size:22},i(je)),trigger:()=>i(N,{...f,type:"error"},{default:()=>p("groupDetail.parameterManager.optionRemove")})});return i("div",{class:"flex justify-end"},[g,j,V])}}],_=async()=>{var g;if(!((g=c.value)!=null&&g.trim())||!x.spaceId||r.value)return;r.value=!0;const[u,f]=await dt({device_group_name:M.query.device_group_name,space_id:x.spaceId,search_word:c.value});r.value=!1,(u||(f==null?void 0:f.status)==0)&&(o.value=f==null?void 0:f.data)};return et(()=>{tt(()=>{setTimeout(()=>{_()},200)})}),(u,f)=>{const g=Te,j=xe,V=pe,G=ce;return F(),J("div",null,[W("div",Mt,[w(g,{style:{width:"450px","padding-right":"20px"},value:c.value,"onUpdate:value":f[0]||(f[0]=t=>c.value=t),valueModifiers:{trim:!0},placeholder:a(p)("groupDetail.parameterManager.searchPlaceholder"),onKeyup:nt(_,["enter"])},null,8,["value","placeholder"]),W("div",{class:"absolute -right-4 top-1/2 -translate-1/2 h-full w-8 flex items-center justify-center cursor-pointer",onClick:_},[w(a(Q),{color:a(I).primaryColor,component:a(at)},null,8,["color","component"])])]),w(j,{size:"small","max-height":"calc(100vh - 340px)",columns:h,data:a(o),loading:a(r),"row-key":t=>t.full_key},null,8,["data","loading","row-key"]),u.spaceId?(F(),Z(He,{key:0,info:a(z),ref_key:"actionInfoRef",ref:H,"space-id":u.spaceId,"onUpdate:success":l},null,8,["info","space-id"])):D("",!0),w(G,{show:a(C).show,"onUpdate:show":f[1]||(f[1]=t=>a(C).show=t),size:"huge"},{default:S(()=>[w(V,{style:{"min-height":"400px",overflow:"auto",width:"1000px","min-width":"500px"}},{default:S(()=>{var t;return[w(Ae,{"max-height":"auto","space-id":u.spaceId,hkey:(t=a(C).info)==null?void 0:t.full_key,"hide-history-option":"","onUpdate:success":l},null,8,["space-id","hkey"])]}),_:1})]),_:1},8,["show"])])}}});var oe={exports:{}},Rt=oe.exports,Oe;function Ot(){return Oe||(Oe=1,function(v,U){(function(k,x){x()})(Rt,function(){function k(s,r){return typeof r>"u"?r={autoBom:!1}:typeof r!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function x(s,r,o){var c=new XMLHttpRequest;c.open("GET",s),c.responseType="blob",c.onload=function(){b(c.response,r,o)},c.onerror=function(){console.error("could not download file")},c.send()}function M(s){var r=new XMLHttpRequest;r.open("HEAD",s,!1);try{r.send()}catch{}return 200<=r.status&&299>=r.status}function I(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(r)}}var p=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ae=="object"&&ae.global===ae?ae:void 0,O=p.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=p.saveAs||(typeof window!="object"||window!==p?function(){}:"download"in HTMLAnchorElement.prototype&&!O?function(s,r,o){var c=p.URL||p.webkitURL,C=document.createElement("a");r=r||s.name||"download",C.download=r,C.rel="noopener",typeof s=="string"?(C.href=s,C.origin===location.origin?I(C):M(C.href)?x(s,r,o):I(C,C.target="_blank")):(C.href=c.createObjectURL(s),setTimeout(function(){c.revokeObjectURL(C.href)},4e4),setTimeout(function(){I(C)},0))}:"msSaveOrOpenBlob"in navigator?function(s,r,o){if(r=r||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(k(s,o),r);else if(M(s))x(s,r,o);else{var c=document.createElement("a");c.href=s,c.target="_blank",setTimeout(function(){I(c)})}}:function(s,r,o,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof s=="string")return x(s,r,o);var C=s.type==="application/octet-stream",H=/constructor/i.test(p.HTMLElement)||p.safari,z=/CriOS\/[\d]+/.test(navigator.userAgent);if((z||C&&H||O)&&typeof FileReader<"u"){var q=new FileReader;q.onloadend=function(){var l=q.result;l=z?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=l:location=l,c=null},q.readAsDataURL(s)}else{var R=p.URL||p.webkitURL,$=R.createObjectURL(s);c?c.location=$:location.href=$,c=null,setTimeout(function(){R.revokeObjectURL($)},4e4)}});p.saveAs=b.saveAs=b,v.exports=b})}(oe)),oe.exports}var Nt=Ot();export{Vt as A,Nt as F,Bt as _,At as a,qt as b,Ae as c,Kt as d,Ht as g,$t as i,Ut as s};
