import{ab as j,bH as It,d as Q,I as s,ba as _e,ah as Kt,aw as A,r as N,bI as Bt,bJ as $t,by as jt,bK as At,aq as We,ar as zt,bL as Et,at as Pe,C as w,bM as fe,bN as Ie,as as Ut,bO as Dt,aV as he,bP as rt,bQ as it,bc as st,aN as Ht,bR as qt,bS as Wt,bT as Qt,bU as Xt,bV as ut,bW as Jt,ae as ve,b9 as Qe,af as xe,ad as W,bX as Yt,bY as Zt,bZ as Gt,b_ as Xe,b$ as Ce,ag as en,am as dt,c0 as tn,c1 as nn,av as Je,c2 as an,c3 as ln,aH as ne,aW as $e,aj as on,c4 as rn,c5 as sn,ap as un,c6 as dn,aB as te,c7 as cn,c8 as fn,c9 as je,X as vn,ca as Ye,o as Ae,c as ct,e as ft,f as Ze,a as hn,h as mn,j as Ge,bA as gn,B as pn,a6 as bn,aa as yn}from"./index-DOdIYOkR.js";import{p as wn}from"./exp-BL6mWztX.js";const kn=j("base-menu-mask",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 text-align: center;
 padding: 14px;
 overflow: hidden;
`,[It()]),Sn=Q({name:"BaseMenuMask",props:{clsPrefix:{type:String,required:!0}},setup(e){Kt("-base-menu-mask",kn,A(e,"clsPrefix"));const a=N(null);let n=null;const o=N(!1);return Bt(()=>{n!==null&&window.clearTimeout(n)}),Object.assign({message:a,show:o},{showOnce(v,h=1500){n&&window.clearTimeout(n),o.value=!0,a.value=v,n=window.setTimeout(()=>{o.value=!1,a.value=null},h)}})},render(){return s(_e,{name:"fade-in-transition"},{default:()=>this.show?s("div",{class:`${this.clsPrefix}-base-menu-mask`},this.message):null})}}),me=$t("n-cascader"),et=Q({name:"NCascaderOption",props:{tmNode:{type:Object,required:!0}},setup(e){const{expandTriggerRef:a,remoteRef:n,multipleRef:o,mergedValueRef:r,checkedKeysRef:v,indeterminateKeysRef:h,hoverKeyPathRef:i,keyboardKeyRef:g,loadingKeySetRef:p,cascadeRef:d,mergedCheckStrategyRef:S,onLoadRef:k,mergedClsPrefixRef:x,mergedThemeRef:z,labelFieldRef:B,showCheckboxRef:D,renderPrefixRef:R,renderSuffixRef:C,updateHoverKey:O,updateKeyboardKey:T,addLoadingKey:$,deleteLoadingKey:E,closeMenu:ae,doCheck:Z,doUncheck:ge,renderLabelRef:m}=Pe(me),M=w(()=>e.tmNode.key),L=w(()=>{const{value:F}=a,{value:q}=n;return!q&&F==="hover"}),I=w(()=>{if(L.value)return ie}),X=w(()=>{if(L.value)return pe}),U=fe(()=>{const{value:F}=o;return F?v.value.includes(M.value):r.value===M.value}),le=fe(()=>o.value?h.value.includes(M.value):!1),Ne=fe(()=>i.value.includes(M.value)),Te=fe(()=>{const{value:F}=g;return F===null?!1:F===M.value}),J=fe(()=>n.value?p.value.has(M.value):!1),oe=w(()=>e.tmNode.isLeaf),re=w(()=>e.tmNode.disabled),H=w(()=>e.tmNode.rawNode[B.value]),Y=w(()=>e.tmNode.shallowLoaded);function G(F){if(re.value)return;const{value:q}=n,{value:K}=p,{value:ye}=k,{value:V}=M,{value:we}=oe,{value:ke}=Y;Ie(F,"checkbox")||(q&&!ke&&!K.has(V)&&ye&&($(V),ye(e.tmNode.rawNode).then(()=>{E(V)}).catch(()=>{E(V)})),O(V),T(V)),we&&be()}function ie(){if(!L.value||re.value)return;const{value:F}=M;O(F),T(F)}function pe(){L.value&&ie()}function de(){const{value:F}=oe;F||be()}function be(){const{value:F}=o,{value:q}=M;F?le.value||U.value?ge(q):Z(q):(Z(q),ae(!0))}return{checkStrategy:S,multiple:o,cascade:d,checked:U,indeterminate:le,hoverPending:Ne,keyboardPending:Te,isLoading:J,showCheckbox:D,isLeaf:oe,disabled:re,label:H,mergedClsPrefix:x,mergedTheme:z,handleClick:G,handleCheckboxUpdateValue:de,mergedHandleMouseEnter:I,mergedHandleMouseMove:X,renderLabel:m,renderPrefix:R,renderSuffix:C}},render(){const{mergedClsPrefix:e,showCheckbox:a,renderLabel:n,renderPrefix:o,renderSuffix:r}=this;let v=null;if(a||o){const g=this.showCheckbox?s(jt,{focusable:!1,"data-checkbox":!0,disabled:this.disabled,checked:this.checked,indeterminate:this.indeterminate,theme:this.mergedTheme.peers.Checkbox,themeOverrides:this.mergedTheme.peerOverrides.Checkbox,onUpdateChecked:this.handleCheckboxUpdateValue}):null;v=s("div",{class:`${e}-cascader-option__prefix`},o?o({option:this.tmNode.rawNode,checked:this.checked,node:g}):g)}let h=null;const i=s("div",{class:`${e}-cascader-option-icon-placeholder`},this.isLeaf?this.checkStrategy==="child"&&!(this.multiple&&this.cascade)?s(_e,{name:"fade-in-scale-up-transition"},{default:()=>this.checked?s(We,{clsPrefix:e,class:`${e}-cascader-option-icon ${e}-cascader-option-icon--checkmark`},{default:()=>s(Et,null)}):null}):null:s(At,{clsPrefix:e,scale:.85,strokeWidth:24,show:this.isLoading,class:`${e}-cascader-option-icon`},{default:()=>s(We,{clsPrefix:e,key:"arrow",class:`${e}-cascader-option-icon ${e}-cascader-option-icon--arrow`},{default:()=>s(zt,null)})}));return h=s("div",{class:`${e}-cascader-option__suffix`},r?r({option:this.tmNode.rawNode,checked:this.checked,node:i}):i),s("div",{class:[`${e}-cascader-option`,this.keyboardPending||this.hoverPending&&`${e}-cascader-option--pending`,this.disabled&&`${e}-cascader-option--disabled`,this.showCheckbox&&`${e}-cascader-option--show-prefix`],onMouseenter:this.mergedHandleMouseEnter,onMousemove:this.mergedHandleMouseMove,onClick:this.handleClick},v,s("span",{class:`${e}-cascader-option__label`},n?n(this.tmNode.rawNode,this.checked):this.label),h)}}),Rn=Q({name:"CascaderSubmenu",props:{depth:{type:Number,required:!0},tmNodes:{type:Array,required:!0}},setup(){const{virtualScrollRef:e,mergedClsPrefixRef:a,mergedThemeRef:n,optionHeightRef:o}=Pe(me),r=N(null),v=N(null),h={scroll(i,g){var p,d;e.value?(p=v.value)===null||p===void 0||p.scrollTo({index:i}):(d=r.value)===null||d===void 0||d.scrollTo({index:i,elSize:g})}};return Object.assign({mergedClsPrefix:a,mergedTheme:n,scrollbarInstRef:r,vlInstRef:v,virtualScroll:e,itemSize:w(()=>he(o.value)),handleVlScroll:()=>{var i;(i=r.value)===null||i===void 0||i.sync()},getVlContainer:()=>{var i;return(i=v.value)===null||i===void 0?void 0:i.listElRef},getVlContent:()=>{var i;return(i=v.value)===null||i===void 0?void 0:i.itemsElRef}},h)},render(){const{mergedClsPrefix:e,mergedTheme:a,virtualScroll:n}=this;return s("div",{class:[n&&`${e}-cascader-submenu--virtual`,`${e}-cascader-submenu`]},s(Ut,{ref:"scrollbarInstRef",theme:a.peers.Scrollbar,themeOverrides:a.peerOverrides.Scrollbar,container:n?this.getVlContainer:void 0,content:n?this.getVlContent:void 0},{default:()=>n?s(Dt,{items:this.tmNodes,itemSize:this.itemSize,onScroll:this.handleVlScroll,showScrollbar:!1,ref:"vlInstRef"},{default:({item:o})=>s(et,{key:o.key,tmNode:o})}):this.tmNodes.map(o=>s(et,{key:o.key,tmNode:o}))}))}}),xn=Q({name:"NCascaderMenu",props:{value:[String,Number,Array],placement:{type:String,default:"bottom-start"},show:Boolean,menuModel:{type:Array,required:!0},loading:Boolean,onFocus:{type:Function,required:!0},onBlur:{type:Function,required:!0},onKeydown:{type:Function,required:!0},onMousedown:{type:Function,required:!0},onTabout:{type:Function,required:!0}},setup(e){const{localeRef:a,isMountedRef:n,mergedClsPrefixRef:o,syncCascaderMenuPosition:r,handleCascaderMenuClickOutside:v,mergedThemeRef:h,getColumnStyleRef:i}=Pe(me),g=[],p=N(null),d=N(null);function S(){r()}Qt(d,S);function k(R){var C;const{value:{loadingRequiredMessage:O}}=a;(C=p.value)===null||C===void 0||C.showOnce(O(R))}function x(R){v(R)}function z(R){const{value:C}=d;C&&(C.contains(R.relatedTarget)||e.onFocus(R))}function B(R){const{value:C}=d;C&&(C.contains(R.relatedTarget)||e.onBlur(R))}return Object.assign({isMounted:n,mergedClsPrefix:o,selfElRef:d,submenuInstRefs:g,maskInstRef:p,mergedTheme:h,getColumnStyle:i,handleFocusin:z,handleFocusout:B,handleClickOutside:x},{scroll(R,C,O){const T=g[R];T&&T.scroll(C,O)},showErrorMessage:k})},render(){const{submenuInstRefs:e,mergedClsPrefix:a,mergedTheme:n}=this;return s(_e,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.show?rt(s("div",{tabindex:"0",ref:"selfElRef",class:`${a}-cascader-menu`,onMousedown:this.onMousedown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeydown:this.onKeydown},this.menuModel[0].length?s("div",{class:`${a}-cascader-submenu-wrapper`},this.menuModel.map((o,r)=>{var v;return s(Rn,{style:(v=this.getColumnStyle)===null||v===void 0?void 0:v.call(this,{level:r}),ref:h=>{h&&(e[r]=h)},key:r,tmNodes:o,depth:r+1})}),s(Sn,{clsPrefix:a,ref:"maskInstRef"})):s("div",{class:`${a}-cascader-menu__empty`},st(this.$slots.empty,()=>[s(Ht,{theme:n.peers.Empty,themeOverrides:n.peerOverrides.Empty})])),qt(this.$slots.action,o=>o&&s("div",{class:`${a}-cascader-menu-action`,"data-action":!0},o)),s(Wt,{onFocus:this.onTabout})),[[it,this.handleClickOutside,void 0,{capture:!0}]]):null})}});function Me(e){return e?e.map(a=>a.rawNode):null}function Mn(e,a,n,o){const r=[],v=[];function h(i){for(const g of i){if(g.disabled)continue;const{rawNode:p}=g;v.push(p),(g.isLeaf||!a)&&r.push({label:Ke(g,o,n),value:g.key,rawNode:g.rawNode,path:Array.from(v)}),!g.isLeaf&&g.children&&h(g.children),v.pop()}}return h(e),r}function Ke(e,a,n){const o=[];for(;e;)o.push(e.rawNode[n]),e=e.parent;return o.reverse().join(a)}const Cn=Q({name:"NCascaderSelectMenu",props:{value:{type:[String,Number,Array],default:null},show:Boolean,pattern:{type:String,default:""},multiple:Boolean,tmNodes:{type:Array,default:()=>[]},filter:Function,labelField:{type:String,required:!0},separator:{type:String,required:!0}},setup(e){const{isMountedRef:a,mergedValueRef:n,mergedClsPrefixRef:o,mergedThemeRef:r,mergedCheckStrategyRef:v,slots:h,syncSelectMenuPosition:i,closeMenu:g,handleSelectMenuClickOutside:p,doUncheck:d,doCheck:S,clearPattern:k}=Pe(me),x=N(null),z=w(()=>Mn(e.tmNodes,v.value==="child",e.labelField,e.separator)),B=w(()=>{const{filter:m}=e;if(m)return m;const{labelField:M}=e;return(L,I,X)=>X.some(U=>U[M]&&~U[M].toLowerCase().indexOf(L.toLowerCase()))}),D=w(()=>{const{pattern:m}=e,{value:M}=B;return(m?z.value.filter(L=>M(m,L.rawNode,L.path)):z.value).map(L=>({value:L.value,label:L.label}))}),R=w(()=>ut(D.value,Jt("value","children")));function C(){i()}function O(m){T(m)}function T(m){if(e.multiple){const{value:M}=n;Array.isArray(M)?M.includes(m.key)?d(m.key):S(m.key):M===null&&S(m.key),k()}else S(m.key),g(!0)}function $(){var m;(m=x.value)===null||m===void 0||m.prev()}function E(){var m;(m=x.value)===null||m===void 0||m.next()}function ae(){var m;if(x){const M=(m=x.value)===null||m===void 0?void 0:m.getPendingTmNode();return M&&T(M),!0}return!1}function Z(m){p(m)}return Object.assign({isMounted:a,mergedTheme:r,mergedClsPrefix:o,menuInstRef:x,selectTreeMate:R,handleResize:C,handleToggle:O,handleClickOutside:Z,cascaderSlots:h},{prev:$,next:E,enter:ae})},render(){const{mergedClsPrefix:e,isMounted:a,mergedTheme:n,cascaderSlots:o}=this;return s(_e,{name:"fade-in-scale-up-transition",appear:a},{default:()=>this.show?rt(s(Xt,{ref:"menuInstRef",onResize:this.handleResize,clsPrefix:e,class:`${e}-cascader-menu`,autoPending:!0,themeOverrides:n.peerOverrides.InternalSelectMenu,theme:n.peers.InternalSelectMenu,treeMate:this.selectTreeMate,multiple:this.multiple,value:this.value,onToggle:this.handleToggle},{empty:()=>st(o["not-found"],()=>[])}),[[it,this.handleClickOutside,void 0,{capture:!0}]]):null})}}),_n=ve([j("cascader-menu",`
 outline: none;
 position: relative;
 margin: 4px 0;
 display: flex;
 flex-flow: column nowrap;
 border-radius: var(--n-menu-border-radius);
 overflow: hidden;
 box-shadow: var(--n-menu-box-shadow);
 color: var(--n-option-text-color);
 background-color: var(--n-menu-color);
 `,[Qe({transformOrigin:"inherit",duration:"0.2s"}),xe("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),j("scrollbar",`
 width: 100%;
 `),j("base-menu-mask",`
 background-color: var(--n-menu-mask-color);
 `),j("base-loading",`
 color: var(--n-loading-color);
 `),j("cascader-submenu-wrapper",`
 position: relative;
 display: flex;
 flex-wrap: nowrap;
 `),j("cascader-submenu",`
 height: var(--n-menu-height);
 min-width: var(--n-column-width);
 position: relative;
 `,[W("virtual",`
 width: var(--n-column-width);
 `),j("scrollbar-content",`
 position: relative;
 `),ve("&:first-child",`
 border-top-left-radius: var(--n-menu-border-radius);
 border-bottom-left-radius: var(--n-menu-border-radius);
 `),ve("&:last-child",`
 border-top-right-radius: var(--n-menu-border-radius);
 border-bottom-right-radius: var(--n-menu-border-radius);
 `),ve("&:not(:first-child)",`
 border-left: 1px solid var(--n-menu-divider-color);
 `)]),j("cascader-menu-action",`
 box-sizing: border-box;
 padding: 8px;
 border-top: 1px solid var(--n-menu-divider-color);
 `),j("cascader-option",`
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 padding: 0 0 0 18px;
 box-sizing: border-box;
 min-width: 182px;
 background-color: #0000;
 display: flex;
 align-items: center;
 white-space: nowrap;
 position: relative;
 cursor: pointer;
 transition:
 background-color .2s var(--n-bezier),
 color 0.2s var(--n-bezier);
 `,[W("show-prefix",`
 padding-left: 0;
 `),xe("label",`
 flex: 1 0 0;
 overflow: hidden;
 text-overflow: ellipsis;
 `),xe("prefix",`
 min-width: 32px;
 display: flex;
 align-items: center;
 justify-content: center;
 `),xe("suffix",`
 min-width: 32px;
 display: flex;
 align-items: center;
 justify-content: center;
 `),j("cascader-option-icon-placeholder",`
 line-height: 0;
 position: relative;
 width: 16px;
 height: 16px;
 font-size: 16px;
 `,[j("cascader-option-icon",[W("checkmark",`
 color: var(--n-option-check-mark-color);
 `,[Qe({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})]),W("arrow",`
 color: var(--n-option-arrow-color);
 `)])]),W("selected",`
 color: var(--n-option-text-color-active);
 `),W("active",`
 color: var(--n-option-text-color-active);
 background-color: var(--n-option-color-hover);
 `),W("pending",`
 background-color: var(--n-option-color-hover);
 `),ve("&:hover",`
 background-color: var(--n-option-color-hover);
 `),W("disabled",`
 color: var(--n-option-text-color-disabled);
 background-color: #0000;
 cursor: not-allowed;
 `,[j("cascader-option-icon",[W("arrow",`
 color: var(--n-option-text-color-disabled);
 `)])])])]),j("cascader",`
 z-index: auto;
 position: relative;
 width: 100%;
 `)]),Pn=Object.assign(Object.assign({},dt.props),{allowCheckingNotLoaded:Boolean,to:Ce.propTo,bordered:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},value:[String,Number,Array],defaultValue:{type:[String,Number,Array],default:null},placeholder:String,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},disabledField:{type:String,default:"disabled"},expandTrigger:{type:String,default:"click"},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},remote:Boolean,onLoad:Function,separator:{type:String,default:" / "},filter:Function,placement:{type:String,default:"bottom-start"},cascade:{type:Boolean,default:!0},leafOnly:Boolean,showPath:{type:Boolean,default:!0},show:{type:Boolean,default:void 0},maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,menuProps:Object,filterMenuProps:Object,virtualScroll:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},valueField:{type:String,default:"value"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},renderLabel:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onBlur:Function,onFocus:Function,getColumnStyle:Function,renderPrefix:Function,renderSuffix:Function,onChange:[Function,Array]}),Nn=Q({name:"Cascader",props:Pn,slots:Object,setup(e,{slots:a}){const{mergedBorderedRef:n,mergedClsPrefixRef:o,namespaceRef:r,inlineThemeDisabled:v}=en(e),h=dt("Cascader","-cascader",_n,tn,e,o),{localeRef:i}=nn("Cascader"),g=N(e.defaultValue),p=w(()=>e.value),d=Je(p,g),S=w(()=>e.leafOnly?"child":e.checkStrategy),k=N(""),x=an(e),{mergedSizeRef:z,mergedDisabledRef:B,mergedStatusRef:D}=x,R=N(null),C=N(null),O=N(null),T=N(null),$=N(null),E=N(new Set),ae=N(null),Z=N(null),ge=Ce(e),m=N(!1),M=t=>{E.value.add(t)},L=t=>{E.value.delete(t)},I=w(()=>{const{valueField:t,childrenField:l,disabledField:u}=e;return ut(e.options,{getDisabled(b){return b[u]},getKey(b){return b[t]},getChildren(b){return b[l]}})}),X=w(()=>{const{cascade:t,multiple:l}=e;return l&&Array.isArray(d.value)?I.value.getCheckedKeys(d.value,{cascade:t,allowNotLoaded:e.allowCheckingNotLoaded}):{checkedKeys:[],indeterminateKeys:[]}}),U=w(()=>X.value.checkedKeys),le=w(()=>X.value.indeterminateKeys),Ne=w(()=>{const{treeNodePath:t,treeNode:l}=I.value.getPath($.value);let u;return l===null?u=[I.value.treeNodes]:(u=t.map(b=>b.siblings),!l.isLeaf&&!E.value.has(l.key)&&l.children&&u.push(l.children)),u}),Te=w(()=>{const{keyPath:t}=I.value.getPath($.value);return t}),J=w(()=>h.value.self.optionHeight);ln(e.options)&&ne(e.options,(t,l)=>{t!==l&&($.value=null,T.value=null)});const oe=N(!1);function re(t){const{onUpdateShow:l,"onUpdate:show":u}=e;l&&te(l,t),u&&te(u,t),oe.value=t}function H(t,l,u){const{onUpdateValue:b,"onUpdate:value":c,onChange:_}=e,{nTriggerFormInput:f,nTriggerFormChange:P}=x;b&&te(b,t,l,u),c&&te(c,t,l,u),_&&te(_,t,l,u),g.value=t,f(),P()}function Y(t){T.value=t}function G(t){$.value=t}function ie(t){const{value:{getNode:l}}=I;return t.map(u=>{var b;return((b=l(u))===null||b===void 0?void 0:b.rawNode)||null})}function pe(t){var l;const{cascade:u,multiple:b,filterable:c}=e,{value:{check:_,getNode:f,getPath:P}}=I;if(b)try{const{checkedKeys:y}=_(t,X.value.checkedKeys,{cascade:u,checkStrategy:S.value,allowNotLoaded:e.allowCheckingNotLoaded});H(y,ie(y),y.map(ue=>{var ce;return Me((ce=P(ue))===null||ce===void 0?void 0:ce.treeNodePath)})),c&&Oe(),T.value=t,$.value=t}catch(y){if(y instanceof cn){if(R.value){const ue=f(t);ue!==null&&R.value.showErrorMessage(ue.rawNode[e.labelField])}}else throw y}else if(S.value==="child"){const y=f(t);if(y!=null&&y.isLeaf)H(t,y.rawNode,Me(P(t).treeNodePath));else return!1}else{const y=f(t);H(t,(y==null?void 0:y.rawNode)||null,Me((l=P(t))===null||l===void 0?void 0:l.treeNodePath))}return!0}function de(t){const{cascade:l,multiple:u}=e;if(u){const{value:{uncheck:b,getNode:c,getPath:_}}=I,{checkedKeys:f}=b(t,X.value.checkedKeys,{cascade:l,checkStrategy:S.value,allowNotLoaded:e.allowCheckingNotLoaded});H(f,f.map(P=>{var y;return((y=c(P))===null||y===void 0?void 0:y.rawNode)||null}),f.map(P=>{var y;return Me((y=_(P))===null||y===void 0?void 0:y.treeNodePath)})),T.value=t,$.value=t}}const be=w(()=>{if(e.multiple){const{showPath:t,separator:l,labelField:u,cascade:b}=e,{getCheckedKeys:c,getNode:_}=I.value;return c(U.value,{cascade:b,checkStrategy:S.value,allowNotLoaded:e.allowCheckingNotLoaded}).checkedKeys.map(P=>{const y=_(P);return y===null?{label:String(P),value:P}:{label:t?Ke(y,l,u):y.rawNode[u],value:y.key}})}else return[]}),F=w(()=>{const{multiple:t,showPath:l,separator:u,labelField:b}=e,{value:c}=d;if(!t&&!Array.isArray(c)){const{getNode:_}=I.value;if(c===null)return null;const f=_(c);return f===null?{label:String(c),value:c}:{label:l?Ke(f,u,b):f.rawNode[b],value:f.key}}else return null}),q=A(e,"show"),K=Je(q,oe),ye=w(()=>{const{placeholder:t}=e;return t!==void 0?t:i.value.placeholder}),V=w(()=>!!(e.filterable&&k.value));ne(K,t=>{if(!t||e.multiple)return;const{value:l}=d;!Array.isArray(l)&&l!==null?(T.value=l,$.value=l,$e(()=>{var u;if(!K.value)return;const{value:b}=$;if(d.value!==null){const c=I.value.getNode(b);c&&((u=R.value)===null||u===void 0||u.scroll(c.level,c.index,he(J.value)))}})):(T.value=null,$.value=null)},{immediate:!0});function we(t){const{onBlur:l}=e,{nTriggerFormBlur:u}=x;l&&te(l,t),u()}function ke(t){const{onFocus:l}=e,{nTriggerFormFocus:u}=x;l&&te(l,t),u()}function Oe(){var t;(t=O.value)===null||t===void 0||t.focusInput()}function mt(){var t;(t=O.value)===null||t===void 0||t.focus()}function Se(){B.value||(k.value="",re(!0),e.filterable&&Oe())}function ee(t=!1){t&&mt(),re(!1),k.value=""}function ze(t){var l;V.value||K.value&&(!((l=O.value)===null||l===void 0)&&l.$el.contains(fn(t))||ee())}function gt(t){V.value&&ze(t)}function Ee(){e.clearFilterAfterSelect&&(k.value="")}function Re(t){var l,u,b;const{value:c}=T,{value:_}=I;switch(t){case"prev":if(c!==null){const f=_.getPrev(c,{loop:!0});f!==null&&(Y(f.key),(l=R.value)===null||l===void 0||l.scroll(f.level,f.index,he(J.value)))}break;case"next":if(c===null){const f=_.getFirstAvailableNode();f!==null&&(Y(f.key),(u=R.value)===null||u===void 0||u.scroll(f.level,f.index,he(J.value)))}else{const f=_.getNext(c,{loop:!0});f!==null&&(Y(f.key),(b=R.value)===null||b===void 0||b.scroll(f.level,f.index,he(J.value)))}break;case"child":if(c!==null){const f=_.getNode(c);if(f!==null)if(f.shallowLoaded){const P=_.getChild(c);P!==null&&(G(c),Y(P.key))}else{const{value:P}=E;if(!P.has(c)){M(c),G(c);const{onLoad:y}=e;y&&y(f.rawNode).then(()=>{L(c)}).catch(()=>{L(c)})}}}break;case"parent":if(c!==null){const f=_.getParent(c);if(f!==null){Y(f.key);const P=f.getParent();G(P===null?null:P.key)}}break}}function Ue(t){var l,u;switch(t.key){case" ":case"ArrowDown":case"ArrowUp":if(e.filterable&&K.value)break;t.preventDefault();break}if(!Ie(t,"action"))switch(t.key){case" ":if(e.filterable)return;case"Enter":if(!K.value)Se();else{const{value:b}=V,{value:c}=T;if(b)C.value&&C.value.enter()&&Ee();else if(c!==null)if(U.value.includes(c)||le.value.includes(c))de(c);else{const _=pe(c);!e.multiple&&_&&ee(!0)}}break;case"ArrowUp":t.preventDefault(),K.value&&(V.value?(l=C.value)===null||l===void 0||l.prev():Re("prev"));break;case"ArrowDown":t.preventDefault(),K.value?V.value?(u=C.value)===null||u===void 0||u.next():Re("next"):Se();break;case"ArrowLeft":t.preventDefault(),K.value&&!V.value&&Re("parent");break;case"ArrowRight":t.preventDefault(),K.value&&!V.value&&Re("child");break;case"Escape":K.value&&(dn(t),ee(!0))}}function pt(t){Ue(t)}function bt(t){t.stopPropagation(),e.multiple?H([],[],[]):H(null,null,null)}function yt(t){var l;!((l=R.value)===null||l===void 0)&&l.$el.contains(t.relatedTarget)||(m.value=!0,ke(t))}function wt(t){var l;!((l=R.value)===null||l===void 0)&&l.$el.contains(t.relatedTarget)||(m.value=!1,we(t),ee())}function kt(t){var l;!((l=O.value)===null||l===void 0)&&l.$el.contains(t.relatedTarget)||(m.value=!0,ke(t))}function St(t){var l;!((l=O.value)===null||l===void 0)&&l.$el.contains(t.relatedTarget)||(m.value=!1,we(t))}function Rt(t){Ie(t,"action")||e.multiple&&e.filter&&(t.preventDefault(),Oe())}function xt(){ee(!0)}function Mt(){e.filterable?Se():K.value?ee(!0):Se()}function Ct(t){k.value=t.target.value}function _t(t){const{multiple:l}=e,{value:u}=d;l&&Array.isArray(u)&&t.value!==void 0?de(t.value):H(null,null,null)}function De(){var t;(t=ae.value)===null||t===void 0||t.syncPosition()}function He(){var t;(t=Z.value)===null||t===void 0||t.syncPosition()}function Pt(){K.value&&(V.value?De():He())}const Fe=w(()=>!!(e.multiple&&e.cascade||S.value!=="child"));on(me,{slots:a,mergedClsPrefixRef:o,mergedThemeRef:h,mergedValueRef:d,checkedKeysRef:U,indeterminateKeysRef:le,hoverKeyPathRef:Te,mergedCheckStrategyRef:S,showCheckboxRef:Fe,cascadeRef:A(e,"cascade"),multipleRef:A(e,"multiple"),keyboardKeyRef:T,hoverKeyRef:$,remoteRef:A(e,"remote"),loadingKeySetRef:E,expandTriggerRef:A(e,"expandTrigger"),isMountedRef:rn(),onLoadRef:A(e,"onLoad"),virtualScrollRef:A(e,"virtualScroll"),optionHeightRef:J,localeRef:i,labelFieldRef:A(e,"labelField"),renderLabelRef:A(e,"renderLabel"),getColumnStyleRef:A(e,"getColumnStyle"),renderPrefixRef:A(e,"renderPrefix"),renderSuffixRef:A(e,"renderSuffix"),syncCascaderMenuPosition:He,syncSelectMenuPosition:De,updateKeyboardKey:Y,updateHoverKey:G,addLoadingKey:M,deleteLoadingKey:L,doCheck:pe,doUncheck:de,closeMenu:ee,handleSelectMenuClickOutside:gt,handleCascaderMenuClickOutside:ze,clearPattern:Ee});const Nt={focus:()=>{var t;(t=O.value)===null||t===void 0||t.focus()},blur:()=>{var t;(t=O.value)===null||t===void 0||t.blur()},getCheckedData:()=>{if(Fe.value){const t=U.value;return{keys:t,options:ie(t)}}return{keys:[],options:[]}},getIndeterminateData:()=>{if(Fe.value){const t=le.value;return{keys:t,options:ie(t)}}return{keys:[],options:[]}}},qe=w(()=>{const{self:{optionArrowColor:t,optionTextColor:l,optionTextColorActive:u,optionTextColorDisabled:b,optionCheckMarkColor:c,menuColor:_,menuBoxShadow:f,menuDividerColor:P,menuBorderRadius:y,menuHeight:ue,optionColorHover:ce,optionHeight:Tt,optionFontSize:Ot,loadingColor:Ft,columnWidth:Lt},common:{cubicBezierEaseInOut:Vt}}=h.value;return{"--n-bezier":Vt,"--n-menu-border-radius":y,"--n-menu-box-shadow":f,"--n-menu-height":ue,"--n-column-width":Lt,"--n-menu-color":_,"--n-menu-divider-color":P,"--n-option-height":Tt,"--n-option-font-size":Ot,"--n-option-text-color":l,"--n-option-text-color-disabled":b,"--n-option-text-color-active":u,"--n-option-color-hover":ce,"--n-option-check-mark-color":c,"--n-option-arrow-color":t,"--n-menu-mask-color":sn(_,{alpha:.75}),"--n-loading-color":Ft}}),se=v?un("cascader",void 0,qe,e):void 0;return Object.assign(Object.assign({},Nt),{handleTriggerResize:Pt,mergedStatus:D,selectMenuFollowerRef:ae,cascaderMenuFollowerRef:Z,triggerInstRef:O,selectMenuInstRef:C,cascaderMenuInstRef:R,mergedBordered:n,mergedClsPrefix:o,namespace:r,mergedValue:d,mergedShow:K,showSelectMenu:V,pattern:k,treeMate:I,mergedSize:z,mergedDisabled:B,localizedPlaceholder:ye,selectedOption:F,selectedOptions:be,adjustedTo:ge,menuModel:Ne,handleMenuTabout:xt,handleMenuFocus:kt,handleMenuBlur:St,handleMenuKeydown:pt,handleMenuMousedown:Rt,handleTriggerFocus:yt,handleTriggerBlur:wt,handleTriggerClick:Mt,handleClear:bt,handleDeleteOption:_t,handlePatternInput:Ct,handleKeydown:Ue,focused:m,optionHeight:J,mergedTheme:h,cssVars:v?void 0:qe,themeClass:se==null?void 0:se.themeClass,onRender:se==null?void 0:se.onRender})},render(){const{mergedClsPrefix:e}=this;return s("div",{class:`${e}-cascader`},s(Yt,null,{default:()=>[s(Zt,null,{default:()=>s(Gt,{onResize:this.handleTriggerResize,ref:"triggerInstRef",status:this.mergedStatus,clsPrefix:e,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,focused:this.focused,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onClear:this.handleClear,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onKeydown:this.handleKeydown},{arrow:()=>{var a,n;return(n=(a=this.$slots).arrow)===null||n===void 0?void 0:n.call(a)}})}),s(Xe,{key:"cascaderMenu",ref:"cascaderMenuFollowerRef",show:this.mergedShow&&!this.showSelectMenu,containerClass:this.namespace,placement:this.placement,width:this.options.length?void 0:"target",teleportDisabled:this.adjustedTo===Ce.tdkey,to:this.adjustedTo},{default:()=>{var a;(a=this.onRender)===null||a===void 0||a.call(this);const{menuProps:n}=this;return s(xn,Object.assign({},n,{ref:"cascaderMenuInstRef",class:[this.themeClass,n==null?void 0:n.class],value:this.mergedValue,show:this.mergedShow&&!this.showSelectMenu,menuModel:this.menuModel,style:[this.cssVars,n==null?void 0:n.style],onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onMousedown:this.handleMenuMousedown,onTabout:this.handleMenuTabout}),{action:()=>{var o,r;return(r=(o=this.$slots).action)===null||r===void 0?void 0:r.call(o)},empty:()=>{var o,r;return(r=(o=this.$slots).empty)===null||r===void 0?void 0:r.call(o)}})}}),s(Xe,{key:"selectMenu",ref:"selectMenuFollowerRef",show:this.mergedShow&&this.showSelectMenu,containerClass:this.namespace,width:"target",placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ce.tdkey},{default:()=>{var a;(a=this.onRender)===null||a===void 0||a.call(this);const{filterMenuProps:n}=this;return s(Cn,Object.assign({},n,{ref:"selectMenuInstRef",class:[this.themeClass,n==null?void 0:n.class],value:this.mergedValue,show:this.mergedShow&&this.showSelectMenu,pattern:this.pattern,multiple:this.multiple,tmNodes:this.treeMate.treeNodes,filter:this.filter,labelField:this.labelField,separator:this.separator,style:[this.cssVars,n==null?void 0:n.style]}))}})]}))}});var Tn=Object.defineProperty,On=Object.defineProperties,Fn=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,Ln=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable,nt=(e,a,n)=>a in e?Tn(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,Le=(e,a)=>{for(var n in a||(a={}))Ln.call(a,n)&&nt(e,n,a[n]);if(tt)for(var n of tt(a))Vn.call(a,n)&&nt(e,n,a[n]);return e},In=(e,a)=>On(e,Fn(a));const Ve={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function Kn(e,a){const n=w(()=>{const{width:r,height:v}=e;return In(Le({},Ve.wrapper),{width:r,height:v})}),o=w(()=>Le(Le({},Ve.fullWidth),!a.value&&Ve.hide));return{wrapperStyle:n,containerStyle:o}}function Bn(){const e=je(Ye.__getMonacoInstance()),a=N(!1);let n;return Ae(()=>{e.value||(n=Ye.init(),n.then(r=>e.value=r).catch(r=>{(r==null?void 0:r.type)!=="cancelation"&&(a.value=!0,console.error("Monaco initialization error:",r))}))}),{monacoRef:e,unload:()=>n==null?void 0:n.cancel(),isLoadFailed:a}}function at(e){return typeof e=="function"?e():e}function Be(e){return e===void 0}function vt(e,a,n,o){return $n(e,o)||jn(e,a,n,o)}function $n(e,a){return e.editor.getModel(ht(e,a))}function jn(e,a,n,o){return e.editor.createModel(a,n,o?ht(e,o):void 0)}function ht(e,a){return e.Uri.parse(a)}var An=Object.defineProperty,lt=Object.getOwnPropertySymbols,zn=Object.prototype.hasOwnProperty,En=Object.prototype.propertyIsEnumerable,ot=(e,a,n)=>a in e?An(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,Un=(e,a)=>{for(var n in a||(a={}))zn.call(a,n)&&ot(e,n,a[n]);if(lt)for(var n of lt(a))En.call(a,n)&&ot(e,n,a[n]);return e};const Dn={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var Zn=Q({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,a){const n=new Map,o=je(null),{monacoRef:r,unload:v,isLoadFailed:h}=Bn(),{editorRef:i}=Hn(a,e,r,o),{disposeValidator:g}=qn(a,e,r,i),p=w(()=>!!r.value&&!!i.value),{wrapperStyle:d,containerStyle:S}=Kn(e,p);return vn(()=>{var k,x;(k=g.value)==null||k.call(g),i.value?((x=i.value.getModel())==null||x.dispose(),i.value.dispose()):v()}),ne([()=>e.path,()=>e.value,()=>e.language,()=>e.line],([k,x,z,B],[D,R,C,O])=>{if(p.value){if(k!==D){const T=vt(r.value,x||e.defaultValue||"",z||e.defaultLanguage||"",k||e.defaultPath||"");e.saveViewState&&n.set(D,i.value.saveViewState()),i.value.setModel(T),e.saveViewState&&i.value.restoreViewState(n.get(k)),Be(B)||i.value.revealLine(B);return}i.value.getValue()!==x&&i.value.setValue(x),z!==C&&r.value.editor.setModelLanguage(i.value.getModel(),z),!Be(B)&&B!==O&&i.value.revealLine(B)}}),ne(()=>e.options,k=>i.value&&i.value.updateOptions(k),{deep:!0}),ne(()=>e.theme,k=>r.value&&r.value.editor.setTheme(k)),{containerRef:o,isEditorReady:p,isLoadFailed:h,wrapperStyle:d,containerStyle:S}},render(){const{$slots:e,isEditorReady:a,isLoadFailed:n,wrapperStyle:o,containerStyle:r,className:v}=this;return s("div",{style:o},[!a&&s("div",{style:Dn},n?e.failure?at(e.failure):"load failed":e.default?at(e.default):"loading..."),s("div",{ref:"containerRef",key:"monaco_editor_container",style:r,class:v})])}});function Hn({emit:e},a,n,o){const r=je(null);Ae(()=>{const h=ne(n,()=>{o.value&&n.value&&($e(()=>h()),v())},{immediate:!0})});function v(){var h;if(!o.value||!n.value||r.value)return;e("beforeMount",n.value);const i=a.path||a.defaultPath,g=vt(n.value,a.value||a.defaultValue||"",a.language||a.defaultLanguage||"",i||"");r.value=n.value.editor.create(o.value,Un({model:g,theme:a.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},a.options),a.overrideServices),(h=r.value)==null||h.onDidChangeModelContent(p=>{const d=r.value.getValue();d!==a.value&&(e("update:value",d),e("change",d,p))}),r.value&&!Be(a.line)&&r.value.revealLine(a.line),e("mount",r.value,n.value)}return{editorRef:r}}function qn({emit:e},a,n,o){const r=N(null),v=ne([n,o],()=>{if(n.value&&o.value){$e(()=>v());const h=n.value.editor.onDidChangeMarkers(i=>{var g,p;const d=(p=(g=o.value)==null?void 0:g.getModel())==null?void 0:p.uri;if(d&&i.find(k=>k.path===d.path)){const k=n.value.editor.getModelMarkers({resource:d});e("validate",k)}});r.value=()=>h==null?void 0:h.dispose()}});return{disposeValidator:r}}const Wn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Qn=Q({name:"Question24Regular",render:function(a,n){return ft(),ct("svg",Wn,n[0]||(n[0]=[Ze("g",{fill:"none"},[Ze("path",{d:"M12 4C9.236 4 7 6.236 7 9a.75.75 0 0 0 1.5 0c0-1.936 1.564-3.5 3.5-3.5s3.5 1.564 3.5 3.5c0 .852-.222 1.42-.529 1.86c-.324.463-.767.823-1.302 1.232l-.138.105c-1.01.768-2.281 1.734-2.281 3.803v.25a.75.75 0 0 0 1.5 0V16c0-1.317.714-1.863 1.785-2.682l.046-.035c.527-.403 1.147-.887 1.62-1.564c.49-.701.799-1.57.799-2.719c0-2.764-2.236-5-5-5zm0 17a1 1 0 1 0 0-2a1 1 0 0 0 0 2z",fill:"currentColor"})],-1)]))}}),Xn={class:"min-w-72 w-full"},Gn=Q({__name:"ScriptTemplate",emits:["update:value"],setup(e,{emit:a}){const{t:n}=hn(),o=a,r=N(),v=(p,d)=>{yn(p,(S,k)=>{let x={...S,label:S.title,value:k};S.children&&(x.children=[],v(S.children,x.children)),d.push(x)})},h=async()=>{const[p,d]=await wn();if(!p&&(d==null?void 0:d.status)===0){const S=[];v(d.data,S),r.value=S}},i=p=>s("div",{class:"flex items-center gap-2 pr-2 w-full"},[[s(gn,{trigger:"hover",style:"white-space: pre-line"},{default:()=>s("div",p.desc),trigger:()=>s(pn,{size:"small",class:"!relative !mt-1 !w-5 !h-5",circle:!0,type:"info"},{icon:()=>s(Qn)})}),s("div",s(bn,{style:"max-width: 170px"},{default:()=>p.label}))]]),g=(p,d)=>{o("update:value",d==null?void 0:d.script)};return Ae(()=>{h()}),(p,d)=>{const S=Nn;return ft(),ct("div",Xn,[mn(S,{class:"w-full","check-strategy":"child",placeholder:Ge(n)("expInfo.chooseTpl"),clearable:!0,"show-path":!1,options:Ge(r),"render-label":i,onUpdateValue:g},null,8,["placeholder","options"])])}}});export{Qn as Q,Zn as V,Gn as _};
