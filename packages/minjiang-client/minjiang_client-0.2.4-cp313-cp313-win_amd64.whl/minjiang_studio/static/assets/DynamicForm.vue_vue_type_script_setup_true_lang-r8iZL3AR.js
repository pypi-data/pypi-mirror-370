import{d as j,a as B,V as D,r as v,J as I,aH as O,aa as x,aW as T,aD as s,x as i,e as u,j as t,w as _,c as q,a1 as A,a2 as E,p,m as F,t as R,N as z,bh as H,aJ as L,k as P,aI as W}from"./index-DOdIYOkR.js";import{i as G}from"./json-editor-vue-BF_1KIfc.js";import{N as K}from"./InputNumber-jEPipemT.js";import{_ as M,a as Q}from"./FormItem-BXNzH03D.js";import{_ as X}from"./Alert-CGrj_oNe.js";const te=j({__name:"DynamicForm",props:{cfgs:{},disabled:{type:Boolean}},setup(b,{expose:h}){const N=b,{t:U}=B(),w=D(),c=v(null),a=I({}),y=v(),V=()=>new Promise((r,n)=>{var m;(m=c.value)==null||m.validate(d=>{if(d)n(null);else{const l=JSON.parse(JSON.stringify(a));r(l)}})});return O(()=>N.cfgs,r=>{if(r){const n=JSON.parse(JSON.stringify(r)),m={};x(a,(d,l)=>{delete a[l]}),T(()=>{x(n,(d,l)=>{m[l]={required:d.dtype!==s.text&&!!d.necessary,message:U("common.required")},n[l].default!==null&&(n[l].multi_choose?a[n[l].field]=Array.isArray(n[l].default)?n[l].default:[n[l].default]:a[n[l].field]=n[l].default)}),y.value=m})}},{deep:!0,immediate:!0}),h({submit:V}),(r,n)=>{const m=X,d=z,l=P,f=K,k=W,S=Q,J=M;return u(),i(J,{model:t(a),rules:t(y),ref_key:"formRef",ref:c,disabled:r.disabled},{default:_(()=>[(u(!0),q(A,null,E(r.cfgs,(e,C)=>(u(),i(S,{key:C,label:e.dtype===t(s).text?"":e.title,path:e.field},{default:_(()=>[e.dtype===t(s).text?(u(),i(m,{key:0,class:"w-full",type:"info","show-icon":!1},{default:_(()=>[F(R(e==null?void 0:e.title),1)]),_:2},1024)):p("",!0),e.dtype===t(s).enum&&e.options?(u(),i(d,{key:1,value:t(a)[e.field],"onUpdate:value":o=>t(a)[e.field]=o,options:t(H)(e.options),clearable:"",filterable:"",multiple:e.multi_choose},null,8,["value","onUpdate:value","options","multiple"])):p("",!0),e.dtype===t(s).dict||e.dtype===t(s).list?(u(),i(t(G),{key:2,class:L(["w-full",[t(w).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:t(a)[e.field],"onUpdate:modelValue":o=>t(a)[e.field]=o,mode:"text"},null,8,["class","modelValue","onUpdate:modelValue"])):p("",!0),e.dtype===t(s).str?(u(),i(l,{key:3,value:t(a)[e.field],"onUpdate:value":o=>t(a)[e.field]=o,clearable:"",maxlength:e.max_length,type:"textarea"},null,8,["value","onUpdate:value","maxlength"])):p("",!0),e.dtype===t(s).int?(u(),i(f,{key:4,min:e.min,max:e.max,precision:0,class:"w-full",value:t(a)[e.field],"onUpdate:value":o=>t(a)[e.field]=o},null,8,["min","max","value","onUpdate:value"])):p("",!0),e.dtype===t(s).float?(u(),i(f,{key:5,min:e.min,max:e.max,value:t(a)[e.field],"onUpdate:value":o=>t(a)[e.field]=o,class:"w-full"},null,8,["min","max","value","onUpdate:value"])):p("",!0),e.dtype===t(s).bool?(u(),i(k,{key:6,value:t(a)[e.field],"onUpdate:value":o=>t(a)[e.field]=o},null,8,["value","onUpdate:value"])):p("",!0)]),_:2},1032,["label","path"]))),128))]),_:1},8,["model","rules","disabled"])}}});export{te as _};
