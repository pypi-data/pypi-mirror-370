function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderTemplateEditor-DTfguPum.js","./index-B0j9NrKX.js","./index-B68VcF-V.css","./useComponentDescription-Bd13VunY.js","./WdsDropdownMenu-CYpFVZJk.js","./WdsCheckbox-CZXSnv_W.js","./WdsCheckbox-DKvpPA4D.css","./WdsDropdownMenu-BT8vFJ33.css","./useKeyValueEditor-QjDZHrap.js","./useKeyValueEditor-CsemOh8D.css","./BuilderTemplateEditor-CYSDeWgV.css","./BuilderEmbeddedCodeEditor-xMfsf1zc.js","./BuilderEmbeddedCodeEditor-CXloIist.css","./BuilderGraphSelect-DTJ5FD0U.js","./useListResources-6YGSRrqG.js","./BuilderGraphSelect-D7B61d5s.css","./BuilderApplicationSelect-CbaiJRC3.js","./BuilderApplicationSelect-XaM1D5fv.css","./BuilderModelSelect-EzKqG3wd.js","./BuilderModelSelect-Dc4IPLp2.css","./BuilderSettingsArtifactAPITriggerDetails-MJBIFCdx.js","./BuilderSettingsArtifactAPITriggerDetails-DnX66iRg.css","./BuilderSettingsHandlers-BUWIJL6L.js","./BuilderApp-D5jO03Vr.js","./marked.esm-273vDTCT.js","./BuilderApp-XGRxQGFR.css","./useBlueprintRun-BZcZzP43.js","./BuilderSettingsHandlers-DJPeASfz.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as k,R as p,a0 as Xe,aS as Qe,C as Ze,d as A,i as R,a as D,r as H,o as d,b as $,ar as et,z as O,x as w,W as J,an as ne,y as L,at as Ce,ak as ie,am as ye,aE as M,aq as se,f as C,D as j,g as E,S as x,E as X,_ as P,al as z,Q as Y,m as U,q as re,G as Ee,aT as Ue,K as Ke,s as ce,a5 as tt,aK as nt,w as ve,aU as ot,a7 as je,aL as lt,L as oe,aV as at,aW as it,J as Le,A as ue,t as Q,ay as G,aX as ge,$ as rt,aY as Ie,a6 as me,U as Ve,l as xe,as as Z,v as he,aZ as st,a_ as Te,a$ as W,b0 as ut,b1 as dt,b2 as ct,b3 as pt,b4 as vt,aD as Ne,F as N,aJ as ze,u as Oe,b5 as Ye,b6 as Fe,aH as pe,aR as mt,b7 as ft,b8 as yt,b9 as gt,a3 as _t}from"./index-B0j9NrKX.js";import{u as Ge}from"./useComponentDescription-Bd13VunY.js";import{a as Be,W as bt}from"./WdsDropdownMenu-CYpFVZJk.js";import{W as te,u as St}from"./useKeyValueEditor-QjDZHrap.js";import{W as ht}from"./WdsCheckbox-CZXSnv_W.js";function*fe(e,l="",t=new WeakSet){if(!(typeof e!="object"||e===null)&&!t.has(e)){t.add(e);for(const s in e){const o=l?`${l}.${s}`:s;yield o,typeof e[s]=="object"&&e[s]!==null&&!Array.isArray(e[s])&&(yield*fe(e[s],o,t))}}}function*kt(e,l){const t=new Set;function*s(o){var n;if(t.has(o))return;t.add(o);const i=e.getComponentById(o);if(i)for(const y of e.getComponentsNested(i.parentId))(n=y.outs)!=null&&n.some(v=>v.toNodeId===o)&&(yield y,yield*s(y.id))}yield*s(l)}function It(e,l=void 0,t=Xe()){const s=k(()=>new Set(fe(e.userStateInitial.value))),o=k(()=>{try{return Et(e,s.value)}catch(y){return t.error("Cannot compute blueprintsSetStates",y),{}}}),i=k(()=>{try{return Ct(e,s.value)}catch(y){return t.error("Cannot compute bindings",y),{}}}),n=k(()=>{try{return Bt(e,p(l))}catch(y){return t.error("Cannot compute blueprintsResults",y),{}}});return{blueprintsSetStates:o,bindings:i,blueprintsResults:n}}function Bt(e,l,t=new Set){var o;const s={};for(const i of kt(e,l)){const n=i.type,y=e.getComponentDefinition(i.type);if(!y||!(i.type&&!Qe.has(n)&&i.type.startsWith("blueprints_")&&((o=y==null?void 0:y.outs)==null?void 0:o.success)!==void 0))continue;const c=`results.${i.id}`;c&&!t.has(c)&&(s[c]??(s[c]={components:[]}),s[c].components.push(i))}return s}function Ct(e,l=new Set){var s;const t={};for(const o of Ze)for(const i of e.getComponentsNested(o)){const n=(s=i.binding)==null?void 0:s.stateRef;n&&!l.has(n)&&(t[n]??(t[n]={components:[]}),t[n].components.push(i))}return t}function Et(e,l=new Set){var o;function*t(){for(const i of e.getComponentsNested("blueprints_root"))i.type==="blueprints_setstate"&&i.content&&(yield i)}const s={};for(const i of t()){const n=(o=i.content)==null?void 0:o.element;!n||typeof n!="string"||l.has(n)||(s[n]??(s[n]={components:[]}),s[n].components.push(i))}return s}const we=A({__name:"BuilderStateSelectorDropdownComponent",props:{componentId:{type:String,required:!0},path:{type:String,required:!0},selected:{type:Boolean,required:!1}},setup(e){const l=e,t=R(D.core),s=R(D.builderManager),o=H(!1),i=k(()=>t.getComponentById(l.componentId)),{name:n,possibleImageUrls:y,previewText:v}=Ge(t,i),c=k(()=>({icon:y.value,label:l.path,detail:v.value||n.value,value:l.path})),{goToComponentParentPage:h}=Ce(t,s);async function S(){await h(l.componentId),s.setSelection(l.componentId)}return(r,m)=>(d(),$(Be,{class:"BuilderStateSelectorDropdownItemComponent",option:c.value,selected:e.selected,"show-custom-action":"",onMousemove:m[1]||(m[1]=f=>o.value=!0),onMouseout:m[2]||(m[2]=f=>o.value=!1)},et({_:2},[o.value?{name:"action",fn:O(()=>[w(J,{variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:ne(S,["prevent"]),onMousemove:m[0]||(m[0]=f=>o.value=!0)},{default:O(()=>[w(L,{name:"square-dashed-mouse-pointer"})]),_:1})]),key:"0"}:void 0]),1032,["option","selected"]))}}),xt={class:"BuilderStateSelectorDropdown"},wt={key:1,class:"BuilderStateSelectorDropdown__empty"},$t={key:2,class:"BuilderStateSelectorDropdown__section"},Tt={key:3,class:"BuilderStateSelectorDropdown__section"},Ft={key:4,class:"BuilderStateSelectorDropdown__section"},Vt={key:5,class:"BuilderStateSelectorDropdown__section"},Ot={key:6,class:"BuilderStateSelectorDropdown__section"},qt=A({__name:"BuilderStateSelectorDropdown",props:ie({componentId:{type:String,required:!1,default:void 0},query:{type:String,required:!1,default:""},allowCreate:{type:Boolean,required:!1},hideSecrets:{type:Boolean,required:!1},hideBlueprintResults:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=e,t=R(D.core),s=R(D.secretsManager),o=ye(e,"modelValue"),i=It(t,M(l,"componentId")),n=k(()=>{const f=[];for(const b of fe(t.userStateInitial.value))l.query&&!b.includes(l.query)||f.push({value:b,label:b,icon:"code",iconBgColor:se.Green2});return f.sort((b,I)=>b.label.localeCompare(I.label))}),y=k(()=>{if(l.hideSecrets)return[];const f=[];for(const b of fe(s.secrets.value)){const I=`vault.${b}`;l.query&&!I.includes(l.query)||f.push({value:`vault.${b}`,label:b,icon:"key-round",iconBgColor:se.Yellow2})}return f.sort((b,I)=>b.label.localeCompare(I.label))}),v=k(()=>S(i.bindings.value)),c=k(()=>S(i.blueprintsSetStates.value)),h=k(()=>l.hideBlueprintResults?[]:S(i.blueprintsResults.value));function S(f){return Object.entries(f).map(([b,{components:I}])=>{for(const q of I)if(q.id!==l.componentId)return{componentId:q.id,path:b}}).filter(b=>!(!b||l.query&&!b.path.includes(l.query)))}const r=k(()=>!l.allowCreate||!l.query||l.query.endsWith(".")?!1:!(n.value.some(b=>b.value===l.query)||y.value.some(b=>b.value===l.query)||h.value.some(b=>b.path===l.query)||v.value.some(b=>b.path===l.query))),m=k(()=>!!(n.value.length||c.value.length||v.value.length||h.value.length||y.value.length));return(f,b)=>(d(),C("div",xt,[r.value?(d(),C(j,{key:0},[b[1]||(b[1]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," Add new variable ",-1)),w(Be,{option:{value:e.query,label:e.query,icon:"plus",iconBgColor:p(se).Blue4,iconColor:p(se).White},onClick:b[0]||(b[0]=ne(I=>o.value=e.query,["stop"]))},null,8,["option"])],64)):m.value?x("",!0):(d(),C("div",wt," No result ")),c.value.length?(d(),C("div",$t,[b[2]||(b[2]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," Set states ",-1)),(d(!0),C(j,null,X(c.value,I=>(d(),$(we,{key:I.path,path:I.path,"component-id":I.componentId,selected:I.path===o.value,onClick:ne(q=>o.value=I.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),v.value.length?(d(),C("div",Tt,[b[3]||(b[3]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," Interface variables ",-1)),(d(!0),C(j,null,X(v.value,I=>(d(),$(we,{key:I.path,path:I.path,"component-id":I.componentId,selected:I.path===o.value,onClick:ne(q=>o.value=I.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),!e.hideBlueprintResults&&h.value.length?(d(),C("div",Ft,[b[4]||(b[4]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," block results ",-1)),(d(!0),C(j,null,X(h.value,I=>(d(),$(we,{key:I.path,path:I.path,"component-id":I.componentId,selected:I.path===o.value,onClick:ne(q=>o.value=I.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),!e.hideSecrets&&y.value.length?(d(),C("div",Vt,[b[5]||(b[5]=E("p",{class:"BuilderStateSelectorDropdown__section__title"},"Secrets",-1)),(d(!0),C(j,null,X(y.value,I=>(d(),$(Be,{key:I.value,option:I,selected:I.value===o.value,onClick:ne(q=>o.value=I.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):x("",!0),n.value.length?(d(),C("div",Ot,[b[6]||(b[6]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," main.py variables ",-1)),(d(!0),C(j,null,X(n.value,I=>(d(),$(Be,{key:I.value,option:I,selected:I.value===o.value,onClick:ne(q=>o.value=I.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):x("",!0)]))}}),Mt=P(qt,[["__scopeId","data-v-d28f7ad6"]]),At=A({__name:"BuilderTemplateInputTemplate",props:ie({leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},invalid:{type:Boolean,required:!1},variant:{type:String,default:void 0},autofocus:{type:Boolean},multiline:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:ie({rightIconClick:()=>!0,input:e=>!!e},["update:modelValue"]),setup(e,{expose:l,emit:t}){const s=z({loader:()=>Y(()=>import("./BuilderTemplateEditor-DTfguPum.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)}),o=ye(e,"modelValue"),i=e,n=t;l({focus:r,getSelection:S,value:o,setSelectionEnd:h,setSelectionStart:c});const y=U("input");re(()=>{i.autofocus&&r()});async function v(m){o.value=m,n("input",{target:{value:m}})}function c(m){var f;(f=y.value)==null||f.setSelectionStart(m)}function h(m){var f;(f=y.value)==null||f.setSelectionEnd(m)}function S(){var m;return(m=y.value)==null?void 0:m.getSelection()}function r(){var m;(m=y.value)==null||m.focus()}return(m,f)=>(d(),$(Ue,{"left-icon":e.leftIcon,"right-icon":e.rightIcon,invalid:e.invalid,variant:e.variant,class:Ee(["BuilderTemplateInputTemplate",{"BuilderTemplateInputTemplate--singleline":!e.multiline,"BuilderTemplateInputTemplate--multiline":e.multiline}]),onRightIconClick:f[0]||(f[0]=b=>m.$emit("rightIconClick")),onClick:r},{default:O(()=>[w(p(s),{ref_key:"input",ref:y,class:"BuilderTemplateInputTemplate__input",multiline:e.multiline,"model-value":o.value,"onUpdate:modelValue":v},null,8,["multiline","model-value"])]),_:1},8,["left-icon","right-icon","invalid","variant","class"]))}}),Rt=P(At,[["__scopeId","data-v-2789dd2e"]]),Dt={class:"BuilderTemplateInputState__content"},Wt=A({__name:"BuilderTemplateInputState",props:ie({rightIcon:{type:String,required:!1,default:void 0}},{modelValue:{type:String},modelModifiers:{}}),emits:ie({rightIconClick:()=>!0},["update:modelValue"]),setup(e,{expose:l}){l({focus:r,setSelectionStart:c,setSelectionEnd:h,getSelection:S});const t=R(D.core),s=U("input"),o=ye(e,"modelValue"),i=H(!1),n=k(()=>!o.value&&!i.value),y=k(()=>new Set(fe(t.userStateInitial.value))),v=k(()=>({opacity:n.value?0:void 0,backgroundColor:y.value.has(o.value)?se.Green2:se.Gray1}));function c(m){s.value&&(s.value.selectionStart=m)}function h(m){s.value&&(s.value.selectionEnd=m)}function S(){var m,f;return{selectionStart:(m=s.value)==null?void 0:m.selectionStart,selectionEnd:(f=s.value)==null?void 0:f.selectionEnd}}function r(){var m;(m=s.value)==null||m.focus()}return(m,f)=>(d(),$(Ue,{class:"BuilderTemplateInputState","left-icon":n.value?"at-sign":void 0,"right-icon":e.rightIcon,onRightIconClick:f[3]||(f[3]=b=>m.$emit("rightIconClick")),onClick:f[4]||(f[4]=b=>p(s).focus())},{default:O(()=>[E("div",Dt,[E("div",{class:"BuilderTemplateInputState__content__tag",style:Ke(v.value)},[f[5]||(f[5]=E("span",null,"@",-1)),ce(E("input",{ref_key:"input",ref:s,"onUpdate:modelValue":f[0]||(f[0]=b=>o.value=b),type:"text",onFocus:f[1]||(f[1]=b=>i.value=!0),onBlur:f[2]||(f[2]=b=>i.value=!1)},null,544),[[tt,o.value]])],4)])]),_:1},8,["left-icon","right-icon"]))}}),Pt=P(Wt,[["__scopeId","data-v-f03927da"]]);function Ut(e,l){const t=e.lastIndexOf("@");if(t!==-1){let s=t;const i=e.slice(t).indexOf("{");return i!==-1&&(s+=i+1),e.indexOf("}",s)!==-1?e.substring(0,t)+`@{${l}}`:e.slice(0,t)+`@{${l}}`}return e+`@{${l}}`}function Kt(e){const l=e.lastIndexOf("@");if(l===-1)return"";const t=e.slice(l);return t.includes("}")||t.includes(`
`)||!t.startsWith("@{")&&t.includes(" ")?"":t.replace(/^@{?/,"")}function jt(e,l){return function(s){var v;if(!e.value)return;let o=0;if(s.key==="ArrowDown"?o=1:s.key==="ArrowUp"&&(o=-1),o===0)return;const i=Array.from(e.value.querySelectorAll("button")).filter(c=>!c.hasAttribute("disabled")&&c.offsetParent!==null);let n=o===1?i[0]:i.at(-1);const y=i.indexOf(document.activeElement);y!==-1&&(n=i[y+o]),n?(n.focus(),s.preventDefault()):(v=l==null?void 0:l.nextFocusNotFound)==null||v.call(l)}}const Lt=A({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},componentId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"template"},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},readonly:{type:Boolean}},emits:["input","update:value"],setup(e,{expose:l,emit:t}){const s=e,o=t,i=U("root"),n=U("input"),y=U("dropdown"),v=H(),{floatingStyles:c,update:h}=nt(i,y,{placement:"bottom-start",middleware:[at(),it({apply({rects:a,elements:u}){Object.assign(u.floating.style,{minWidth:`${a.reference.width}px`,maxWidth:`${a.reference.width}px`})}})],strategy:"fixed"});S();function S(){let a;function u(){a&&a(),a=void 0}ve(y,()=>{u(),y.value&&(a=ot(n,y.value,h))}),je(()=>u())}l({focus:()=>{var a;return(a=n.value)==null?void 0:a.focus()}});const r=k(()=>s.options?Object.entries(s.options).reduce((a,[u,F])=>(u.includes(s.value)&&a.push({value:u,label:F}),a),[]):[]),m=jt(y,{nextFocusNotFound:()=>{var a;v.value=void 0,(a=n.value)==null||a.focus()}});function f(){r.value.length>0&&(v.value="static")}const b=k(()=>{var B,T;if(s.type==="state")return s.value;let a=((B=n.value)==null?void 0:B.value)??"";if(!a)return"";const{selectionStart:u}=((T=n.value)==null?void 0:T.getSelection())??{},F=a.slice(0,u);return Kt(F)}),I=lt(i);ve(I,async()=>{I.value||(await oe(),setTimeout(()=>{v.value=void 0},300))});async function q(a){var K,le;let u=((K=n.value)==null?void 0:K.value)??"";const{selectionStart:F,selectionEnd:B}=((le=n.value)==null?void 0:le.getSelection())??{};let T=F??u.length;if(s.type==="template"){const be=u.slice(0,F),Se=u.slice(B).replace(/^(\})+/,""),de=Ut(be,a);u=`${de}${Se}`,T=de.length}else u=a,T=a.length;o("input",{target:{value:u}}),o("update:value",u),n.value&&(n.value.focus(),v.value=void 0,await oe(),n.value.setSelectionStart(T))}async function V(a){o("input",{target:{value:a}}),o("update:value",a),n.value&&(n.value.focus(),v.value=void 0,await oe(),n.value.setSelectionStart(a.length))}function _(a){g({target:{value:a}})}function g(a){var K;let u=String(a.target.value??"");if(o("input",a),o("update:value",u),s.type==="state"){v.value="template";return}if(r.value.some(le=>le.value.includes(u))){v.value="static";return}const{selectionStart:F}=((K=n.value)==null?void 0:K.getSelection())??{},B=u.slice(0,F),T=!!B.match(/@\{([^}{@]*)$/)||B.endsWith("@")||!!b.value;v.value=T?"template":void 0}return(a,u)=>(d(),C("div",{ref_key:"root",ref:i,class:"BuilderTemplateInput",onKeydown:u[2]||(u[2]=ne((...F)=>p(m)&&p(m)(...F),["stop"]))},[e.type==="template"?(d(),$(Rt,{key:0,ref_key:"input",ref:n,"model-value":s.value,placeholder:s.placeholder,list:s.options?`list-${s.inputId}`:void 0,invalid:e.error!==void 0,autofocus:e.autofocus,readonly:e.readonly,multiline:e.multiline,onInput:g,onClick:f},null,8,["model-value","placeholder","list","invalid","autofocus","readonly","multiline"])):x("",!0),e.type==="state"?(d(),$(Pt,{key:1,ref_key:"input",ref:n,"right-icon":v.value?"chevron-up":"chevron-down","model-value":s.value,onRightIconClick:u[0]||(u[0]=F=>v.value=v.value?void 0:"template"),"onUpdate:modelValue":_,onClick:u[1]||(u[1]=F=>p(n).focus())},null,8,["right-icon","model-value"])):x("",!0),v.value?(d(),C("div",{key:2,ref_key:"dropdown",ref:y,class:"BuilderTemplateInput__dropdown",style:Ke(p(c))},[v.value==="template"?(d(),$(Mt,{key:0,"hide-secrets":e.type==="state","hide-blueprint-results":e.type==="state","allow-create":e.type==="state",query:b.value,"component-id":e.componentId,"onUpdate:modelValue":q},null,8,["hide-secrets","hide-blueprint-results","allow-create","query","component-id"])):r.value.length?(d(),$(bt,{key:1,options:r.value,onSelect:V},null,8,["options"])):x("",!0)],4)):x("",!0)],544))}}),ee=P(Lt,[["__scopeId","data-v-8594b4ef"]]),Nt=["disabled","data-writer-tooltip"],zt={key:0,class:"WdsTab__indicator"},Yt=A({__name:"WdsTab",props:{disabled:{type:[Boolean,String],default:void 0},selected:{type:Boolean},variant:{type:String,required:!0}},emits:{click:()=>!0},setup(e){const l=e,t=k(()=>typeof l.disabled=="string"?l.disabled:void 0);return(s,o)=>(d(),C("button",{class:Ee(["WdsTab",{"WdsTab--disabled":e.disabled,"WdsTab--selected":e.selected,"WdsTab--variant-bar":e.variant==="bar","WdsTab--variant-chip":e.variant==="chip"}]),type:"button",disabled:!!e.disabled,"data-writer-tooltip":t.value,onClick:o[0]||(o[0]=i=>s.$emit("click"))},[Le(s.$slots,"default",{},void 0,!0),e.variant==="bar"?(d(),C("div",zt)):x("",!0)],10,Nt))}}),Gt=P(Yt,[["__scopeId","data-v-db73c62c"]]),Jt=A({__name:"WdsTabs",props:ie({tabs:{type:Array,required:!0},variant:{type:String,default:"chip"}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=ye(e,"modelValue");return(t,s)=>(d(),C("div",{class:Ee(["WdsTabs",{"WdsTabs--variant-bar":e.variant==="bar","WdsTabs--variant-chip":e.variant==="chip"}])},[(d(!0),C(j,null,X(e.tabs,o=>(d(),$(Gt,{key:o.value,value:o.value,variant:e.variant,disabled:o.disabled,selected:o.value===l.value,onClick:i=>l.value=o.value},{default:O(()=>[ue(Q(o.label),1)]),_:2},1032,["value","variant","disabled","selected","onClick"]))),128))],2))}}),ae=P(Jt,[["__scopeId","data-v-6e6e5572"]]),_e=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),Ht=["data-automation-key"],Xt={key:0,class:"main"},Qt={key:0,class:"pickerContainer"},Zt=A({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-B0j9NrKX.js").then(_=>_.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=U("rootEl"),s=U("pickerEl"),o=U("freehandInputEl"),i=[{key:"start",label:"Left",match:_=>_=="start",default:"start",icon:"align-left"},{key:"center",label:"Center",match:_=>_=="center",default:"center",icon:"align-center"},{key:"end",label:"Right",match:_=>_=="end",default:"end",icon:"align-right"}],n=[{key:"start",label:"Top",match:_=>_=="start",default:"start",icon:"arrow-up-to-line"},{key:"center",label:"Center",match:_=>_=="center",default:"center",icon:"fold-vertical"},{key:"end",label:"Bottom",match:_=>_=="end",default:"end",icon:"arrow-down-to-line"}],y={pick:s,css:o,default:null},v=e,c=G({componentId:M(v,"componentId"),fieldKey:M(v,"fieldKey")}),h=k(()=>v.direction=="vertical"?n:v.direction=="horizontal"?i:n),S=k(()=>h.value.map(_=>({value:_.key,label:_.label,icon:_.icon}))),r=k(()=>{const _=c.value;for(const g in h.value)if(_&&h.value[g].match(_))return h.value[g].key;return null}),f=H((()=>{if(!c.value)return"default";for(const _ in h.value)if(h.value[_].match(c.value))return"pick";return"css"})()),b=()=>{var g;const _=(g=y[f.value])==null?void 0:g.value;_&&(_.focus(),typeof _.selectionStart=="number"&&(_.selectionStart=_.selectionEnd=_.value.length))},I=async _=>{f.value!=_&&(f.value=_,await oe(),b(),_==="default"&&(c.value=""))},q=_=>{for(const g in h.value)h.value[g].key==_&&(c.value=h.value[g].default)},V=_=>{c.value=_.target.value};return re(()=>{t.value.addEventListener("focus",b)}),ge(()=>{t.value.removeEventListener("focus",b)}),(_,g)=>(d(),C("div",{ref_key:"rootEl",ref:t,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":v.fieldKey},[w(ae,{tabs:p(_e),"model-value":f.value,"onUpdate:modelValue":I},null,8,["tabs","model-value"]),f.value=="pick"||f.value=="css"?(d(),C("div",Xt,[f.value=="pick"?(d(),C("div",Qt,[w(p(l),{ref_key:"pickerEl",ref:s,"model-value":r.value,options:S.value,"onUpdate:modelValue":q},null,8,["model-value","options"])])):x("",!0),f.value=="css"?(d(),$(ee,{key:1,ref_key:"freehandInputEl",ref:o,value:p(c),error:e.error,onInput:V},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Ht))}}),De=P(Zt,[["__scopeId","data-v-6a36fb0b"]]),en=["data-automation-key"],tn={key:0,class:"main"},nn={key:0,class:"pickerContainer"},on=["value"],ln=A({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=U("rootEl"),t=U("pickerEl"),s=U("freehandInputEl"),o={pick:t,css:s,default:null},i=e,n=G({componentId:M(i,"componentId"),fieldKey:M(i,"fieldKey")}),v=H((()=>{const r=n.value;return r?/#[A-Fa-f0-9]{6}/.test(r)?"pick":"css":"default"})()),c=()=>{var m;const r=(m=o[v.value])==null?void 0:m.value;r&&(r.focus(),typeof r.selectionStart=="number"&&(r.selectionStart=r.selectionEnd=r.value.length))},h=async r=>{v.value!=r&&(v.value=r,await oe(),c(),r==="default"&&(n.value=""))},S=r=>n.value=r.target.value;return re(()=>{l.value.addEventListener("focus",c)}),ge(()=>{l.value.removeEventListener("focus",c)}),(r,m)=>(d(),C("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":e.fieldKey},[w(ae,{tabs:p(_e),"model-value":v.value,"onUpdate:modelValue":h},null,8,["tabs","model-value"]),v.value=="pick"||v.value=="css"?(d(),C("div",tn,[v.value=="pick"?(d(),C("div",nn,[E("input",{ref_key:"pickerEl",ref:t,type:"color",value:p(n),onInput:S},null,40,on)])):x("",!0),v.value=="css"?(d(),$(ee,{key:1,ref_key:"freehandInputEl",ref:s,value:p(n),error:e.error,onInput:S},null,8,["value","error"])):x("",!0)])):x("",!0)],8,en))}}),an=P(ln,[["__scopeId","data-v-5432e5c5"]]);function $e(e){return typeof e=="string"&&e.startsWith("@{")&&e.endsWith("}")}function Je({fieldViewModel:e}){const l=H($e(e.value)),t=H({binding:$e(e.value)?e.value:"",noneBinding:l.value?"":e.value});function s(){l.value?($e(e.value)&&(t.value.binding=e.value),e.value=t.value.noneBinding,l.value=!1):(t.value.noneBinding=e.value,e.value=t.value.binding,l.value=!0)}return{isBindingMode:rt(l),toggleBindingMode:s}}const rn=["data-automation-key"],sn=A({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},fieldControl:{type:String,required:!1,default:Ie.Text},defaultValue:{type:String,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},type:{type:String,required:!1,default:"template"}},setup(e){const l=R(D.core),t=e,s=G({componentId:M(t,"componentId"),fieldKey:M(t,"fieldKey"),defaultValue:M(t,"defaultValue")}),o=k(()=>`${t.componentId}-${t.fieldKey}`),i={uiComponents:()=>{const r=l.getComponents(void 0,{sortedByPosition:!0}).filter(f=>l.isChildOf("root",f.id)),m={};return r.forEach(f=>{m[f.id]=f.id}),m},uiComponentsWithEvents:()=>l.getComponents(void 0,{sortedByPosition:!0}).filter(r=>l.isChildOf("root",r.id)).filter(r=>!!l.getComponentDefinition(r.type).events).reduce((r,m)=>(r[m.id]=m.id,r),{}),eventTypes:(r,m)=>{var V;const f=(V=r.getComponentById(m).content)==null?void 0:V.refComponentId,b=l.getComponentById(f);if(!b)return{};const I=r.getComponentDefinition(b.type);return Object.fromEntries(Object.keys(I.events??{}).map(_=>[_,_]))}},n=k(()=>{const r=l.getComponentById(t.componentId),f=l.getComponentDefinition(r.type).fields[t.fieldKey];return f.options?typeof f.options=="function"?f.options(l,t.componentId):typeof f.options=="string"?i==null?void 0:i[f.options](l,t.componentId):f.options:{}}),y=k(()=>["state","state-template"].includes(t.type)?"state":"template"),v=k(()=>S(s.value)),c=r=>{s.value=h(r.target.value)};function h(r){return typeof r!="string"?"":t.type==="state-template"?`@{${r}}`:r}function S(r){return typeof r!="string"?"":t.type==="state-template"?r.replace(/^@{/,"").replace(/}$/,""):r}return(r,m)=>(d(),C("div",{class:"BuilderFieldsText","data-automation-key":t.fieldKey},[e.fieldControl==p(Ie).Text?(d(),$(ee,{key:0,class:"content","component-id":e.componentId,"input-id":o.value,value:v.value,placeholder:e.defaultValue,type:y.value,options:n.value,error:e.error,autofocus:e.autofocus,onInput:c},null,8,["component-id","input-id","value","placeholder","type","options","error","autofocus"])):e.fieldControl==p(Ie).Textarea?(d(),$(ee,{key:1,multiline:"",variant:"text",class:"content","input-id":o.value,"component-id":e.componentId,value:v.value,placeholder:e.defaultValue,type:y.value,error:e.error,autofocus:e.autofocus,onInput:c},null,8,["input-id","component-id","value","placeholder","type","error","autofocus"])):x("",!0)],8,rn))}}),qe=P(sn,[["__scopeId","data-v-aa053130"]]),un=["data-automation-key"],dn=A({__name:"BuilderFieldsCheckbox",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,default:void 0},unit:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0}},setup(e){const l=e,t=G({componentId:M(l,"componentId"),fieldKey:M(l,"fieldKey")}),{isBindingMode:s,toggleBindingMode:o}=Je({fieldViewModel:t}),i=k({get:()=>t.value==="yes",set:n=>{t.value=n?"yes":"no"}});return(n,y)=>p(s)?(d(),$(te,{key:0,"is-binding-button-shown":"","is-binding-enabled":p(s),label:e.label,unit:e.unit,hint:e.hint,error:e.error,"data-automation-key":l.fieldKey,"onUpdate:isBindingEnabled":p(o)},{default:O(()=>[w(qe,{type:"state-template","component-id":e.componentId,"field-key":e.fieldKey,error:e.error,"default-value":""},null,8,["component-id","field-key","error"])]),_:1},8,["is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"])):(d(),C("div",{key:1,class:"BuilderFieldsCheckbox","data-automation-key":l.fieldKey},[w(ht,{modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=v=>i.value=v),label:e.label,detail:e.hint,invalid:!!e.error},null,8,["modelValue","label","detail","invalid"]),w(J,{size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Bind to a variable",onClick:p(o)},{default:O(()=>[w(L,{name:"at-sign"})]),_:1},8,["onClick"])],8,un))}}),cn=P(dn,[["__scopeId","data-v-d540f2ac"]]),pn={key:1,class:"BuilderFieldsKeyValueModal__assistedEntries"},vn={key:0,class:"BuilderFieldsKeyValueModal__assistedEntries__form"},mn=A({__name:"BuilderFieldsKeyValueModal",props:{data:{type:String,required:!0}},emits:{submit:e=>typeof e=="string",close:()=>!0},setup(e,{emit:l}){const t=z({loader:()=>Y(()=>import("./BuilderEmbeddedCodeEditor-xMfsf1zc.js").then(q=>q.B),__vite__mapDeps([11,1,2,12]),import.meta.url)}),s=e,{mode:o,assistedEntries:i,freehandValue:n,isValid:y,currentValue:v,addAssistedEntry:c,updateAssistedEntryValue:h,updateAssistedEntryKey:S,removeAssistedEntry:r,getAssistedEntryError:m}=St(s.data),f=l,b=k(()=>[{desc:"Save",fn:()=>f("submit",v.value),disabled:s.data===v.value||!y.value}]),I=[{label:"List",value:"assisted"},{label:"JSON",value:"freehand"}];return(q,V)=>(d(),$(Ve,{title:"Category key values","display-close-button":"",actions:b.value,onClose:V[2]||(V[2]=_=>q.$emit("close"))},{titleActions:O(()=>[w(ae,{modelValue:p(o),"onUpdate:modelValue":V[0]||(V[0]=_=>me(o)?o.value=_:null),class:"BuilderFieldsKeyValueModal__tabs",tabs:I},null,8,["modelValue"])]),default:O(()=>[p(o)==="freehand"?(d(),$(p(t),{key:0,modelValue:p(n),"onUpdate:modelValue":V[1]||(V[1]=_=>me(n)?n.value=_:null),class:"BuilderFieldsKeyValueModal__freehand",variant:"minimal",language:"json"},null,8,["modelValue"])):x("",!0),p(o)==="assisted"?(d(),C("div",pn,[p(o)==="assisted"?(d(),C("div",vn,[V[3]||(V[3]=E("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelKey"}," Key ",-1)),V[4]||(V[4]=E("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelValue"}," Value ",-1)),(d(!0),C(j,null,X(p(i),(_,g)=>(d(),C(j,{key:g},[w(te,{error:p(m)(g)},{default:O(()=>[w(ee,{placeholder:"Type a key...",value:_.key,error:p(m)(g),"onUpdate:value":a=>p(S)(g,a)},null,8,["value","error","onUpdate:value"])]),_:2},1032,["error"]),w(te,null,{default:O(()=>[w(ee,{placeholder:"Type a value...",value:_.value,"onUpdate:value":a=>p(h)(g,a)},null,8,["value","onUpdate:value"])]),_:2},1024),E("div",null,[w(J,{variant:"neutral",size:"smallIcon",class:"BuilderFieldsKeyValueModal__assistedEntries__form__deleteBtn",onClick:a=>p(r)(g)},{default:O(()=>[w(L,{name:"trash-2"})]),_:2},1032,["onClick"])])],64))),128))])):x("",!0),w(J,{variant:"special",size:"small",onClick:p(c)},{default:O(()=>[w(L,{name:"plus"}),V[5]||(V[5]=ue(" Add a pair "))]),_:1},8,["onClick"])])):x("",!0)]),_:1},8,["actions"]))}}),fn=P(mn,[["__scopeId","data-v-4e74be91"]]),yn=["data-automation-key"],gn={class:"BuilderFieldsKeyValue__toolbar"},_n={key:1,class:"BuilderFieldsKeyValue__listEmpty"},bn={key:2,class:"BuilderFieldsKeyValue__list"},Sn=["data-writer-tooltip"],hn=["data-writer-tooltip"],kn=A({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=e,t=G({componentId:M(l,"componentId"),fieldKey:M(l,"fieldKey")}),s=R(D.core),o=R(D.secretsManager),{getEvaluatedFields:i}=xe(s,o),n=H(!1),y=k(()=>{var h;return((h=i(l.instancePath))==null?void 0:h[l.fieldKey].value)??{}}),v=k(()=>t.value||JSON.stringify(y.value));function c(h){n.value=!1,t.value=h}return(h,S)=>(d(),C("div",{class:"BuilderFieldsKeyValue",tabindex:"-1","data-automation-key":l.fieldKey},[E("div",gn,[w(J,{variant:"neutral",size:"smallIcon","data-automation-key":"openAssistedMode",onClick:S[0]||(S[0]=r=>n.value=!0)},{default:O(()=>[w(L,{name:"pencil"})]),_:1})]),n.value?(d(),$(fn,{key:0,data:v.value,onSubmit:c,onClose:S[1]||(S[1]=r=>n.value=!1)},null,8,["data"])):x("",!0),Object.keys(y.value).length===0?(d(),C("div",_n,[S[4]||(S[4]=E("p",null,"There are no key value categories defined",-1)),w(J,{variant:"special",size:"small",onClick:S[2]||(S[2]=r=>n.value=!0)},{default:O(()=>[w(L,{name:"pencil"}),S[3]||(S[3]=ue(" Edit "))]),_:1})])):(d(),C("ul",bn,[(d(!0),C(j,null,X(y.value,(r,m)=>(d(),C("li",{key:m,class:"BuilderFieldsKeyValue__list__item"},[E("p",{class:"BuilderFieldsKeyValue__list__item__key","data-writer-tooltip":m,"data-writer-tooltip-strategy":"overflow"},Q(m),9,Sn),E("p",{class:"BuilderFieldsKeyValue__list__item__value","data-writer-tooltip":r,"data-writer-tooltip-strategy":"overflow"},Q(r||"<empty value>"),9,hn)]))),128))]))],8,yn))}}),In=P(kn,[["__scopeId","data-v-43bf3550"]]),Bn=A({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},defaultValue:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},setup(e){const l=e,t=G({componentId:M(l,"componentId"),fieldKey:M(l,"fieldKey"),defaultValue:M(l,"defaultValue")}),s=o=>{t.value=o.target.value};return(o,i)=>(d(),$(ee,{class:"BuilderFieldsObject","data-automation-key":l.fieldKey,multiline:"",variant:"code",value:p(t),placeholder:e.defaultValue,error:e.error,onInput:s},null,8,["data-automation-key","value","placeholder","error"]))}}),Cn=P(Bn,[["__scopeId","data-v-efbda4e8"]]),En=["data-automation-key"],xn={key:0,class:"main"},wn={key:0,class:"pickerContainer"},$n={class:"BuilderFieldsPadding__options"},Tn=A({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-B0j9NrKX.js").then(a=>a.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=U("rootEl"),s=U("pickerEl"),o=U("freehandInputEl"),i=U("fixedEl"),n=[{key:"all_sides",label:"All sides",match:a=>a.split(" ").length==1&&a.endsWith("px"),default:()=>m.value?m.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:a=>a.split(" ").length==2&&a.endsWith("px"),default:()=>m.value?m.value[2]+" "+m.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:a=>a.split(" ").length==4&&a.endsWith("px"),default:()=>m.value?[m.value[3],m.value[1],m.value[2],m.value[0]].join(" "):"0px 0px 0px 0px"}],y={pick:s,css:o,default:null},v=e,c=G({componentId:M(v,"componentId"),fieldKey:M(v,"fieldKey")}),h=k(()=>n.map(a=>({value:a.key,label:a.label,icon:"panel-top-dashed"}))),S=k(()=>{const a=c.value;for(const u in n)if(a&&n[u].match(a))return n[u].key;return null}),r=k(()=>{const a=m.value;return a?[a[0].substring(0,a[0].length-2),a[1].substring(0,a[1].length-2),a[2].substring(0,a[2].length-2),a[3].substring(0,a[3].length-2)]:["0","0","0","0"]}),m=k(()=>{const a=c.value;if(a){const u=a.split(" ");if(u.length==1&&u[0].endsWith("px"))return[u[0],u[0],u[0],u[0]];if(u.length==2&&u[0].endsWith("px")&&u[0].endsWith("px"))return[u[1],u[1],u[0],u[0]];if(u.length==4&&u[0].endsWith("px")&&u[1].endsWith("px")&&u[2].endsWith("px")&&u[3].endsWith("px"))return[u[3],u[1],u[0],u[2]]}else return null;return null}),b=H((()=>{if(!c.value)return"default";for(const a in n)if(n[a].match(c.value))return"pick";return"css"})()),I=()=>{var u;const a=(u=y[b.value])==null?void 0:u.value;a&&(a.focus(),typeof a.selectionStart=="number"&&(a.selectionStart=a.selectionEnd=a.value.length))},q=async a=>{b.value!=a&&(b.value=a,await oe(),I(),a==="default"&&(c.value=""))},V=a=>{for(const u in n)n[u].key==a&&(c.value=n[u].default());oe(()=>{var u;(u=i.value)==null||u.focus()})},_=a=>{c.value=a.target.value},g=(a,u,F)=>{const B=Number(a),T=c.value;if(u=="all_sides")c.value=B+"px";else if(u=="XY sides"){const K=T.split(" ");F=="x"?K[1]=B+"px":F=="y"&&(K[0]=B+"px"),c.value=K.join(" ")}else if(u=="Per side"){const K=T.split(" ");F=="top"?K[0]=B+"px":F=="right"?K[1]=B+"px":F=="bottom"?K[2]=B+"px":F=="left"&&(K[3]=B+"px"),c.value=K.join(" ")}};return re(()=>{t.value.addEventListener("focus",I)}),ge(()=>{t.value.removeEventListener("focus",I)}),(a,u)=>(d(),C("div",{ref_key:"rootEl",ref:t,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":v.fieldKey},[w(ae,{tabs:p(_e),"model-value":b.value,"onUpdate:modelValue":q},null,8,["tabs","model-value"]),b.value=="pick"||b.value=="css"?(d(),C("div",xn,[b.value=="pick"?(d(),C("div",wn,[w(p(l),{ref_key:"pickerEl",ref:s,"model-value":S.value,options:h.value,"onUpdate:modelValue":V},null,8,["model-value","options"]),E("div",$n,[S.value=="all_sides"?(d(),C(j,{key:0},[u[7]||(u[7]=E("i",null,"All",-1)),w(Z,{ref_key:"fixedEl",ref:i,type:"number","model-value":r.value[0],"onUpdate:modelValue":u[0]||(u[0]=F=>g(F,S.value))},null,8,["model-value"]),u[8]||(u[8]=E("div",null,"px",-1))],64)):x("",!0),S.value=="XY sides"?(d(),C(j,{key:1},[u[9]||(u[9]=E("i",null,"X",-1)),w(Z,{type:"number","model-value":r.value[0],"onUpdate:modelValue":u[1]||(u[1]=F=>g(F,S.value,"x"))},null,8,["model-value"]),u[10]||(u[10]=E("div",null,"px",-1)),u[11]||(u[11]=E("i",null,"Y",-1)),w(Z,{type:"number","model-value":r.value[2],"onUpdate:modelValue":u[2]||(u[2]=F=>g(F,S.value,"y"))},null,8,["model-value"]),u[12]||(u[12]=E("div",null,"px",-1))],64)):x("",!0),S.value=="Per side"?(d(),C(j,{key:2},[u[13]||(u[13]=E("i",null,"Left",-1)),w(Z,{type:"number","model-value":r.value[0],"onUpdate:modelValue":u[3]||(u[3]=F=>g(F,S.value,"left"))},null,8,["model-value"]),u[14]||(u[14]=E("div",null,"px",-1)),u[15]||(u[15]=E("i",null,"Right",-1)),w(Z,{type:"number","model-value":r.value[1],"onUpdate:modelValue":u[4]||(u[4]=F=>g(F,S.value,"right"))},null,8,["model-value"]),u[16]||(u[16]=E("div",null,"px",-1)),u[17]||(u[17]=E("i",null,"Top",-1)),w(Z,{type:"number","model-value":r.value[2],"onUpdate:modelValue":u[5]||(u[5]=F=>g(F,S.value,"top"))},null,8,["model-value"]),u[18]||(u[18]=E("div",null,"px",-1)),u[19]||(u[19]=E("i",null,"Bottom",-1)),w(Z,{type:"number","model-value":r.value[3],"onUpdate:modelValue":u[6]||(u[6]=F=>g(F,S.value,"bottom"))},null,8,["model-value"]),u[20]||(u[20]=E("div",null,"px",-1))],64)):x("",!0)])])):x("",!0),b.value=="css"?(d(),$(ee,{key:1,ref_key:"freehandInputEl",ref:o,value:p(c),error:e.error,onInput:_},null,8,["value","error"])):x("",!0)])):x("",!0)],8,En))}}),Fn=P(Tn,[["__scopeId","data-v-e122e664"]]),Vn=["data-automation-key"],On={key:0,class:"main"},qn={key:0,class:"pickerContainer"},Mn={class:"param"},An={class:"header"},Rn=["value"],Dn={class:"param"},Wn={class:"header"},Pn=["value"],Un={class:"param"},Kn={class:"header"},jn=["value"],Ln={class:"param"},Nn={class:"header"},zn=["value"],Yn={class:"param"},Gn=["value"],Jn=A({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=U("rootEl"),t=U("freehandInputEl"),s=U("paramOffsetXEl"),o=U("paramOffsetYEl"),i=U("paramBlurRadiusEl"),n=U("paramSpreadRadiusEl"),y=U("paramColorEl"),v={pick:s,css:t,default:null},c=e,h=G({componentId:M(c,"componentId"),fieldKey:M(c,"fieldKey")}),S=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,m=H((()=>{const _=h.value;return _?S.test(_)?"pick":"css":"default"})()),f=()=>{var g;const _=(g=v[m.value])==null?void 0:g.value;_&&(_.focus(),typeof _.selectionStart=="number"&&(_.selectionStart=_.selectionEnd=_.value.length))},b=async _=>{m.value!=_&&(m.value=_,await oe(),f(),_==="default"&&(h.value=""))},I=()=>{const _=s.value.value,g=o.value.value,a=i.value.value,u=n.value.value,F=y.value.value,B=`${_}px ${g}px ${a}px ${u}px ${F}`;h.value=B},q=_=>{h.value=_.target.value},V=k(()=>{const _=h.value.match(S);return(_==null?void 0:_.groups)??{}});return re(()=>{l.value.addEventListener("focus",f)}),ge(()=>{l.value.removeEventListener("focus",f)}),(_,g)=>{var a,u,F,B,T,K,le,be,Se,de,Me,Ae,Re;return d(),C("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":c.fieldKey},[w(ae,{tabs:p(_e),"model-value":m.value,"onUpdate:modelValue":b},null,8,["tabs","model-value"]),m.value=="pick"||m.value=="css"?(d(),C("div",On,[m.value=="pick"?(d(),C("div",qn,[E("div",Mn,[E("div",An,[g[0]||(g[0]=E("div",{class:"name"},"Offset X",-1)),ce(E("div",{class:"value"},Q((a=V.value)==null?void 0:a.offsetX)+"px ",513),[[he,(u=V.value)==null?void 0:u.offsetX]])]),E("input",{ref_key:"paramOffsetXEl",ref:s,type:"range",min:"0",max:"32",value:(F=V.value)==null?void 0:F.offsetX,onInput:I},null,40,Rn)]),E("div",Dn,[E("div",Wn,[g[1]||(g[1]=E("div",{class:"name"},"Offset Y",-1)),ce(E("div",{class:"value"},Q((B=V.value)==null?void 0:B.offsetY)+"px ",513),[[he,(T=V.value)==null?void 0:T.offsetY]])]),E("input",{ref_key:"paramOffsetYEl",ref:o,type:"range",min:"0",max:"32",value:(K=V.value)==null?void 0:K.offsetY,onInput:I},null,40,Pn)]),E("div",Un,[E("div",Kn,[g[2]||(g[2]=E("div",{class:"name"},"Blur radius",-1)),ce(E("div",{class:"value"},Q((le=V.value)==null?void 0:le.blurRadius)+"px ",513),[[he,(be=V.value)==null?void 0:be.blurRadius]])]),E("input",{ref_key:"paramBlurRadiusEl",ref:i,type:"range",min:"0",max:"32",value:(Se=V.value)==null?void 0:Se.blurRadius,onInput:I},null,40,jn)]),E("div",Ln,[E("div",Nn,[g[3]||(g[3]=E("div",{class:"name"},"Spread radius",-1)),ce(E("div",{class:"value"},Q((de=V.value)==null?void 0:de.spreadRadius)+"px ",513),[[he,(Me=V.value)==null?void 0:Me.spreadRadius]])]),E("input",{ref_key:"paramSpreadRadiusEl",ref:n,type:"range",min:"-16",max:"32",value:(Ae=V.value)==null?void 0:Ae.spreadRadius,onInput:I},null,40,zn)]),E("div",Yn,[g[4]||(g[4]=E("div",{class:"header"},[E("div",{class:"name"},"Color")],-1)),E("input",{ref_key:"paramColorEl",ref:y,type:"color",value:(Re=V.value)==null?void 0:Re.color,onInput:I},null,40,Gn)])])):x("",!0),m.value=="css"?(d(),$(ee,{key:1,ref_key:"freehandInputEl",ref:t,value:p(h),error:e.error,onInput:q},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Vn)}}}),Hn=P(Jn,[["__scopeId","data-v-c59dcd63"]]),Xn=["data-automation-key"],Qn={key:0,class:"main"},Zn={key:0,class:"pickerContainer"},eo={key:0,class:"fixedContainer"},to=A({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-B0j9NrKX.js").then(g=>g.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=U("rootEl"),s=U("pickerEl"),o=U("freehandInputEl"),i=U("fixedEl"),n=[{key:"fixed",label:"Fixed",match:g=>g.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:g=>g=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:g=>g=="100%",default:"100%"}],y={pick:s,css:o,default:null},v=e,c=G({componentId:M(v,"componentId"),fieldKey:M(v,"fieldKey")}),h=k(()=>n.map(g=>({value:g.key,label:g.label,icon:"move-horizontal"}))),S=k(()=>{const g=c.value;for(const a in n)if(g&&n[a].match(g))return n[a].key;return null}),r=k(()=>{const g=c.value;if(g){if(g.endsWith("px"))return g.substring(0,g.length-2)}else return null;return null}),f=H((()=>{if(!c.value)return"default";for(const g in n)if(n[g].match(c.value))return"pick";return"css"})()),b=()=>{var a;const g=(a=y[f.value])==null?void 0:a.value;g&&(g.focus(),typeof g.selectionStart=="number"&&(g.selectionStart=g.selectionEnd=g.value.length))},I=async g=>{f.value!=g&&(f.value=g,await oe(),b(),g==="default"&&(c.value=""))},q=g=>{for(const a in n)if(n[a].key==g){const u=n[a].default;c.value=u}g=="fixed"&&oe(()=>{i.value.focus()})},V=g=>{c.value=g.target.value},_=g=>{c.value=`${g}px`};return re(()=>{t.value.addEventListener("focus",b)}),ge(()=>{t.value.removeEventListener("focus",b)}),(g,a)=>(d(),C("div",{ref_key:"rootEl",ref:t,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":v.fieldKey},[w(ae,{tabs:p(_e),"model-value":f.value,"onUpdate:modelValue":I},null,8,["tabs","model-value"]),f.value=="pick"||f.value=="css"?(d(),C("div",Qn,[f.value=="pick"?(d(),C("div",Zn,[w(p(l),{ref_key:"pickerEl",ref:s,"model-value":S.value,options:h.value,"onUpdate:modelValue":q},null,8,["model-value","options"]),S.value=="fixed"?(d(),C("div",eo,[w(Z,{ref_key:"fixedEl",ref:i,type:"number","model-value":r.value,invalid:e.error!==void 0,"onUpdate:modelValue":_},null,8,["model-value","invalid"]),a[0]||(a[0]=E("div",null,"px",-1))])):x("",!0)])):x("",!0),f.value=="css"?(d(),$(ee,{key:1,ref_key:"freehandInputEl",ref:o,value:p(c),onInput:V},null,8,["value"])):x("",!0)])):x("",!0)],8,Xn))}}),no=P(to,[["__scopeId","data-v-55a31bea"]]),oo=["data-automation-key"],lo={class:"tools"},ao=["onClick"],io={class:"toolName"},ro={class:"addToolForm"},so=A({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(e){const l=z({loader:()=>Y(()=>import("./BuilderGraphSelect-DTJ5FD0U.js"),__vite__mapDeps([13,1,2,14,15]),import.meta.url)}),t=z({loader:()=>Y(()=>import("./BuilderEmbeddedCodeEditor-xMfsf1zc.js").then(_=>_.B),__vite__mapDeps([11,1,2,12]),import.meta.url)}),o={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:""},i=H(o),n=k(()=>{switch(i.value.type){case"function":return!i.value.code;case"graph":return!i.value.graphIds;default:return!0}}),y=k({get:()=>i.value.graphIds.split(","),set(_){i.value={...i.value,graphIds:_.join(",")}}}),v=e,c=G({componentId:M(v,"componentId"),fieldKey:M(v,"fieldKey")}),h=k(()=>{try{return JSON.parse(c.value)}catch{return{}}});function S(){i.value={...o,isShown:!0}}function r(){const{type:_,code:g,graphIds:a}=i.value;if(_=="function")return{...JSON.parse(g),type:_};if(_=="graph"){const u=a.split(",").map(F=>F.trim());return{type:_,graph_ids:u}}throw"Unexpected tool type."}function m(_){let g=[];const{originalName:a,name:u}=_;return u||g.push("The name cannot be empty."),Object.keys(h.value).includes(u)&&!(a||a==u)&&g.push("An existing tool with the specified name already exists."),g}function f(){const _=m(i.value);if(_.length>0){_.forEach(alert);return}let g;try{g=r()}catch{alert("Incorrect tool definition");return}c.value=JSON.stringify({...h.value,...i.value.originalName?{[i.value.originalName]:void 0}:{},[i.value.name]:g}),i.value.isShown=!1}function b(_,g){var u;const{type:a}=g;if(a=="function")return{isShown:!0,type:"function",originalName:_,name:_,graphIds:"",code:JSON.stringify(g,void 0,2)};if(a=="graph")return{isShown:!0,type:"graph",originalName:_,name:_,graphIds:(u=g.graph_ids)==null?void 0:u.join(","),code:""};throw"Unexpected tool type;"}function I(_){var a;const g=(a=h.value)==null?void 0:a[_];g&&(i.value=b(_,g))}function q(_){c.value=JSON.stringify({...h.value,[_]:void 0})}const V=k(()=>[{desc:"cancel",fn:()=>i.value.isShown=!1},{desc:"Save",disabled:n.value,fn:f}]);return(_,g)=>(d(),C("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":v.fieldKey},[E("div",lo,[(d(!0),C(j,null,X(h.value,(a,u)=>(d(),C("div",{key:u,class:"tool",onClick:F=>I(u)},[E("div",io,Q(u),1),w(J,{variant:"primary",size:"smallIcon",class:"delete",onClick:ne(F=>q(u),["stop"])},{default:O(()=>[w(L,{name:"trash-2"})]),_:2},1032,["onClick"])],8,ao))),128))]),w(J,{size:"small",onClick:S},{default:O(()=>[w(L,{name:"plus"}),g[4]||(g[4]=ue(" Add tool "))]),_:1}),i.value.isShown?(d(),$(Ve,{key:0,actions:V.value,title:"Add tool","allow-overflow":""},{default:O(()=>[E("div",ro,[w(te,{label:"Tool type"},{default:O(()=>[w(st,{modelValue:i.value.type,"onUpdate:modelValue":g[0]||(g[0]=a=>i.value.type=a)},{default:O(()=>g[5]||(g[5]=[E("option",{value:"function"},"Function",-1),E("option",{value:"graph"},"Knowledge graph",-1)])),_:1},8,["modelValue"])]),_:1}),w(te,{label:"Tool name"},{default:O(()=>[w(Z,{modelValue:i.value.name,"onUpdate:modelValue":g[1]||(g[1]=a=>i.value.name=a)},null,8,["modelValue"])]),_:1}),i.value.type=="function"?(d(),$(te,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:O(()=>[w(p(t),{modelValue:i.value.code,"onUpdate:modelValue":g[2]||(g[2]=a=>i.value.code=a),class:"addToolForm__codeEditor",variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):x("",!0),i.value.type=="graph"?(d(),$(te,{key:1,label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas."},{default:O(()=>[w(p(l),{modelValue:y.value,"onUpdate:modelValue":g[3]||(g[3]=a=>y.value=a),"enable-multi-selection":""},null,8,["modelValue"])]),_:1})):x("",!0)])]),_:1},8,["actions"])):x("",!0)],8,oo))}}),uo=P(so,[["__scopeId","data-v-08516909"]]),co=A({__name:"BuilderFieldsCode",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},isExpanded:{type:Boolean,required:!0},inputLanguage:{type:String,required:!0}},setup(e){const l=z({loader:()=>Y(()=>import("./BuilderEmbeddedCodeEditor-xMfsf1zc.js").then(o=>o.B),__vite__mapDeps([11,1,2,12]),import.meta.url)}),t=e,s=G({componentId:M(t,"componentId"),fieldKey:M(t,"fieldKey")});return(o,i)=>(d(),$(p(l),{modelValue:p(s),"onUpdate:modelValue":i[0]||(i[0]=n=>me(s)?s.value=n:null),language:e.inputLanguage,variant:e.isExpanded?"half-screen":"minimal",class:"BuilderFieldsCode"},null,8,["modelValue","language","variant"]))}}),We=P(co,[["__scopeId","data-v-6379f7e6"]]),po=["data-automation-key"],vo=A({__name:"BuilderFieldsBlueprintKey",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-B0j9NrKX.js").then(c=>c.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=R(D.core),s=R(D.builderManager),o=e,i=G({componentId:M(o,"componentId"),fieldKey:M(o,"fieldKey")}),n=k(()=>{const c=new Set;for(const r of t.getComponents("blueprints_root"))r.content.key&&c.add(r.content.key);const h=[...c].sort((r,m)=>r.localeCompare(m)).map(r=>({value:r,label:r,icon:"wds-blueprints"})),S=[{value:"",label:"(No blueprint)",icon:"block"},...h];if(!S.some(r=>r.value===i.value)){const r=i.value;S.push({value:r,label:r})}return S}),y=k(()=>{const c=t.getComponents("blueprints_root").find(h=>h.content.key===i.value);return c==null?void 0:c.id});function v(){y.value&&(s.setSelection(y.value,null,"click"),t.setActivePageId(y.value))}return(c,h)=>(d(),C("div",{class:"BuilderFieldsBlueprintKey","data-automation-key":o.fieldKey},[w(p(l),{modelValue:p(i),"onUpdate:modelValue":h[0]||(h[0]=S=>me(i)?i.value=S:null),options:n.value},null,8,["modelValue","options"]),y.value?(d(),$(J,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the blueprint",onClick:v},{default:O(()=>[w(L,{name:"square-dashed-mouse-pointer"})]),_:1})):x("",!0)],8,po))}}),mo=P(vo,[["__scopeId","data-v-f1beb9af"]]),fo=["data-automation-key"],yo=A({__name:"BuilderFieldsBlueprintId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(e){const l=R(D.core),t=e,s=k(()=>l.getComponentById(t.componentId)),o=k(()=>{var i;return((i=s.value)==null?void 0:i.parentId)??""});return(i,n)=>(d(),C("div",{class:"BuilderFieldsBlueprintId","data-automation-key":t.fieldKey},[w(Z,{"model-value":o.value,disabled:""},null,8,["model-value"])],8,fo))}}),go=P(yo,[["__scopeId","data-v-23c33b8b"]]),_o=["data-automation-key"],bo=A({__name:"BuilderFieldsHandler",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-B0j9NrKX.js").then(n=>n.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=R(D.core),s=e,o=G({componentId:M(s,"componentId"),fieldKey:M(s,"fieldKey")}),i=k(()=>{const n=t.userFunctions.value.map(v=>v.name).sort((v,c)=>v.localeCompare(c)).map(v=>({value:v,label:v,icon:"wds-function"})),y=[{value:"",label:"(No handler)",icon:"ban"},...n];if(!y.some(v=>v.value===o.value)){const v=o.value;y.push({value:v,label:v})}return y});return(n,y)=>(d(),C("div",{class:"BuilderFieldsHandler","data-automation-key":s.fieldKey},[w(p(l),{modelValue:p(o),"onUpdate:modelValue":y[0]||(y[0]=v=>me(o)?o.value=v:null),options:i.value},null,8,["modelValue","options"])],8,_o))}}),So=["data-automation-key"],ho=["href","data-writer-tooltip"],ko=A({__name:"BuilderFieldsWriterResourceId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},resourceType:{type:String,required:!0},enableMultiSelection:{type:Boolean,required:!1,default:!1},isBindingButtonShown:{type:Boolean,required:!1,default:!1}},setup(e){const l=z({loader:()=>Y(()=>import("./BuilderApplicationSelect-CbaiJRC3.js"),__vite__mapDeps([16,1,2,14,17]),import.meta.url)}),t=z({loader:()=>Y(()=>import("./BuilderGraphSelect-DTJ5FD0U.js"),__vite__mapDeps([13,1,2,14,15]),import.meta.url)}),s=z({loader:()=>Y(()=>import("./BuilderModelSelect-EzKqG3wd.js"),__vite__mapDeps([18,1,2,14,19]),import.meta.url)}),o=e,i=G({componentId:M(o,"componentId"),fieldKey:M(o,"fieldKey")}),{isBindingMode:n,toggleBindingMode:y}=Je({fieldViewModel:i}),v=G({componentId:M(o,"componentId"),fieldKey:"appInputs"}),c=U("selectorEl"),h=k(()=>{switch(o.resourceType){case"model":return s;case"graph":return t;case"application":return l;default:throw new Error(`Unexpected resourceType: ${o.resourceType}`)}}),S=k(()=>{switch(o.resourceType){case"graph":return"Edit knowledge graph";case"application":return"Edit agent";case"model":return"About models";default:return}}),r=k(()=>{var q,V;if(Array.isArray(m.value))return;const b=m.value;if(!b)return;const I=(V=(q=c.value)==null?void 0:q.selectedData)==null?void 0:V.organization_id;if(I)switch(o.resourceType){case"graph":{const _=new URLSearchParams({graphId:b});return`https://app.writer.com/aistudio/organization/${I}/knowledge-graph?${_}`}case"application":return`https://app.writer.com/aistudio/organization/${I}/app/${b}`;case"model":return"https://dev.writer.com/home/models#model-overview";default:return}}),m=k({get(){if(o.enableMultiSelection){const b=i.value||"[]";try{return JSON.parse(b)}catch{return[]}}return i.value},set(b){i.value=o.enableMultiSelection?JSON.stringify(b):String(b)}});function f(b){o.resourceType!=="application"||!b||!b.inputs||typeof b.inputs!="object"||(v.value=JSON.stringify(b.inputs))}return(b,I)=>(d(),$(te,{"is-binding-button-shown":e.isBindingButtonShown,"is-binding-enabled":p(n),label:e.label,unit:e.unit,hint:e.hint,error:e.error,"data-automation-key":e.fieldKey,"onUpdate:isBindingEnabled":p(y)},{default:O(()=>[E("div",{class:"BuilderFieldsWriterResourceId","data-automation-key":e.fieldKey},[p(n)?(d(),$(qe,{key:0,type:"state-template","component-id":e.componentId,"field-key":e.fieldKey,error:e.error,"default-value":""},null,8,["component-id","field-key","error"])):(d(),$(Te(h.value),{key:1,ref_key:"selectorEl",ref:c,modelValue:m.value,"onUpdate:modelValue":I[0]||(I[0]=q=>m.value=q),"enable-multi-selection":e.enableMultiSelection,onSelectedData:f},null,40,["modelValue","enable-multi-selection"])),r.value?(d(),C("a",{key:2,class:"BuilderFieldsWriterResourceId__link",href:r.value,target:"_blank","data-writer-tooltip":S.value},[w(L,{name:"external-link"})],8,ho)):x("",!0)],8,So)]),_:1},8,["is-binding-button-shown","is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"]))}}),ke=P(ko,[["__scopeId","data-v-59e28cc4"]]),Io=["data-automation-key"],Bo=A({__name:"BuilderFieldsComponentId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-B0j9NrKX.js").then(r=>r.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=R(D.core),s=R(D.builderManager),o=e,i=G({componentId:M(o,"componentId"),fieldKey:M(o,"fieldKey")});function*n(){yield t.getComponentById("root"),yield*t.getComponentsNested("root")}const y=k(()=>{const r=[];for(const m of n()){const f=t.getComponentDefinition(m==null?void 0:m.type);if(!(f!=null&&f.events)||Object.keys(f.events).length===0)continue;const{name:b,previewText:I,possibleImageUrls:q}=Ge(t,m),V=q.value,_=m.id;r.push({value:_,label:I.value||b.value,detail:I.value?b.value:void 0,icon:V})}return r}),v=k({get:()=>i.value,set(r){i.value=String(r)}}),c=k(()=>{let r=v.value;for(;r;){const m=t.getComponentById(r);if(m.type==="page")return m.id;r=m.parentId}}),h=k(()=>t.getComponentById(v.value));function S(){!v.value||!h.value||(c.value&&(s.mode.value="ui",t.setActivePageId(c.value)),s.setSelection(v.value,null,"click"))}return(r,m)=>(d(),C("div",{class:"BuilderFieldsComponentId","data-automation-key":o.fieldKey},[w(p(l),{modelValue:v.value,"onUpdate:modelValue":m[0]||(m[0]=f=>v.value=f),options:y.value,"enable-search":""},null,8,["modelValue","options"]),v.value?(d(),$(J,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the element",disabled:!h.value,onClick:S},{default:O(()=>[w(L,{name:"square-dashed-mouse-pointer"})]),_:1},8,["disabled"])):x("",!0)],8,Io))}}),Co=P(Bo,[["__scopeId","data-v-fcce992f"]]),Eo=["data-automation-key"],xo=A({__name:"BuilderFieldsComponentEventType",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-B0j9NrKX.js").then(c=>c.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=R(D.core),s=e,o=G({componentId:M(s,"componentId"),fieldKey:M(s,"fieldKey")}),i=k(()=>t.getComponentById(s.componentId)),n=k(()=>{var c;return t.getComponentDefinition((c=i.value)==null?void 0:c.type)}),y=k(()=>{var m,f;const c=(f=Object.entries(((m=n.value)==null?void 0:m.fields)??{}).find(([,b])=>b.type===W.ComponentId))==null?void 0:f.at(0);if(c===void 0)return[];const h=i.value.content[String(c)],S=t.getComponentById(h),r=t.getComponentDefinition(S==null?void 0:S.type);return r!=null&&r.events?Object.keys(r.events).map(b=>({value:b,label:b})):[]}),v=k({get:()=>o.value,set(c){o.value=String(c)}});return(c,h)=>(d(),C("div",{class:"BuilderFieldsComponentEventType","data-automation-key":s.fieldKey},[y.value.length?(d(),$(p(l),{key:0,modelValue:v.value,"onUpdate:modelValue":h[0]||(h[0]=S=>v.value=S),options:y.value,"hide-icons":""},null,8,["modelValue","options"])):(d(),$(Z,{key:1,modelValue:v.value,"onUpdate:modelValue":h[1]||(h[1]=S=>v.value=S)},null,8,["modelValue"]))],8,Eo))}});function wo(e,l,t){const{getEvaluatedFields:s}=xe(e,t);function o(c){return!!ct.exec(c)}const i=k(()=>{var c;return(c=l.value.at(-1))==null?void 0:c.componentId}),n=k(()=>{if(i.value!==void 0)return e.getComponentById(i.value)}),y=k(()=>{var c,h;return(c=n.value)!=null&&c.type?((h=e.getComponentDefinition(n.value.type))==null?void 0:h.fields)??{}:{}}),v=k(()=>s(l.value));return k(()=>Object.entries(y.value).reduce((c,[h,S])=>{var f;const r=((f=n.value.content)==null?void 0:f[h])??"";if(o(r))return c;const m=v.value[h].value;return c[h]=$o(e,i.value,S,m),c},{}))}function $o(e,l,t,s){let o=t.validator;if(o===void 0&&typeof t.options=="object"&&t.options!==null&&Object.keys(t.options).length>0?o=ut(Object.keys(t.options)):typeof o=="function"&&(o=o(e,l)),o===void 0)return;const i=dt(o);if(!(i(s)||i.errors===void 0))return Fo(i.errors)}function To(e){var t;if(e.keyword==="format"&&Object.values(pt).includes(e.params.format))return vt[e.params.format].errorMessage;let l="";return e.instancePath&&(l+=`${e.instancePath} `),l+=e.message,Array.isArray((t=e.params)==null?void 0:t.allowedValues)&&(l+=`: ${e.params.allowedValues.join(", ")}`),l}function Fo(e){return e.map(To).join(`
`)}const Vo={key:0,class:"BuilderSettingsProperties"},Oo=["inert"],qo=A({__name:"BuilderSettingsProperties",props:{isReadOnly:{type:Boolean}},setup(e){const l=R(D.core),t=R(D.builderManager),s=R(D.secretsManager),o=H(new Set),i=k(()=>{var a,u;return Ne((u=(a=t.firstSelectedItem)==null?void 0:a.value)==null?void 0:u.instancePath)}),n=k(()=>l.getComponentById(t.firstSelectedId.value)),y=k(()=>{var a;return l.getComponentDefinition((a=n.value)==null?void 0:a.type)}),{getEvaluatedFields:v}=xe(l,s),c=k(()=>v(i.value)),h=k(()=>{var u;const a=Object.entries(((u=y.value)==null?void 0:u.fields)??{}).filter(([F,B])=>B.isArtifactField?!1:B.enabled===void 0?!0:B.enabled({evaluatedFields:c.value}));return Object.fromEntries(a)});function S(a){return a.type===W.Code||a.type===W.JSONInput||a.type===W.Object||a.control===Ie.Textarea}const r=wo(l,i,s),m=H(N.General),f=Object.freeze({[N.General]:"Configure",[N.Style]:"Style",[N.Tools]:"Tools"}),b=k(()=>I.value.map(a=>({label:f[a]??a,value:a}))),I=k(()=>[N.General,N.Style,N.Tools].filter(a=>{var u;return(u=q.value[a])==null?void 0:u.length})),q=k(()=>{const a={[N.General]:[],[N.Style]:[],[N.Tools]:[]};return Object.entries(h.value).forEach(([u,F])=>{const B=F.category||N.General;a[B]&&a[B].push([u,F])}),{[N.General]:V(a[N.General]),[N.Style]:V(a[N.Style]),[N.Tools]:V(a[N.Tools])}});function V(a){return a.map((u,F)=>[u,F]).sort(([u,F],[B,T])=>{const K=u[1].order??0;return(B[1].order??0)-K||F-T}).map(([u])=>u)}function _(a){o.value.add(a)}function g(a){o.value.delete(a)}return(a,u)=>p(t).isSingleSelectionActive?(d(),C("div",Vo,[I.value.length>1?(d(),$(ae,{key:0,modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=F=>m.value=F),variant:"bar",tabs:b.value},null,8,["modelValue","tabs"])):x("",!0),(d(!0),C(j,null,X(I.value.length>1?[m.value]:I.value,F=>(d(),C("div",{key:F,inert:e.isReadOnly,class:"BuilderSettingsProperties__category"},[(d(!0),C(j,null,X(q.value[F],([B,T])=>(d(),C("div",{key:B,class:"BuilderSettingsProperties__category__field"},[T.type===p(W).Boolean?(d(),$(cn,{key:0,"field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B]},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===p(W).WriterGraphId?(d(),$(ke,{key:1,"is-binding-button-shown":"","field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"resource-type":"graph"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===p(W).WriterGraphIds?(d(),$(ke,{key:2,"is-binding-button-shown":"","field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"resource-type":"graph","enable-multi-selection":""},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===p(W).WriterAppId?(d(),$(ke,{key:3,"field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"resource-type":"application"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===p(W).WriterModelId?(d(),$(ke,{key:4,"field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"resource-type":"model"},null,8,["field-key","component-id","label","hint","unit","error"])):(d(),$(te,{key:5,label:F==="Tools"?void 0:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"is-expansible":S(T),onExpand:K=>_(B),onShrink:K=>g(B)},{default:O(()=>[T.type==p(W).Color?(d(),$(an,{key:0,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).Shadow?(d(),$(Hn,{key:1,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).KeyValue?(d(),$(In,{key:2,"field-key":B,"component-id":n.value.id,"instance-path":i.value,error:p(r)[B]},null,8,["field-key","component-id","instance-path","error"])):x("",!0),T.type==p(W).Text||T.type==p(W).Number||T.type==p(W).Binding||T.type==p(W).IdKey?(d(),$(qe,{key:3,type:T.type==p(W).Binding?"state":"template","field-key":B,"field-control":T.control,"component-id":n.value.id,"default-value":T.default,error:p(r)[B]},null,8,["type","field-key","field-control","component-id","default-value","error"])):x("",!0),T.type==p(W).BlueprintId?(d(),$(go,{key:4,"field-key":B,"component-id":n.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==p(W).BlueprintKey?(d(),$(mo,{key:5,"field-key":B,"component-id":n.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==p(W).Handler?(d(),$(bo,{key:6,"field-key":B,"component-id":n.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==p(W).Object?(d(),$(Cn,{key:7,"field-key":B,"component-id":n.value.id,"default-value":T.default,error:p(r)[B]},null,8,["field-key","component-id","default-value","error"])):x("",!0),T.type==p(W).JSONInput?(d(),$(We,{key:8,"field-key":B,"component-id":n.value.id,"is-expanded":o.value.has(B),"input-language":"json"},null,8,["field-key","component-id","is-expanded"])):x("",!0),T.type==p(W).Width?(d(),$(no,{key:9,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).HAlign?(d(),$(De,{key:10,direction:"horizontal","field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).VAlign?(d(),$(De,{key:11,direction:"vertical","field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).Padding?(d(),$(Fn,{key:12,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).Tools?(d(),$(uo,{key:13,"field-key":B,"component-id":n.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==p(W).Code?(d(),$(We,{key:14,"field-key":B,"component-id":n.value.id,"is-expanded":o.value.has(B),"input-language":"python"},null,8,["field-key","component-id","is-expanded"])):x("",!0),T.type==p(W).ComponentId?(d(),$(Co,{key:15,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).ComponentEventType?(d(),$(xo,{key:16,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0)]),_:2},1032,["label","hint","unit","error","is-expansible","onExpand","onShrink"]))]))),128))],8,Oo))),128))])):x("",!0)}}),Mo=P(qo,[["__scopeId","data-v-6fa8dfdf"]]),Ao={},Ro={class:"WdsTitle"};function Do(e,l){return d(),C("h2",Ro,[Le(e.$slots,"default",{},void 0,!0)])}const He=P(Ao,[["render",Do],["__scopeId","data-v-3b68d589"]]),Wo=["inert"],Po="Connect the result of this block to a dynamic variable you can use across this agent",Uo=A({__name:"BuilderSettingsBinding",props:{isReadOnly:{type:Boolean}},setup(e){const l=R(D.core),t=R(D.builderManager),s=R(D.secretsManager),o=Ce(l,t),{getEvaluatedFields:i}=xe(l,s),n=k(()=>{var S,r;return Ne((r=(S=t.firstSelectedItem)==null?void 0:S.value)==null?void 0:r.instancePath)}),y=k(()=>l.getComponentById(t.firstSelectedId.value)),v=k(()=>i(n.value)),c=k(()=>{const S=l.getComponentDefinition(y.value.type);return S?Object.entries(S.events).filter(([,f])=>f.bindable?f.enabled===void 0?!0:f.enabled({evaluatedFields:v.value}):!1).map(([f])=>f)[0]:void 0});function h(S){o.setBinding(t.firstSelectedId.value,S,c.value)}return ve(c,()=>{var r;if(!c.value)return;const S=(r=y.value)==null?void 0:r.binding;S!=null&&S.stateRef&&c.value!==S.eventType&&h(S.stateRef)}),(S,r)=>p(t).isSingleSelectionActive?(d(),C("div",{key:0,inert:e.isReadOnly,class:"BuilderSettingsBinding"},[w(He,null,{default:O(()=>r[1]||(r[1]=[ue("Binding")])),_:1}),w(te,{class:"BuilderSettingsBinding__main",label:"Link Variable",hint:Po},{default:O(()=>{var m;return[w(ee,{type:"state",value:(m=y.value.binding)==null?void 0:m.stateRef,"component-id":p(t).firstSelectedId.value,onInput:r[0]||(r[0]=f=>h(f.target.value))},null,8,["value","component-id"])]}),_:1})],8,Wo)):x("",!0)}}),Ko=P(Uo,[["__scopeId","data-v-f92e4a05"]]),jo=["inert"],Lo={class:"main"},No={class:"flexRow"},zo=["checked"],Yo='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',Go=A({__name:"BuilderSettingsVisibility",props:{isReadOnly:{type:Boolean}},setup(e){const l=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],t=k({get(){const y=n.value.visible;return(y==null?void 0:y.expression)==="custom"?"custom":y===void 0||y.expression===!0?"yes":"no"},set(y){var v,c;y==="custom"?i(n.value.id,"custom",(v=n.value.visible)==null?void 0:v.binding,(c=n.value.visible)==null?void 0:c.reversed):i(n.value.id,y==="yes")}}),s=R(D.core),o=R(D.builderManager),{setVisibleValue:i}=Ce(s,o),n=k(()=>s.getComponentById(o.firstSelectedId.value));return(y,v)=>p(o).isSingleSelectionActive?(d(),C("div",{key:0,inert:e.isReadOnly,class:"BuilderSettingsVisibility"},[w(He,null,{default:O(()=>v[3]||(v[3]=[ue("Visibility")])),_:1}),E("div",Lo,[w(ae,{modelValue:t.value,"onUpdate:modelValue":v[0]||(v[0]=c=>t.value=c),tabs:l},null,8,["modelValue"]),typeof n.value.visible<"u"&&n.value.visible.expression==="custom"?(d(),$(te,{key:0,hint:Yo},{default:O(()=>[w(ee,{value:n.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:v[1]||(v[1]=c=>p(i)(n.value.id,"custom",c.target.value,n.value.visible.reversed))},null,8,["value"]),E("div",No,[E("input",{type:"checkbox",checked:n.value.visible.reversed,onInput:v[2]||(v[2]=c=>p(i)(n.value.id,"custom",n.value.visible.binding,c.target.checked))},null,40,zo),v[4]||(v[4]=E("span",null,"Reverse",-1))])]),_:1})):x("",!0)])],8,jo)):x("",!0)}}),Jo=P(Go,[["__scopeId","data-v-c4316bf1"]]),Pe={apiTriggerDetails:z({loader:()=>Y(()=>import("./BuilderSettingsArtifactAPITriggerDetails-MJBIFCdx.js"),__vite__mapDeps([20,1,2,8,9,3,4,5,6,7,21]),import.meta.url)})},Ho={class:"BuilderSettingsMain"},Xo={key:0,class:"BuilderSettingsMain__description"},Qo={key:1,class:"BuilderSettingsMain__warning cmc-warning"},Zo={class:"BuilderSettingsMain__section"},el={class:"BuilderSettingsMain__componentId"},tl=A({__name:"BuilderSettingsMain",setup(e){const l=z({loader:()=>Y(()=>import("./BuilderSettingsHandlers-BUWIJL6L.js"),__vite__mapDeps([22,1,2,23,5,6,24,25,26,3,4,7,8,9,27]),import.meta.url)}),t=R(D.core),s=R(D.builderManager),o=k(()=>t.getComponentById(s.firstSelectedId.value)),i=k(()=>o.value.isCodeManaged),n=k(()=>s.isSingleSelectionActive.value?!y.value.toolkit||y.value.toolkit=="core":!1),y=k(()=>{const{type:f}=o.value;return t.getComponentDefinition(f)});ve(o,f=>{f||s.setSelection(null)});const{copy:v,copied:c}=ze();function h(){v(s.firstSelectedId.value)}const S=k(()=>{var f;return Object.values(((f=y.value)==null?void 0:f.events)??{}).some(b=>b.bindable)}),r=k(()=>{var f;return(((f=y.value)==null?void 0:f.settingsArtifacts)??[]).filter(b=>b.position!=="bottom")}),m=k(()=>{var f;return(((f=y.value)==null?void 0:f.settingsArtifacts)??[]).filter(b=>b.position==="bottom")});return(f,b)=>(d(),C("div",Ho,[y.value.description?(d(),C("p",Xo,Q(y.value.description),1)):x("",!0),i.value?(d(),C("p",Qo,[E("span",null,[w(L,{name:"triangle-alert"})]),b[0]||(b[0]=E("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1))])):x("",!0),E("div",Zo,[w(Mo,{"is-read-only":i.value},null,8,["is-read-only"]),(d(!0),C(j,null,X(r.value,I=>(d(),$(Te(p(Pe)[I.key]),{key:I.key,inert:i.value},null,8,["inert"]))),128)),n.value?(d(),C(j,{key:0},[S.value?(d(),$(Ko,{key:0,"is-read-only":i.value},null,8,["is-read-only"])):x("",!0),w(p(l),{"is-read-only":i.value},null,8,["is-read-only"]),w(Jo,{"is-read-only":i.value},null,8,["is-read-only"])],64)):x("",!0),(d(!0),C(j,null,X(m.value,I=>(d(),$(Te(p(Pe)[I.key]),{key:I.key,inert:i.value},null,8,["inert"]))),128))]),b[1]||(b[1]=E("div",{class:"BuilderSettingsMain__spacer"},null,-1)),E("div",el,[E("p",{class:"BuilderSettingsMain__componentId__text",onClick:h},Q(p(s).firstSelectedId.value),1),w(J,{class:"BuilderSettingsMain__componentId__btn",size:"smallIcon",variant:"tertiary","data-writer-tooltip":p(c)?"Copied!":"Copy block id","data-automation-action":"copy-component-id",onClick:h},{default:O(()=>[w(L,{name:p(c)?"check":"clipboard"},null,8,["name"])]),_:1},8,["data-writer-tooltip"])])]))}}),nl=P(tl,[["__scopeId","data-v-aa8c395b"]]),ol=["data-writer-id"],ll=A({__name:"BuilderSettingsActions",setup(e){const l=R(D.core),t=R(D.builderManager),s=Oe(l),{dropdownOptions:o,handleDropdownSelect:i}=Ye(l,t,s);function n(){i(Fe.Delete)}const y=k(()=>{const c=o.value.find(h=>h.value===Fe.Delete);return c?c.disabled:!0}),v=t.firstSelectedId;return(c,h)=>(d(),C("div",{class:"BuilderSettingsActions","data-writer-id":p(v)},[p(t).selectionStatus.value===p(pe).Multiple?(d(),$(J,{key:0,class:"BuilderSettingsActions__btn",variant:"neutral",size:"smallIcon","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:h[0]||(h[0]=S=>p(t).setSelection(null))},{default:O(()=>[w(L,{name:"x"})]),_:1})):x("",!0),w(J,{class:"BuilderSettingsActions__btn BuilderSettingsActions__btn--delete",variant:"neutral",size:"smallIcon","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:y.value,onClick:n},{default:O(()=>[w(L,{name:"trash-2"})]),_:1},8,["disabled"])],8,ol))}}),al=P(ll,[["__scopeId","data-v-08efde31"]]),il=["id"],rl=["value"],sl=A({__name:"BuilderSettingsAddComponentModal",props:ie({selectedId:{type:String,required:!0}},{isOpen:{type:Boolean,default:!1},isOpenModifiers:{}}),emits:["update:isOpen"],setup(e){const l=R(D.core),t=R(D.builderManager),s=mt(),o=Oe(l),{createAndInsertComponent:i}=Ce(l,t,o),n=e,y=k(()=>l.getContainableTypes(n.selectedId).reduce((S,r)=>(S[r]=l.getComponentDefinition(r),S),{})),v=ye(e,"isOpen");function c(){v.value=!1}function h(S){const r=S.target.value;if(!r)return;const m=Object.entries(y.value).find(([b,I])=>I.name==r);if(!m)return;const f=m[0];i(f,n.selectedId),c()}return(S,r)=>v.value?(d(),$(Ve,{key:0,title:"Add child component","display-close-button":"",onClose:c},{default:O(()=>[w(Z,{type:"text",list:p(s),placeholder:"Component...",onChange:h},null,8,["list"]),E("datalist",{id:p(s)},[(d(!0),C(j,null,X(y.value,(m,f)=>(d(),C("option",{key:f,value:m.name},Q(m.name),9,rl))),128))],8,il)]),_:1})):x("",!0)}});function ul(e,l=500){const t=H(0);let s=null;function o(){e.value&&(t.value=e.value.clientHeight)}return re(()=>{o(),s=setInterval(o,l)}),je(()=>{s&&clearInterval(s)}),t}const dl={key:0,class:"BuilderSettings__collapser"},cl={key:1,class:"BuilderSettings__titleBar"},pl={class:"BuilderSettings__titleBar__title"},vl={class:"BuilderSettings__titleBar__actions"},ml=["data-writer-tooltip"],fl=A({__name:"BuilderSettings",setup(e){ft(_=>({baa1d07a:p(t).getMode()=="blueprints"?"82px":"20px","1e1ab0af":i.value}));const l=R(D.core),t=R(D.builderManager),s=U("root"),o=ul(s,1e3),i=k(()=>{if(!o.value)return"unset";const _=o.value-42;return _>0?`${_}px`:"unset"}),{component:n,definition:y}=yt(l,t.firstSelectedId),v=gt(n,y),{copy:c,copied:h}=ze();function S(){c(v.value)}const r=Oe(l),m=H(!1),{dropdownOptions:f,handleDropdownSelect:b}=Ye(l,t,r,{[Fe.Add]:()=>m.value=!0}),I=k(()=>t.selectionStatus.value===pe.Multiple?!0:t.isSettingsBarCollapsed.value),q=k(()=>t.selection.value.length);function V(){t.isSettingsBarCollapsed.value=!t.isSettingsBarCollapsed.value}return ve(n,_=>{_||t.setSelection(null)}),(_,g)=>p(t).selectionStatus.value!==p(pe).None?(d(),C("div",{key:0,ref_key:"root",ref:s,class:Ee(["BuilderSettings",{"BuilderSettings--collapsed":I.value}])},[p(t).isSingleSelectionActive.value?(d(),C("div",dl,[I.value?(d(),$(J,{key:0,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:V},{default:O(()=>[w(L,{name:"settings"})]),_:1})):(d(),$(J,{key:1,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:V},{default:O(()=>[w(L,{name:"arrow-right-to-line"})]),_:1}))])):x("",!0),p(t).isSingleSelectionActive?(d(),C("div",cl,[E("p",pl,Q(p(y).name),1),E("div",vl,[p(v)?(d(),$(J,{key:0,size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"bottom","data-writer-tooltip":p(h)?"Copied!":"Copy result variable",onClick:ne(S,["prevent"])},{default:O(()=>[w(L,{name:"at-sign"})]),_:1},8,["data-writer-tooltip"])):x("",!0),w(_t,{class:"BuilderSettings__titleBar__actions__more","data-automation-action":"settings-actions-dropdown",options:p(f),"trigger-custom-size":"32px","trigger-icon":"ellipsis-vertical",onSelect:p(b)},null,8,["options","onSelect"])])])):x("",!0),p(t).selectionStatus.value===p(pe).Multiple?(d(),C("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${q.value} components selected`},[E("p",null,Q(q.value),1)],8,ml)):x("",!0),I.value&&p(t).selectionStatus.value===p(pe).Multiple?(d(),$(al,{key:3,class:"BuilderSettings__actions"})):x("",!0),w(nl,{class:"BuilderSettings__main",inert:I.value},null,8,["inert"]),p(t).isSingleSelectionActive.value?(d(),$(sl,{key:4,"is-open":m.value,"onUpdate:isOpen":g[0]||(g[0]=a=>m.value=a),"selected-id":p(t).firstSelectedId.value},null,8,["is-open","selected-id"])):x("",!0)],2)):x("",!0)}}),yl=P(fl,[["__scopeId","data-v-6a0c1c16"]]),kl=Object.freeze(Object.defineProperty({__proto__:null,default:yl},Symbol.toStringTag,{value:"Module"}));export{We as B,He as W,ae as a,kl as b,fe as e,It as u};
