function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderTemplateEditor-DGwcaJz_.js","./index-DKV98_mQ.js","./index-Dlp2Whh9.css","./useComponentDescription-BfDFUQG8.js","./WdsDropdownMenu-CC0OxiPa.js","./WdsCheckbox-DxMuF56K.js","./WdsCheckbox-DKvpPA4D.css","./WdsDropdownMenu-BT8vFJ33.css","./useKeyValueEditor-26wUX5aD.js","./useKeyValueEditor-CsemOh8D.css","./BuilderTemplateEditor-CYSDeWgV.css","./BuilderEmbeddedCodeEditor-DrHsmZwR.js","./BuilderEmbeddedCodeEditor-CXloIist.css","./BuilderGraphSelect-BZbouDGj.js","./useListResources-6iXhrC_z.js","./BuilderGraphSelect-D7B61d5s.css","./BuilderApplicationSelect-Ci0ZoWgs.js","./BuilderApplicationSelect-XaM1D5fv.css","./BuilderModelSelect-DaKORdKs.js","./BuilderModelSelect-Dc4IPLp2.css","./BuilderSettingsArtifactAPITriggerDetails-APffw7wT.js","./BuilderSettingsArtifactAPITriggerDetails-DnX66iRg.css","./BuilderSettingsHandlers-CP6y2Bxy.js","./BuilderApp-BNsg9Mvf.js","./marked.esm-273vDTCT.js","./BuilderApp-CO3AuGZY.css","./useBlueprintRun-Br9fEnYL.js","./BuilderSettingsHandlers-DJPeASfz.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as h,R as p,a0 as Xe,aS as He,C as Qe,d as A,i as R,a as D,r as X,o as u,b as $,ar as Ze,z as O,x as w,W as J,an as ne,y as L,at as Ce,ak as ie,am as ye,aE as M,aq as re,f as C,D as j,g as E,S as x,E as H,_ as P,al as z,Q as Y,m as U,q as se,G as Ee,aT as Ue,K as Ke,s as ce,a5 as et,aK as tt,w as ve,aU as nt,a7 as ot,aL as lt,L as oe,aV as at,aW as it,J as je,A as ue,t as Q,ay as G,aX as ge,$ as rt,aY as Ie,a6 as me,U as Ve,l as xe,as as Z,v as ke,aZ as st,a_ as Te,a$ as W,b0 as ut,b1 as dt,b2 as ct,b3 as pt,b4 as vt,aD as Le,F as N,aJ as Ne,u as Oe,b5 as ze,b6 as Fe,aH as pe,aR as mt,b7 as ft,b8 as yt,b9 as gt,a3 as _t}from"./index-DKV98_mQ.js";import{u as Ye}from"./useComponentDescription-BfDFUQG8.js";import{a as Be,W as bt}from"./WdsDropdownMenu-CC0OxiPa.js";import{W as te,u as St}from"./useKeyValueEditor-26wUX5aD.js";import{W as kt}from"./WdsCheckbox-DxMuF56K.js";function*fe(e,l="",t=new WeakSet){if(!(typeof e!="object"||e===null)&&!t.has(e)){t.add(e);for(const d in e){const o=l?`${l}.${d}`:d;yield o,typeof e[d]=="object"&&e[d]!==null&&!Array.isArray(e[d])&&(yield*fe(e[d],o,t))}}}function*ht(e,l){const t=new Set;function*d(o){var n;if(t.has(o))return;t.add(o);const a=e.getComponentById(o);if(a)for(const y of e.getComponentsNested(a.parentId))(n=y.outs)!=null&&n.some(m=>m.toNodeId===o)&&(yield y,yield*d(y.id))}yield*d(l)}function It(e,l=void 0,t=Xe()){const d=h(()=>new Set(fe(e.userStateInitial.value))),o=h(()=>{try{return Et(e,d.value)}catch(y){return t.error("Cannot compute blueprintsSetStates",y),{}}}),a=h(()=>{try{return Ct(e,d.value)}catch(y){return t.error("Cannot compute bindings",y),{}}}),n=h(()=>{try{return Bt(e,p(l))}catch(y){return t.error("Cannot compute blueprintsResults",y),{}}});return{blueprintsSetStates:o,bindings:a,blueprintsResults:n}}function Bt(e,l,t=new Set){var o;const d={};for(const a of ht(e,l)){const n=a.type,y=e.getComponentDefinition(a.type);if(!y||!(a.type&&!He.has(n)&&a.type.startsWith("blueprints_")&&((o=y==null?void 0:y.outs)==null?void 0:o.success)!==void 0))continue;const c=`results.${a.id}`;c&&!t.has(c)&&(d[c]??(d[c]={components:[]}),d[c].components.push(a))}return d}function Ct(e,l=new Set){var d;const t={};for(const o of Qe)for(const a of e.getComponentsNested(o)){const n=(d=a.binding)==null?void 0:d.stateRef;n&&!l.has(n)&&(t[n]??(t[n]={components:[]}),t[n].components.push(a))}return t}function Et(e,l=new Set){var o;function*t(){for(const a of e.getComponentsNested("blueprints_root"))a.type==="blueprints_setstate"&&a.content&&(yield a)}const d={};for(const a of t()){const n=(o=a.content)==null?void 0:o.element;!n||typeof n!="string"||l.has(n)||(d[n]??(d[n]={components:[]}),d[n].components.push(a))}return d}const we=A({__name:"BuilderStateSelectorDropdownComponent",props:{componentId:{type:String,required:!0},path:{type:String,required:!0},selected:{type:Boolean,required:!1}},setup(e){const l=e,t=R(D.core),d=R(D.builderManager),o=X(!1),a=h(()=>t.getComponentById(l.componentId)),{name:n,possibleImageUrls:y,previewText:m}=Ye(t,a),c=h(()=>({icon:y.value,label:l.path,detail:m.value||n.value,value:l.path})),{goToComponentParentPage:k}=Ce(t,d);async function S(){await k(l.componentId),d.setSelection(l.componentId)}return(r,v)=>(u(),$(Be,{class:"BuilderStateSelectorDropdownItemComponent",option:c.value,selected:e.selected,"show-custom-action":"",onMousemove:v[1]||(v[1]=f=>o.value=!0),onMouseout:v[2]||(v[2]=f=>o.value=!1)},Ze({_:2},[o.value?{name:"action",fn:O(()=>[w(J,{variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:ne(S,["prevent"]),onMousemove:v[0]||(v[0]=f=>o.value=!0)},{default:O(()=>[w(L,{name:"square-dashed-mouse-pointer"})]),_:1})]),key:"0"}:void 0]),1032,["option","selected"]))}}),xt={class:"BuilderStateSelectorDropdown"},wt={key:1,class:"BuilderStateSelectorDropdown__empty"},$t={key:2,class:"BuilderStateSelectorDropdown__section"},Tt={key:3,class:"BuilderStateSelectorDropdown__section"},Ft={key:4,class:"BuilderStateSelectorDropdown__section"},Vt={key:5,class:"BuilderStateSelectorDropdown__section"},Ot={key:6,class:"BuilderStateSelectorDropdown__section"},qt=A({__name:"BuilderStateSelectorDropdown",props:ie({componentId:{type:String,required:!1,default:void 0},query:{type:String,required:!1,default:""},allowCreate:{type:Boolean,required:!1},hideSecrets:{type:Boolean,required:!1},hideBlueprintResults:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=e,t=R(D.core),d=R(D.secretsManager),o=ye(e,"modelValue"),a=It(t,M(l,"componentId")),n=h(()=>{const f=[];for(const g of fe(t.userStateInitial.value))l.query&&!g.includes(l.query)||f.push({value:g,label:g,icon:"code",iconBgColor:re.Green2});return f.sort((g,I)=>g.label.localeCompare(I.label))}),y=h(()=>{if(l.hideSecrets)return[];const f=[];for(const g of fe(d.secrets.value)){const I=`vault.${g}`;l.query&&!I.includes(l.query)||f.push({value:`vault.${g}`,label:g,icon:"key-round",iconBgColor:re.Yellow2})}return f.sort((g,I)=>g.label.localeCompare(I.label))}),m=h(()=>S(a.bindings.value)),c=h(()=>S(a.blueprintsSetStates.value)),k=h(()=>l.hideBlueprintResults?[]:S(a.blueprintsResults.value));function S(f){return Object.entries(f).map(([g,{components:I}])=>{for(const q of I)if(q.id!==l.componentId)return{componentId:q.id,path:g}}).filter(g=>!(!g||l.query&&!g.path.includes(l.query)))}const r=h(()=>!l.allowCreate||!l.query||l.query.endsWith(".")?!1:!(n.value.some(g=>g.value===l.query)||y.value.some(g=>g.value===l.query)||k.value.some(g=>g.path===l.query)||m.value.some(g=>g.path===l.query))),v=h(()=>!!(n.value.length||c.value.length||m.value.length||k.value.length||y.value.length));return(f,g)=>(u(),C("div",xt,[r.value?(u(),C(j,{key:0},[g[1]||(g[1]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," Add new variable ",-1)),w(Be,{option:{value:e.query,label:e.query,icon:"plus",iconBgColor:p(re).Blue4,iconColor:p(re).White},onClick:g[0]||(g[0]=ne(I=>o.value=e.query,["stop"]))},null,8,["option"])],64)):v.value?x("",!0):(u(),C("div",wt," No result ")),c.value.length?(u(),C("div",$t,[g[2]||(g[2]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," Set states ",-1)),(u(!0),C(j,null,H(c.value,I=>(u(),$(we,{key:I.path,path:I.path,"component-id":I.componentId,selected:I.path===o.value,onClick:ne(q=>o.value=I.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),m.value.length?(u(),C("div",Tt,[g[3]||(g[3]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," Interface variables ",-1)),(u(!0),C(j,null,H(m.value,I=>(u(),$(we,{key:I.path,path:I.path,"component-id":I.componentId,selected:I.path===o.value,onClick:ne(q=>o.value=I.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),!e.hideBlueprintResults&&k.value.length?(u(),C("div",Ft,[g[4]||(g[4]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," block results ",-1)),(u(!0),C(j,null,H(k.value,I=>(u(),$(we,{key:I.path,path:I.path,"component-id":I.componentId,selected:I.path===o.value,onClick:ne(q=>o.value=I.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),!e.hideSecrets&&y.value.length?(u(),C("div",Vt,[g[5]||(g[5]=E("p",{class:"BuilderStateSelectorDropdown__section__title"},"Secrets",-1)),(u(!0),C(j,null,H(y.value,I=>(u(),$(Be,{key:I.value,option:I,selected:I.value===o.value,onClick:ne(q=>o.value=I.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):x("",!0),n.value.length?(u(),C("div",Ot,[g[6]||(g[6]=E("p",{class:"BuilderStateSelectorDropdown__section__title"}," main.py variables ",-1)),(u(!0),C(j,null,H(n.value,I=>(u(),$(Be,{key:I.value,option:I,selected:I.value===o.value,onClick:ne(q=>o.value=I.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):x("",!0)]))}}),Mt=P(qt,[["__scopeId","data-v-d28f7ad6"]]),At=A({__name:"BuilderTemplateInputTemplate",props:ie({leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},invalid:{type:Boolean,required:!1},variant:{type:String,default:void 0},autofocus:{type:Boolean},multiline:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:ie({rightIconClick:()=>!0,input:e=>!!e},["update:modelValue"]),setup(e,{expose:l,emit:t}){const d=z({loader:()=>Y(()=>import("./BuilderTemplateEditor-DGwcaJz_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)}),o=ye(e,"modelValue"),a=e,n=t;l({focus:r,getSelection:S,value:o,setSelectionEnd:k,setSelectionStart:c});const y=U("input");se(()=>{a.autofocus&&r()});async function m(v){o.value=v,n("input",{target:{value:v}})}function c(v){var f;(f=y.value)==null||f.setSelectionStart(v)}function k(v){var f;(f=y.value)==null||f.setSelectionEnd(v)}function S(){var v;return(v=y.value)==null?void 0:v.getSelection()}function r(){var v;(v=y.value)==null||v.focus()}return(v,f)=>(u(),$(Ue,{"left-icon":e.leftIcon,"right-icon":e.rightIcon,invalid:e.invalid,variant:e.variant,class:Ee(["BuilderTemplateInputTemplate",{"BuilderTemplateInputTemplate--singleline":!e.multiline,"BuilderTemplateInputTemplate--multiline":e.multiline}]),onRightIconClick:f[0]||(f[0]=g=>v.$emit("rightIconClick")),onClick:r},{default:O(()=>[w(p(d),{ref_key:"input",ref:y,class:"BuilderTemplateInputTemplate__input",multiline:e.multiline,"model-value":o.value,"onUpdate:modelValue":m},null,8,["multiline","model-value"])]),_:1},8,["left-icon","right-icon","invalid","variant","class"]))}}),Rt=P(At,[["__scopeId","data-v-2789dd2e"]]),Dt={class:"BuilderTemplateInputState__content"},Wt=A({__name:"BuilderTemplateInputState",props:ie({rightIcon:{type:String,required:!1,default:void 0}},{modelValue:{type:String},modelModifiers:{}}),emits:ie({rightIconClick:()=>!0},["update:modelValue"]),setup(e,{expose:l}){l({focus:r,setSelectionStart:c,setSelectionEnd:k,getSelection:S});const t=R(D.core),d=U("input"),o=ye(e,"modelValue"),a=X(!1),n=h(()=>!o.value&&!a.value),y=h(()=>new Set(fe(t.userStateInitial.value))),m=h(()=>({opacity:n.value?0:void 0,backgroundColor:y.value.has(o.value)?re.Green2:re.Gray1}));function c(v){d.value&&(d.value.selectionStart=v)}function k(v){d.value&&(d.value.selectionEnd=v)}function S(){var v,f;return{selectionStart:(v=d.value)==null?void 0:v.selectionStart,selectionEnd:(f=d.value)==null?void 0:f.selectionEnd}}function r(){var v;(v=d.value)==null||v.focus()}return(v,f)=>(u(),$(Ue,{class:"BuilderTemplateInputState","left-icon":n.value?"at-sign":void 0,"right-icon":e.rightIcon,onRightIconClick:f[3]||(f[3]=g=>v.$emit("rightIconClick")),onClick:f[4]||(f[4]=g=>p(d).focus())},{default:O(()=>[E("div",Dt,[E("div",{class:"BuilderTemplateInputState__content__tag",style:Ke(m.value)},[f[5]||(f[5]=E("span",null,"@",-1)),ce(E("input",{ref_key:"input",ref:d,"onUpdate:modelValue":f[0]||(f[0]=g=>o.value=g),type:"text",onFocus:f[1]||(f[1]=g=>a.value=!0),onBlur:f[2]||(f[2]=g=>a.value=!1)},null,544),[[et,o.value]])],4)])]),_:1},8,["left-icon","right-icon"]))}}),Pt=P(Wt,[["__scopeId","data-v-f03927da"]]);function Ut(e,l){const t=e.lastIndexOf("@");if(t!==-1){let d=t;const a=e.slice(t).indexOf("{");return a!==-1&&(d+=a+1),e.indexOf("}",d)!==-1?e.substring(0,t)+`@{${l}}`:e.slice(0,t)+`@{${l}}`}return e+`@{${l}}`}function Kt(e){const l=e.lastIndexOf("@");if(l===-1)return"";const t=e.slice(l);return t.includes("}")||t.includes(`
`)||!t.startsWith("@{")&&t.includes(" ")?"":t.replace(/^@{?/,"")}function jt(e,l){return function(d){var m;if(!e.value)return;let o=0;if(d.key==="ArrowDown"?o=1:d.key==="ArrowUp"&&(o=-1),o===0)return;const a=Array.from(e.value.querySelectorAll("button")).filter(c=>!c.hasAttribute("disabled")&&c.offsetParent!==null);let n=o===1?a[0]:a.at(-1);const y=a.indexOf(document.activeElement);y!==-1&&(n=a[y+o]),n?(n.focus(),d.preventDefault()):(m=l==null?void 0:l.nextFocusNotFound)==null||m.call(l)}}const Lt=A({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},componentId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"template"},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},readonly:{type:Boolean}},emits:["input","update:value"],setup(e,{expose:l,emit:t}){const d=e,o=t,a=U("root"),n=U("input"),y=U("dropdown"),m=X(),{floatingStyles:c,update:k}=tt(a,y,{placement:"bottom-start",middleware:[at(),it({apply({rects:i,elements:s}){Object.assign(s.floating.style,{minWidth:`${i.reference.width}px`,maxWidth:`${i.reference.width}px`})}})],strategy:"fixed"});S();function S(){let i;function s(){i&&i(),i=void 0}ve(y,()=>{s(),y.value&&(i=nt(n,y.value,k))}),ot(()=>s())}l({focus:()=>{var i;return(i=n.value)==null?void 0:i.focus()}});const r=h(()=>d.options?Object.entries(d.options).reduce((i,[s,F])=>(s.includes(d.value)&&i.push({value:s,label:F}),i),[]):[]),v=jt(y,{nextFocusNotFound:()=>{var i;m.value=void 0,(i=n.value)==null||i.focus()}});function f(){r.value.length>0&&(m.value="static")}const g=h(()=>{var B,T;if(d.type==="state")return d.value;let i=((B=n.value)==null?void 0:B.value)??"";if(!i)return"";const{selectionStart:s}=((T=n.value)==null?void 0:T.getSelection())??{},F=i.slice(0,s);return Kt(F)}),I=lt(a);ve(I,async()=>{I.value||(await oe(),setTimeout(()=>{m.value=void 0},300))});async function q(i){var K,le;let s=((K=n.value)==null?void 0:K.value)??"";const{selectionStart:F,selectionEnd:B}=((le=n.value)==null?void 0:le.getSelection())??{};let T=F??s.length;if(d.type==="template"){const be=s.slice(0,F),Se=s.slice(B).replace(/^(\})+/,""),de=Ut(be,i);s=`${de}${Se}`,T=de.length}else s=i,T=i.length;o("input",{target:{value:s}}),o("update:value",s),n.value&&(n.value.focus(),m.value=void 0,await oe(),n.value.setSelectionStart(T))}async function V(i){o("input",{target:{value:i}}),o("update:value",i),n.value&&(n.value.focus(),m.value=void 0,await oe(),n.value.setSelectionStart(i.length))}function b(i){_({target:{value:i}})}function _(i){var K;let s=String(i.target.value??"");if(o("input",i),o("update:value",s),d.type==="state"){m.value="template";return}if(r.value.some(le=>le.value.includes(s))){m.value="static";return}const{selectionStart:F}=((K=n.value)==null?void 0:K.getSelection())??{},B=s.slice(0,F),T=!!B.match(/@\{([^}{@]*)$/)||B.endsWith("@")||!!g.value;m.value=T?"template":void 0}return(i,s)=>(u(),C("div",{ref_key:"root",ref:a,class:"BuilderTemplateInput",onKeydown:s[2]||(s[2]=ne((...F)=>p(v)&&p(v)(...F),["stop"]))},[e.type==="template"?(u(),$(Rt,{key:0,ref_key:"input",ref:n,"model-value":d.value,placeholder:d.placeholder,list:d.options?`list-${d.inputId}`:void 0,invalid:e.error!==void 0,autofocus:e.autofocus,readonly:e.readonly,multiline:e.multiline,onInput:_,onClick:f},null,8,["model-value","placeholder","list","invalid","autofocus","readonly","multiline"])):x("",!0),e.type==="state"?(u(),$(Pt,{key:1,ref_key:"input",ref:n,"right-icon":m.value?"chevron-up":"chevron-down","model-value":d.value,onRightIconClick:s[0]||(s[0]=F=>m.value=m.value?void 0:"template"),"onUpdate:modelValue":b,onClick:s[1]||(s[1]=F=>p(n).focus())},null,8,["right-icon","model-value"])):x("",!0),m.value?(u(),C("div",{key:2,ref_key:"dropdown",ref:y,class:"BuilderTemplateInput__dropdown",style:Ke(p(c))},[m.value==="template"?(u(),$(Mt,{key:0,"hide-secrets":e.type==="state","hide-blueprint-results":e.type==="state","allow-create":e.type==="state",query:g.value,"component-id":e.componentId,"onUpdate:modelValue":q},null,8,["hide-secrets","hide-blueprint-results","allow-create","query","component-id"])):r.value.length?(u(),$(bt,{key:1,options:r.value,onSelect:V},null,8,["options"])):x("",!0)],4)):x("",!0)],544))}}),ee=P(Lt,[["__scopeId","data-v-8594b4ef"]]),Nt=["disabled","data-writer-tooltip"],zt={key:0,class:"WdsTab__indicator"},Yt=A({__name:"WdsTab",props:{disabled:{type:[Boolean,String],default:void 0},selected:{type:Boolean},variant:{type:String,required:!0}},emits:{click:()=>!0},setup(e){const l=e,t=h(()=>typeof l.disabled=="string"?l.disabled:void 0);return(d,o)=>(u(),C("button",{class:Ee(["WdsTab",{"WdsTab--disabled":e.disabled,"WdsTab--selected":e.selected,"WdsTab--variant-bar":e.variant==="bar","WdsTab--variant-chip":e.variant==="chip"}]),type:"button",disabled:!!e.disabled,"data-writer-tooltip":t.value,onClick:o[0]||(o[0]=a=>d.$emit("click"))},[je(d.$slots,"default",{},void 0,!0),e.variant==="bar"?(u(),C("div",zt)):x("",!0)],10,Nt))}}),Gt=P(Yt,[["__scopeId","data-v-db73c62c"]]),Jt=A({__name:"WdsTabs",props:ie({tabs:{type:Array,required:!0},variant:{type:String,default:"chip"}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=ye(e,"modelValue");return(t,d)=>(u(),C("div",{class:Ee(["WdsTabs",{"WdsTabs--variant-bar":e.variant==="bar","WdsTabs--variant-chip":e.variant==="chip"}])},[(u(!0),C(j,null,H(e.tabs,o=>(u(),$(Gt,{key:o.value,value:o.value,variant:e.variant,disabled:o.disabled,selected:o.value===l.value,onClick:a=>l.value=o.value},{default:O(()=>[ue(Q(o.label),1)]),_:2},1032,["value","variant","disabled","selected","onClick"]))),128))],2))}}),ae=P(Jt,[["__scopeId","data-v-6e6e5572"]]),_e=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),Xt=["data-automation-key"],Ht={key:0,class:"main"},Qt={key:0,class:"pickerContainer"},Zt=A({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-DKV98_mQ.js").then(b=>b.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=U("rootEl"),d=U("pickerEl"),o=U("freehandInputEl"),a=[{key:"start",label:"Left",match:b=>b=="start",default:"start",icon:"align-left"},{key:"center",label:"Center",match:b=>b=="center",default:"center",icon:"align-center"},{key:"end",label:"Right",match:b=>b=="end",default:"end",icon:"align-right"}],n=[{key:"start",label:"Top",match:b=>b=="start",default:"start",icon:"arrow-up-to-line"},{key:"center",label:"Center",match:b=>b=="center",default:"center",icon:"fold-vertical"},{key:"end",label:"Bottom",match:b=>b=="end",default:"end",icon:"arrow-down-to-line"}],y={pick:d,css:o,default:null},m=e,c=G({componentId:M(m,"componentId"),fieldKey:M(m,"fieldKey")}),k=h(()=>m.direction=="vertical"?n:m.direction=="horizontal"?a:n),S=h(()=>k.value.map(b=>({value:b.key,label:b.label,icon:b.icon}))),r=h(()=>{const b=c.value;for(const _ in k.value)if(b&&k.value[_].match(b))return k.value[_].key;return null}),f=X((()=>{if(!c.value)return"default";for(const b in k.value)if(k.value[b].match(c.value))return"pick";return"css"})()),g=()=>{var _;const b=(_=y[f.value])==null?void 0:_.value;b&&(b.focus(),typeof b.selectionStart=="number"&&(b.selectionStart=b.selectionEnd=b.value.length))},I=async b=>{f.value!=b&&(f.value=b,await oe(),g(),b==="default"&&(c.value=""))},q=b=>{for(const _ in k.value)k.value[_].key==b&&(c.value=k.value[_].default)},V=b=>{c.value=b.target.value};return se(()=>{t.value.addEventListener("focus",g)}),ge(()=>{t.value.removeEventListener("focus",g)}),(b,_)=>(u(),C("div",{ref_key:"rootEl",ref:t,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":m.fieldKey},[w(ae,{tabs:p(_e),"model-value":f.value,"onUpdate:modelValue":I},null,8,["tabs","model-value"]),f.value=="pick"||f.value=="css"?(u(),C("div",Ht,[f.value=="pick"?(u(),C("div",Qt,[w(p(l),{ref_key:"pickerEl",ref:d,"model-value":r.value,options:S.value,"onUpdate:modelValue":q},null,8,["model-value","options"])])):x("",!0),f.value=="css"?(u(),$(ee,{key:1,ref_key:"freehandInputEl",ref:o,value:p(c),error:e.error,onInput:V},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Xt))}}),De=P(Zt,[["__scopeId","data-v-6a36fb0b"]]),en=["data-automation-key"],tn={key:0,class:"main"},nn={key:0,class:"pickerContainer"},on=["value"],ln=A({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=U("rootEl"),t=U("pickerEl"),d=U("freehandInputEl"),o={pick:t,css:d,default:null},a=e,n=G({componentId:M(a,"componentId"),fieldKey:M(a,"fieldKey")}),m=X((()=>{const r=n.value;return r?/#[A-Fa-f0-9]{6}/.test(r)?"pick":"css":"default"})()),c=()=>{var v;const r=(v=o[m.value])==null?void 0:v.value;r&&(r.focus(),typeof r.selectionStart=="number"&&(r.selectionStart=r.selectionEnd=r.value.length))},k=async r=>{m.value!=r&&(m.value=r,await oe(),c(),r==="default"&&(n.value=""))},S=r=>n.value=r.target.value;return se(()=>{l.value.addEventListener("focus",c)}),ge(()=>{l.value.removeEventListener("focus",c)}),(r,v)=>(u(),C("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":e.fieldKey},[w(ae,{tabs:p(_e),"model-value":m.value,"onUpdate:modelValue":k},null,8,["tabs","model-value"]),m.value=="pick"||m.value=="css"?(u(),C("div",tn,[m.value=="pick"?(u(),C("div",nn,[E("input",{ref_key:"pickerEl",ref:t,type:"color",value:p(n),onInput:S},null,40,on)])):x("",!0),m.value=="css"?(u(),$(ee,{key:1,ref_key:"freehandInputEl",ref:d,value:p(n),error:e.error,onInput:S},null,8,["value","error"])):x("",!0)])):x("",!0)],8,en))}}),an=P(ln,[["__scopeId","data-v-5432e5c5"]]);function $e(e){return typeof e=="string"&&e.startsWith("@{")&&e.endsWith("}")}function Ge({fieldViewModel:e}){const l=X($e(e.value)),t=X({binding:$e(e.value)?e.value:"",noneBinding:l.value?"":e.value});function d(){l.value?($e(e.value)&&(t.value.binding=e.value),e.value=t.value.noneBinding,l.value=!1):(t.value.noneBinding=e.value,e.value=t.value.binding,l.value=!0)}return{isBindingMode:rt(l),toggleBindingMode:d}}const rn=["data-automation-key"],sn=A({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},fieldControl:{type:String,required:!1,default:Ie.Text},defaultValue:{type:String,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},type:{type:String,required:!1,default:"template"}},setup(e){const l=R(D.core),t=e,d=G({componentId:M(t,"componentId"),fieldKey:M(t,"fieldKey"),defaultValue:M(t,"defaultValue")}),o=h(()=>`${t.componentId}-${t.fieldKey}`),a={uiComponents:()=>{const r=l.getComponents(void 0,{sortedByPosition:!0}).filter(f=>l.isChildOf("root",f.id)),v={};return r.forEach(f=>{v[f.id]=f.id}),v},uiComponentsWithEvents:()=>l.getComponents(void 0,{sortedByPosition:!0}).filter(r=>l.isChildOf("root",r.id)).filter(r=>!!l.getComponentDefinition(r.type).events).reduce((r,v)=>(r[v.id]=v.id,r),{}),eventTypes:(r,v)=>{var V;const f=(V=r.getComponentById(v).content)==null?void 0:V.refComponentId,g=l.getComponentById(f);if(!g)return{};const I=r.getComponentDefinition(g.type);return Object.fromEntries(Object.keys(I.events??{}).map(b=>[b,b]))}},n=h(()=>{const r=l.getComponentById(t.componentId),f=l.getComponentDefinition(r.type).fields[t.fieldKey];return f.options?typeof f.options=="function"?f.options(l,t.componentId):typeof f.options=="string"?a==null?void 0:a[f.options](l,t.componentId):f.options:{}}),y=h(()=>["state","state-template"].includes(t.type)?"state":"template"),m=h(()=>S(d.value)),c=r=>{d.value=k(r.target.value)};function k(r){return typeof r!="string"?"":t.type==="state-template"?`@{${r}}`:r}function S(r){return typeof r!="string"?"":t.type==="state-template"?r.replace(/^@{/,"").replace(/}$/,""):r}return(r,v)=>(u(),C("div",{class:"BuilderFieldsText","data-automation-key":t.fieldKey},[e.fieldControl==p(Ie).Text?(u(),$(ee,{key:0,class:"content","component-id":e.componentId,"input-id":o.value,value:m.value,placeholder:e.defaultValue,type:y.value,options:n.value,error:e.error,autofocus:e.autofocus,onInput:c},null,8,["component-id","input-id","value","placeholder","type","options","error","autofocus"])):e.fieldControl==p(Ie).Textarea?(u(),$(ee,{key:1,multiline:"",variant:"text",class:"content","input-id":o.value,"component-id":e.componentId,value:m.value,placeholder:e.defaultValue,type:y.value,error:e.error,autofocus:e.autofocus,onInput:c},null,8,["input-id","component-id","value","placeholder","type","error","autofocus"])):x("",!0)],8,rn))}}),qe=P(sn,[["__scopeId","data-v-aa053130"]]),un=["data-automation-key"],dn=A({__name:"BuilderFieldsCheckbox",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,default:void 0},unit:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0}},setup(e){const l=e,t=G({componentId:M(l,"componentId"),fieldKey:M(l,"fieldKey")}),{isBindingMode:d,toggleBindingMode:o}=Ge({fieldViewModel:t}),a=h({get:()=>t.value==="yes",set:n=>{t.value=n?"yes":"no"}});return(n,y)=>p(d)?(u(),$(te,{key:0,"is-binding-button-shown":"","is-binding-enabled":p(d),label:e.label,unit:e.unit,hint:e.hint,error:e.error,"data-automation-key":l.fieldKey,"onUpdate:isBindingEnabled":p(o)},{default:O(()=>[w(qe,{type:"state-template","component-id":e.componentId,"field-key":e.fieldKey,error:e.error,"default-value":""},null,8,["component-id","field-key","error"])]),_:1},8,["is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"])):(u(),C("div",{key:1,class:"BuilderFieldsCheckbox","data-automation-key":l.fieldKey},[w(kt,{modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=m=>a.value=m),label:e.label,detail:e.hint,invalid:!!e.error},null,8,["modelValue","label","detail","invalid"]),w(J,{size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Bind to a variable",onClick:p(o)},{default:O(()=>[w(L,{name:"at-sign"})]),_:1},8,["onClick"])],8,un))}}),cn=P(dn,[["__scopeId","data-v-d540f2ac"]]),pn={key:1,class:"BuilderFieldsKeyValueModal__assistedEntries"},vn={key:0,class:"BuilderFieldsKeyValueModal__assistedEntries__form"},mn=A({__name:"BuilderFieldsKeyValueModal",props:{data:{type:String,required:!0}},emits:{submit:e=>typeof e=="string",close:()=>!0},setup(e,{emit:l}){const t=z({loader:()=>Y(()=>import("./BuilderEmbeddedCodeEditor-DrHsmZwR.js").then(q=>q.B),__vite__mapDeps([11,1,2,12]),import.meta.url)}),d=e,{mode:o,assistedEntries:a,freehandValue:n,isValid:y,currentValue:m,addAssistedEntry:c,updateAssistedEntryValue:k,updateAssistedEntryKey:S,removeAssistedEntry:r,getAssistedEntryError:v}=St(d.data),f=l,g=h(()=>[{desc:"Save",fn:()=>f("submit",m.value),disabled:d.data===m.value||!y.value}]),I=[{label:"List",value:"assisted"},{label:"JSON",value:"freehand"}];return(q,V)=>(u(),$(Ve,{title:"Category key values","display-close-button":"",actions:g.value,onClose:V[2]||(V[2]=b=>q.$emit("close"))},{titleActions:O(()=>[w(ae,{modelValue:p(o),"onUpdate:modelValue":V[0]||(V[0]=b=>me(o)?o.value=b:null),class:"BuilderFieldsKeyValueModal__tabs",tabs:I},null,8,["modelValue"])]),default:O(()=>[p(o)==="freehand"?(u(),$(p(t),{key:0,modelValue:p(n),"onUpdate:modelValue":V[1]||(V[1]=b=>me(n)?n.value=b:null),class:"BuilderFieldsKeyValueModal__freehand",variant:"minimal",language:"json"},null,8,["modelValue"])):x("",!0),p(o)==="assisted"?(u(),C("div",pn,[p(o)==="assisted"?(u(),C("div",vn,[V[3]||(V[3]=E("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelKey"}," Key ",-1)),V[4]||(V[4]=E("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelValue"}," Value ",-1)),(u(!0),C(j,null,H(p(a),(b,_)=>(u(),C(j,{key:_},[w(te,{error:p(v)(_)},{default:O(()=>[w(ee,{placeholder:"Type a key...",value:b.key,error:p(v)(_),"onUpdate:value":i=>p(S)(_,i)},null,8,["value","error","onUpdate:value"])]),_:2},1032,["error"]),w(te,null,{default:O(()=>[w(ee,{placeholder:"Type a value...",value:b.value,"onUpdate:value":i=>p(k)(_,i)},null,8,["value","onUpdate:value"])]),_:2},1024),E("div",null,[w(J,{variant:"neutral",size:"smallIcon",class:"BuilderFieldsKeyValueModal__assistedEntries__form__deleteBtn",onClick:i=>p(r)(_)},{default:O(()=>[w(L,{name:"trash-2"})]),_:2},1032,["onClick"])])],64))),128))])):x("",!0),w(J,{variant:"special",size:"small",onClick:p(c)},{default:O(()=>[w(L,{name:"plus"}),V[5]||(V[5]=ue(" Add a pair "))]),_:1},8,["onClick"])])):x("",!0)]),_:1},8,["actions"]))}}),fn=P(mn,[["__scopeId","data-v-4e74be91"]]),yn=["data-automation-key"],gn={class:"BuilderFieldsKeyValue__toolbar"},_n={key:1,class:"BuilderFieldsKeyValue__listEmpty"},bn={key:2,class:"BuilderFieldsKeyValue__list"},Sn=["data-writer-tooltip"],kn=["data-writer-tooltip"],hn=A({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=e,t=G({componentId:M(l,"componentId"),fieldKey:M(l,"fieldKey")}),d=R(D.core),o=R(D.secretsManager),{getEvaluatedFields:a}=xe(d,o),n=X(!1),y=h(()=>{var k;return((k=a(l.instancePath))==null?void 0:k[l.fieldKey].value)??{}}),m=h(()=>t.value||JSON.stringify(y.value));function c(k){n.value=!1,t.value=k}return(k,S)=>(u(),C("div",{class:"BuilderFieldsKeyValue",tabindex:"-1","data-automation-key":l.fieldKey},[E("div",gn,[w(J,{variant:"neutral",size:"smallIcon","data-automation-key":"openAssistedMode",onClick:S[0]||(S[0]=r=>n.value=!0)},{default:O(()=>[w(L,{name:"pencil"})]),_:1})]),n.value?(u(),$(fn,{key:0,data:m.value,onSubmit:c,onClose:S[1]||(S[1]=r=>n.value=!1)},null,8,["data"])):x("",!0),Object.keys(y.value).length===0?(u(),C("div",_n,[S[4]||(S[4]=E("p",null,"There are no key value categories defined",-1)),w(J,{variant:"special",size:"small",onClick:S[2]||(S[2]=r=>n.value=!0)},{default:O(()=>[w(L,{name:"pencil"}),S[3]||(S[3]=ue(" Edit "))]),_:1})])):(u(),C("ul",bn,[(u(!0),C(j,null,H(y.value,(r,v)=>(u(),C("li",{key:v,class:"BuilderFieldsKeyValue__list__item"},[E("p",{class:"BuilderFieldsKeyValue__list__item__key","data-writer-tooltip":v,"data-writer-tooltip-strategy":"overflow"},Q(v),9,Sn),E("p",{class:"BuilderFieldsKeyValue__list__item__value","data-writer-tooltip":r,"data-writer-tooltip-strategy":"overflow"},Q(r||"<empty value>"),9,kn)]))),128))]))],8,yn))}}),In=P(hn,[["__scopeId","data-v-43bf3550"]]),Bn=A({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},defaultValue:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},setup(e){const l=e,t=G({componentId:M(l,"componentId"),fieldKey:M(l,"fieldKey"),defaultValue:M(l,"defaultValue")}),d=o=>{t.value=o.target.value};return(o,a)=>(u(),$(ee,{class:"BuilderFieldsObject","data-automation-key":l.fieldKey,multiline:"",variant:"code",value:p(t),placeholder:e.defaultValue,error:e.error,onInput:d},null,8,["data-automation-key","value","placeholder","error"]))}}),Cn=P(Bn,[["__scopeId","data-v-efbda4e8"]]),En=["data-automation-key"],xn={key:0,class:"main"},wn={key:0,class:"pickerContainer"},$n={class:"BuilderFieldsPadding__options"},Tn=A({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-DKV98_mQ.js").then(i=>i.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=U("rootEl"),d=U("pickerEl"),o=U("freehandInputEl"),a=U("fixedEl"),n=[{key:"all_sides",label:"All sides",match:i=>i.split(" ").length==1&&i.endsWith("px"),default:()=>v.value?v.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:i=>i.split(" ").length==2&&i.endsWith("px"),default:()=>v.value?v.value[2]+" "+v.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:i=>i.split(" ").length==4&&i.endsWith("px"),default:()=>v.value?[v.value[3],v.value[1],v.value[2],v.value[0]].join(" "):"0px 0px 0px 0px"}],y={pick:d,css:o,default:null},m=e,c=G({componentId:M(m,"componentId"),fieldKey:M(m,"fieldKey")}),k=h(()=>n.map(i=>({value:i.key,label:i.label,icon:"panel-top-dashed"}))),S=h(()=>{const i=c.value;for(const s in n)if(i&&n[s].match(i))return n[s].key;return null}),r=h(()=>{const i=v.value;return i?[i[0].substring(0,i[0].length-2),i[1].substring(0,i[1].length-2),i[2].substring(0,i[2].length-2),i[3].substring(0,i[3].length-2)]:["0","0","0","0"]}),v=h(()=>{const i=c.value;if(i){const s=i.split(" ");if(s.length==1&&s[0].endsWith("px"))return[s[0],s[0],s[0],s[0]];if(s.length==2&&s[0].endsWith("px")&&s[0].endsWith("px"))return[s[1],s[1],s[0],s[0]];if(s.length==4&&s[0].endsWith("px")&&s[1].endsWith("px")&&s[2].endsWith("px")&&s[3].endsWith("px"))return[s[3],s[1],s[0],s[2]]}else return null;return null}),g=X((()=>{if(!c.value)return"default";for(const i in n)if(n[i].match(c.value))return"pick";return"css"})()),I=()=>{var s;const i=(s=y[g.value])==null?void 0:s.value;i&&(i.focus(),typeof i.selectionStart=="number"&&(i.selectionStart=i.selectionEnd=i.value.length))},q=async i=>{g.value!=i&&(g.value=i,await oe(),I(),i==="default"&&(c.value=""))},V=i=>{for(const s in n)n[s].key==i&&(c.value=n[s].default());oe(()=>{var s;(s=a.value)==null||s.focus()})},b=i=>{c.value=i.target.value},_=(i,s,F)=>{const B=Number(i),T=c.value;if(s=="all_sides")c.value=B+"px";else if(s=="XY sides"){const K=T.split(" ");F=="x"?K[1]=B+"px":F=="y"&&(K[0]=B+"px"),c.value=K.join(" ")}else if(s=="Per side"){const K=T.split(" ");F=="top"?K[0]=B+"px":F=="right"?K[1]=B+"px":F=="bottom"?K[2]=B+"px":F=="left"&&(K[3]=B+"px"),c.value=K.join(" ")}};return se(()=>{t.value.addEventListener("focus",I)}),ge(()=>{t.value.removeEventListener("focus",I)}),(i,s)=>(u(),C("div",{ref_key:"rootEl",ref:t,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":m.fieldKey},[w(ae,{tabs:p(_e),"model-value":g.value,"onUpdate:modelValue":q},null,8,["tabs","model-value"]),g.value=="pick"||g.value=="css"?(u(),C("div",xn,[g.value=="pick"?(u(),C("div",wn,[w(p(l),{ref_key:"pickerEl",ref:d,"model-value":S.value,options:k.value,"onUpdate:modelValue":V},null,8,["model-value","options"]),E("div",$n,[S.value=="all_sides"?(u(),C(j,{key:0},[s[7]||(s[7]=E("i",null,"All",-1)),w(Z,{ref_key:"fixedEl",ref:a,type:"number","model-value":r.value[0],"onUpdate:modelValue":s[0]||(s[0]=F=>_(F,S.value))},null,8,["model-value"]),s[8]||(s[8]=E("div",null,"px",-1))],64)):x("",!0),S.value=="XY sides"?(u(),C(j,{key:1},[s[9]||(s[9]=E("i",null,"X",-1)),w(Z,{type:"number","model-value":r.value[0],"onUpdate:modelValue":s[1]||(s[1]=F=>_(F,S.value,"x"))},null,8,["model-value"]),s[10]||(s[10]=E("div",null,"px",-1)),s[11]||(s[11]=E("i",null,"Y",-1)),w(Z,{type:"number","model-value":r.value[2],"onUpdate:modelValue":s[2]||(s[2]=F=>_(F,S.value,"y"))},null,8,["model-value"]),s[12]||(s[12]=E("div",null,"px",-1))],64)):x("",!0),S.value=="Per side"?(u(),C(j,{key:2},[s[13]||(s[13]=E("i",null,"Left",-1)),w(Z,{type:"number","model-value":r.value[0],"onUpdate:modelValue":s[3]||(s[3]=F=>_(F,S.value,"left"))},null,8,["model-value"]),s[14]||(s[14]=E("div",null,"px",-1)),s[15]||(s[15]=E("i",null,"Right",-1)),w(Z,{type:"number","model-value":r.value[1],"onUpdate:modelValue":s[4]||(s[4]=F=>_(F,S.value,"right"))},null,8,["model-value"]),s[16]||(s[16]=E("div",null,"px",-1)),s[17]||(s[17]=E("i",null,"Top",-1)),w(Z,{type:"number","model-value":r.value[2],"onUpdate:modelValue":s[5]||(s[5]=F=>_(F,S.value,"top"))},null,8,["model-value"]),s[18]||(s[18]=E("div",null,"px",-1)),s[19]||(s[19]=E("i",null,"Bottom",-1)),w(Z,{type:"number","model-value":r.value[3],"onUpdate:modelValue":s[6]||(s[6]=F=>_(F,S.value,"bottom"))},null,8,["model-value"]),s[20]||(s[20]=E("div",null,"px",-1))],64)):x("",!0)])])):x("",!0),g.value=="css"?(u(),$(ee,{key:1,ref_key:"freehandInputEl",ref:o,value:p(c),error:e.error,onInput:b},null,8,["value","error"])):x("",!0)])):x("",!0)],8,En))}}),Fn=P(Tn,[["__scopeId","data-v-e122e664"]]),Vn=["data-automation-key"],On={key:0,class:"main"},qn={key:0,class:"pickerContainer"},Mn={class:"param"},An={class:"header"},Rn=["value"],Dn={class:"param"},Wn={class:"header"},Pn=["value"],Un={class:"param"},Kn={class:"header"},jn=["value"],Ln={class:"param"},Nn={class:"header"},zn=["value"],Yn={class:"param"},Gn=["value"],Jn=A({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=U("rootEl"),t=U("freehandInputEl"),d=U("paramOffsetXEl"),o=U("paramOffsetYEl"),a=U("paramBlurRadiusEl"),n=U("paramSpreadRadiusEl"),y=U("paramColorEl"),m={pick:d,css:t,default:null},c=e,k=G({componentId:M(c,"componentId"),fieldKey:M(c,"fieldKey")}),S=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,v=X((()=>{const b=k.value;return b?S.test(b)?"pick":"css":"default"})()),f=()=>{var _;const b=(_=m[v.value])==null?void 0:_.value;b&&(b.focus(),typeof b.selectionStart=="number"&&(b.selectionStart=b.selectionEnd=b.value.length))},g=async b=>{v.value!=b&&(v.value=b,await oe(),f(),b==="default"&&(k.value=""))},I=()=>{const b=d.value.value,_=o.value.value,i=a.value.value,s=n.value.value,F=y.value.value,B=`${b}px ${_}px ${i}px ${s}px ${F}`;k.value=B},q=b=>{k.value=b.target.value},V=h(()=>{const b=k.value.match(S);return(b==null?void 0:b.groups)??{}});return se(()=>{l.value.addEventListener("focus",f)}),ge(()=>{l.value.removeEventListener("focus",f)}),(b,_)=>{var i,s,F,B,T,K,le,be,Se,de,Me,Ae,Re;return u(),C("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":c.fieldKey},[w(ae,{tabs:p(_e),"model-value":v.value,"onUpdate:modelValue":g},null,8,["tabs","model-value"]),v.value=="pick"||v.value=="css"?(u(),C("div",On,[v.value=="pick"?(u(),C("div",qn,[E("div",Mn,[E("div",An,[_[0]||(_[0]=E("div",{class:"name"},"Offset X",-1)),ce(E("div",{class:"value"},Q((i=V.value)==null?void 0:i.offsetX)+"px ",513),[[ke,(s=V.value)==null?void 0:s.offsetX]])]),E("input",{ref_key:"paramOffsetXEl",ref:d,type:"range",min:"0",max:"32",value:(F=V.value)==null?void 0:F.offsetX,onInput:I},null,40,Rn)]),E("div",Dn,[E("div",Wn,[_[1]||(_[1]=E("div",{class:"name"},"Offset Y",-1)),ce(E("div",{class:"value"},Q((B=V.value)==null?void 0:B.offsetY)+"px ",513),[[ke,(T=V.value)==null?void 0:T.offsetY]])]),E("input",{ref_key:"paramOffsetYEl",ref:o,type:"range",min:"0",max:"32",value:(K=V.value)==null?void 0:K.offsetY,onInput:I},null,40,Pn)]),E("div",Un,[E("div",Kn,[_[2]||(_[2]=E("div",{class:"name"},"Blur radius",-1)),ce(E("div",{class:"value"},Q((le=V.value)==null?void 0:le.blurRadius)+"px ",513),[[ke,(be=V.value)==null?void 0:be.blurRadius]])]),E("input",{ref_key:"paramBlurRadiusEl",ref:a,type:"range",min:"0",max:"32",value:(Se=V.value)==null?void 0:Se.blurRadius,onInput:I},null,40,jn)]),E("div",Ln,[E("div",Nn,[_[3]||(_[3]=E("div",{class:"name"},"Spread radius",-1)),ce(E("div",{class:"value"},Q((de=V.value)==null?void 0:de.spreadRadius)+"px ",513),[[ke,(Me=V.value)==null?void 0:Me.spreadRadius]])]),E("input",{ref_key:"paramSpreadRadiusEl",ref:n,type:"range",min:"-16",max:"32",value:(Ae=V.value)==null?void 0:Ae.spreadRadius,onInput:I},null,40,zn)]),E("div",Yn,[_[4]||(_[4]=E("div",{class:"header"},[E("div",{class:"name"},"Color")],-1)),E("input",{ref_key:"paramColorEl",ref:y,type:"color",value:(Re=V.value)==null?void 0:Re.color,onInput:I},null,40,Gn)])])):x("",!0),v.value=="css"?(u(),$(ee,{key:1,ref_key:"freehandInputEl",ref:t,value:p(k),error:e.error,onInput:q},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Vn)}}}),Xn=P(Jn,[["__scopeId","data-v-c59dcd63"]]),Hn=["data-automation-key"],Qn={key:0,class:"main"},Zn={key:0,class:"pickerContainer"},eo={key:0,class:"fixedContainer"},to=A({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-DKV98_mQ.js").then(_=>_.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=U("rootEl"),d=U("pickerEl"),o=U("freehandInputEl"),a=U("fixedEl"),n=[{key:"fixed",label:"Fixed",match:_=>_.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:_=>_=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:_=>_=="100%",default:"100%"}],y={pick:d,css:o,default:null},m=e,c=G({componentId:M(m,"componentId"),fieldKey:M(m,"fieldKey")}),k=h(()=>n.map(_=>({value:_.key,label:_.label,icon:"move-horizontal"}))),S=h(()=>{const _=c.value;for(const i in n)if(_&&n[i].match(_))return n[i].key;return null}),r=h(()=>{const _=c.value;if(_){if(_.endsWith("px"))return _.substring(0,_.length-2)}else return null;return null}),f=X((()=>{if(!c.value)return"default";for(const _ in n)if(n[_].match(c.value))return"pick";return"css"})()),g=()=>{var i;const _=(i=y[f.value])==null?void 0:i.value;_&&(_.focus(),typeof _.selectionStart=="number"&&(_.selectionStart=_.selectionEnd=_.value.length))},I=async _=>{f.value!=_&&(f.value=_,await oe(),g(),_==="default"&&(c.value=""))},q=_=>{for(const i in n)if(n[i].key==_){const s=n[i].default;c.value=s}_=="fixed"&&oe(()=>{a.value.focus()})},V=_=>{c.value=_.target.value},b=_=>{c.value=`${_}px`};return se(()=>{t.value.addEventListener("focus",g)}),ge(()=>{t.value.removeEventListener("focus",g)}),(_,i)=>(u(),C("div",{ref_key:"rootEl",ref:t,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":m.fieldKey},[w(ae,{tabs:p(_e),"model-value":f.value,"onUpdate:modelValue":I},null,8,["tabs","model-value"]),f.value=="pick"||f.value=="css"?(u(),C("div",Qn,[f.value=="pick"?(u(),C("div",Zn,[w(p(l),{ref_key:"pickerEl",ref:d,"model-value":S.value,options:k.value,"onUpdate:modelValue":q},null,8,["model-value","options"]),S.value=="fixed"?(u(),C("div",eo,[w(Z,{ref_key:"fixedEl",ref:a,type:"number","model-value":r.value,invalid:e.error!==void 0,"onUpdate:modelValue":b},null,8,["model-value","invalid"]),i[0]||(i[0]=E("div",null,"px",-1))])):x("",!0)])):x("",!0),f.value=="css"?(u(),$(ee,{key:1,ref_key:"freehandInputEl",ref:o,value:p(c),onInput:V},null,8,["value"])):x("",!0)])):x("",!0)],8,Hn))}}),no=P(to,[["__scopeId","data-v-55a31bea"]]),oo=["data-automation-key"],lo={class:"tools"},ao=["onClick"],io={class:"toolName"},ro={class:"addToolForm"},so=A({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(e){const l=z({loader:()=>Y(()=>import("./BuilderGraphSelect-BZbouDGj.js"),__vite__mapDeps([13,1,2,14,15]),import.meta.url)}),t=z({loader:()=>Y(()=>import("./BuilderEmbeddedCodeEditor-DrHsmZwR.js").then(b=>b.B),__vite__mapDeps([11,1,2,12]),import.meta.url)}),o={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:""},a=X(o),n=h(()=>{switch(a.value.type){case"function":return!a.value.code;case"graph":return!a.value.graphIds;default:return!0}}),y=h({get:()=>a.value.graphIds.split(","),set(b){a.value={...a.value,graphIds:b.join(",")}}}),m=e,c=G({componentId:M(m,"componentId"),fieldKey:M(m,"fieldKey")}),k=h(()=>{try{return JSON.parse(c.value)}catch{return{}}});function S(){a.value={...o,isShown:!0}}function r(){const{type:b,code:_,graphIds:i}=a.value;if(b=="function")return{...JSON.parse(_),type:b};if(b=="graph"){const s=i.split(",").map(F=>F.trim());return{type:b,graph_ids:s}}throw"Unexpected tool type."}function v(b){let _=[];const{originalName:i,name:s}=b;return s||_.push("The name cannot be empty."),Object.keys(k.value).includes(s)&&!(i||i==s)&&_.push("An existing tool with the specified name already exists."),_}function f(){const b=v(a.value);if(b.length>0){b.forEach(alert);return}let _;try{_=r()}catch{alert("Incorrect tool definition");return}c.value=JSON.stringify({...k.value,...a.value.originalName?{[a.value.originalName]:void 0}:{},[a.value.name]:_}),a.value.isShown=!1}function g(b,_){var s;const{type:i}=_;if(i=="function")return{isShown:!0,type:"function",originalName:b,name:b,graphIds:"",code:JSON.stringify(_,void 0,2)};if(i=="graph")return{isShown:!0,type:"graph",originalName:b,name:b,graphIds:(s=_.graph_ids)==null?void 0:s.join(","),code:""};throw"Unexpected tool type;"}function I(b){var i;const _=(i=k.value)==null?void 0:i[b];_&&(a.value=g(b,_))}function q(b){c.value=JSON.stringify({...k.value,[b]:void 0})}const V=h(()=>[{desc:"cancel",fn:()=>a.value.isShown=!1},{desc:"Save",disabled:n.value,fn:f}]);return(b,_)=>(u(),C("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":m.fieldKey},[E("div",lo,[(u(!0),C(j,null,H(k.value,(i,s)=>(u(),C("div",{key:s,class:"tool",onClick:F=>I(s)},[E("div",io,Q(s),1),w(J,{variant:"primary",size:"smallIcon",class:"delete",onClick:ne(F=>q(s),["stop"])},{default:O(()=>[w(L,{name:"trash-2"})]),_:2},1032,["onClick"])],8,ao))),128))]),w(J,{size:"small",onClick:S},{default:O(()=>[w(L,{name:"plus"}),_[4]||(_[4]=ue(" Add tool "))]),_:1}),a.value.isShown?(u(),$(Ve,{key:0,actions:V.value,title:"Add tool","allow-overflow":""},{default:O(()=>[E("div",ro,[w(te,{label:"Tool type"},{default:O(()=>[w(st,{modelValue:a.value.type,"onUpdate:modelValue":_[0]||(_[0]=i=>a.value.type=i)},{default:O(()=>_[5]||(_[5]=[E("option",{value:"function"},"Function",-1),E("option",{value:"graph"},"Knowledge graph",-1)])),_:1},8,["modelValue"])]),_:1}),w(te,{label:"Tool name"},{default:O(()=>[w(Z,{modelValue:a.value.name,"onUpdate:modelValue":_[1]||(_[1]=i=>a.value.name=i)},null,8,["modelValue"])]),_:1}),a.value.type=="function"?(u(),$(te,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:O(()=>[w(p(t),{modelValue:a.value.code,"onUpdate:modelValue":_[2]||(_[2]=i=>a.value.code=i),class:"addToolForm__codeEditor",variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):x("",!0),a.value.type=="graph"?(u(),$(te,{key:1,label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas."},{default:O(()=>[w(p(l),{modelValue:y.value,"onUpdate:modelValue":_[3]||(_[3]=i=>y.value=i),"enable-multi-selection":""},null,8,["modelValue"])]),_:1})):x("",!0)])]),_:1},8,["actions"])):x("",!0)],8,oo))}}),uo=P(so,[["__scopeId","data-v-08516909"]]),co=A({__name:"BuilderFieldsCode",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},isExpanded:{type:Boolean,required:!0},inputLanguage:{type:String,required:!0}},setup(e){const l=z({loader:()=>Y(()=>import("./BuilderEmbeddedCodeEditor-DrHsmZwR.js").then(o=>o.B),__vite__mapDeps([11,1,2,12]),import.meta.url)}),t=e,d=G({componentId:M(t,"componentId"),fieldKey:M(t,"fieldKey")});return(o,a)=>(u(),$(p(l),{modelValue:p(d),"onUpdate:modelValue":a[0]||(a[0]=n=>me(d)?d.value=n:null),language:e.inputLanguage,variant:e.isExpanded?"half-screen":"minimal",class:"BuilderFieldsCode"},null,8,["modelValue","language","variant"]))}}),We=P(co,[["__scopeId","data-v-6379f7e6"]]),po=["data-automation-key"],vo=A({__name:"BuilderFieldsBlueprintKey",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-DKV98_mQ.js").then(c=>c.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=R(D.core),d=R(D.builderManager),o=e,a=G({componentId:M(o,"componentId"),fieldKey:M(o,"fieldKey")}),n=h(()=>{const c=new Set;for(const r of t.getComponents("blueprints_root"))r.content.key&&c.add(r.content.key);const k=[...c].sort((r,v)=>r.localeCompare(v)).map(r=>({value:r,label:r,icon:"wds-blueprints"})),S=[{value:"",label:"(No blueprint)",icon:"block"},...k];if(!S.some(r=>r.value===a.value)){const r=a.value;S.push({value:r,label:r})}return S}),y=h(()=>{const c=t.getComponents("blueprints_root").find(k=>k.content.key===a.value);return c==null?void 0:c.id});function m(){y.value&&(d.setSelection(y.value,null,"click"),t.setActivePageId(y.value))}return(c,k)=>(u(),C("div",{class:"BuilderFieldsBlueprintKey","data-automation-key":o.fieldKey},[w(p(l),{modelValue:p(a),"onUpdate:modelValue":k[0]||(k[0]=S=>me(a)?a.value=S:null),options:n.value},null,8,["modelValue","options"]),y.value?(u(),$(J,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the blueprint",onClick:m},{default:O(()=>[w(L,{name:"square-dashed-mouse-pointer"})]),_:1})):x("",!0)],8,po))}}),mo=P(vo,[["__scopeId","data-v-f1beb9af"]]),fo=["data-automation-key"],yo=A({__name:"BuilderFieldsBlueprintId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(e){const l=R(D.core),t=e,d=h(()=>l.getComponentById(t.componentId)),o=h(()=>{var a;return((a=d.value)==null?void 0:a.parentId)??""});return(a,n)=>(u(),C("div",{class:"BuilderFieldsBlueprintId","data-automation-key":t.fieldKey},[w(Z,{"model-value":o.value,disabled:""},null,8,["model-value"])],8,fo))}}),go=P(yo,[["__scopeId","data-v-23c33b8b"]]),_o=["data-automation-key"],bo=A({__name:"BuilderFieldsHandler",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-DKV98_mQ.js").then(n=>n.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=R(D.core),d=e,o=G({componentId:M(d,"componentId"),fieldKey:M(d,"fieldKey")}),a=h(()=>{const n=t.userFunctions.value.map(m=>m.name).sort((m,c)=>m.localeCompare(c)).map(m=>({value:m,label:m,icon:"wds-function"})),y=[{value:"",label:"(No handler)",icon:"ban"},...n];if(!y.some(m=>m.value===o.value)){const m=o.value;y.push({value:m,label:m})}return y});return(n,y)=>(u(),C("div",{class:"BuilderFieldsHandler","data-automation-key":d.fieldKey},[w(p(l),{modelValue:p(o),"onUpdate:modelValue":y[0]||(y[0]=m=>me(o)?o.value=m:null),options:a.value},null,8,["modelValue","options"])],8,_o))}}),So=["data-automation-key"],ko=["href","data-writer-tooltip"],ho=A({__name:"BuilderFieldsWriterResourceId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},resourceType:{type:String,required:!0},enableMultiSelection:{type:Boolean,required:!1,default:!1},isBindingButtonShown:{type:Boolean,required:!1,default:!1}},setup(e){const l=z({loader:()=>Y(()=>import("./BuilderApplicationSelect-Ci0ZoWgs.js"),__vite__mapDeps([16,1,2,14,17]),import.meta.url)}),t=z({loader:()=>Y(()=>import("./BuilderGraphSelect-BZbouDGj.js"),__vite__mapDeps([13,1,2,14,15]),import.meta.url)}),d=z({loader:()=>Y(()=>import("./BuilderModelSelect-DaKORdKs.js"),__vite__mapDeps([18,1,2,14,19]),import.meta.url)}),o=e,a=G({componentId:M(o,"componentId"),fieldKey:M(o,"fieldKey")}),{isBindingMode:n,toggleBindingMode:y}=Ge({fieldViewModel:a}),m=G({componentId:M(o,"componentId"),fieldKey:"appInputs"}),c=U("selectorEl"),k=h(()=>{switch(o.resourceType){case"model":return d;case"graph":return t;case"application":return l;default:throw new Error(`Unexpected resourceType: ${o.resourceType}`)}}),S=h(()=>{switch(o.resourceType){case"graph":return"Edit knowledge graph";case"application":return"Edit agent";case"model":return"About models";default:return}}),r=h(()=>{var q,V;if(Array.isArray(v.value))return;const g=v.value;if(!g)return;const I=(V=(q=c.value)==null?void 0:q.selectedData)==null?void 0:V.organization_id;if(I)switch(o.resourceType){case"graph":{const b=new URLSearchParams({graphId:g});return`https://app.writer.com/aistudio/organization/${I}/knowledge-graph?${b}`}case"application":return`https://app.writer.com/aistudio/organization/${I}/app/${g}`;case"model":return"https://dev.writer.com/home/models#model-overview";default:return}}),v=h({get(){if(o.enableMultiSelection){const g=a.value||"[]";try{return JSON.parse(g)}catch{return[]}}return a.value},set(g){a.value=o.enableMultiSelection?JSON.stringify(g):String(g)}});function f(g){o.resourceType!=="application"||!g||!g.inputs||typeof g.inputs!="object"||(m.value=JSON.stringify(g.inputs))}return(g,I)=>(u(),$(te,{"is-binding-button-shown":e.isBindingButtonShown,"is-binding-enabled":p(n),label:e.label,unit:e.unit,hint:e.hint,error:e.error,"data-automation-key":e.fieldKey,"onUpdate:isBindingEnabled":p(y)},{default:O(()=>[E("div",{class:"BuilderFieldsWriterResourceId","data-automation-key":e.fieldKey},[p(n)?(u(),$(qe,{key:0,type:"state-template","component-id":e.componentId,"field-key":e.fieldKey,error:e.error,"default-value":""},null,8,["component-id","field-key","error"])):(u(),$(Te(k.value),{key:1,ref_key:"selectorEl",ref:c,modelValue:v.value,"onUpdate:modelValue":I[0]||(I[0]=q=>v.value=q),"enable-multi-selection":e.enableMultiSelection,onSelectedData:f},null,40,["modelValue","enable-multi-selection"])),r.value?(u(),C("a",{key:2,class:"BuilderFieldsWriterResourceId__link",href:r.value,target:"_blank","data-writer-tooltip":S.value},[w(L,{name:"external-link"})],8,ko)):x("",!0)],8,So)]),_:1},8,["is-binding-button-shown","is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"]))}}),he=P(ho,[["__scopeId","data-v-59e28cc4"]]),Io=["data-automation-key"],Bo=A({__name:"BuilderFieldsComponentId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-DKV98_mQ.js").then(r=>r.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=R(D.core),d=R(D.builderManager),o=e,a=G({componentId:M(o,"componentId"),fieldKey:M(o,"fieldKey")});function*n(){yield t.getComponentById("root"),yield*t.getComponentsNested("root")}const y=h(()=>{const r=[];for(const v of n()){const f=t.getComponentDefinition(v==null?void 0:v.type);if(!(f!=null&&f.events)||Object.keys(f.events).length===0)continue;const{name:g,previewText:I,possibleImageUrls:q}=Ye(t,v),V=q.value,b=v.id;r.push({value:b,label:I.value||g.value,detail:I.value?g.value:void 0,icon:V})}return r}),m=h({get:()=>a.value,set(r){a.value=String(r)}}),c=h(()=>{let r=m.value;for(;r;){const v=t.getComponentById(r);if(v.type==="page")return v.id;r=v.parentId}}),k=h(()=>t.getComponentById(m.value));function S(){!m.value||!k.value||(c.value&&(d.mode.value="ui",t.setActivePageId(c.value)),d.setSelection(m.value,null,"click"))}return(r,v)=>(u(),C("div",{class:"BuilderFieldsComponentId","data-automation-key":o.fieldKey},[w(p(l),{modelValue:m.value,"onUpdate:modelValue":v[0]||(v[0]=f=>m.value=f),options:y.value,"enable-search":""},null,8,["modelValue","options"]),m.value?(u(),$(J,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the element",disabled:!k.value,onClick:S},{default:O(()=>[w(L,{name:"square-dashed-mouse-pointer"})]),_:1},8,["disabled"])):x("",!0)],8,Io))}}),Co=P(Bo,[["__scopeId","data-v-fcce992f"]]),Eo=["data-automation-key"],xo=A({__name:"BuilderFieldsComponentEventType",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const l=z({loader:()=>Y(()=>import("./index-DKV98_mQ.js").then(c=>c.bl),__vite__mapDeps([1,2]),import.meta.url)}),t=R(D.core),d=e,o=G({componentId:M(d,"componentId"),fieldKey:M(d,"fieldKey")}),a=h(()=>t.getComponentById(d.componentId)),n=h(()=>{var c;return t.getComponentDefinition((c=a.value)==null?void 0:c.type)}),y=h(()=>{var v,f;const c=(f=Object.entries(((v=n.value)==null?void 0:v.fields)??{}).find(([,g])=>g.type===W.ComponentId))==null?void 0:f.at(0);if(c===void 0)return[];const k=a.value.content[String(c)],S=t.getComponentById(k),r=t.getComponentDefinition(S==null?void 0:S.type);return r!=null&&r.events?Object.keys(r.events).map(g=>({value:g,label:g})):[]}),m=h({get:()=>o.value,set(c){o.value=String(c)}});return(c,k)=>(u(),C("div",{class:"BuilderFieldsComponentEventType","data-automation-key":d.fieldKey},[y.value.length?(u(),$(p(l),{key:0,modelValue:m.value,"onUpdate:modelValue":k[0]||(k[0]=S=>m.value=S),options:y.value,"hide-icons":""},null,8,["modelValue","options"])):(u(),$(Z,{key:1,modelValue:m.value,"onUpdate:modelValue":k[1]||(k[1]=S=>m.value=S)},null,8,["modelValue"]))],8,Eo))}});function wo(e,l,t){const{getEvaluatedFields:d}=xe(e,t);function o(c){return!!ct.exec(c)}const a=h(()=>{var c;return(c=l.value.at(-1))==null?void 0:c.componentId}),n=h(()=>{if(a.value!==void 0)return e.getComponentById(a.value)}),y=h(()=>{var c,k;return(c=n.value)!=null&&c.type?((k=e.getComponentDefinition(n.value.type))==null?void 0:k.fields)??{}:{}}),m=h(()=>d(l.value));return h(()=>Object.entries(y.value).reduce((c,[k,S])=>{var f;const r=((f=n.value.content)==null?void 0:f[k])??"";if(o(r))return c;const v=m.value[k].value;return c[k]=$o(e,a.value,S,v),c},{}))}function $o(e,l,t,d){let o=t.validator;if(o===void 0&&typeof t.options=="object"&&t.options!==null&&Object.keys(t.options).length>0?o=ut(Object.keys(t.options)):typeof o=="function"&&(o=o(e,l)),o===void 0)return;const a=dt(o);if(!(a(d)||a.errors===void 0))return Fo(a.errors)}function To(e){var t;if(e.keyword==="format"&&Object.values(pt).includes(e.params.format))return vt[e.params.format].errorMessage;let l="";return e.instancePath&&(l+=`${e.instancePath} `),l+=e.message,Array.isArray((t=e.params)==null?void 0:t.allowedValues)&&(l+=`: ${e.params.allowedValues.join(", ")}`),l}function Fo(e){return e.map(To).join(`
`)}const Vo={key:0,class:"BuilderSettingsProperties"},Oo=["inert"],qo=A({__name:"BuilderSettingsProperties",props:{isReadOnly:{type:Boolean}},setup(e){const l=R(D.core),t=R(D.builderManager),d=R(D.secretsManager),o=X(new Set),a=h(()=>{var i,s;return Le((s=(i=t.firstSelectedItem)==null?void 0:i.value)==null?void 0:s.instancePath)}),n=h(()=>l.getComponentById(t.firstSelectedId.value)),y=h(()=>{var i;return l.getComponentDefinition((i=n.value)==null?void 0:i.type)}),{getEvaluatedFields:m}=xe(l,d),c=h(()=>m(a.value)),k=h(()=>{var s;const i=Object.entries(((s=y.value)==null?void 0:s.fields)??{}).filter(([F,B])=>B.isArtifactField?!1:B.enabled===void 0?!0:B.enabled({evaluatedFields:c.value}));return Object.fromEntries(i)});function S(i){return i.type===W.Code||i.type===W.JSONInput||i.type===W.Object||i.control===Ie.Textarea}const r=wo(l,a,d),v=X(N.General),f=Object.freeze({[N.General]:"Configure",[N.Style]:"Style",[N.Tools]:"Tools"}),g=h(()=>I.value.map(i=>({label:f[i]??i,value:i}))),I=h(()=>[N.General,N.Style,N.Tools].filter(i=>{var s;return(s=q.value[i])==null?void 0:s.length})),q=h(()=>{const i={[N.General]:[],[N.Style]:[],[N.Tools]:[]};return Object.entries(k.value).forEach(([s,F])=>{const B=F.category||N.General;i[B]&&i[B].push([s,F])}),{[N.General]:V(i[N.General]),[N.Style]:V(i[N.Style]),[N.Tools]:V(i[N.Tools])}});function V(i){return i.map((s,F)=>[s,F]).sort(([s,F],[B,T])=>{const K=s[1].order??0;return(B[1].order??0)-K||F-T}).map(([s])=>s)}function b(i){o.value.add(i)}function _(i){o.value.delete(i)}return(i,s)=>p(t).isSingleSelectionActive?(u(),C("div",Vo,[I.value.length>1?(u(),$(ae,{key:0,modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=F=>v.value=F),variant:"bar",tabs:g.value},null,8,["modelValue","tabs"])):x("",!0),(u(!0),C(j,null,H(I.value.length>1?[v.value]:I.value,F=>(u(),C("div",{key:F,inert:e.isReadOnly,class:"BuilderSettingsProperties__category"},[(u(!0),C(j,null,H(q.value[F],([B,T])=>(u(),C("div",{key:B,class:"BuilderSettingsProperties__category__field"},[T.type===p(W).Boolean?(u(),$(cn,{key:0,"field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B]},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===p(W).WriterGraphId?(u(),$(he,{key:1,"is-binding-button-shown":"","field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"resource-type":"graph"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===p(W).WriterGraphIds?(u(),$(he,{key:2,"is-binding-button-shown":"","field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"resource-type":"graph","enable-multi-selection":""},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===p(W).WriterAppId?(u(),$(he,{key:3,"field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"resource-type":"application"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===p(W).WriterModelId?(u(),$(he,{key:4,"field-key":B,"component-id":n.value.id,label:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"resource-type":"model"},null,8,["field-key","component-id","label","hint","unit","error"])):(u(),$(te,{key:5,label:F==="Tools"?void 0:T.name??B,hint:T.desc,unit:T.type,error:p(r)[B],"is-expansible":S(T),onExpand:K=>b(B),onShrink:K=>_(B)},{default:O(()=>[T.type==p(W).Color?(u(),$(an,{key:0,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).Shadow?(u(),$(Xn,{key:1,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).KeyValue?(u(),$(In,{key:2,"field-key":B,"component-id":n.value.id,"instance-path":a.value,error:p(r)[B]},null,8,["field-key","component-id","instance-path","error"])):x("",!0),T.type==p(W).Text||T.type==p(W).Number||T.type==p(W).Binding||T.type==p(W).IdKey?(u(),$(qe,{key:3,type:T.type==p(W).Binding?"state":"template","field-key":B,"field-control":T.control,"component-id":n.value.id,"default-value":T.default,error:p(r)[B]},null,8,["type","field-key","field-control","component-id","default-value","error"])):x("",!0),T.type==p(W).BlueprintId?(u(),$(go,{key:4,"field-key":B,"component-id":n.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==p(W).BlueprintKey?(u(),$(mo,{key:5,"field-key":B,"component-id":n.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==p(W).Handler?(u(),$(bo,{key:6,"field-key":B,"component-id":n.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==p(W).Object?(u(),$(Cn,{key:7,"field-key":B,"component-id":n.value.id,"default-value":T.default,error:p(r)[B]},null,8,["field-key","component-id","default-value","error"])):x("",!0),T.type==p(W).JSONInput?(u(),$(We,{key:8,"field-key":B,"component-id":n.value.id,"is-expanded":o.value.has(B),"input-language":"json"},null,8,["field-key","component-id","is-expanded"])):x("",!0),T.type==p(W).Width?(u(),$(no,{key:9,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).HAlign?(u(),$(De,{key:10,direction:"horizontal","field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).VAlign?(u(),$(De,{key:11,direction:"vertical","field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).Padding?(u(),$(Fn,{key:12,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).Tools?(u(),$(uo,{key:13,"field-key":B,"component-id":n.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==p(W).Code?(u(),$(We,{key:14,"field-key":B,"component-id":n.value.id,"is-expanded":o.value.has(B),"input-language":"python"},null,8,["field-key","component-id","is-expanded"])):x("",!0),T.type==p(W).ComponentId?(u(),$(Co,{key:15,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0),T.type==p(W).ComponentEventType?(u(),$(xo,{key:16,"field-key":B,"component-id":n.value.id,error:p(r)[B]},null,8,["field-key","component-id","error"])):x("",!0)]),_:2},1032,["label","hint","unit","error","is-expansible","onExpand","onShrink"]))]))),128))],8,Oo))),128))])):x("",!0)}}),Mo=P(qo,[["__scopeId","data-v-6fa8dfdf"]]),Ao={},Ro={class:"WdsTitle"};function Do(e,l){return u(),C("h2",Ro,[je(e.$slots,"default",{},void 0,!0)])}const Je=P(Ao,[["render",Do],["__scopeId","data-v-3b68d589"]]),Wo=["inert"],Po="Connect the result of this block to a dynamic variable you can use across this agent",Uo=A({__name:"BuilderSettingsBinding",props:{isReadOnly:{type:Boolean}},setup(e){const l=R(D.core),t=R(D.builderManager),d=R(D.secretsManager),o=Ce(l,t),{getEvaluatedFields:a}=xe(l,d),n=h(()=>{var S,r;return Le((r=(S=t.firstSelectedItem)==null?void 0:S.value)==null?void 0:r.instancePath)}),y=h(()=>l.getComponentById(t.firstSelectedId.value)),m=h(()=>a(n.value)),c=h(()=>{const S=l.getComponentDefinition(y.value.type);return S?Object.entries(S.events).filter(([,f])=>f.bindable?f.enabled===void 0?!0:f.enabled({evaluatedFields:m.value}):!1).map(([f])=>f)[0]:void 0});function k(S){o.setBinding(t.firstSelectedId.value,S,c.value)}return ve(c,()=>{var r;if(!c.value)return;const S=(r=y.value)==null?void 0:r.binding;S!=null&&S.stateRef&&c.value!==S.eventType&&k(S.stateRef)}),(S,r)=>p(t).isSingleSelectionActive?(u(),C("div",{key:0,inert:e.isReadOnly,class:"BuilderSettingsBinding"},[w(Je,null,{default:O(()=>r[1]||(r[1]=[ue("Binding")])),_:1}),w(te,{class:"BuilderSettingsBinding__main",label:"Link Variable",hint:Po},{default:O(()=>{var v;return[w(ee,{type:"state",value:(v=y.value.binding)==null?void 0:v.stateRef,"component-id":p(t).firstSelectedId.value,onInput:r[0]||(r[0]=f=>k(f.target.value))},null,8,["value","component-id"])]}),_:1})],8,Wo)):x("",!0)}}),Ko=P(Uo,[["__scopeId","data-v-f92e4a05"]]),jo=["inert"],Lo={class:"main"},No={class:"flexRow"},zo=["checked"],Yo='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',Go=A({__name:"BuilderSettingsVisibility",props:{isReadOnly:{type:Boolean}},setup(e){const l=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],t=h({get(){const y=n.value.visible;return(y==null?void 0:y.expression)==="custom"?"custom":y===void 0||y.expression===!0?"yes":"no"},set(y){var m,c;y==="custom"?a(n.value.id,"custom",(m=n.value.visible)==null?void 0:m.binding,(c=n.value.visible)==null?void 0:c.reversed):a(n.value.id,y==="yes")}}),d=R(D.core),o=R(D.builderManager),{setVisibleValue:a}=Ce(d,o),n=h(()=>d.getComponentById(o.firstSelectedId.value));return(y,m)=>p(o).isSingleSelectionActive?(u(),C("div",{key:0,inert:e.isReadOnly,class:"BuilderSettingsVisibility"},[w(Je,null,{default:O(()=>m[3]||(m[3]=[ue("Visibility")])),_:1}),E("div",Lo,[w(ae,{modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=c=>t.value=c),tabs:l},null,8,["modelValue"]),typeof n.value.visible<"u"&&n.value.visible.expression==="custom"?(u(),$(te,{key:0,hint:Yo},{default:O(()=>[w(ee,{value:n.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:m[1]||(m[1]=c=>p(a)(n.value.id,"custom",c.target.value,n.value.visible.reversed))},null,8,["value"]),E("div",No,[E("input",{type:"checkbox",checked:n.value.visible.reversed,onInput:m[2]||(m[2]=c=>p(a)(n.value.id,"custom",n.value.visible.binding,c.target.checked))},null,40,zo),m[4]||(m[4]=E("span",null,"Reverse",-1))])]),_:1})):x("",!0)])],8,jo)):x("",!0)}}),Jo=P(Go,[["__scopeId","data-v-c4316bf1"]]),Pe={apiTriggerDetails:z({loader:()=>Y(()=>import("./BuilderSettingsArtifactAPITriggerDetails-APffw7wT.js"),__vite__mapDeps([20,1,2,8,9,3,4,5,6,7,21]),import.meta.url)})},Xo={class:"BuilderSettingsMain"},Ho={key:0,class:"BuilderSettingsMain__description"},Qo={key:1,class:"BuilderSettingsMain__warning cmc-warning"},Zo={class:"BuilderSettingsMain__section"},el={class:"BuilderSettingsMain__componentId"},tl=A({__name:"BuilderSettingsMain",setup(e){const l=z({loader:()=>Y(()=>import("./BuilderSettingsHandlers-CP6y2Bxy.js"),__vite__mapDeps([22,1,2,23,5,6,24,25,26,3,4,7,8,9,27]),import.meta.url)}),t=R(D.core),d=R(D.builderManager),o=h(()=>t.getComponentById(d.firstSelectedId.value)),a=h(()=>o.value.isCodeManaged),n=h(()=>d.isSingleSelectionActive.value?!y.value.toolkit||y.value.toolkit=="core":!1),y=h(()=>{const{type:f}=o.value;return t.getComponentDefinition(f)});ve(o,f=>{f||d.setSelection(null)});const{copy:m,copied:c}=Ne();function k(){m(d.firstSelectedId.value)}const S=h(()=>{var f;return Object.values(((f=y.value)==null?void 0:f.events)??{}).some(g=>g.bindable)}),r=h(()=>{var f;return(((f=y.value)==null?void 0:f.settingsArtifacts)??[]).filter(g=>g.position!=="bottom")}),v=h(()=>{var f;return(((f=y.value)==null?void 0:f.settingsArtifacts)??[]).filter(g=>g.position==="bottom")});return(f,g)=>(u(),C("div",Xo,[y.value.description?(u(),C("p",Ho,Q(y.value.description),1)):x("",!0),a.value?(u(),C("p",Qo,[E("span",null,[w(L,{name:"triangle-alert"})]),g[0]||(g[0]=E("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1))])):x("",!0),E("div",Zo,[w(Mo,{"is-read-only":a.value},null,8,["is-read-only"]),(u(!0),C(j,null,H(r.value,I=>(u(),$(Te(p(Pe)[I.key]),{key:I.key,inert:a.value},null,8,["inert"]))),128)),n.value?(u(),C(j,{key:0},[S.value?(u(),$(Ko,{key:0,"is-read-only":a.value},null,8,["is-read-only"])):x("",!0),w(p(l),{"is-read-only":a.value},null,8,["is-read-only"]),w(Jo,{"is-read-only":a.value},null,8,["is-read-only"])],64)):x("",!0),(u(!0),C(j,null,H(v.value,I=>(u(),$(Te(p(Pe)[I.key]),{key:I.key,inert:a.value},null,8,["inert"]))),128))]),g[1]||(g[1]=E("div",{class:"BuilderSettingsMain__spacer"},null,-1)),E("div",el,[E("p",{class:"BuilderSettingsMain__componentId__text",onClick:k},Q(p(d).firstSelectedId.value),1),w(J,{class:"BuilderSettingsMain__componentId__btn",size:"smallIcon",variant:"tertiary","data-writer-tooltip":p(c)?"Copied!":"Copy block id","data-automation-action":"copy-component-id",onClick:k},{default:O(()=>[w(L,{name:p(c)?"check":"clipboard"},null,8,["name"])]),_:1},8,["data-writer-tooltip"])])]))}}),nl=P(tl,[["__scopeId","data-v-aa8c395b"]]),ol=["data-writer-id"],ll=A({__name:"BuilderSettingsActions",setup(e){const l=R(D.core),t=R(D.builderManager),d=Oe(l),{dropdownOptions:o,handleDropdownSelect:a}=ze(l,t,d);function n(){a(Fe.Delete)}const y=h(()=>{const c=o.value.find(k=>k.value===Fe.Delete);return c?c.disabled:!0}),m=t.firstSelectedId;return(c,k)=>(u(),C("div",{class:"BuilderSettingsActions","data-writer-id":p(m)},[p(t).selectionStatus.value===p(pe).Multiple?(u(),$(J,{key:0,class:"BuilderSettingsActions__btn",variant:"neutral",size:"smallIcon","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:k[0]||(k[0]=S=>p(t).setSelection(null))},{default:O(()=>[w(L,{name:"x"})]),_:1})):x("",!0),w(J,{class:"BuilderSettingsActions__btn BuilderSettingsActions__btn--delete",variant:"neutral",size:"smallIcon","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:y.value,onClick:n},{default:O(()=>[w(L,{name:"trash-2"})]),_:1},8,["disabled"])],8,ol))}}),al=P(ll,[["__scopeId","data-v-08efde31"]]),il=["id"],rl=["value"],sl=A({__name:"BuilderSettingsAddComponentModal",props:ie({selectedId:{type:String,required:!0}},{isOpen:{type:Boolean,default:!1},isOpenModifiers:{}}),emits:["update:isOpen"],setup(e){const l=R(D.core),t=R(D.builderManager),d=mt(),o=Oe(l),{createAndInsertComponent:a}=Ce(l,t,o),n=e,y=h(()=>l.getContainableTypes(n.selectedId).reduce((S,r)=>(S[r]=l.getComponentDefinition(r),S),{})),m=ye(e,"isOpen");function c(){m.value=!1}function k(S){const r=S.target.value;if(!r)return;const v=Object.entries(y.value).find(([g,I])=>I.name==r);if(!v)return;const f=v[0];a(f,n.selectedId),c()}return(S,r)=>m.value?(u(),$(Ve,{key:0,title:"Add child component","display-close-button":"",onClose:c},{default:O(()=>[w(Z,{type:"text",list:p(d),placeholder:"Component...",onChange:k},null,8,["list"]),E("datalist",{id:p(d)},[(u(!0),C(j,null,H(y.value,(v,f)=>(u(),C("option",{key:f,value:v.name},Q(v.name),9,rl))),128))],8,il)]),_:1})):x("",!0)}}),ul={key:0,class:"BuilderSettings__collapser"},dl={key:1,class:"BuilderSettings__titleBar"},cl={class:"BuilderSettings__titleBar__title"},pl={class:"BuilderSettings__titleBar__actions"},vl=["data-writer-tooltip"],ml=A({__name:"BuilderSettings",setup(e){ft(I=>({"01e8ba1a":p(t).getMode()=="blueprints"?"82px":"20px"}));const l=R(D.core),t=R(D.builderManager),{component:d,definition:o}=yt(l,t.firstSelectedId),a=gt(d,o),{copy:n,copied:y}=Ne();function m(){n(a.value)}const c=Oe(l),k=X(!1),{dropdownOptions:S,handleDropdownSelect:r}=ze(l,t,c,{[Fe.Add]:()=>k.value=!0}),v=h(()=>t.selectionStatus.value===pe.Multiple?!0:t.isSettingsBarCollapsed.value),f=h(()=>t.selection.value.length);function g(){t.isSettingsBarCollapsed.value=!t.isSettingsBarCollapsed.value}return ve(d,I=>{I||t.setSelection(null)}),(I,q)=>p(t).selectionStatus.value!==p(pe).None?(u(),C("div",{key:0,class:Ee(["BuilderSettings",{"BuilderSettings--collapsed":v.value}])},[p(t).isSingleSelectionActive.value?(u(),C("div",ul,[v.value?(u(),$(J,{key:0,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:g},{default:O(()=>[w(L,{name:"settings"})]),_:1})):(u(),$(J,{key:1,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:g},{default:O(()=>[w(L,{name:"arrow-right-to-line"})]),_:1}))])):x("",!0),p(t).isSingleSelectionActive?(u(),C("div",dl,[E("p",cl,Q(p(o).name),1),E("div",pl,[p(a)?(u(),$(J,{key:0,size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"bottom","data-writer-tooltip":p(y)?"Copied!":"Copy result variable",onClick:ne(m,["prevent"])},{default:O(()=>[w(L,{name:"at-sign"})]),_:1},8,["data-writer-tooltip"])):x("",!0),w(_t,{"data-automation-action":"settings-actions-dropdown",options:p(S),"trigger-custom-size":"32px","trigger-icon":"ellipsis-vertical",onSelect:p(r)},null,8,["options","onSelect"])])])):x("",!0),p(t).selectionStatus.value===p(pe).Multiple?(u(),C("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${f.value} components selected`},[E("p",null,Q(f.value),1)],8,vl)):x("",!0),v.value&&p(t).selectionStatus.value===p(pe).Multiple?(u(),$(al,{key:3,class:"BuilderSettings__actions"})):x("",!0),w(nl,{class:"BuilderSettings__main",inert:v.value},null,8,["inert"]),p(t).isSingleSelectionActive.value?(u(),$(sl,{key:4,"is-open":k.value,"onUpdate:isOpen":q[0]||(q[0]=V=>k.value=V),"selected-id":p(t).firstSelectedId.value},null,8,["is-open","selected-id"])):x("",!0)],2)):x("",!0)}}),fl=P(ml,[["__scopeId","data-v-598b1ef0"]]),kl=Object.freeze(Object.defineProperty({__proto__:null,default:fl},Symbol.toStringTag,{value:"Module"}));export{We as B,Je as W,ae as a,kl as b,fe as e,It as u};
