(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{66726:function(e,t,n){var i=n(11611),a=n(82846),l=n(91936),o=Math.max,r=Math.min;e.exports=function(e,t,n){var s,c,d,u,p,m,x=0,h=!1,v=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function g(t){var n=s,i=c;return s=c=void 0,x=t,u=e.apply(i,n)}function y(e){var n=e-m,i=e-x;return void 0===m||n>=t||n<0||v&&i>=d}function j(){var e,n,i,l=a();if(y(l))return w(l);p=setTimeout(j,(e=l-m,n=l-x,i=t-e,v?r(i,d-n):i))}function w(e){return(p=void 0,f&&s)?g(e):(s=c=void 0,u)}function C(){var e,n=a(),i=y(n);if(s=arguments,c=this,m=n,i){if(void 0===p)return x=e=m,p=setTimeout(j,t),h?g(e):u;if(v)return clearTimeout(p),p=setTimeout(j,t),g(m)}return void 0===p&&(p=setTimeout(j,t)),u}return t=l(t)||0,i(n)&&(h=!!n.leading,d=(v="maxWait"in n)?o(l(n.maxWait)||0,t):d,f="trailing"in n?!!n.trailing:f),C.cancel=function(){void 0!==p&&clearTimeout(p),x=0,s=m=c=p=void 0},C.flush=function(){return void 0===p?u:w(a())},C}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},9387:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integrations",function(){return n(31912)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var i=n(24246),a=n(66726),l=n.n(a),o=n(27378),r=n(26917);let s=e=>{let{value:t,onChange:n,placeholder:a,...s}=e,[c,d]=(0,o.useState)(t),u=l()(n,500),p=(0,o.useCallback)(e=>{d(e),u(e)},[]);return(0,i.jsx)(r.Z,{value:c,onChange:p,onClear:()=>{d(""),n("")},placeholder:a,...s})}},31912:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var i,a,l,o,r=n(24246),s=n(27824),c=n(86677),d=n(27378),u=n(30952),p=n(18225),m=n(77213),x=n(77830),h=n(58754),v=n(16394),f=n(41337),g=n(14207),y=n(8133),j=n(52352),w=n(15987),C=n(75595),b=e=>{let{integrationType:t,onConfigure:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z,{integration:null==t?void 0:t.placeholder,onConfigureClick:n}),null==t?void 0:t.overview]})},k=n(25980),_=e=>{let t=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let n=n=>{!t.current||t.current.contains(n.target)||n.target.closest('button, [role="button"], a, input, select, textarea')||e()};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e]),t},S=e=>{var t;let{integration:n,selected:i=!1,onClick:a,onDetailsClick:l,onUnfocus:o}=e,c=(0,j.ZP)(null==n?void 0:n.connection_type,null==n?void 0:null===(t=n.saas_config)||void 0===t?void 0:t.type),d=_(()=>{i&&o&&o()});return(0,r.jsxs)(s.xuv,{ref:d,borderWidth:1,borderColor:i?"black":"gray.200",backgroundColor:i?"gray.50":"transparent",boxShadow:i?"md":"none",borderRadius:"lg",overflow:"hidden",padding:"12px",cursor:"pointer",onClick:a,"data-testid":"integration-info-".concat(null==n?void 0:n.key),children:[(0,r.jsxs)(s.kCb,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,r.jsxs)(s.kCb,{flexGrow:1,children:[(0,r.jsx)(f.Z,{data:null!=n?n:"",boxSize:"40px"}),(0,r.jsxs)(s.kCb,{direction:"column",flexGrow:1,marginLeft:"12px",marginRight:"12px",children:[(0,r.jsx)(s.xvT,{color:"gray.700",fontWeight:"semibold",fontSize:"sm",children:(null==n?void 0:n.name)||"(No name)"}),(0,r.jsx)(s.xvT,{color:"gray.600",fontSize:"xs",mt:1,children:c.category})]})]}),l&&(0,r.jsx)(s.wpx,{size:"small",onClick:e=>{e.stopPropagation(),l()},type:"default",className:"px-2 py-1 text-xs","data-testid":"details-btn-".concat(null==n?void 0:n.key),children:"Details"})]}),(0,r.jsxs)(s.Eq9,{marginTop:"12px",spacing:1,children:[c.tags.slice(0,3).map(e=>(0,r.jsx)(s.j8w,{children:e},e)),c.tags.length>3&&(0,r.jsxs)(s.j8w,{color:"corinth",children:["+",c.tags.length-3]})]})]})};(i=l||(l={})).ALL="All",i.DATA_CATALOG="Data Catalog",i.DATA_WAREHOUSE="Data Warehouse",i.DATABASE="Database",i.IDENTITY_PROVIDER="Identity Provider",i.WEBSITE="Website",i.CRM="CRM",i.MANUAL="Manual";var T=e=>{let{selectedIntegration:t,onSelectIntegration:n,onDetailClick:i}=e,[a,o]=(0,d.useState)(""),[c,u]=(0,d.useState)("All"),[m,x]=(0,d.useState)(!1),{flags:{oktaMonitor:h}}=(0,k.Vb)(),v=(0,d.useMemo)(()=>Object.values(l).filter(e=>"Identity Provider"!==e||h),[h]),f=(0,d.useMemo)(()=>{let e=j.FO;if("All"!==c&&(e=e.filter(e=>e.category===c)),a.trim()){let t=a.toLowerCase();e=e.filter(e=>(e.placeholder.name||"").toLowerCase().includes(t))}return e.filter(e=>!!h||"okta"!==e.placeholder.connection_type)},[a,c,h]),g=v.map(e=>({label:e,value:e}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4 mt-3 flex items-center justify-between gap-4",children:[(0,r.jsx)(s.uFc,{placeholder:"Search by name...",value:a,onChange:e=>o(e.target.value),className:"w-64",allowClear:!0}),(0,r.jsx)(s.WPr,{value:c,onChange:e=>{x(!0),u(e),setTimeout(()=>x(!1),100)},options:g,className:"w-48",placeholder:"Select category","data-testid":"category-filter-select"})]}),m?(0,r.jsx)(p.Z,{}):(0,r.jsx)("div",{className:"grid grid-cols-3 gap-6",children:f.map(e=>(0,r.jsx)("div",{children:(0,r.jsx)(S,{integration:e.placeholder,selected:(null==t?void 0:t.placeholder.key)===e.placeholder.key,onClick:()=>{n((null==t?void 0:t.placeholder.key)===e.placeholder.key?void 0:e)},onDetailsClick:()=>i(e),onUnfocus:()=>n(void 0)})},e.placeholder.key))})]})},N=n(64176);(a=o||(o={})).LIST_VIEW="list-view",a.DETAIL="detail",a.FORM="form";var A=e=>{var t,n,i;let{isOpen:a,onClose:l}=e,[o,c]=(0,d.useState)("list-view"),[u,p]=(0,d.useState)(null),[m,x]=(0,d.useState)(),[h,v]=(0,d.useState)(null),f=(0,N.Z)(null==m?void 0:m.placeholder.connection_type,null==m?void 0:null===(n=m.placeholder)||void 0===n?void 0:null===(t=n.saas_config)||void 0===t?void 0:t.type),{description:g}=(0,j.ZP)(null==m?void 0:m.placeholder.connection_type,null==m?void 0:null===(i=m.placeholder.saas_config)||void 0===i?void 0:i.type),C=()=>{c("list-view"),p(null),x(void 0),v(null),l()},k=()=>{p("detail"),c("form")},_=m&&"list-view"!==o?"".concat(m.placeholder.name," Integration"):"Add integration",S="list-view"===o?(0,r.jsxs)("div",{className:"flex w-full justify-between",children:[(0,r.jsx)(s.wpx,{onClick:C,children:"Cancel"}),(0,r.jsx)(s.wpx,{type:"primary",onClick:()=>{"list-view"===o&&m&&(p("list-view"),c("form"))},disabled:!m,children:"Next"})]}):"detail"===o?(0,r.jsxs)("div",{className:"flex w-full justify-between",children:[(0,r.jsx)(s.wpx,{onClick:()=>c("list-view"),children:"Back"}),(0,r.jsx)(s.wpx,{onClick:k,type:"primary","data-testid":"configure-modal-btn",children:"Next"})]}):"form"===o?(0,r.jsxs)("div",{className:"flex w-full justify-between",children:[(0,r.jsx)(s.wpx,{onClick:()=>{u&&(c(u),p(null))},children:"Back"}),(0,r.jsx)(s.wpx,{type:"primary",onClick:()=>{h&&h.submitForm&&h.submitForm()},disabled:!h||!h.isValid||!h.dirty,loading:null==h?void 0:h.loading,"data-testid":"save-btn",children:"Save"})]}):null;return(0,r.jsxs)(y.Z,{isOpen:a,onClose:C,title:_,scrollBehavior:"inside",showCloseButton:!0,modalContentProps:{height:"700px",maxWidth:"1010px"},footer:S,children:["list-view"===o&&(0,r.jsx)(T,{selectedIntegration:m,onSelectIntegration:e=>{x(e)},onDetailClick:e=>{c("detail"),x(e)}}),"detail"===o&&(0,r.jsx)(b,{integrationType:m,onConfigure:k}),"form"===o&&(0,r.jsx)(w.Z,{connectionOption:f,onCancel:C,description:g,onFormStateChange:v})]})},I=n(40774),E=()=>{let[e,t]=(0,d.useState)(1),[n,i]=(0,d.useState)(50),[a,l]=(0,d.useState)(""),o=(0,c.useRouter)(),y=(0,d.useCallback)(a=>{(null==a?void 0:a.current)!==e&&t(a.current),(null==a?void 0:a.pageSize)&&a.pageSize!==n&&i(a.pageSize)},[e,n]),{data:w,isLoading:C}=(0,g.AZ)({connection_type:j.jq,size:n,page:e,search:a.trim()||void 0}),{items:b}=null!=w?w:{},{onOpen:k,isOpen:_,onClose:S}=(0,s.qY0)(),T=(0,d.useMemo)(()=>{var e;return null!==(e=null==b?void 0:b.map(e=>{var t;return{...e,integrationTypeInfo:(0,j.ZP)(e.connection_type,null===(t=e.saas_config)||void 0===t?void 0:t.type)}}))&&void 0!==e?e:[]},[b]),N=e=>{o.push("".concat(x.KH,"/").concat(e.key))},E=[{title:"Name",dataIndex:"name",key:"name",width:250,render:(e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(f.Z,{data:t,boxSize:"20px"}),(0,r.jsx)(s.AntTypography.Text,{ellipsis:{tooltip:e||"(No name)"},className:"font-semibold",children:e||"(No name)"})]})},{title:"Type",dataIndex:"connection_type",key:"connection_type",width:150,render:e=>{var t,n;return(0,j.ZP)(e,null==b?void 0:null===(n=b.find(t=>t.connection_type===e))||void 0===n?void 0:null===(t=n.saas_config)||void 0===t?void 0:t.type).placeholder.name||e}},{title:"Capabilities",dataIndex:["integrationTypeInfo","tags"],key:"capabilities",width:300,render:e=>(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.map(e=>(0,r.jsx)(s.j8w,{children:e},e))})},{title:"Connection Status",key:"connection_status",width:150,render:(e,t)=>{let{status:n,color:i}=null===t.last_test_timestamp||void 0===t.last_test_timestamp?{status:"Untested",color:"default"}:!0===t.last_test_succeeded?{status:"Healthy",color:"success"}:!1===t.last_test_succeeded?{status:"Failed",color:"error"}:{status:"Untested",color:"default"},a=t.last_test_timestamp?"Last connection: ".concat((0,v.p6)(t.last_test_timestamp)):"The connection has not been tested";return(0,r.jsx)(s.esZ,{title:a,children:(0,r.jsx)(s.j8w,{color:i,children:n})})}},{title:"Actions",key:"actions",width:100,render:(e,t)=>(0,r.jsx)(s.wpx,{onClick:()=>N(t),"data-testid":"manage-btn-".concat(t.key),size:"small",children:"Manage"})}],Z={current:e,pageSize:n,total:T.length,showQuickJumper:!1,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," integrations"),pageSizeOptions:["10","25","50","100"]},D={emptyText:a.trim()?"No integrations match your search":(0,r.jsx)("div",{"data-testid":"empty-state",children:'You have not configured any integrations. Click "Add Integration" to connect and configure systems now.'})};return(0,r.jsxs)(m.Z,{title:"Integrations",children:[(0,r.jsx)(h.Z,{heading:"Integrations",breadcrumbItems:[{title:"All integrations"}],rightContent:(0,r.jsx)(s.wpx,{onClick:k,"data-testid":"add-integration-btn",type:"primary",children:"Add integration"})}),(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between gap-4",children:[(0,r.jsx)(u.f,{placeholder:"Search by name...",value:a,onChange:e=>{l(e),t(1)},className:"max-w-sm"}),(0,r.jsx)(I.Z,{})]}),C?(0,r.jsx)(p.Z,{}):(0,r.jsx)(s.V5H,{columns:E,dataSource:T,rowKey:"key",pagination:Z,loading:C,size:"small",locale:D,bordered:!0,onRow:e=>({onClick:()=>N(e),"data-testid":"integration-info-".concat(e.key)}),rowClassName:"cursor-pointer",onChange:y,"data-testid":"integrations-table"}),(0,r.jsx)(A,{isOpen:_,onClose:S})]})}}},function(e){e.O(0,[8765,9278,5163,699,3662,1316,6662,2888,9774,179],function(){return e(e.s=9387)}),_N_E=e.O()}]);