(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3564],{22657:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poc/table-migration",function(){return t(26161)}])},6675:function(e,s,t){"use strict";t.d(s,{ZS:function(){return i},a4:function(){return l}});var n=t(3228);let a=t(78780).u.injectEndpoints({endpoints:e=>({getPurposes:e.query({query:()=>"purposes"})})}),{useGetPurposesQuery:l}=a,r={purposes:{},special_purposes:{}},i=(0,n.P1)(a.endpoints.getPurposes.select(),e=>{let{data:s}=e;return s||r})},48347:function(e,s,t){"use strict";t.d(s,{W:function(){return o},m:function(){return c}});var n=t(24246),a=t(27824),l=t(32885);let{Text:r,Title:i}=a.AntTypography,o=()=>{let{isOpen:e,onOpen:s,onClose:t}=(0,a.qY0)();return{isOpen:e,onOpen:s,onClose:t}},c=e=>{let{isOpen:s,onClose:t,fidesKey:o}=e,{data:c,isLoading:u}=(0,l.ho)(o),d=(e,s)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{level:5,children:e}),(null==s?void 0:s.length)?(0,n.jsx)("div",{children:(0,n.jsx)(a.vyj,{size:[0,2],wrap:!0,children:null==s?void 0:s.map(e=>(0,n.jsx)(a.j8w,{children:e},e))})}):(0,n.jsxs)(r,{italic:!0,children:["no known ",e.toLowerCase()]})]});return(0,n.jsxs)(a.u_l,{isOpen:s,onClose:t,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,n.jsx)(a.ZAr,{}),(0,n.jsxs)(a.hzk,{maxWidth:"800px",children:[(0,n.jsx)(a.xBx,{children:c?null==c?void 0:c.name:"Vendor"}),(0,n.jsx)(a.fef,{children:u?(0,n.jsx)(a.jqI,{className:"h-80 w-full",align:"center",justify:"center",children:(0,n.jsx)(a.$jN,{})}):!!c&&(0,n.jsxs)(a.AntTypography,{children:[(0,n.jsx)(i,{level:5,children:"Purposes"}),Object.entries(c.purposes||{}).length>0?(0,n.jsx)(a.UQy,{allowMultiple:!0,children:Object.entries(c.purposes).map((e,s)=>{let[t]=e;return(0,n.jsx)(a.Qdk,{children:e=>{let{isExpanded:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.KFZ,{backgroundColor:s?"gray.50":"unset",children:[(0,n.jsx)(a.xuv,{flex:"1",textAlign:"left",children:t}),(0,n.jsx)(a.XEm,{})]}),(0,n.jsxs)(a.Hk3,{backgroundColor:"gray.50",children:[(0,n.jsx)(a.jqI,{className:"my-4",vertical:!0,children:d("Data uses",c.purposes[t].data_uses)}),(0,n.jsx)(a.jqI,{className:"my-4",vertical:!0,children:d("Legal basis",c.purposes[t].legal_bases)})]})]})}},s)})}):(0,n.jsx)(r,{italic:!0,children:"no known purposes"}),(0,n.jsx)("div",{className:"my-4",children:d("Features",c.features)}),(0,n.jsx)("div",{className:"my-4",children:d("Data categories",c.data_categories)})]})}),(0,n.jsxs)(a.mzw,{children:[(0,n.jsx)(a.wpx,{size:"small",onClick:t,children:"Close"}),(0,n.jsx)(a.LZC,{})]})]})]})}},26161:function(e,s,t){"use strict";t.r(s),t.d(s,{TableMigrationPOC:function(){return y}});var n=t(24246),a=t(25980),l=t(27824),r=t(86677),i=t(27378),o=t(16134),c=t(77830),u=t(6675),d=t(23923),p=t(48347),x=t(28079),j=t(32885);let{Content:h}=l.AntLayout,{Title:m,Paragraph:g}=l.AntTypography,f=[{text:"Advertising",value:"advertising"},{text:"Analytics",value:"analytics"},{text:"Functional",value:"functional"},{text:"Essential",value:"essential"}],_=[{text:"Consent",value:"Consent"},{text:"Legitimate Interest",value:"Legitimate interests"}],y=()=>{let{tcf:e,dictionaryService:s}=(0,a.hz)(),t=(0,r.useRouter)(),[y,C]=(0,i.useState)(""),[v,b]=(0,i.useState)(""),[k,w]=(0,i.useState)(25),[I,T]=(0,i.useState)(1),[N,S]=(0,i.useState)(),[O,A]=(0,i.useState)({});(0,x.fd)();let z=(0,o.C)(x.U3);(0,u.a4)();let E=(0,o.C)(u.ZS),P=(0,i.useMemo)(()=>[...Object.entries(E.purposes).map(e=>{let[s,t]=e;return{text:t.name,value:s}}),...Object.entries(E.special_purposes).map(e=>{let[s,t]=e;return{text:t.name,value:s}})],[E]),F=(0,i.useMemo)(()=>z.map(e=>({text:e.name||e.fides_key,value:e.fides_key})),[z]),{isOpen:L,onOpen:V,onClose:q}=(0,p.W)(),U=(()=>{let e=(O.data_uses||[]).map(e=>"data_uses=".concat(encodeURIComponent(e))).join("&");return{dataUses:e,legalBasis:(O.legal_bases||[]).map(e=>"legal_bases=".concat(encodeURIComponent(e))).join("&"),purposes:(O.tcf_purpose||[]).map(e=>"purposes=".concat(encodeURIComponent(e))).join("&"),specialPurposes:"",consentCategories:(O.consent_categories||[]).map(e=>"consent_category=".concat(encodeURIComponent(e))).join("&")}})(),{data:M,isLoading:R}=(0,j.de)({pageIndex:I,pageSize:k,search:v,...U}),Z=(null==M?void 0:M.total)||0,D=(null==M?void 0:M.items)||[];(0,i.useEffect)(()=>{let e=setTimeout(()=>{b(y),1!==I&&T(1)},300);return()=>clearTimeout(e)},[y]);let B=(0,i.useCallback)(e=>{C(e.target.value)},[]),K=e=>{S(e.fides_key),V()},W=[{title:"Vendor",dataIndex:"name",key:"name",filteredValue:O.name||null},...e?[{title:"TCF purpose",dataIndex:"data_uses",key:"tcf_purpose",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"purpose":"purposes"]}),filters:P,filteredValue:O.tcf_purpose||null},{title:"Data use",dataIndex:"data_uses",key:"data_uses",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"data use":"data uses"]}),filters:F,filteredValue:O.data_uses||null},{title:"Legal basis",dataIndex:"legal_bases",key:"legal_bases",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"basis":"bases"]}),filters:_,filteredValue:O.legal_bases||null}]:[{title:"Categories",dataIndex:"consent_categories",key:"consent_categories",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"category":"categories"]}),filters:f,filteredValue:O.consent_categories||null},{title:"Cookies",dataIndex:"cookies",key:"cookies",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"cookie":"cookies"]})}]];return(0,n.jsxs)(h,{className:"overflow-auto px-10 py-6",children:[(0,n.jsx)(l.bue,{children:(0,n.jsx)(m,{children:"Table Migration POC"})}),(0,n.jsx)(g,{className:"mb-6",children:"This is a demonstration of migrating the ConsentManagementTable from TanStack Table to Ant Design Table with built-in filtering."}),L&&N?(0,n.jsx)(p.m,{isOpen:L,fidesKey:N,onClose:q}):null,(0,n.jsxs)(l.jqI,{justify:"space-between",align:"center",className:"mb-4",children:[(0,n.jsx)(l.uFc.Search,{placeholder:"Search",onSearch:e=>{C(e)},style:{width:300},value:y,onChange:B}),(0,n.jsxs)(l.vyj,{size:8,children:[(0,n.jsx)(d.Z,{buttonLabel:"Add vendors",onButtonClick:s?()=>{t.push(c.Gg)}:void 0}),(0,n.jsx)(l.wpx,{onClick:()=>{A({})},children:"Clear filters"})]})]}),(0,n.jsx)(l.V5H,{dataSource:D,columns:W,loading:R,rowKey:"id",pagination:{current:I,pageSize:k,total:Z},onChange:(e,s)=>{T(e.current),w(e.pageSize),A(s)},onRow:e=>({onClick:()=>K(e),style:{cursor:"pointer"}}),size:"small"})]})};s.default=y}},function(e){e.O(0,[401,3923,2888,9774,179],function(){return e(e.s=22657)}),_N_E=e.O()}]);