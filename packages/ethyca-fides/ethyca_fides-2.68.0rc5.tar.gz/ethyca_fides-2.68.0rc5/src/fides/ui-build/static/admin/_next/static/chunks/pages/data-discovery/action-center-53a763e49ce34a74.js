(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{66726:function(e,t,n){var i=n(11611),r=n(82846),a=n(91936),o=Math.max,s=Math.min;e.exports=function(e,t,n){var c,l,u,d,f,m,x=0,h=!1,p=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function j(t){var n=c,i=l;return c=l=void 0,x=t,d=e.apply(i,n)}function g(e){var n=e-m,i=e-x;return void 0===m||n>=t||n<0||p&&i>=u}function y(){var e,n,i,a=r();if(g(a))return b(a);f=setTimeout(y,(e=a-m,n=a-x,i=t-e,p?s(i,u-n):i))}function b(e){return(f=void 0,v&&c)?j(e):(c=l=void 0,d)}function w(){var e,n=r(),i=g(n);if(c=arguments,l=this,m=n,i){if(void 0===f)return x=e=m,f=setTimeout(y,t),h?j(e):d;if(p)return clearTimeout(f),f=setTimeout(y,t),j(m)}return void 0===f&&(f=setTimeout(y,t)),d}return t=a(t)||0,i(n)&&(h=!!n.leading,u=(p="maxWait"in n)?o(a(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==f&&clearTimeout(f),x=0,c=m=l=f=void 0},w.flush=function(){return void 0===f?d:b(r())},w}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,n){var i=n(99736),r=n(92360);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},40741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return n(2656)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var i=n(24246),r=n(66726),a=n.n(r),o=n(27378),s=n(26917);let c=e=>{let{value:t,onChange:n,placeholder:r,...c}=e,[l,u]=(0,o.useState)(t),d=a()(n,500),f=(0,o.useCallback)(e=>{u(e),d(e)},[]);return(0,i.jsx)(s.Z,{value:l,onChange:f,onClear:()=>{u(""),n("")},placeholder:r,...c})}},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(24246),r=n(27824),a=n(88038),o=n.n(a),s=n(86677);n(27378);var c=n(25980),l=n(90867),u=n(77830),d=()=>{let e=(0,s.useRouter)();return(0,i.jsx)(r.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(r.xuv,{children:[(0,i.jsxs)(r.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(r.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(r.wpx,{onClick:()=>{e.push(u.fz)},children:"Configure"})]}),(0,i.jsxs)(r.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},f=e=>{let{children:t,title:n,padded:a=!0,mainProps:u}=e,f=(0,c.hz)(),m=(0,s.useRouter)(),x="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,h=!(f.flags.privacyRequestsConfiguration&&x),{data:p}=(0,l.JE)(void 0,{skip:h}),{data:v}=(0,l.PW)(void 0,{skip:h}),j=f.flags.privacyRequestsConfiguration&&(!p||!v)&&x;return(0,i.jsxs)(r.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(o(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(r.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[j?(0,i.jsx)(d,{}):null,t]})]})}},2656:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var i=n(24246),r=n(27824),a=n(79894),o=n.n(a),s=n(27378),c=n(30952),l=n(77213),u=n(77830),d=n(58754),f=n(47935),m=n(7426),x=n(37059);let h=e=>{let{isConfigLoading:t}=e;return(0,i.jsx)(l.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,i.jsx)(r.jqI,{justify:"center",align:"center",className:"h-full",children:t?(0,i.jsx)(r.$jN,{color:"primary.900"}):(0,i.jsx)(r.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},p=()=>(0,i.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,i.jsx)(o(),{href:u.KH,passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(r.wpx,{type:"primary",children:"Visit integrations"})})});var v=n(10969),j=n(60145),g=n(11558),y=n(70641),b=n(7317),w=n(85302),_=n(64892),k=n(16394),C=n(54762);let{Text:N}=r.AntTypography,D=e=>{let{monitorSummary:t,showSkeleton:n,...a}=e,{name:c,consent_status:l,total_updates:d,updates:f,last_monitored:m,secrets:x,key:h}=t,p=(0,s.useMemo)(()=>(null==x?void 0:x.url)?(0,k.ge)(x.url):void 0,[null==x?void 0:x.url]),D=(0,s.useMemo)(()=>p?(0,k.tl)(p,60):void 0,[p]),E=Object.entries(f).map(e=>"".concat(e[1]," ").concat(e[0],"s")).join(", "),P=m?(0,k.p6)(new Date(m)):void 0,S=m?function(e,t,n){let i;let r=(0,j.j)(),a=n?.locale??r.locale??v._,o=(0,w.U)(e,t);if(isNaN(o))throw RangeError("Invalid time value");let s=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:o}),[c,l]=(0,b.d)(n?.in,...o>0?[t,e]:[e,t]),u=(0,g.u)(n?.roundingMethod??"round"),d=l.getTime()-c.getTime(),f=d/_.yJ,m=(d-((0,y.D)(l)-(0,y.D)(c)))/_.yJ,x=n?.unit;if("second"===(i=x||(f<1?"second":f<60?"minute":f<_.H_?"hour":m<_.fH?"day":m<_.UU?"month":"year"))){let e=u(d/1e3);return a.formatDistance("xSeconds",e,s)}if("minute"===i){let e=u(f);return a.formatDistance("xMinutes",e,s)}if("hour"===i){let e=u(f/60);return a.formatDistance("xHours",e,s)}if("day"===i){let e=u(m/_.H_);return a.formatDistance("xDays",e,s)}if("month"===i){let e=u(m/_.fH);return 12===e&&"month"!==x?a.formatDistance("xYears",1,s):a.formatDistance("xMonths",e,s)}{let e=u(m/_.UU);return a.formatDistance("xYears",e,s)}}(new Date(m),new Date,{addSuffix:!0}):void 0;return(0,i.jsx)(r.krs.Item,{"data-testid":"monitor-result-".concat(h),...a,children:(0,i.jsx)(r.N_L,{avatar:!0,title:!1,loading:n,active:!0,children:(0,i.jsxs)(r.bue,{gutter:12,className:"w-full",children:[(0,i.jsx)(r.JGx,{span:17,className:"align-middle",children:(0,i.jsx)(r.krs.Item.Meta,{avatar:(0,i.jsx)(r.t3Z,{src:D,size:30,icon:(0,i.jsx)(r.PJP.huD,{size:30}),style:{backgroundColor:"transparent",color:"var(--ant-color-text)"},alt:"".concat(p," icon")}),title:(0,i.jsxs)(r.jqI,{align:"center",gap:4,children:[(0,i.jsx)(o(),{href:"".concat(u.vi,"/").concat(h),className:"whitespace-nowrap",children:"".concat(d," assets detected").concat(p?" on ".concat(p):"")}),(0,i.jsx)(C.l,{consentStatus:l})]}),description:"".concat(E," detected.")})}),(0,i.jsx)(r.JGx,{span:4,className:"flex items-center justify-end",children:(0,i.jsx)(N,{ellipsis:{tooltip:c},children:c})}),(0,i.jsx)(r.JGx,{span:3,className:"flex items-center justify-end",children:!!S&&(0,i.jsx)(N,{"data-testid":"monitor-date",ellipsis:{tooltip:P},children:S})})]})})})};var E=()=>{var e;let t=(0,r.pmc)(),{PAGE_SIZES:n,pageSize:a,setPageSize:v,onPreviousPageClick:j,isPreviousPageDisabled:g,onNextPageClick:y,isNextPageDisabled:b,startRange:w,endRange:_,pageIndex:k,setTotalPages:C,resetPageIndexToDefault:N}=(0,f.oi)(),[E,P]=(0,s.useState)(""),{data:S,isLoading:T}=(0,m.tB)({api_set:!1}),I=!!(null==S?void 0:null===(e=S.detection_discovery)||void 0===e?void 0:e.website_monitor_enabled);(0,s.useEffect)(()=>{N()},[E,N]);let{data:M,isError:R,isLoading:A,isFetching:q}=(0,x.Ud)({page:k,size:a,search:E},{skip:T||!I});(0,s.useEffect)(()=>{R&&t&&I&&t({title:"Error fetching data",description:"Please try again later",status:"error"})},[R,t,I]),(0,s.useEffect)(()=>{if(M){var e;C(null!==(e=M.total)&&void 0!==e?e:1)}},[M,C]);let H=(null==M?void 0:M.items)||[],U=q?Array.from({length:a},(e,t)=>({key:t.toString(),updates:[],last_monitored:null})):[],z=(0,s.useCallback)(e=>[(0,i.jsx)(o(),{href:"".concat(u.vi,"/").concat(e),passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(r.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(e),children:"Review"})},"review")],[]);return I?(0,i.jsxs)(l.Z,{title:"Action center",children:[(0,i.jsx)(d.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}]}),(0,i.jsx)(r.jqI,{className:"justify-between py-6",children:(0,i.jsx)(c.f,{value:E,onChange:P})}),(0,i.jsx)(r.krs,{loading:A,dataSource:H||U,locale:{emptyText:(0,i.jsx)(p,{})},renderItem:e=>!!(null==e?void 0:e.key)&&(0,i.jsx)(D,{showSkeleton:q,monitorSummary:e,actions:z(e.key)},e.key)}),!!H&&!!(null==M?void 0:M.total)&&M.total>a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.htM,{className:"mb-6 mt-0"}),(0,i.jsx)(f.s8,{totalRows:(null==M?void 0:M.total)||0,pageSizes:n,setPageSize:v,onPreviousPageClick:j,isPreviousPageDisabled:g||q,onNextPageClick:y,isNextPageDisabled:b||q,startRange:w,endRange:_})]})]}):(0,i.jsx)(h,{isConfigLoading:T})}}},function(e){e.O(0,[7725,2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);