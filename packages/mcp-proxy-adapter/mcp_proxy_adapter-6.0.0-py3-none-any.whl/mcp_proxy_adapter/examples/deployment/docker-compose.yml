version: '3.8'

# Variables for docker-compose
x-environment: &default-env
  - CONFIG_PATH=/app/config.json
  - LOG_LEVEL=INFO

x-volume-mounts: &default-mounts
  - ./config.json:/app/config.json:ro
  - ./logs:/app/logs:rw
  - ./data:/app/data:rw
  - ./cache:/app/cache:rw

services:
  mcp-proxy-adapter:
    container_name: ${CONTAINER_NAME:-mcp-proxy-adapter}
    build:
      context: ../../
      dockerfile: mcp_proxy_adapter/examples/deployment/Dockerfile
    ports:
      - "127.0.0.1:${HOST_PORT:-8000}:${SERVICE_PORT:-8000}"
    volumes: *default-mounts
    environment: *default-env
    restart: unless-stopped
    user: "${USER_ID:-1000}:${GROUP_ID:-1000}"
    networks:
      - default

networks:
  default:
    driver: bridge 