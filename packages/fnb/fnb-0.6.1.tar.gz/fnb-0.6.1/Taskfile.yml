# https://taskfile.dev

version: '3'

vars:
  GREETING: Let's Fetch and Backup!
  GITLAB_REPOS: https://gitlab.com/qumasan/fnb
  GITLAB_PAGES: https://qumasan.gitlab.io/fnb

tasks:
  default:
    desc: Show greeting and available tasks
    cmds:
      - echo "{{.GREETING}}"
      - task --list
    silent: true

  # Repository
  view-repos:
    desc: View GitLab repository
    cmds:
      - open {{.GITLAB_REPOS}}

  view-issues:
    desc: View GitLab issues
    cmds:
      - open {{.GITLAB_REPOS}}/-/issues

  view-mr:
    desc: View Merge Requests
    cmds:
      - open {{.GITLAB_REPOS}}/-/merge_requests

  view-pages:
    desc: View GitLab Pages
    cmds:
      - open {{.GITLAB_PAGES}}


  # Documentation
  docs:
    desc: Serve docs locally
    cmds:
      - uv run mkdocs serve -o

  build-docs:
    desc: Build docs as static HTML
    cmds:
      - uv run mkdocs build

  code:
    desc: Start VS Code
    cmds:
      - code .

  # Testing
  pytest:
    desc: Run all pytest tests
    cmds:
      - uv run pytest

  # Format
  format:
    desc: Format with ruff
    cmds:
      - uv run ruff format src tests

  pre-commit:
    desc: Run all pre-commit hooks on all files
    cmds:
      - uv run pre-commit run --all-files

  # Package Maintenance
  outdated:
    desc: Show outdated Python packages
    cmds:
      - uv pip list --outdated

  # Sandbox (local testing)
  sandbox:
    desc: Run rfb status inside sandboxPlay at sandbox
    dir: sandbox
    cmds:
      - uv run rfb status
