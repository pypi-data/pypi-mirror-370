# Зависимости проекта

## Основные зависимости

### Lark
- **Версия**: >=1.1.5
- **Назначение**: Парсинг строковых выражений
- **Документация**: https://lark-parser.readthedocs.io/
- **Использование в проекте**: FilterParser для создания AST
- **Ключевые возможности**:
  - Создание грамматик для сложных фильтров
  - Трансформация в AST с поддержкой всех операторов
  - Обработка ошибок с детальными сообщениями
  - Кэширование парсера для производительности
  - Поддержка приоритетов операторов

### Pydantic
- **Версия**: >=2.0.0
- **Назначение**: Валидация данных
- **Документация**: https://docs.pydantic.dev/
- **Использование в проекте**: TypedValue, ValidationResult, ChunkQuery
- **Ключевые возможности**:
  - Валидация 50+ полей SemanticChunk
  - Поддержка enum полей (ChunkType, ChunkStatus, LanguageEnum)
  - Валидация UUID полей
  - Валидация сложных типов (списки, словари, вложенные поля)

## Зависимости для разработки

### Hypothesis
- **Версия**: >=6.0.0
- **Назначение**: Property-based тестирование
- **Документация**: https://hypothesis.readthedocs.io/
- **Использование в проекте**: Тестирование всех компонентов системы
- **Ключевые возможности**:
  - Генерация тестовых данных для всех типов полей
  - Тестирование свойств логических операторов
  - Нахождение edge cases в сложных выражениях
  - Тестирование производительности и безопасности

### Pytest
- **Версия**: >=7.0.0
- **Назначение**: Тестирование
- **Документация**: https://docs.pytest.org/
- **Использование в проекте**: Unit и интеграционные тесты
- **Ключевые возможности**:
  - Фикстуры
  - Параметризованные тесты
  - Покрытие кода

### Black
- **Версия**: >=23.0.0
- **Назначение**: Автоматическое форматирование кода
- **Документация**: https://black.readthedocs.io/
- **Использование в проекте**: Единообразное форматирование кода
- **Ключевые возможности**:
  - Единообразное форматирование
  - Интеграция с pre-commit

### Isort
- **Версия**: >=5.0.0
- **Назначение**: Сортировка импортов
- **Документация**: https://pycqa.github.io/isort/
- **Использование в проекте**: Автоматическая сортировка импортов
- **Ключевые возможности**:
  - Автоматическая сортировка
  - Группировка импортов

### Mypy
- **Версия**: >=1.0.0
- **Назначение**: Проверка типов
- **Документация**: https://mypy.readthedocs.io/
- **Использование в проекте**: Статический анализ типов
- **Ключевые возможности**:
  - Статический анализ
  - Обнаружение ошибок типов

## Архитектурные требования

### Производительность
- **Lark**: < 1ms парсинг для запросов до 1000 символов
- **Thread-safe операции**: для масштабируемости
- **Кэширование парсера**: для повторных запросов
- **Оптимизация AST**: 20-50% улучшение производительности

### Безопасность
- **ReDoS защита**: через таймауты (1 секунда)
- **Валидация входных данных**: на всех уровнях
- **Ограничение ресурсов**: длина запросов (10,000 символов)
- **Защита от утечек памяти**: ограничение глубины AST (10 уровней)

### Тестируемость
- **100% покрытие кода**: для всех компонентов
- **Property-based тесты**: для всех компонентов
- **Тесты производительности**: бенчмарки и профилирование
- **Тесты безопасности**: проверка уязвимостей

## Установка

### Основные зависимости
```bash
pip install -e .
```

### Зависимости для разработки
```bash
pip install -e ".[dev]"
```

### Виртуальное окружение
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
pip install -e ".[dev]"
```

## Конфигурация

### Pre-commit hooks
```bash
pip install pre-commit
pre-commit install
```

### IDE настройки
- **VS Code**: settings.json с настройками Python интерпретатора
- **PyCharm**: External Tools для Black, isort, mypy
- **Автоматическое форматирование**: при сохранении файлов

## Мониторинг

### Версии зависимостей
- Все версии зафиксированы в pyproject.toml
- Автоматическое обновление через pre-commit
- Регулярная проверка совместимости

### Производительность
- Тесты производительности для Lark парсера
- Бенчмарки для всех компонентов
- Мониторинг использования памяти

### Безопасность
- Регулярная проверка уязвимостей
- Тесты безопасности для всех компонентов
- Мониторинг ReDoS атак 