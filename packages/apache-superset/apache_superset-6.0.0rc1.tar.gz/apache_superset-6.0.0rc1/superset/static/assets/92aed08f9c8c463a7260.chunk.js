"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[1859],{5504:(e,t,i)=>{i.d(t,{A:()=>o});var r=i(53259),n=i.n(r);const s={onRenderFailure(){},onRenderSuccess(){}};function o(e){const t=n().Map(e);class i extends t{componentDidMount(){this.afterRender()}componentDidUpdate(){this.afterRender()}afterRender(){const{loaded:e,loading:t,error:i}=this.state,{onRenderFailure:r,onRenderSuccess:n}=this.props;t||(i?r(i):e&&Object.keys(e).length>0&&n())}}return i.defaultProps=void 0,i.defaultProps=s,i.preload=t.preload,i}},20033:(e,t,i)=>{i.d(t,{wv:()=>d,x9:()=>m});var r=i(62193),n=i.n(r),s=i(58561),o=i.n(s),a=i(90924),l=i(79378),c=i(59744);const d=" : ",h=(e,t)=>`${e}${d}${t}`,u=(e,t)=>e.replace("T00:00:00","")||(t?"-∞":"∞"),p=(e,t="col")=>{const i=e.split(d);return 1===i.length?e:`${u(i[0],!0)} ≤ ${t} < ${u(i[1])}`},m=async(e,t="col",i)=>{let r,s;if(n()(i))r=o().encode_uri(e),s=`/api/v1/time_range/?q=${r}`;else{const t=(0,a.A)(i).map((t=>({timeRange:e,shift:t})));r=o().encode_uri([{timeRange:e},...t]),s=`/api/v1/time_range/?q=${r}`}try{var m;const e=await l.A.get({endpoint:s});if(n()(i)){var f,g;const i=h((null==e||null==(f=e.json)||null==(f=f.result[0])?void 0:f.since)||"",(null==e||null==(g=e.json)||null==(g=g.result[0])?void 0:g.until)||"");return{value:p(i,t)}}const r=null==e||null==(m=e.json)?void 0:m.result.map((e=>h(e.since,e.until)));return{value:r.slice(1).map((e=>((e,t,i="col")=>{const r=e.split(d),n=t.split(d);return`${i}: ${u(r[0],!0)} to ${u(r[1])} vs\n  ${u(n[0],!0)} to ${u(n[1])}`})(r[0],e,t)))}}catch(e){const t=await(0,c.h4)(e);return{error:t.message||t.error||e.statusText}}}},20486:(e,t,i)=>{i.d(t,{A:()=>b});var r=i(2445),n=i(96540),s=i(94177),o=i(80116),a=i(25508),l=i(98837),c=i(39965),d=i(18749),h=i(74098),u=i(32861),p=i(69376),m=i(59923),f=i(5504);function g(e){return e}const v=()=>null,D={id:"",className:"",preTransformProps:g,overrideTransformProps:void 0,postTransformProps:g,onRenderSuccess(){},onRenderFailure(){}},w=new m.A;class S extends n.PureComponent{constructor(...e){super(...e),this.container=void 0,this.processChartProps=(0,a.Mz)([e=>e.chartProps,e=>e.preTransformProps,e=>e.transformProps,e=>e.postTransformProps],((e,t=g,i=g,r=g)=>r(i(t(e))))),this.createLoadableRenderer=(0,a.Mz)([e=>e.chartType,e=>e.overrideTransformProps],((e,t)=>{if(e){const i=(0,f.A)({loader:{Chart:()=>(0,u.A)().getAsPromise(e),transformProps:t?()=>Promise.resolve(t):()=>(0,p.A)().getAsPromise(e)},loading:t=>this.renderLoading(t,e),render:this.renderChart});return i.preload(),i}return v})),this.renderChart=(e,t)=>{const{Chart:i,transformProps:n}=e,{chartProps:s,preTransformProps:o,postTransformProps:a}=t;return(0,r.Y)(i,{...this.processChartProps({chartProps:s,preTransformProps:o,transformProps:n,postTransformProps:a})})},this.renderLoading=(e,t)=>{const{error:i}=e;return i?(0,r.FD)("div",{className:"alert alert-warning",role:"alert",children:[(0,r.Y)("strong",{children:(0,h.t)("ERROR")})," ",(0,r.FD)("code",{children:['chartType="',t,'"']})," —",i.toString()]}):null},this.setRef=e=>{this.container=e}}render(){const{id:e,className:t,preTransformProps:i,postTransformProps:n,chartProps:s=w,onRenderSuccess:o,onRenderFailure:a}=this.props,l=this.createLoadableRenderer(this.props);if(null===s)return null;const c={};return e&&(c.id=e),t&&(c.className=t),(0,r.Y)("div",{...c,ref:this.setRef,children:(0,r.Y)(l,{preTransformProps:i,postTransformProps:n,chartProps:s,onRenderSuccess:o,onRenderFailure:a})})}}S.defaultProps=D;var R=i(50290),y=i(17437);const P={maxWidth:800},T=R.I4.div`
  ${({theme:e,width:t,height:i})=>y.AH`
    align-items: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    height: ${i}px;
    width: ${t}px;
    padding: ${4*e.sizeUnit}px;

    & .no-results-title {
      font-size: ${e.fontSizeLG}px;
      font-weight: ${e.fontWeightStrong};
      padding-bottom: ${2*e.sizeUnit};
    }

    & .no-results-body {
      font-size: ${e.fontSize}px;
    }
  `}
`,C=({className:e,height:t,id:i,width:n})=>{const s="string"==typeof n||n>250,o=(0,h.t)("No results were returned for this query. If you expected results to be returned, ensure any filters are configured properly and the datasource contains data for the selected time range.");return(0,r.Y)(T,{height:t,width:n,className:e,id:i,title:s?void 0:o,children:(0,r.FD)("div",{style:P,children:[(0,r.Y)("div",{className:"no-results-title",children:(0,h.t)("No Results")}),s&&(0,r.Y)("div",{className:"no-results-body",children:o})]})})},x={FallbackComponent:function({error:e,height:t,width:i}){return(0,r.Y)("div",{css:e=>({backgroundColor:e.colorBgContainer,color:e.colorText,overflow:"auto",padding:32}),style:{height:t,width:i},children:(0,r.FD)("div",{children:[(0,r.Y)("div",{children:(0,r.Y)("b",{children:(0,h.t)("Oops! An error occurred!")})}),(0,r.Y)("code",{children:e?e.toString():"Unknown Error"})]})})},height:400,width:"100%",enableNoResults:!0};class A extends n.PureComponent{constructor(...e){super(...e),this.core=void 0,this.createChartProps=m.A.createSelector(),this.parseDimension=(0,a.Mz)([({width:e})=>e,({height:e})=>e],((e,t)=>{const i=(0,c.A)(e),s=(0,c.A)(t),o={height:s.isDynamic?100*s.multiplier+"%":s.value,width:i.isDynamic?100*i.multiplier+"%":i.value};return{BoundingBox:i.isDynamic&&s.isDynamic&&1===i.multiplier&&1===s.multiplier?n.Fragment:({children:e})=>(0,r.Y)("div",{style:o,children:e}),heightInfo:s,widthInfo:i}})),this.setRef=e=>{this.core=e},this.getQueryCount=()=>{var e,t;return null!=(e=null==(t=(0,d.A)().get(this.props.chartType))?void 0:t.queryObjectCount)?e:1}}renderChart(e,t){const{id:i,className:n,chartType:o,preTransformProps:a,overrideTransformProps:l,postTransformProps:c,onRenderSuccess:d,onRenderFailure:h,disableErrorBoundary:u,FallbackComponent:p,onErrorBoundary:m,Wrapper:f,queriesData:g,enableNoResults:v,noResults:D,theme:w,...R}=this.props,y=this.createChartProps({...R,queriesData:g,height:t,width:e,theme:w});let P;if(!v||g&&!g.slice(0,this.getQueryCount()).every((({data:e})=>!e||Array.isArray(e)&&0===e.length))){const s=(0,r.Y)(S,{ref:this.setRef,id:i,className:n,chartType:o,chartProps:y,preTransformProps:a,overrideTransformProps:l,postTransformProps:c,onRenderSuccess:d,onRenderFailure:h});P=f?(0,r.Y)(f,{width:e,height:t,children:s}):s}else P=D||(0,r.Y)(C,{id:i,className:n,height:t,width:e});return!0===u?P:(0,r.Y)(s.tH,{FallbackComponent:i=>(0,r.Y)(p,{width:e,height:t,...i}),onError:m,children:P})}render(){const{heightInfo:e,widthInfo:t,BoundingBox:i}=this.parseDimension(this.props);if(t.isDynamic||e.isDynamic){const{debounceTime:n}=this.props;return(0,r.Y)(i,{children:(0,r.Y)(o.A,{debounceTime:n,children:({width:i,height:r})=>this.renderChart(t.isDynamic?Math.floor(i):t.value,e.isDynamic?Math.floor(r):e.value)})})}return this.renderChart(t.value,e.value)}}A.defaultProps=x;const b=(0,l.b)(A)},39242:(e,t,i)=>{i.d(t,{t:()=>m});var r=i(20033);const n=String.raw`\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.\d+)?(?:(?:[+-]\d\d:\d\d)|Z)?`,s=String.raw`(?:TODAY|NOW)`,o=String.raw`[+-]?[1-9][0-9]*`,a=String.raw`YEAR|QUARTER|MONTH|WEEK|DAY|HOUR|MINUTE|SECOND`,l=RegExp(String.raw`^DATEADD\(DATETIME\("(${n}|${s})"\),\s(${o}),\s(${a})\)$`,"i"),c=RegExp(String.raw`^${n}$|^${s}$`,"i"),d=["now","today"],h=new Date;h.setHours(0,0,0,0);const u=new Date;u.setHours(0,0,0,0);const p={sinceDatetime:h.setDate(h.getDate()-7).toString(),sinceMode:"relative",sinceGrain:"day",sinceGrainValue:-7,untilDatetime:u.toString(),untilMode:"specific",untilGrain:"day",untilGrainValue:7,anchorMode:"now",anchorValue:"now"},m=e=>{const t=e.split(r.wv);if(2===t.length){const[e,i]=t;if(c.test(e)&&c.test(i)){const t=d.includes(e)?e:"specific",r=d.includes(i)?i:"specific";return{customRange:{...p,sinceDatetime:e,untilDatetime:i,sinceMode:t,untilMode:r},matchedFlag:!0}}const r=e.match(l);if(r&&c.test(i)&&e.includes(i)){const[e,t,n]=r.slice(1),s=d.includes(i)?i:"specific";return{customRange:{...p,sinceGrain:n,sinceGrainValue:parseInt(t,10),sinceDatetime:e,untilDatetime:e,sinceMode:"relative",untilMode:s},matchedFlag:!0}}const n=i.match(l);if(c.test(e)&&n&&i.includes(e)){const[t,i,r]=[...n.slice(1)],s=d.includes(e)?e:"specific";return{customRange:{...p,untilGrain:r,untilGrainValue:parseInt(i,10),sinceDatetime:t,untilDatetime:t,untilMode:"relative",sinceMode:s},matchedFlag:!0}}if(r&&n){const[e,t,i]=[...r.slice(1)],[s,o,a]=[...n.slice(1)];if(e===s)return{customRange:{...p,sinceGrain:i,sinceGrainValue:parseInt(t,10),sinceDatetime:e,untilGrain:a,untilGrainValue:parseInt(o,10),untilDatetime:s,anchorValue:e,sinceMode:"relative",untilMode:"relative",anchorMode:"now"===e?"now":"specific"},matchedFlag:!0}}}return{customRange:p,matchedFlag:!1}}},39591:(e,t,i)=>{i.d(t,{A:()=>s,P:()=>n});var r=i(96540);const n={name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"},s=({isVertical:e,isHorizontal:t}={isVertical:!1,isHorizontal:!0})=>{const[i,n]=(0,r.useState)(!0),s=(0,r.useRef)(null),[o,a]=(0,r.useState)(0),[l,c]=(0,r.useState)(0),[d,h]=(0,r.useState)(0),[u,p]=(0,r.useState)(0);return(0,r.useEffect)((()=>{var e,t,i,r,n,o,l,d;a(null!=(e=null==(t=s.current)?void 0:t.offsetWidth)?e:0),c(null!=(i=null==(r=s.current)?void 0:r.scrollWidth)?i:0),h(null!=(n=null==(o=s.current)?void 0:o.offsetHeight)?n:0),p(null!=(l=null==(d=s.current)?void 0:d.scrollHeight)?l:0)})),(0,r.useEffect)((()=>{n(e&&d<u||t&&o<l)}),[o,l,d,u,e,t]),[s,i]}},39965:(e,t,i)=>{i.d(t,{A:()=>n});const r={isDynamic:!0,multiplier:1};function n(e){return"auto"===e||"100%"===e?r:"string"==typeof e&&e.length>0&&"%"===e[e.length-1]?{isDynamic:!0,multiplier:parseFloat(e)/100}:{isDynamic:!1,value:"number"==typeof e?e:parseFloat(e)}}},59923:(e,t,i)=>{i.d(t,{A:()=>l});var r=i(25508),n=i(69191),s=i(50290);const o=800,a=600;class l{constructor(e={theme:s.TT}){this.annotationData=void 0,this.datasource=void 0,this.rawDatasource=void 0,this.initialValues=void 0,this.formData=void 0,this.rawFormData=void 0,this.height=void 0,this.hooks=void 0,this.ownState=void 0,this.filterState=void 0,this.legendState=void 0,this.legendIndex=void 0,this.queriesData=void 0,this.width=void 0,this.behaviors=void 0,this.displaySettings=void 0,this.appSection=void 0,this.isRefreshing=void 0,this.inputRef=void 0,this.inContextMenu=void 0,this.emitCrossFilters=void 0,this.theme=void 0;const{annotationData:t={},datasource:i={},formData:r={},hooks:l={},ownState:c={},filterState:d={},legendState:h,legendIndex:u,initialValues:p={},queriesData:m=[],behaviors:f=[],displaySettings:g={},width:v=o,height:D=a,appSection:w,isRefreshing:S,inputRef:R,inContextMenu:y=!1,emitCrossFilters:P=!1,theme:T}=e;this.width=v,this.height=D,this.annotationData=t,this.datasource=(0,n.A)(i),this.rawDatasource=i,this.formData=(0,n.A)(r),this.rawFormData=r,this.hooks=l,this.initialValues=p,this.queriesData=m,this.ownState=c,this.filterState=d,this.legendState=h,this.legendIndex=u,this.behaviors=f,this.displaySettings=g,this.appSection=w,this.isRefreshing=S,this.inputRef=R,this.inContextMenu=y,this.emitCrossFilters=P,this.theme=T}}l.createSelector=void 0,l.createSelector=function(){return(0,r.Mz)((e=>e.annotationData),(e=>e.datasource),(e=>e.formData),(e=>e.height),(e=>e.hooks),(e=>e.initialValues),(e=>e.queriesData),(e=>e.width),(e=>e.ownState),(e=>e.filterState),(e=>e.legendState),(e=>e.legendIndex),(e=>e.behaviors),(e=>e.displaySettings),(e=>e.appSection),(e=>e.isRefreshing),(e=>e.inputRef),(e=>e.inContextMenu),(e=>e.emitCrossFilters),(e=>e.theme),((e,t,i,r,n,s,o,a,c,d,h,u,p,m,f,g,v,D,w,S)=>new l({annotationData:e,datasource:t,formData:i,height:r,hooks:n,initialValues:s,queriesData:o,ownState:c,filterState:d,legendState:h,legendIndex:u,width:a,behaviors:p,displaySettings:m,appSection:f,isRefreshing:g,inputRef:v,inContextMenu:D,emitCrossFilters:w,theme:S})),{memoize:r.i5,argsMemoize:r.i5,memoizeOptions:{maxSize:10}})}},62053:(e,t,i)=>{i.d(t,{h:()=>s});var r=i(96540),n=i(67413);function s(e,t){const i=(0,n.Z)(e);(0,r.useEffect)((()=>{e!==i&&t(i,e)}),[e,i,t])}}}]);