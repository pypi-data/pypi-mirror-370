(function(){function u(o,i,s){function l(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var a=i[t]={exports:{}};o[t][0].call(a.exports,function(e){var r=o[t][1][e];return l(r||e)},a,a.exports,u,o,i,s)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}return u})()({1:[function(l,e,c){(function(s){(function(){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ScriptLoader=void 0;var a=l("./lib/log"),e=l("./lib/c"),o=l("./lib/java"),r=l("./lib/objc"),t=function(t){return function(){if(arguments.length>0){for(var e=pretty2String(arguments[0]),r=1;r<arguments.length;r++)e+=" ",e+=pretty2String(arguments[r]);t(e)}else t("")}};console.debug=t(a.d.bind(a)),console.info=t(a.i.bind(a)),console.warn=t(a.w.bind(a)),console.error=t(a.e.bind(a)),console.log=t(a.i.bind(a)),null!=s._setUnhandledExceptionCallback&&s._setUnhandledExceptionCallback(function(e){var r=void 0;if(e instanceof Error){var t=e.stack;void 0!==t&&(r=t)}if(Java.available){var n=o.getErrorStack(e);void 0!==n&&(void 0!==r?r+="\n\nCaused by: \n".concat(n):r=n)}a.exception(""+e,r)});var n=function(){function e(){}return e.prototype.load=function(e,r){for(var t=0,n=e;t<n.length;t++){var a=n[t];try{var o=a.filename;o=(o=o.replace(/[\/\\]/g,"$")).replace(/[^A-Za-z0-9_$]+/g,"_"),o="fn_".concat(o).substring(0,255),(0,eval)("(function ".concat(o,"(parameters) {").concat(a.source,"\n})\n")+"//# sourceURL=".concat(a.filename))(r)}catch(e){var i=e.hasOwnProperty("stack")?e.stack:e;throw new Error("Unable to load ".concat(a.filename,": ").concat(i))}}},e}();c.ScriptLoader=n;var i=new n;rpc.exports={loadScripts:i.load.bind(i)},Object.defineProperties(globalThis,{Log:{enumerable:!0,value:a},CHelper:{enumerable:!0,value:e},JavaHelper:{enumerable:!0,value:o},ObjCHelper:{enumerable:!0,value:r},isFunction:{enumerable:!1,value:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},ignoreError:{enumerable:!1,value:function(e,r){void 0===r&&(r=void 0);try{return e()}catch(e){return a.d("Catch ignored error. "+e),r}}},parseBoolean:{enumerable:!1,value:function(e,r){if(void 0===r&&(r=void 0),"boolean"==typeof e)return e;if("string"==typeof e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1}return r}},pretty2String:{enumerable:!1,value:function(e){return"string"!=typeof e&&(e=pretty2Json(e)),JSON.stringify(e)}},pretty2Json:{enumerable:!1,value:function(e){if(!(e instanceof Object))return e;if(Array.isArray(e)){for(var r=[],t=0;t<e.length;t++)r.push(pretty2Json(e[t]));return r}return Java.available&&o.isJavaObject(e)?o.o.objectClass.toString.apply(e):ignoreError(function(){return e.toString()})}}})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./lib/c":2,"./lib/java":3,"./lib/log":4,"./lib/objc":5}],2:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDescFromAddress=t.getDebugSymbolFromAddress=t.getEventImpl=t.hookFunction=t.hookFunctionWithCallbacks=t.hookFunctionWithOptions=t.getExportFunction=t.o=void 0;var c=e("./log"),n=e("./java"),a=e("./objc"),o=function(){function e(){}return Object.defineProperty(e.prototype,"dlopen",{get:function(){return u(null,"dlopen","pointer",["pointer","int"])},enumerable:!1,configurable:!0}),e}();t.o=new o;var i=new ModuleMap,s={},l={};function u(e,r,t,n){var a=(e||"")+"|"+r;if(a in s)return s[a];var o=Module.findExportByName(e,r);if(null===o)throw Error("cannot find "+r);return s[a]=new NativeFunction(o,t,n),s[a]}function f(e,r,t){return d(e,r,p(t))}function d(e,n,r){var t=Module.findExportByName(e,n);if(null===t)throw Error("cannot find "+n);var a={get:function(e,r,t){return"name"===r?n:e[r]}},o={};"onEnter"in r&&(o.onEnter=function(e){r.onEnter.call(new Proxy(this,a),e)}),"onLeave"in r&&(o.onLeave=function(e){r.onLeave.call(new Proxy(this,a),e)});var i=Interceptor.attach(t,o);return c.i("Hook function: "+n+" ("+t+")"),i}function v(e,a,o,i,r){var s=u(e,a,o,i);if(null===s)throw Error("cannot find "+a);var l=isFunction(r)?r:p(r),t=i;Interceptor.replace(s,new NativeCallback(function(){for(var n=this,e=[],r=0;r<i.length;r++)e[r]=arguments[r];var t=new Proxy(s,{get:function(e,r,t){switch(r){case"name":return a;case"argumentTypes":return i;case"returnType":return o;case"context":return n.context;default:e[r]}},apply:function(e,r,t){return e.apply(null,t[0])}});return l.call(t,e)},o,t)),c.i("Hook function: "+a+" ("+s+")")}function p(e){var l={};if(l.method=parseBoolean(e.method,!0),l.thread=parseBoolean(e.thread,!1),l.stack=parseBoolean(e.stack,!1),l.symbol=parseBoolean(e.symbol,!0),l.backtracer=e.backtracer||"accurate",l.args=parseBoolean(e.args,!1),l.result=parseBoolean(e.result,l.args),l.error=parseBoolean(e.error,l.args),l.page=parseBoolean(e.page,!1),l.extras={},null!=e.extras)for(var r in e.extras)l.extras[r]=e.extras[r];var t=function(e){var r={};for(var t in l.extras)r[t]=l.extras[t];!1!==l.method&&(r.method_name=this.name),!1!==l.thread&&(r.thread_id=Process.getCurrentThreadId()),!1!==l.args&&(r.args=pretty2Json(e)),!1!==l.result&&(r.result=null),!1!==l.error&&(r.error=null),!1!==l.page&&(r.page=b());try{var n=this(e);return!1!==l.result&&(r.result=pretty2Json(n)),n}catch(e){throw!1!==l.error&&(r.error=pretty2Json(e)),e}finally{if(!1!==l.stack)for(var a=r.stack=[],o="accurate"===l.backtracer?Backtracer.ACCURATE:Backtracer.FUZZY,i=Thread.backtrace(this.context,o),s=0;s<i.length;s++)a.push(h(i[s],!1!==l.symbol));c.event(r)}};return t.onLeave=function(e){var r={};for(var t in l.extras)r[t]=l.extras[t];if(!1!==l.method&&(r.method_name=this.name),!1!==l.thread&&(r.thread_id=Process.getCurrentThreadId()),!1!==l.result&&(r.result=pretty2Json(e)),!1!==l.page&&(r.page=b()),!1!==l.stack)for(var n=r.stack=[],a="accurate"===l.backtracer?Backtracer.ACCURATE:Backtracer.FUZZY,o=Thread.backtrace(this.context,a),i=0;i<o.length;i++)n.push(h(o[i],!1!==l.symbol));c.event(r)},t}function g(e){var r=e.toString();return void 0===l[r]&&(l[r]=DebugSymbol.fromAddress(e)),l[r]}function h(e,r){if(r){var t=g(e);if(null!=t)return t.toString()}var n=i.find(e);return null!=n?"".concat(e," ").concat(n.name,"!").concat(e.sub(n.base)):"".concat(e)}function b(){var r=null;try{if(Java.available)Java.perform(function(){var e=n.o.currentActivity;r=e?e.$className:null});else if(ObjC.available){var e=a.o.currentViewController;r=e?e.$className:null}}catch(e){r=null}return r}t.getExportFunction=u,t.hookFunctionWithOptions=f,t.hookFunctionWithCallbacks=d,t.hookFunction=v,t.getEventImpl=p,t.getDebugSymbolFromAddress=g,t.getDescFromAddress=h},{"./java":3,"./log":4,"./objc":5}],3:[function(e,r,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getErrorStack=c.runOnCreateApplication=c.runOnCreateContext=c.traceClasses=c.chooseClassLoader=c.bypassSslPinning=c.setWebviewDebuggingEnabled=c.use=c.getStackTrace=c.getJavaEnumValue=c.fromJavaArray=c.isJavaArray=c.isJavaObject=c.getEventImpl=c.hookClass=c.hookAllMethods=c.hookAllConstructors=c.hookMethods=c.hookMethod=c.findClass=c.getClassMethod=c.getClassName=c.getObjectHandle=c.isSameObject=c.o=void 0;var s=e("./log"),t=function(){function e(){this.excludeHookPackages=["java.","javax.","android.","androidx."]}return Object.defineProperty(e.prototype,"objectClass",{get:function(){return Java.use("java.lang.Object")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classClass",{get:function(){return Java.use("java.lang.Class")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classLoaderClass",{get:function(){return Java.use("java.lang.ClassLoader")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stringClass",{get:function(){return Java.use("java.lang.String")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"threadClass",{get:function(){return Java.use("java.lang.Thread")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"throwableClass",{get:function(){return Java.use("java.lang.Throwable")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uriClass",{get:function(){return Java.use("android.net.Uri")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"urlClass",{get:function(){return Java.use("java.net.URL")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapClass",{get:function(){return Java.use("java.util.Map")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hashSetClass",{get:function(){return Java.use("java.util.HashSet")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applicationContext",{get:function(){return Java.use("android.app.ActivityThread").currentApplication().getApplicationContext()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentActivity",{get:function(){try{for(var e=Java.use("android.app.ActivityThread"),r=Java.use("android.app.ActivityThread$ActivityClientRecord"),t=e.currentActivityThread().mActivities.value.values().iterator();t.hasNext();){var n=Java.cast(t.next(),r);if(!n.paused.value)return n.activity.value}return null}catch(e){return null}},enumerable:!1,configurable:!0}),e}();function n(e,r){return e===r||null!=e&&null!=r&&(!!e.hasOwnProperty("$isSameObject")&&e.$isSameObject(r))}function l(e){return null==e?null:e.hasOwnProperty("$h")?e.$h:void 0}function u(e){var r=e.$className;if(null!=r)return r;if(null!=(r=e.__name__))return r;if(null!=e.$classWrapper){if(null!=(r=e.$classWrapper.$className))return r;if(null!=(r=e.$classWrapper.__name__))return r}s.e("Cannot get class name: "+e)}function f(e,r){var t=e[r];return void 0!==t||"$"==r[0]&&void 0!==(t=e["_"+r])?t:void 0}function d(e,r){if(void 0===r&&(r=void 0),void 0!==r&&null!=r)return Java.ClassFactory.get(r).use(e);if(parseInt(Java.androidVersion)<7)return Java.use(e);for(var t=null,n=0,a=Java.enumerateClassLoadersSync();n<a.length;n++){var o=a[n];try{var i=d(e,o);if(null!=i)return i}catch(e){null==t&&(t=e)}}throw t}function i(e,r,t,n){void 0===n&&(n=null);var a=r;if("string"==typeof a){var o=a,i=e;"string"==typeof i&&(i=d(i));var s=f(i,o);if(void 0===s||void 0===s.overloads)throw Error("Cannot find method: "+u(i)+"."+o);if(null!=t){var l=t;for(var c in l)"string"!=typeof l[c]&&(l[c]=u(l[c]));a=s.overload.apply(s,l)}else{if(1!=s.overloads.length)throw Error(u(i)+"."+o+" has too many overloads");a=s.overloads[0]}}A(a),N(a,n)}function v(e,r,t){void 0===t&&(t=null);var n=e;"string"==typeof n&&(n=d(n));var a=f(n,r);if(void 0===a||void 0===a.overloads)throw Error("Cannot find method: "+u(n)+"."+r);for(var o=0;o<a.overloads.length;o++){var i=a.overloads[o];void 0!==i.returnType&&void 0!==i.returnType.className&&(A(i),N(i,t))}}function a(e,r){void 0===r&&(r=null);var t=e;"string"==typeof t&&(t=d(t)),v(t,"$init",r)}function o(e,r){void 0===r&&(r=null);var t=e;"string"==typeof t&&(t=d(t));for(var n=[],a=null,o=t.class;null!=o;){for(var i=o.getDeclaredMethods(),s=0;s<i.length;s++){var l=i[s].getName();n.indexOf(l)<0&&(n.push(l),v(t,l,r))}if(a=o.getSuperclass(),o.$dispose(),null==a)break;if(T((o=Java.cast(a,c.o.classClass)).getName()))break}}function p(e,r){void 0===r&&(r=null);var t=e;"string"==typeof t&&(t=d(t)),a(t,r),o(t,r)}function g(e){var i={};if(i.method=parseBoolean(e.method,!0),i.thread=parseBoolean(e.thread,!1),i.stack=parseBoolean(e.stack,!1),i.args=parseBoolean(e.args,!1),i.result=parseBoolean(e.result,i.args),i.error=parseBoolean(e.error,i.args),i.page=parseBoolean(e.page,!1),i.extras={},null!=e.extras)for(var r in e.extras)i.extras[r]=e.extras[r];return function(e,r){var t={};for(var n in i.extras)t[n]=i.extras[n];if(!1!==i.method&&(t.class_name=e.$className,t.method_name=this.name,t.method_simple_name=this.methodName),!1!==i.thread&&(t.thread_id=Process.getCurrentThreadId(),t.thread_name=c.o.threadClass.currentThread().getName()),!1!==i.args&&(t.args=pretty2Json(r)),!1!==i.result&&(t.result=null),!1!==i.error&&(t.error=null),!1!==i.page){var a=c.o.currentActivity;t.page=a?a.$className:null}try{var o=this(e,r);return!1!==i.result&&(t.result=pretty2Json(o)),o}catch(e){throw!1!==i.error&&(t.error=pretty2Json(e)),e}finally{!1!==i.stack&&(t.stack=pretty2Json(C())),s.event(t)}}}function h(e){if(e instanceof Object&&e.hasOwnProperty("class")&&e.class instanceof Object){var r=e.class;if(r.hasOwnProperty("getName")&&r.hasOwnProperty("getDeclaredClasses")&&r.hasOwnProperty("getDeclaredFields")&&r.hasOwnProperty("getDeclaredMethods"))return!0}return!1}function b(e){if(e instanceof Object&&e.hasOwnProperty("class")&&e.class instanceof Object){var r=e.class;if(r.hasOwnProperty("isArray")&&r.isArray())return!0}return!1}function m(e,r){var t=e;"string"==typeof t&&(t=d(t));for(var n=[],a=Java.vm.getEnv(),o=0;o<a.getArrayLength(r.$handle);o++)n.push(Java.cast(a.getObjectArrayElement(r.$handle,o),t));return n}function y(e,r){var t=e;"string"==typeof t&&(t=d(t));var n=t.class.getEnumConstants();n instanceof Array||(n=m(t,n));for(var a=0;a<n.length;a++)if(n[a].toString()===r)return n[a];throw new Error("Name of "+r+" does not match "+t)}function C(e){void 0===e&&(e=void 0);for(var r=[],t=(e||c.o.throwableClass.$new()).getStackTrace(),n=0;n<t.length;n++)r.push(t[n]);return r}c.o=new t,c.isSameObject=n,c.getObjectHandle=l,c.getClassName=u,c.getClassMethod=f,c.findClass=d,c.hookMethod=i,c.hookMethods=v,c.hookAllConstructors=a,c.hookAllMethods=o,c.hookClass=p,c.getEventImpl=g,c.isJavaObject=h,c.isJavaArray=b,c.fromJavaArray=m,c.getJavaEnumValue=y,c.getStackTrace=C;var k=null;function O(o){var n=c.o.hashSetClass.$new(),a=function(t){for(var a,e=o.entries(),r=function(){var e=a.value[0],r=a.value[1],n=null;try{n=d(e,t)}catch(e){}null!=n&&(o.delete(e),r.forEach(function(e,r,t){try{e(n)}catch(e){s.w("Call JavaHelper.use callback error: "+e)}}))};!(a=e.next()).done;)r()},e=c.o.classClass,r=c.o.classLoaderClass;i(e,"forName",["java.lang.String","boolean",r],function(e,r){var t=r[2];return null==t||n.contains(t)||(n.add(t),a(t)),this(e,r)}),i(r,"loadClass",["java.lang.String","boolean"],function(e,r){var t=e;return n.contains(t)||(n.add(t),a(t)),this(e,r)})}function w(r,t){var e=null;try{e=d(r)}catch(e){var n;if(null==k&&O(k=new Map),k.has(r))void 0!==(n=k.get(r))&&n.add(t);else(n=new Set).add(t),k.set(r,n);return}try{t(e)}catch(r){s.w("Call JavaHelper.use callback error: "+r)}}function S(){s.w("Android Enable Webview Debugging"),ignoreError(function(){var t=d("android.webkit.WebView");v(t,"setWebContentsDebuggingEnabled",function(e,r){return s.d("".concat(t,".setWebContentsDebuggingEnabled: ").concat(r[0])),r[0]=!0,this(e,r)}),v(t,"loadUrl",function(e,r){return s.d("".concat(t,".loadUrl: ").concat(r[0])),t.setWebContentsDebuggingEnabled(!0),this(e,r)})}),ignoreError(function(){var t=d("com.uc.webview.export.WebView");v(t,"setWebContentsDebuggingEnabled",function(e,r){return s.d("".concat(t,".setWebContentsDebuggingEnabled: ").concat(r[0])),r[0]=!0,this(e,r)}),v(t,"loadUrl",function(e,r){return s.d("".concat(t,".loadUrl: ").concat(r[0])),t.setWebContentsDebuggingEnabled(!0),this(e,r)})})}function j(){s.w("Android Bypass ssl pinning");var t=Java.use("java.util.Arrays");ignoreError(function(){return v("com.android.org.conscrypt.TrustManagerImpl","checkServerTrusted",function(e,r){if(s.d("SSL bypassing "+this),"void"!=this.returnType.type)return"pointer"==this.returnType.type&&"java.util.List"==this.returnType.className?t.asList(r[0]):void 0})}),ignoreError(function(){return v("com.google.android.gms.org.conscrypt.Platform","checkServerTrusted",function(e,r){s.d("SSL bypassing "+this)})}),ignoreError(function(){return v("com.android.org.conscrypt.Platform","checkServerTrusted",function(e,r){s.d("SSL bypassing "+this)})}),ignoreError(function(){return v("okhttp3.CertificatePinner","check",function(e,r){if(s.d("SSL bypassing "+this),"boolean"==this.returnType.type)return!0})}),ignoreError(function(){return v("okhttp3.CertificatePinner","check$okhttp",function(e,r){s.d("SSL bypassing "+this)})}),ignoreError(function(){return v("com.android.okhttp.CertificatePinner","check",function(e,r){if(s.d("SSL bypassing "+this),"boolean"==this.returnType.type)return!0})}),ignoreError(function(){return v("com.android.okhttp.CertificatePinner","check$okhttp",function(e,r){s.d("SSL bypassing "+this)})}),ignoreError(function(){return v("com.android.org.conscrypt.TrustManagerImpl","verifyChain",function(e,r){return s.d("SSL bypassing "+this),r[0]})})}function E(r){s.w("choose classloder: "+r),Java.enumerateClassLoaders({onMatch:function(e){try{null!=e.findClass(r)&&(s.i("choose classloader: "+e),Reflect.set(Java.classFactory,"loader",e))}catch(e){s.e(pretty2Json(e))}},onComplete:function(){s.d("enumerate classLoaders complete")}})}function x(t,n,a){void 0===n&&(n=void 0),void 0===a&&(a=void 0),t=null!=t?t.trim().toLowerCase():"",n=null!=n?n.trim().toLowerCase():"",a=null!=a?a:{stack:!0,args:!0},s.w("trace classes, include: "+t+", exclude: "+n+", options: "+JSON.stringify(a)),Java.enumerateLoadedClasses({onMatch:function(e){var r=e.toString().toLowerCase();r.indexOf(t)>=0&&(""==n||r.indexOf(n)<0)&&o(e,g(a))},onComplete:function(){s.d("enumerate classLoaders complete")}})}function _(n){v("android.app.ContextImpl","createAppContext",function(e,r){var t=this(e,r);return n(t),t})}function J(n){v("android.app.LoadedApk","makeApplication",function(e,r){var t=this(e,r);return n(t),t})}function P(e){if(e.startsWith("[L")&&e.endsWith(";"))return"".concat(e.substring(2,e.length-1),"[]");if(e.startsWith("["))switch(e.substring(1,2)){case"B":return"byte[]";case"C":return"char[]";case"D":return"double[]";case"F":return"float[]";case"I":return"int[]";case"S":return"short[]";case"J":return"long[]";case"Z":return"boolean[]";case"V":return"void[]"}return e}function A(e){Object.defineProperties(e,{className:{configurable:!0,enumerable:!0,writable:!1,value:u(e.holder)},name:{configurable:!0,enumerable:!0,get:function(){var e=P(this.returnType.className),r=P(this.className)+"."+this.methodName,t="";if(this.argumentTypes.length>0){t=P(this.argumentTypes[0].className);for(var n=1;n<this.argumentTypes.length;n++)t=t+", "+P(this.argumentTypes[n].className)}return e+" "+r+"("+t+")"}},toString:{configurable:!0,value:function(){return this.name}}})}function N(e,r){if(void 0===r&&(r=null),null!=r){var t=new Proxy(e,{apply:function(e,r,t){var n=t[0],a=t[1];return e.apply(n,a)}}),n=isFunction(r)?r:g(r);e.implementation=function(){return n.call(t,this,Array.prototype.slice.call(arguments))},s.i("Hook method: "+e)}else e.implementation=null,s.i("Unhook method: "+e)}function T(e){for(var r in c.o.excludeHookPackages)if(0==e.indexOf(c.o.excludeHookPackages[r]))return!0;return!1}function L(e){try{var r=l(e);if(void 0!==r){for(var t=Java.cast(r,c.o.throwableClass),n=[],a=0,o=C(t);a<o.length;a++){var i=o[a];n.push("    at ".concat(i))}return n.length>0?"".concat(t,"\n").concat(n.join("\n")):"".concat(t)}}catch(e){s.d("getErrorStack error: ".concat(e))}}c.use=w,c.setWebviewDebuggingEnabled=S,c.bypassSslPinning=j,c.chooseClassLoader=E,c.traceClasses=x,c.runOnCreateContext=_,c.runOnCreateApplication=J,c.getErrorStack=L},{"./log":4}],4:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exception=t.event=t.e=t.w=t.i=t.d=t.setLevel=t.getLevel=t.ERROR=t.WARNING=t.INFO=t.DEBUG=void 0,t.DEBUG=1,t.INFO=2,t.WARNING=3,t.ERROR=4;var n=t.INFO,a=[],o=null;function i(){return n}function s(e){n=e,l("Set log level: "+e)}function l(e,r){n<=t.DEBUG&&p("log",{level:"debug",message:e},r)}function c(e,r){n<=t.INFO&&p("log",{level:"info",message:e},r)}function u(e,r){n<=t.WARNING&&p("log",{level:"warning",message:e},r)}function f(e,r){n<=t.ERROR&&p("log",{level:"error",message:e},r)}function d(e,r){p("msg",e,r)}function v(e,r){p("error",{description:e,stack:r})}function p(e,r,t){var n={};n[e]=r,null==t?(a.push(n),a.length>=50?g():null===o&&(o=setTimeout(g,50))):(g(),send({$events:[n]},t))}function g(){if(null!==o&&(clearTimeout(o),o=null),0!==a.length){var e=a;a=[],send({$events:e})}}t.getLevel=i,t.setLevel=s,t.d=l,t.i=c,t.w=u,t.e=f,t.event=d,t.exception=v},{}],5:[function(e,r,d){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.bypassSslPinning=d.convert2ObjcObject=d.getEventImpl=d.hookMethods=d.hookMethod=d.o=void 0;var v=e("./log"),p=e("./c"),t=function(){function e(){}return Object.defineProperty(e.prototype,"currentViewController",{get:function(){try{for(var e=ObjC.classes.UIApplication.sharedApplication().keyWindow().rootViewController();e;){var r=e.presentedViewController();if(r)e=r;else if(e.isKindOfClass_(ObjC.classes.UINavigationController))e=e.visibleViewController();else{if(!e.isKindOfClass_(ObjC.classes.UITabBarController))break;e=e.selectedViewController()}}return e}catch(e){return null}},enumerable:!1,configurable:!0}),e}();function n(e,r,t){void 0===t&&(t=null);var n=e;if("string"==typeof n&&(n=ObjC.classes[n]),void 0===n)throw Error('cannot find class "'+e+'"');var a=r;if("string"==typeof a&&(a=n[a]),void 0===a)throw Error('cannot find method "'+r+'" in class "'+n+'"');l(n,a),c(a,t)}function a(e,r,t){void 0===t&&(t=null);var n=e;if("string"==typeof n&&(n=ObjC.classes[n]),void 0===n)throw Error('cannot find class "'+e+'"');for(var a=n.$ownMethods.length,o=0;o<a;o++){var i=n.$ownMethods[o];if(i.indexOf(r)>=0){var s=n[i];l(n,s),c(s,t)}}}function o(e){var f={};if(f.method=parseBoolean(e.method,!0),f.thread=parseBoolean(e.thread,!1),f.stack=parseBoolean(e.stack,!1),f.symbol=parseBoolean(e.symbol,!0),f.backtracer=e.backtracer||"accurate",f.args=parseBoolean(e.args,!1),f.result=parseBoolean(e.result,f.args),f.error=parseBoolean(e.error,f.args),f.page=parseBoolean(e.page,!1),f.extras={},null!=e.extras)for(var r in e.extras)f.extras[r]=e.extras[r];return function(e,r){var t={};for(var n in f.extras)t[n]=f.extras[n];if(!1!==f.method&&(t.class_name=new ObjC.Object(e).$className,t.method_name=this.name,t.method_simple_name=this.methodName),!1!==f.thread&&(t.thread_id=Process.getCurrentThreadId(),t.thread_name=ObjC.classes.NSThread.currentThread().name().toString()),!1!==f.args){for(var a=[],o=0;o<r.length;o++)a.push(g(r[o]));t.args=pretty2Json(a),t.result=null,t.error=null}if(!1!==f.result&&(t.result=null),!1!==f.error&&(t.error=null),!1!==f.page){var i=d.o.currentViewController;t.page=i?i.$className:null}try{var s=this(e,r);return!1!==f.result&&(t.result=pretty2Json(g(s))),s}catch(e){throw!1!==f.error&&(t.error=pretty2Json(e)),e}finally{if(!1!==f.stack){var l=t.stack=[],c="accurate"===f.backtracer?Backtracer.ACCURATE:Backtracer.FUZZY,u=Thread.backtrace(this.context,c);for(o=0;o<u.length;o++)l.push(p.getDescFromAddress(u[o],!1!==f.symbol))}v.event(t)}}}function g(e){return e instanceof NativePointer||"object"==typeof e&&e.hasOwnProperty("handle")?new ObjC.Object(e):e}function i(){v.w("iOS Bypass ssl pinning");try{Module.ensureInitialized("libboringssl.dylib")}catch(e){v.d("libboringssl.dylib module not loaded. Trying to manually load it."),Module.load("libboringssl.dylib")}var r=new NativeCallback(function(e,r){return v.d("custom SSL context verify callback, returning SSL_VERIFY_NONE"),0},"int",["pointer","pointer"]);try{p.hookFunction("libboringssl.dylib","SSL_set_custom_verify","void",["pointer","int","pointer"],function(e){return v.d("SSL_set_custom_verify(), setting custom callback."),e[2]=r,this(e)})}catch(e){p.hookFunction("libboringssl.dylib","SSL_CTX_set_custom_verify","void",["pointer","int","pointer"],function(e){return v.d("SSL_CTX_set_custom_verify(), setting custom callback."),e[2]=r,this(e)})}p.hookFunction("libboringssl.dylib","SSL_get_psk_identity","pointer",["pointer"],function(e){return v.d('SSL_get_psk_identity(), returning "fakePSKidentity"'),Memory.allocUtf8String("fakePSKidentity")})}function l(e,r){var t=r.origImplementation||r.implementation,n=e.toString(),a=ObjC.selectorAsString(r.selector),o=ObjC.classes.NSThread.hasOwnProperty(a);Object.defineProperties(r,{className:{configurable:!0,enumerable:!0,get:function(){return n}},methodName:{configurable:!0,enumerable:!0,get:function(){return a}},name:{configurable:!0,enumerable:!0,get:function(){return(o?"+":"-")+"["+n+" "+a+"]"}},origImplementation:{configurable:!0,enumerable:!0,get:function(){return t}},toString:{value:function(){return this.name}}})}function c(a,e){if(void 0===e&&(e=null),null!=e){var i=isFunction(e)?e:o(e);a.implementation=ObjC.implement(a,function(){var n=this,e=Array.prototype.slice.call(arguments),r=e.shift(),o=e.shift(),t=new Proxy(a,{get:function(e,r,t){return r in n?n[r]:e[r]},apply:function(e,r,t){var n=t[0],a=t[1];return e.origImplementation.apply(null,[].concat(n,o,a))}});return i.call(t,r,e)}),v.i("Hook method: "+a)}else a.implementation=a.origImplementation,v.i("Unhook method: "+pretty2String(a))}d.o=new t,d.hookMethod=n,d.hookMethods=a,d.getEventImpl=o,d.convert2ObjcObject=g,d.bypassSslPinning=i},{"./c":2,"./log":4}]},{},[1]);