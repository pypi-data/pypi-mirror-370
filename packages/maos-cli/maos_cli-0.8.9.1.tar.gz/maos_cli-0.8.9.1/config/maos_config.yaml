# MAOS Configuration File
# This file configures the MAOS orchestration system

# Redis Configuration
redis:
  enabled: true
  url: redis://localhost:6379  # Can be overridden by REDIS_URL env var
  cluster_mode: false
  compression: true
  memory_pool_gb: 10
  channel_prefix: maos

# Persistence Configuration
persistence:
  backend: redis  # Options: redis, file, memory
  storage_directory: ./maos_storage  # Used if backend is 'file'

# State Manager Configuration
state_manager:
  auto_checkpoint_interval: 300  # 5 minutes
  max_snapshots: 50
  enable_state_validation: true

# Message Bus Configuration
message_bus:
  max_queue_size: 10000
  dead_letter_enabled: true
  message_ttl_seconds: 300
  delivery_retry_attempts: 3
  enable_persistence: true  # Persist messages to Redis

# Agent Manager Configuration
agent_manager:
  max_agents: 20
  agent_timeout: 600
  health_check_interval: 30
  enable_monitoring: true

# Task Planner Configuration
task_planner:
  max_parallel_tasks: 10
  task_queue_size: 1000
  enable_optimization: true

# Resource Allocator Configuration
resource_allocator:
  cpu_threshold: 0.8
  memory_threshold: 0.85
  enable_auto_scaling: true

# Context Manager Configuration
context_manager:
  checkpoint_dir: ./maos_checkpoints
  auto_save_interval: 300  # 5 minutes
  max_checkpoints_per_agent: 10
  strategy: hybrid  # Options: manual, automatic, milestone, hybrid

# Claude Integration Configuration
claude_integration:
  enabled: true
  cli_command: claude  # Command to invoke Claude CLI
  max_processes: 10
  process_timeout: 3600
  auto_restart: true
  health_check_interval: 60
  working_directory: ./claude_workspaces
  enable_context_preservation: true
  auto_save_interval: 300  # 5 minutes
  
# Swarm Coordinator Configuration
swarm_coordinator:
  enable_monitoring: true
  default_pattern: hub_and_spoke  # Options: hub_and_spoke, pipeline, parallel, map_reduce, hierarchical, consensus
  default_strategy: capability_based  # Options: round_robin, load_balanced, capability_based, priority_based
  min_agents_per_swarm: 2
  max_agents_per_swarm: 10
  consensus_threshold: 0.66  # 2/3 majority
  enable_redundancy: false
  redundancy_factor: 2

# Monitoring Configuration
monitoring:
  enabled: true
  prometheus_port: 9090
  grafana_port: 3000
  metrics_interval: 30

# Logging Configuration
logging:
  level: INFO
  format: json
  output_dir: ./logs
  max_file_size: 100MB
  max_files: 10
  enable_console: true

# Security Configuration
security:
  enable_auth: false
  enable_tls: false
  api_key_header: X-API-Key

# Performance Configuration
performance:
  worker_concurrency: 4
  async_pool_size: 100
  connection_pool_size: 50

# Development Configuration
development:
  debug_mode: false
  enable_profiling: false
  mock_agents: false